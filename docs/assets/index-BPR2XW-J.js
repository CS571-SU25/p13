(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function xc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yp={exports:{}},cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function lS(){if(Sx)return cu;Sx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:e,type:r,key:u,ref:a!==void 0?a:null,props:o}}return cu.Fragment=t,cu.jsx=n,cu.jsxs=n,cu}var Ax;function uS(){return Ax||(Ax=1,Yp.exports=lS()),Yp.exports}var te=uS(),Zp={exports:{}},fu={},Qp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function cS(){return Rx||(Rx=1,function(e){function t(N,$){var x=N.length;N.push($);e:for(;0<x;){var S=x-1>>>1,w=N[S];if(0<a(w,$))N[S]=$,N[x]=w,x=S;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var $=N[0],x=N.pop();if(x!==$){N[0]=x;e:for(var S=0,w=N.length,R=w>>>1;S<R;){var D=2*(S+1)-1,B=N[D],H=D+1,Q=N[H];if(0>a(B,x))H<w&&0>a(Q,B)?(N[S]=Q,N[H]=x,S=H):(N[S]=B,N[D]=x,S=D);else if(H<w&&0>a(Q,x))N[S]=Q,N[H]=x,S=H;else break e}}return $}function a(N,$){var x=N.sortIndex-$.sortIndex;return x!==0?x:N.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var f=[],d=[],p=1,v=null,m=3,y=!1,_=!1,M=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(N){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=N)r(d),$.sortIndex=$.expirationTime,t(f,$);else break;$=n(d)}}function I(N){if(M=!1,L(N),!_)if(n(f)!==null)_=!0,j||(j=!0,he());else{var $=n(d);$!==null&&z(I,$.startTime-N)}}var j=!1,q=-1,ne=5,W=-1;function oe(){return T?!0:!(e.unstable_now()-W<ne)}function ae(){if(T=!1,j){var N=e.unstable_now();W=N;var $=!0;try{e:{_=!1,M&&(M=!1,A(q),q=-1),y=!0;var x=m;try{t:{for(L(N),v=n(f);v!==null&&!(v.expirationTime>N&&oe());){var S=v.callback;if(typeof S=="function"){v.callback=null,m=v.priorityLevel;var w=S(v.expirationTime<=N);if(N=e.unstable_now(),typeof w=="function"){v.callback=w,L(N),$=!0;break t}v===n(f)&&r(f),L(N)}else r(f);v=n(f)}if(v!==null)$=!0;else{var R=n(d);R!==null&&z(I,R.startTime-N),$=!1}}break e}finally{v=null,m=x,y=!1}$=void 0}}finally{$?he():j=!1}}}var he;if(typeof C=="function")he=function(){C(ae)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=ae,he=function(){se.postMessage(null)}}else he=function(){E(ae,0)};function z(N,$){q=E(function(){N(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var x=m;m=$;try{return N()}finally{m=x}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var x=m;m=N;try{return $()}finally{m=x}},e.unstable_scheduleCallback=function(N,$,x){var S=e.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?S+x:S):x=S,N){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=x+w,N={id:p++,callback:$,priorityLevel:N,startTime:x,expirationTime:w,sortIndex:-1},x>S?(N.sortIndex=x,t(d,N),n(f)===null&&N===n(d)&&(M?(A(q),q=-1):M=!0,z(I,x-S))):(N.sortIndex=w,t(f,N),_||y||(_=!0,j||(j=!0,he()))),N},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(N){var $=m;return function(){var x=m;m=$;try{return N.apply(this,arguments)}finally{m=x}}}}(Kp)),Kp}var Cx;function fS(){return Cx||(Cx=1,Qp.exports=cS()),Qp.exports}var Jp={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function hS(){if(Lx)return bt;Lx=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function m(w){return w===null||typeof w!="object"?null:(w=v&&w[v]||w["@@iterator"],typeof w=="function"?w:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function T(w,R,D){this.props=w,this.context=R,this.refs=M,this.updater=D||y}T.prototype.isReactComponent={},T.prototype.setState=function(w,R){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,R,"setState")},T.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function E(){}E.prototype=T.prototype;function A(w,R,D){this.props=w,this.context=R,this.refs=M,this.updater=D||y}var C=A.prototype=new E;C.constructor=A,_(C,T.prototype),C.isPureReactComponent=!0;var L=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function q(w,R,D,B,H,Q){return D=Q.ref,{$$typeof:e,type:w,key:R,ref:D!==void 0?D:null,props:Q}}function ne(w,R){return q(w.type,R,void 0,void 0,void 0,w.props)}function W(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function oe(w){var R={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(D){return R[D]})}var ae=/\/+/g;function he(w,R){return typeof w=="object"&&w!==null&&w.key!=null?oe(""+w.key):R.toString(36)}function fe(){}function se(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(fe,fe):(w.status="pending",w.then(function(R){w.status==="pending"&&(w.status="fulfilled",w.value=R)},function(R){w.status==="pending"&&(w.status="rejected",w.reason=R)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function z(w,R,D,B,H){var Q=typeof w;(Q==="undefined"||Q==="boolean")&&(w=null);var P=!1;if(w===null)P=!0;else switch(Q){case"bigint":case"string":case"number":P=!0;break;case"object":switch(w.$$typeof){case e:case t:P=!0;break;case p:return P=w._init,z(P(w._payload),R,D,B,H)}}if(P)return H=H(w),P=B===""?"."+he(w,0):B,L(H)?(D="",P!=null&&(D=P.replace(ae,"$&/")+"/"),z(H,R,D,"",function(Te){return Te})):H!=null&&(W(H)&&(H=ne(H,D+(H.key==null||w&&w.key===H.key?"":(""+H.key).replace(ae,"$&/")+"/")+P)),R.push(H)),1;P=0;var X=B===""?".":B+":";if(L(w))for(var le=0;le<w.length;le++)B=w[le],Q=X+he(B,le),P+=z(B,R,D,Q,H);else if(le=m(w),typeof le=="function")for(w=le.call(w),le=0;!(B=w.next()).done;)B=B.value,Q=X+he(B,le++),P+=z(B,R,D,Q,H);else if(Q==="object"){if(typeof w.then=="function")return z(se(w),R,D,B,H);throw R=String(w),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return P}function N(w,R,D){if(w==null)return w;var B=[],H=0;return z(w,B,"","",function(Q){return R.call(D,Q,H++)}),B}function $(w){if(w._status===-1){var R=w._result;R=R(),R.then(function(D){(w._status===0||w._status===-1)&&(w._status=1,w._result=D)},function(D){(w._status===0||w._status===-1)&&(w._status=2,w._result=D)}),w._status===-1&&(w._status=0,w._result=R)}if(w._status===1)return w._result.default;throw w._result}var x=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function S(){}return bt.Children={map:N,forEach:function(w,R,D){N(w,function(){R.apply(this,arguments)},D)},count:function(w){var R=0;return N(w,function(){R++}),R},toArray:function(w){return N(w,function(R){return R})||[]},only:function(w){if(!W(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},bt.Component=T,bt.Fragment=n,bt.Profiler=a,bt.PureComponent=A,bt.StrictMode=r,bt.Suspense=f,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,bt.__COMPILER_RUNTIME={__proto__:null,c:function(w){return I.H.useMemoCache(w)}},bt.cache=function(w){return function(){return w.apply(null,arguments)}},bt.cloneElement=function(w,R,D){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var B=_({},w.props),H=w.key,Q=void 0;if(R!=null)for(P in R.ref!==void 0&&(Q=void 0),R.key!==void 0&&(H=""+R.key),R)!j.call(R,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&R.ref===void 0||(B[P]=R[P]);var P=arguments.length-2;if(P===1)B.children=D;else if(1<P){for(var X=Array(P),le=0;le<P;le++)X[le]=arguments[le+2];B.children=X}return q(w.type,H,void 0,void 0,Q,B)},bt.createContext=function(w){return w={$$typeof:u,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:o,_context:w},w},bt.createElement=function(w,R,D){var B,H={},Q=null;if(R!=null)for(B in R.key!==void 0&&(Q=""+R.key),R)j.call(R,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(H[B]=R[B]);var P=arguments.length-2;if(P===1)H.children=D;else if(1<P){for(var X=Array(P),le=0;le<P;le++)X[le]=arguments[le+2];H.children=X}if(w&&w.defaultProps)for(B in P=w.defaultProps,P)H[B]===void 0&&(H[B]=P[B]);return q(w,Q,void 0,void 0,null,H)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(w){return{$$typeof:c,render:w}},bt.isValidElement=W,bt.lazy=function(w){return{$$typeof:p,_payload:{_status:-1,_result:w},_init:$}},bt.memo=function(w,R){return{$$typeof:d,type:w,compare:R===void 0?null:R}},bt.startTransition=function(w){var R=I.T,D={};I.T=D;try{var B=w(),H=I.S;H!==null&&H(D,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(S,x)}catch(Q){x(Q)}finally{I.T=R}},bt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},bt.use=function(w){return I.H.use(w)},bt.useActionState=function(w,R,D){return I.H.useActionState(w,R,D)},bt.useCallback=function(w,R){return I.H.useCallback(w,R)},bt.useContext=function(w){return I.H.useContext(w)},bt.useDebugValue=function(){},bt.useDeferredValue=function(w,R){return I.H.useDeferredValue(w,R)},bt.useEffect=function(w,R,D){var B=I.H;if(typeof D=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(w,R)},bt.useId=function(){return I.H.useId()},bt.useImperativeHandle=function(w,R,D){return I.H.useImperativeHandle(w,R,D)},bt.useInsertionEffect=function(w,R){return I.H.useInsertionEffect(w,R)},bt.useLayoutEffect=function(w,R){return I.H.useLayoutEffect(w,R)},bt.useMemo=function(w,R){return I.H.useMemo(w,R)},bt.useOptimistic=function(w,R){return I.H.useOptimistic(w,R)},bt.useReducer=function(w,R,D){return I.H.useReducer(w,R,D)},bt.useRef=function(w){return I.H.useRef(w)},bt.useState=function(w){return I.H.useState(w)},bt.useSyncExternalStore=function(w,R,D){return I.H.useSyncExternalStore(w,R,D)},bt.useTransition=function(){return I.H.useTransition()},bt.version="19.1.0",bt}var Ox;function eg(){return Ox||(Ox=1,Jp.exports=hS()),Jp.exports}var $p={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function dS(){if(Nx)return jn;Nx=1;var e=eg();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:d,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,p)},jn.flushSync=function(f){var d=u.T,p=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=d,r.p=p,r.d.f()}},jn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},jn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},jn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:m,fetchPriority:y}):p==="script"&&r.d.X(f,{crossOrigin:v,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},jn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},jn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin);r.d.L(f,p,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},jn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},jn.requestFormReset=function(f){r.d.r(f)},jn.unstable_batchedUpdates=function(f,d){return f(d)},jn.useFormState=function(f,d,p){return u.H.useFormState(f,d,p)},jn.useFormStatus=function(){return u.H.useHostTransitionStatus()},jn.version="19.1.0",jn}var Dx;function vw(){if(Dx)return $p.exports;Dx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$p.exports=dS(),$p.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function pS(){if(Ux)return fu;Ux=1;var e=fS(),t=eg(),n=vw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(r(188));return s!==i?null:i}for(var l=i,h=s;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return c(g),i;if(b===h)return c(g),s;b=b.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=b;else{for(var O=!1,k=g.child;k;){if(k===l){O=!0,l=g,h=b;break}if(k===h){O=!0,h=g,l=b;break}k=k.sibling}if(!O){for(k=b.child;k;){if(k===l){O=!0,l=b,h=g;break}if(k===h){O=!0,h=b,l=g;break}k=k.sibling}if(!O)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:s}function d(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=d(i),s!==null)return s;i=i.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=ae&&i[ae]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Symbol.for("react.client.reference");function se(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===fe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case T:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case y:return"Portal";case C:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case L:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return s=i.displayName||null,s!==null?s:se(i.type)||"Memo";case ne:s=i._payload,i=i._init;try{return se(i(s))}catch{}}return null}var z=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x={pending:!1,data:null,method:null,action:null},S=[],w=-1;function R(i){return{current:i}}function D(i){0>w||(i.current=S[w],S[w]=null,w--)}function B(i,s){w++,S[w]=i.current,i.current=s}var H=R(null),Q=R(null),P=R(null),X=R(null);function le(i,s){switch(B(P,s),B(Q,i),B(H,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?ex(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=ex(s),i=tx(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}D(H),B(H,i)}function Te(){D(H),D(Q),D(P)}function xe(i){i.memoizedState!==null&&B(X,i);var s=H.current,l=tx(s,i.type);s!==l&&(B(Q,i),B(H,l))}function Ae(i){Q.current===i&&(D(H),D(Q)),X.current===i&&(D(X),au._currentValue=x)}var Oe=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,ht=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,dt=e.unstable_requestPaint,_t=e.unstable_now,mt=e.unstable_getCurrentPriorityLevel,Ke=e.unstable_ImmediatePriority,Kn=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,hn=e.unstable_LowPriority,vt=e.unstable_IdlePriority,pe=e.log,Ne=e.unstable_setDisableYieldValue,Pe=null,Fe=null;function Be(i){if(typeof pe=="function"&&Ne(i),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Pe,i)}catch{}}var $e=Math.clz32?Math.clz32:gn,Dt=Math.log,Lt=Math.LN2;function gn(i){return i>>>=0,i===0?32:31-(Dt(i)/Lt|0)|0}var Rt=256,wn=4194304;function rn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Tr(i,s,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,b=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var k=h&134217727;return k!==0?(h=k&~b,h!==0?g=rn(h):(O&=k,O!==0?g=rn(O):l||(l=k&~i,l!==0&&(g=rn(l))))):(k=h&~b,k!==0?g=rn(k):O!==0?g=rn(O):l||(l=h&~i,l!==0&&(g=rn(l)))),g===0?0:s!==0&&s!==g&&(s&b)===0&&(b=g&-g,l=s&-s,b>=l||b===32&&(l&4194048)!==0)?s:g}function Jn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Yi(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(){var i=Rt;return Rt<<=1,(Rt&4194048)===0&&(Rt=256),i}function vi(){var i=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),i}function yn(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function $n(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ar(i,s,l,h,g,b){var O=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var k=i.entanglements,ie=i.expirationTimes,me=i.hiddenUpdates;for(l=O&~l;0<l;){var _e=31-$e(l),Me=1<<_e;k[_e]=0,ie[_e]=-1;var ge=me[_e];if(ge!==null)for(me[_e]=null,_e=0;_e<ge.length;_e++){var ye=ge[_e];ye!==null&&(ye.lane&=-536870913)}l&=~Me}h!==0&&La(i,h,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(O&~s))}function La(i,s,l){i.pendingLanes|=s,i.suspendedLanes&=~s;var h=31-$e(s);i.entangledLanes|=s,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Rr(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var h=31-$e(l),g=1<<h;g&s|i[h]&s&&(i[h]|=s),l&=~g}}function Oa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Na(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Bs(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:xx(i.type))}function Ps(i,s){var l=$.p;try{return $.p=i,s()}finally{$.p=l}}var Cr=Math.random().toString(36).slice(2),dn="__reactFiber$"+Cr,Un="__reactProps$"+Cr,Gr="__reactContainer$"+Cr,Da="__reactEvents$"+Cr,pl="__reactListeners$"+Cr,vl="__reactHandles$"+Cr,zs="__reactResources$"+Cr,mi="__reactMarker$"+Cr;function Sn(i){delete i[dn],delete i[Un],delete i[Da],delete i[pl],delete i[vl]}function V(i){var s=i[dn];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Gr]||l[dn]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=ax(i);i!==null;){if(l=i[dn])return l;i=ax(i)}return s}i=l,l=i.parentNode}return null}function re(i){if(i=i[dn]||i[Gr]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ue(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Se(i){var s=i[zs];return s||(s=i[zs]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Re(i){i[mi]=!0}var He=new Set,yt={};function Ve(i,s){it(i,s),it(i+"Capture",s)}function it(i,s){for(yt[i]=s,i=0;i<s.length;i++)He.add(s[i])}var wt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},je={};function ln(i){return Oe.call(je,i)?!0:Oe.call(Xe,i)?!1:wt.test(i)?je[i]=!0:(Xe[i]=!0,!1)}function Ht(i,s,l){if(ln(s))if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+l)}}function Vt(i,s,l){if(l===null)i.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+l)}}function et(i,s,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(s,l,""+h)}}var bn,fr;function Hn(i){if(bn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);bn=s&&s[1]||"",fr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+i+fr}var Bn=!1;function ri(i,s){if(!i||Bn)return"";Bn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(ye){var ge=ye}Reflect.construct(i,[],Me)}else{try{Me.call()}catch(ye){ge=ye}i.call(Me.prototype)}}else{try{throw Error()}catch(ye){ge=ye}(Me=i())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(ye){if(ye&&ge&&typeof ye.stack=="string")return[ye.stack,ge.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),O=b[0],k=b[1];if(O&&k){var ie=O.split(`
`),me=k.split(`
`);for(g=h=0;h<ie.length&&!ie[h].includes("DetermineComponentFrameRoot");)h++;for(;g<me.length&&!me[g].includes("DetermineComponentFrameRoot");)g++;if(h===ie.length||g===me.length)for(h=ie.length-1,g=me.length-1;1<=h&&0<=g&&ie[h]!==me[g];)g--;for(;1<=h&&0<=g;h--,g--)if(ie[h]!==me[g]){if(h!==1||g!==1)do if(h--,g--,0>g||ie[h]!==me[g]){var _e=`
`+ie[h].replace(" at new "," at ");return i.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",i.displayName)),_e}while(1<=h&&0<=g);break}}}finally{Bn=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Hn(l):""}function ml(i){switch(i.tag){case 26:case 27:case 5:return Hn(i.type);case 16:return Hn("Lazy");case 13:return Hn("Suspense");case 19:return Hn("SuspenseList");case 0:case 15:return ri(i.type,!1);case 11:return ri(i.type.render,!1);case 1:return ri(i.type,!0);case 31:return Hn("Activity");default:return""}}function tt(i){try{var s="";do s+=ml(i),i=i.return;while(i);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function An(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function F(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function G(i){var s=F(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),h=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,b=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(O){h=""+O,b.call(this,O)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(O){h=""+O},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Y(i){i._valueTracker||(i._valueTracker=G(i))}function Z(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return i&&(h=F(i)?i.checked?"true":"false":i.value),i=h,i!==l?(s.setValue(i),!0):!1}function K(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var be=/[\n"\\]/g;function Ee(i){return i.replace(be,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Le(i,s,l,h,g,b,O,k){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),s!=null?O==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+An(s)):i.value!==""+An(s)&&(i.value=""+An(s)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),s!=null?ft(i,O,An(s)):l!=null?ft(i,O,An(l)):h!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+An(k):i.removeAttribute("name")}function Je(i,s,l,h,g,b,O,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),s!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;l=l!=null?""+An(l):"",s=s!=null?""+An(s):l,k||s===i.value||(i.value=s),i.defaultValue=s}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=k?i.checked:!!h,i.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O)}function ft(i,s,l){s==="number"&&K(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ze(i,s,l,h){if(i=i.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=s.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+An(l),s=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function at(i,s,l){if(s!=null&&(s=""+An(s),s!==i.value&&(i.value=s),l==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=l!=null?""+An(l):""}function Tt(i,s,l,h){if(s==null){if(h!=null){if(l!=null)throw Error(r(92));if(z(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),s=l}l=An(s),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function ct(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var Ft=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function st(i,s,l){var h=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":h?i.setProperty(s,l):typeof l!="number"||l===0||Ft.has(s)?s==="float"?i.cssFloat=l:i[s]=(""+l).trim():i[s]=l+"px"}function Ct(i,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in s)h=s[g],s.hasOwnProperty(g)&&l[g]!==h&&st(i,g,h)}else for(var b in s)s.hasOwnProperty(b)&&st(i,b,s[b])}function en(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ut=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jt(i){return Ut.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var tn=null;function nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Rn=null,Zi=null;function Oc(i){var s=re(i);if(s&&(i=s.stateNode)){var l=i[Un]||null;e:switch(i=s.stateNode,s.type){case"input":if(Le(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ee(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==i&&h.form===i.form){var g=h[Un]||null;if(!g)throw Error(r(90));Le(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<l.length;s++)h=l[s],h.form===i.form&&Z(h)}break e;case"textarea":at(i,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ze(i,!!l.multiple,s,!1)}}}var gl=!1;function ry(i,s,l){if(gl)return i(s,l);gl=!0;try{var h=i(s);return h}finally{if(gl=!1,(Rn!==null||Zi!==null)&&(gf(),Rn&&(s=Rn,i=Zi,Zi=Rn=null,Oc(s),i)))for(s=0;s<i.length;s++)Oc(i[s])}}function yl(i,s){var l=i.stateNode;if(l===null)return null;var h=l[Un]||null;if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kh=!1;if(gi)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Kh=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Kh=!1}var Qi=null,Jh=null,Nc=null;function iy(){if(Nc)return Nc;var i,s=Jh,l=s.length,h,g="value"in Qi?Qi.value:Qi.textContent,b=g.length;for(i=0;i<l&&s[i]===g[i];i++);var O=l-i;for(h=1;h<=O&&s[l-h]===g[b-h];h++);return Nc=g.slice(i,1<h?1-h:void 0)}function Dc(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Uc(){return!0}function ay(){return!1}function er(i){function s(l,h,g,b,O){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Uc:ay,this.isPropagationStopped=ay,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),s}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=er(Ua),xl=p({},Ua,{view:0,detail:0}),lM=er(xl),$h,ed,_l,Pc=p({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_l&&(_l&&i.type==="mousemove"?($h=i.screenX-_l.screenX,ed=i.screenY-_l.screenY):ed=$h=0,_l=i),$h)},movementY:function(i){return"movementY"in i?i.movementY:ed}}),sy=er(Pc),uM=p({},Pc,{dataTransfer:0}),cM=er(uM),fM=p({},xl,{relatedTarget:0}),td=er(fM),hM=p({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),dM=er(hM),pM=p({},Ua,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),vM=er(pM),mM=p({},Ua,{data:0}),oy=er(mM),gM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xM(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=bM[i])?!!s[i]:!1}function nd(){return xM}var _M=p({},xl,{key:function(i){if(i.key){var s=gM[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Dc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(i){return i.type==="keypress"?Dc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wM=er(_M),EM=p({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ly=er(EM),MM=p({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),TM=er(MM),SM=p({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),AM=er(SM),RM=p({},Pc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),CM=er(RM),LM=p({},Ua,{newState:0,oldState:0}),OM=er(LM),NM=[9,13,27,32],rd=gi&&"CompositionEvent"in window,wl=null;gi&&"documentMode"in document&&(wl=document.documentMode);var DM=gi&&"TextEvent"in window&&!wl,uy=gi&&(!rd||wl&&8<wl&&11>=wl),cy=" ",fy=!1;function hy(i,s){switch(i){case"keyup":return NM.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fs=!1;function UM(i,s){switch(i){case"compositionend":return dy(s);case"keypress":return s.which!==32?null:(fy=!0,cy);case"textInput":return i=s.data,i===cy&&fy?null:i;default:return null}}function BM(i,s){if(Fs)return i==="compositionend"||!rd&&hy(i,s)?(i=iy(),Nc=Jh=Qi=null,Fs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return uy&&s.locale!=="ko"?null:s.data;default:return null}}var PM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!PM[i.type]:s==="textarea"}function vy(i,s,l,h){Rn?Zi?Zi.push(h):Zi=[h]:Rn=h,s=Ef(s,"onChange"),0<s.length&&(l=new Bc("onChange","change",null,l,h),i.push({event:l,listeners:s}))}var El=null,Ml=null;function zM(i){Zb(i,0)}function zc(i){var s=ue(i);if(Z(s))return i}function my(i,s){if(i==="change")return s}var gy=!1;if(gi){var id;if(gi){var ad="oninput"in document;if(!ad){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),ad=typeof yy.oninput=="function"}id=ad}else id=!1;gy=id&&(!document.documentMode||9<document.documentMode)}function by(){El&&(El.detachEvent("onpropertychange",xy),Ml=El=null)}function xy(i){if(i.propertyName==="value"&&zc(Ml)){var s=[];vy(s,Ml,i,nn(i)),ry(zM,s)}}function FM(i,s,l){i==="focusin"?(by(),El=s,Ml=l,El.attachEvent("onpropertychange",xy)):i==="focusout"&&by()}function IM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zc(Ml)}function GM(i,s){if(i==="click")return zc(s)}function kM(i,s){if(i==="input"||i==="change")return zc(s)}function HM(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var hr=typeof Object.is=="function"?Object.is:HM;function Tl(i,s){if(hr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Oe.call(s,g)||!hr(i[g],s[g]))return!1}return!0}function _y(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wy(i,s){var l=_y(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=s&&h>=s)return{node:l,offset:s-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_y(l)}}function Ey(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Ey(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function My(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=K(i.document);s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=K(i.document)}return s}function sd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var VM=gi&&"documentMode"in document&&11>=document.documentMode,Is=null,od=null,Sl=null,ld=!1;function Ty(i,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ld||Is==null||Is!==K(h)||(h=Is,"selectionStart"in h&&sd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Sl&&Tl(Sl,h)||(Sl=h,h=Ef(od,"onSelect"),0<h.length&&(s=new Bc("onSelect","select",null,s,l),i.push({event:s,listeners:h}),s.target=Is)))}function Ba(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Gs={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},ud={},Sy={};gi&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Pa(i){if(ud[i])return ud[i];if(!Gs[i])return i;var s=Gs[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Sy)return ud[i]=s[l];return i}var Ay=Pa("animationend"),Ry=Pa("animationiteration"),Cy=Pa("animationstart"),jM=Pa("transitionrun"),WM=Pa("transitionstart"),qM=Pa("transitioncancel"),Ly=Pa("transitionend"),Oy=new Map,cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cd.push("scrollEnd");function kr(i,s){Oy.set(i,s),Ve(s,[i])}var Ny=new WeakMap;function Lr(i,s){if(typeof i=="object"&&i!==null){var l=Ny.get(i);return l!==void 0?l:(s={value:i,source:s,stack:tt(s)},Ny.set(i,s),s)}return{value:i,source:s,stack:tt(s)}}var Or=[],ks=0,fd=0;function Fc(){for(var i=ks,s=fd=ks=0;s<i;){var l=Or[s];Or[s++]=null;var h=Or[s];Or[s++]=null;var g=Or[s];Or[s++]=null;var b=Or[s];if(Or[s++]=null,h!==null&&g!==null){var O=h.pending;O===null?g.next=g:(g.next=O.next,O.next=g),h.pending=g}b!==0&&Dy(l,g,b)}}function Ic(i,s,l,h){Or[ks++]=i,Or[ks++]=s,Or[ks++]=l,Or[ks++]=h,fd|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function hd(i,s,l,h){return Ic(i,s,l,h),Gc(i)}function Hs(i,s){return Ic(i,null,null,s),Gc(i)}function Dy(i,s,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,b=i.return;b!==null;)b.childLanes|=l,h=b.alternate,h!==null&&(h.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&s!==null&&(g=31-$e(l),i=b.hiddenUpdates,h=i[g],h===null?i[g]=[s]:h.push(s),s.lane=l|536870912),b):null}function Gc(i){if(50<Kl)throw Kl=0,yp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Vs={};function XM(i,s,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(i,s,l,h){return new XM(i,s,l,h)}function dd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yi(i,s){var l=i.alternate;return l===null?(l=dr(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Uy(i,s){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,s=l.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function kc(i,s,l,h,g,b){var O=0;if(h=i,typeof i=="function")dd(i)&&(O=1);else if(typeof i=="string")O=ZT(i,l,H.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case W:return i=dr(31,l,s,g),i.elementType=W,i.lanes=b,i;case _:return za(l.children,g,b,s);case M:O=8,g|=24;break;case T:return i=dr(12,l,s,g|2),i.elementType=T,i.lanes=b,i;case I:return i=dr(13,l,s,g),i.elementType=I,i.lanes=b,i;case j:return i=dr(19,l,s,g),i.elementType=j,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case C:O=10;break e;case A:O=9;break e;case L:O=11;break e;case q:O=14;break e;case ne:O=16,h=null;break e}O=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return s=dr(O,l,s,g),s.elementType=i,s.type=h,s.lanes=b,s}function za(i,s,l,h){return i=dr(7,i,h,s),i.lanes=l,i}function pd(i,s,l){return i=dr(6,i,null,s),i.lanes=l,i}function vd(i,s,l){return s=dr(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var js=[],Ws=0,Hc=null,Vc=0,Nr=[],Dr=0,Fa=null,bi=1,xi="";function Ia(i,s){js[Ws++]=Vc,js[Ws++]=Hc,Hc=i,Vc=s}function By(i,s,l){Nr[Dr++]=bi,Nr[Dr++]=xi,Nr[Dr++]=Fa,Fa=i;var h=bi;i=xi;var g=32-$e(h)-1;h&=~(1<<g),l+=1;var b=32-$e(s)+g;if(30<b){var O=g-g%5;b=(h&(1<<O)-1).toString(32),h>>=O,g-=O,bi=1<<32-$e(s)+g|l<<g|h,xi=b+i}else bi=1<<b|l<<g|h,xi=i}function md(i){i.return!==null&&(Ia(i,1),By(i,1,0))}function gd(i){for(;i===Hc;)Hc=js[--Ws],js[Ws]=null,Vc=js[--Ws],js[Ws]=null;for(;i===Fa;)Fa=Nr[--Dr],Nr[Dr]=null,xi=Nr[--Dr],Nr[Dr]=null,bi=Nr[--Dr],Nr[Dr]=null}var Yn=null,pn=null,zt=!1,Ga=null,ii=!1,yd=Error(r(519));function ka(i){var s=Error(r(418,""));throw Cl(Lr(s,i)),yd}function Py(i){var s=i.stateNode,l=i.type,h=i.memoizedProps;switch(s[dn]=i,s[Un]=h,l){case"dialog":At("cancel",s),At("close",s);break;case"iframe":case"object":case"embed":At("load",s);break;case"video":case"audio":for(l=0;l<$l.length;l++)At($l[l],s);break;case"source":At("error",s);break;case"img":case"image":case"link":At("error",s),At("load",s);break;case"details":At("toggle",s);break;case"input":At("invalid",s),Je(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Y(s);break;case"select":At("invalid",s);break;case"textarea":At("invalid",s),Tt(s,h.value,h.defaultValue,h.children),Y(s)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||h.suppressHydrationWarning===!0||$b(s.textContent,l)?(h.popover!=null&&(At("beforetoggle",s),At("toggle",s)),h.onScroll!=null&&At("scroll",s),h.onScrollEnd!=null&&At("scrollend",s),h.onClick!=null&&(s.onclick=Mf),s=!0):s=!1,s||ka(i)}function zy(i){for(Yn=i.return;Yn;)switch(Yn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Yn=Yn.return}}function Al(i){if(i!==Yn)return!1;if(!zt)return zy(i),zt=!0,!1;var s=i.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Up(i.type,i.memoizedProps)),l=!l),l&&pn&&ka(i),zy(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(s===0){pn=Vr(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;i=i.nextSibling}pn=null}}else s===27?(s=pn,ha(i.type)?(i=Fp,Fp=null,pn=i):pn=s):pn=Yn?Vr(i.stateNode.nextSibling):null;return!0}function Rl(){pn=Yn=null,zt=!1}function Fy(){var i=Ga;return i!==null&&(rr===null?rr=i:rr.push.apply(rr,i),Ga=null),i}function Cl(i){Ga===null?Ga=[i]:Ga.push(i)}var bd=R(null),Ha=null,_i=null;function Ki(i,s,l){B(bd,s._currentValue),s._currentValue=l}function wi(i){i._currentValue=bd.current,D(bd)}function xd(i,s,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),i===l)break;i=i.return}}function _d(i,s,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var O=g.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=g;for(var ie=0;ie<s.length;ie++)if(k.context===s[ie]){b.lanes|=l,k=b.alternate,k!==null&&(k.lanes|=l),xd(b.return,l,i),h||(O=null);break e}b=k.next}}else if(g.tag===18){if(O=g.return,O===null)throw Error(r(341));O.lanes|=l,b=O.alternate,b!==null&&(b.lanes|=l),xd(O,l,i),O=null}else O=g.child;if(O!==null)O.return=g;else for(O=g;O!==null;){if(O===i){O=null;break}if(g=O.sibling,g!==null){g.return=O.return,O=g;break}O=O.return}g=O}}function Ll(i,s,l,h){i=null;for(var g=s,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var O=g.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var k=g.type;hr(g.pendingProps.value,O.value)||(i!==null?i.push(k):i=[k])}}else if(g===X.current){if(O=g.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(au):i=[au])}g=g.return}i!==null&&_d(s,i,l,h),s.flags|=262144}function jc(i){for(i=i.firstContext;i!==null;){if(!hr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Va(i){Ha=i,_i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Vn(i){return Iy(Ha,i)}function Wc(i,s){return Ha===null&&Va(i),Iy(i,s)}function Iy(i,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},_i===null){if(i===null)throw Error(r(308));_i=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else _i=_i.next=s;return l}var YM=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){s.aborted=!0,i.forEach(function(l){return l()})}},ZM=e.unstable_scheduleCallback,QM=e.unstable_NormalPriority,Cn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wd(){return{controller:new YM,data:new Map,refCount:0}}function Ol(i){i.refCount--,i.refCount===0&&ZM(QM,function(){i.controller.abort()})}var Nl=null,Ed=0,qs=0,Xs=null;function KM(i,s){if(Nl===null){var l=Nl=[];Ed=0,qs=Tp(),Xs={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Ed++,s.then(Gy,Gy),s}function Gy(){if(--Ed===0&&Nl!==null){Xs!==null&&(Xs.status="fulfilled");var i=Nl;Nl=null,qs=0,Xs=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function JM(i,s){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=s;for(var g=0;g<l.length;g++)(0,l[g])(s)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var ky=N.S;N.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&KM(i,s),ky!==null&&ky(i,s)};var ja=R(null);function Md(){var i=ja.current;return i!==null?i:Jt.pooledCache}function qc(i,s){s===null?B(ja,ja.current):B(ja,s.pool)}function Hy(){var i=Md();return i===null?null:{parent:Cn._currentValue,pool:i}}var Dl=Error(r(460)),Vy=Error(r(474)),Xc=Error(r(542)),Td={then:function(){}};function jy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yc(){}function Wy(i,s,l){switch(l=i[l],l===void 0?i.push(s):l!==s&&(s.then(Yc,Yc),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Xy(i),i;default:if(typeof s.status=="string")s.then(Yc,Yc);else{if(i=Jt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(h){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=h}},function(h){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Xy(i),i}throw Ul=s,Dl}}var Ul=null;function qy(){if(Ul===null)throw Error(r(459));var i=Ul;return Ul=null,i}function Xy(i){if(i===Dl||i===Xc)throw Error(r(483))}var Ji=!1;function Sd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $i(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ea(i,s,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Gt&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,s=Gc(i),Dy(i,null,l),s}return Ic(i,h,s,l),Gc(i)}function Bl(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,Rr(i,l)}}function Rd(i,s){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var O={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=O:b=b.next=O,l=l.next}while(l!==null);b===null?g=b=s:b=b.next=s}else g=b=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}var Cd=!1;function Pl(){if(Cd){var i=Xs;if(i!==null)throw i}}function zl(i,s,l,h){Cd=!1;var g=i.updateQueue;Ji=!1;var b=g.firstBaseUpdate,O=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var ie=k,me=ie.next;ie.next=null,O===null?b=me:O.next=me,O=ie;var _e=i.alternate;_e!==null&&(_e=_e.updateQueue,k=_e.lastBaseUpdate,k!==O&&(k===null?_e.firstBaseUpdate=me:k.next=me,_e.lastBaseUpdate=ie))}if(b!==null){var Me=g.baseState;O=0,_e=me=ie=null,k=b;do{var ge=k.lane&-536870913,ye=ge!==k.lane;if(ye?(Ot&ge)===ge:(h&ge)===ge){ge!==0&&ge===qs&&(Cd=!0),_e!==null&&(_e=_e.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var lt=i,nt=k;ge=s;var Xt=l;switch(nt.tag){case 1:if(lt=nt.payload,typeof lt=="function"){Me=lt.call(Xt,Me,ge);break e}Me=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=nt.payload,ge=typeof lt=="function"?lt.call(Xt,Me,ge):lt,ge==null)break e;Me=p({},Me,ge);break e;case 2:Ji=!0}}ge=k.callback,ge!==null&&(i.flags|=64,ye&&(i.flags|=8192),ye=g.callbacks,ye===null?g.callbacks=[ge]:ye.push(ge))}else ye={lane:ge,tag:k.tag,payload:k.payload,callback:k.callback,next:null},_e===null?(me=_e=ye,ie=Me):_e=_e.next=ye,O|=ge;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ye=k,k=ye.next,ye.next=null,g.lastBaseUpdate=ye,g.shared.pending=null}}while(!0);_e===null&&(ie=Me),g.baseState=ie,g.firstBaseUpdate=me,g.lastBaseUpdate=_e,b===null&&(g.shared.lanes=0),la|=O,i.lanes=O,i.memoizedState=Me}}function Yy(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Zy(i,s){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Yy(l[i],s)}var Ys=R(null),Zc=R(0);function Qy(i,s){i=Ci,B(Zc,i),B(Ys,s),Ci=i|s.baseLanes}function Ld(){B(Zc,Ci),B(Ys,Ys.current)}function Od(){Ci=Zc.current,D(Ys),D(Zc)}var ta=0,Et=null,Wt=null,En=null,Qc=!1,Zs=!1,Wa=!1,Kc=0,Fl=0,Qs=null,$M=0;function xn(){throw Error(r(321))}function Nd(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!hr(i[l],s[l]))return!1;return!0}function Dd(i,s,l,h,g,b){return ta=b,Et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=i===null||i.memoizedState===null?D0:U0,Wa=!1,b=l(h,g),Wa=!1,Zs&&(b=Jy(s,l,h,g)),Ky(i),b}function Ky(i){N.H=rf;var s=Wt!==null&&Wt.next!==null;if(ta=0,En=Wt=Et=null,Qc=!1,Fl=0,Qs=null,s)throw Error(r(300));i===null||Pn||(i=i.dependencies,i!==null&&jc(i)&&(Pn=!0))}function Jy(i,s,l,h){Et=i;var g=0;do{if(Zs&&(Qs=null),Fl=0,Zs=!1,25<=g)throw Error(r(301));if(g+=1,En=Wt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}N.H=sT,b=s(l,h)}while(Zs);return b}function eT(){var i=N.H,s=i.useState()[0];return s=typeof s.then=="function"?Il(s):s,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(Et.flags|=1024),s}function Ud(){var i=Kc!==0;return Kc=0,i}function Bd(i,s,l){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~l}function Pd(i){if(Qc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Qc=!1}ta=0,En=Wt=Et=null,Zs=!1,Fl=Kc=0,Qs=null}function tr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Et.memoizedState=En=i:En=En.next=i,En}function Mn(){if(Wt===null){var i=Et.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var s=En===null?Et.memoizedState:En.next;if(s!==null)En=s,Wt=i;else{if(i===null)throw Et.alternate===null?Error(r(467)):Error(r(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},En===null?Et.memoizedState=En=i:En=En.next=i}return En}function zd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(i){var s=Fl;return Fl+=1,Qs===null&&(Qs=[]),i=Wy(Qs,i,s),s=Et,(En===null?s.memoizedState:En.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?D0:U0),i}function Jc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Il(i);if(i.$$typeof===C)return Vn(i)}throw Error(r(438,String(i)))}function Fd(i){var s=null,l=Et.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var h=Et.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=zd(),Et.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(i),h=0;h<i;h++)l[h]=oe;return s.index++,l}function Ei(i,s){return typeof s=="function"?s(i):s}function $c(i){var s=Mn();return Id(s,Wt,i)}function Id(i,s,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,b=h.pending;if(b!==null){if(g!==null){var O=g.next;g.next=b.next,b.next=O}s.baseQueue=g=b,h.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{s=g.next;var k=O=null,ie=null,me=s,_e=!1;do{var Me=me.lane&-536870913;if(Me!==me.lane?(Ot&Me)===Me:(ta&Me)===Me){var ge=me.revertLane;if(ge===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Me===qs&&(_e=!0);else if((ta&ge)===ge){me=me.next,ge===qs&&(_e=!0);continue}else Me={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ie===null?(k=ie=Me,O=b):ie=ie.next=Me,Et.lanes|=ge,la|=ge;Me=me.action,Wa&&l(b,Me),b=me.hasEagerState?me.eagerState:l(b,Me)}else ge={lane:Me,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ie===null?(k=ie=ge,O=b):ie=ie.next=ge,Et.lanes|=Me,la|=Me;me=me.next}while(me!==null&&me!==s);if(ie===null?O=b:ie.next=k,!hr(b,i.memoizedState)&&(Pn=!0,_e&&(l=Xs,l!==null)))throw l;i.memoizedState=b,i.baseState=O,i.baseQueue=ie,h.lastRenderedState=b}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Gd(i){var s=Mn(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,b=s.memoizedState;if(g!==null){l.pending=null;var O=g=g.next;do b=i(b,O.action),O=O.next;while(O!==g);hr(b,s.memoizedState)||(Pn=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),l.lastRenderedState=b}return[b,h]}function $y(i,s,l){var h=Et,g=Mn(),b=zt;if(b){if(l===void 0)throw Error(r(407));l=l()}else l=s();var O=!hr((Wt||g).memoizedState,l);O&&(g.memoizedState=l,Pn=!0),g=g.queue;var k=n0.bind(null,h,g,i);if(Gl(2048,8,k,[i]),g.getSnapshot!==s||O||En!==null&&En.memoizedState.tag&1){if(h.flags|=2048,Ks(9,ef(),t0.bind(null,h,g,l,s),null),Jt===null)throw Error(r(349));b||(ta&124)!==0||e0(h,s,l)}return l}function e0(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=Et.updateQueue,s===null?(s=zd(),Et.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function t0(i,s,l,h){s.value=l,s.getSnapshot=h,r0(s)&&i0(i)}function n0(i,s,l){return l(function(){r0(s)&&i0(i)})}function r0(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!hr(i,l)}catch{return!0}}function i0(i){var s=Hs(i,2);s!==null&&yr(s,i,2)}function kd(i){var s=tr();if(typeof i=="function"){var l=i;if(i=l(),Wa){Be(!0);try{l()}finally{Be(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:i},s}function a0(i,s,l,h){return i.baseState=l,Id(i,Wt,typeof h=="function"?h:Ei)}function tT(i,s,l,h,g){if(nf(i))throw Error(r(485));if(i=s.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};N.T!==null?l(!0):b.isTransition=!1,h(b),l=s.pending,l===null?(b.next=s.pending=b,s0(s,b)):(b.next=l.next,s.pending=l.next=b)}}function s0(i,s){var l=s.action,h=s.payload,g=i.state;if(s.isTransition){var b=N.T,O={};N.T=O;try{var k=l(g,h),ie=N.S;ie!==null&&ie(O,k),o0(i,s,k)}catch(me){Hd(i,s,me)}finally{N.T=b}}else try{b=l(g,h),o0(i,s,b)}catch(me){Hd(i,s,me)}}function o0(i,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){l0(i,s,h)},function(h){return Hd(i,s,h)}):l0(i,s,l)}function l0(i,s,l){s.status="fulfilled",s.value=l,u0(s),i.state=l,s=i.pending,s!==null&&(l=s.next,l===s?i.pending=null:(l=l.next,s.next=l,s0(i,l)))}function Hd(i,s,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=l,u0(s),s=s.next;while(s!==h)}i.action=null}function u0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function c0(i,s){return s}function f0(i,s){if(zt){var l=Jt.formState;if(l!==null){e:{var h=Et;if(zt){if(pn){t:{for(var g=pn,b=ii;g.nodeType!==8;){if(!b){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){pn=Vr(g.nextSibling),h=g.data==="F!";break e}}ka(h)}h=!1}h&&(s=l[0])}}return l=tr(),l.memoizedState=l.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:s},l.queue=h,l=L0.bind(null,Et,h),h.dispatch=l,h=kd(!1),b=Xd.bind(null,Et,!1,h.queue),h=tr(),g={state:s,dispatch:null,action:i,pending:null},h.queue=g,l=tT.bind(null,Et,g,b,l),g.dispatch=l,h.memoizedState=i,[s,l,!1]}function h0(i){var s=Mn();return d0(s,Wt,i)}function d0(i,s,l){if(s=Id(i,s,c0)[0],i=$c(Ei)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Il(s)}catch(O){throw O===Dl?Xc:O}else h=s;s=Mn();var g=s.queue,b=g.dispatch;return l!==s.memoizedState&&(Et.flags|=2048,Ks(9,ef(),nT.bind(null,g,l),null)),[h,b,i]}function nT(i,s){i.action=s}function p0(i){var s=Mn(),l=Wt;if(l!==null)return d0(s,l,i);Mn(),s=s.memoizedState,l=Mn();var h=l.queue.dispatch;return l.memoizedState=i,[s,h,!1]}function Ks(i,s,l,h){return i={tag:i,create:l,deps:h,inst:s,next:null},s=Et.updateQueue,s===null&&(s=zd(),Et.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,s.lastEffect=i),i}function ef(){return{destroy:void 0,resource:void 0}}function v0(){return Mn().memoizedState}function tf(i,s,l,h){var g=tr();h=h===void 0?null:h,Et.flags|=i,g.memoizedState=Ks(1|s,ef(),l,h)}function Gl(i,s,l,h){var g=Mn();h=h===void 0?null:h;var b=g.memoizedState.inst;Wt!==null&&h!==null&&Nd(h,Wt.memoizedState.deps)?g.memoizedState=Ks(s,b,l,h):(Et.flags|=i,g.memoizedState=Ks(1|s,b,l,h))}function m0(i,s){tf(8390656,8,i,s)}function g0(i,s){Gl(2048,8,i,s)}function y0(i,s){return Gl(4,2,i,s)}function b0(i,s){return Gl(4,4,i,s)}function x0(i,s){if(typeof s=="function"){i=i();var l=s(i);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function _0(i,s,l){l=l!=null?l.concat([i]):null,Gl(4,4,x0.bind(null,s,i),l)}function Vd(){}function w0(i,s){var l=Mn();s=s===void 0?null:s;var h=l.memoizedState;return s!==null&&Nd(s,h[1])?h[0]:(l.memoizedState=[i,s],i)}function E0(i,s){var l=Mn();s=s===void 0?null:s;var h=l.memoizedState;if(s!==null&&Nd(s,h[1]))return h[0];if(h=i(),Wa){Be(!0);try{i()}finally{Be(!1)}}return l.memoizedState=[h,s],h}function jd(i,s,l){return l===void 0||(ta&1073741824)!==0?i.memoizedState=s:(i.memoizedState=l,i=Sb(),Et.lanes|=i,la|=i,l)}function M0(i,s,l,h){return hr(l,s)?l:Ys.current!==null?(i=jd(i,l,h),hr(i,s)||(Pn=!0),i):(ta&42)===0?(Pn=!0,i.memoizedState=l):(i=Sb(),Et.lanes|=i,la|=i,s)}function T0(i,s,l,h,g){var b=$.p;$.p=b!==0&&8>b?b:8;var O=N.T,k={};N.T=k,Xd(i,!1,s,l);try{var ie=g(),me=N.S;if(me!==null&&me(k,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var _e=JM(ie,h);kl(i,s,_e,gr(i))}else kl(i,s,h,gr(i))}catch(Me){kl(i,s,{then:function(){},status:"rejected",reason:Me},gr())}finally{$.p=b,N.T=O}}function rT(){}function Wd(i,s,l,h){if(i.tag!==5)throw Error(r(476));var g=S0(i).queue;T0(i,g,s,x,l===null?rT:function(){return A0(i),l(h)})}function S0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:x},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:l},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function A0(i){var s=S0(i).next.queue;kl(i,s,{},gr())}function qd(){return Vn(au)}function R0(){return Mn().memoizedState}function C0(){return Mn().memoizedState}function iT(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var l=gr();i=$i(l);var h=ea(s,i,l);h!==null&&(yr(h,s,l),Bl(h,s,l)),s={cache:wd()},i.payload=s;return}s=s.return}}function aT(i,s,l){var h=gr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},nf(i)?O0(s,l):(l=hd(i,s,l,h),l!==null&&(yr(l,i,h),N0(l,s,h)))}function L0(i,s,l){var h=gr();kl(i,s,l,h)}function kl(i,s,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(nf(i))O0(s,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var O=s.lastRenderedState,k=b(O,l);if(g.hasEagerState=!0,g.eagerState=k,hr(k,O))return Ic(i,s,g,0),Jt===null&&Fc(),!1}catch{}finally{}if(l=hd(i,s,g,h),l!==null)return yr(l,i,h),N0(l,s,h),!0}return!1}function Xd(i,s,l,h){if(h={lane:2,revertLane:Tp(),action:h,hasEagerState:!1,eagerState:null,next:null},nf(i)){if(s)throw Error(r(479))}else s=hd(i,l,h,2),s!==null&&yr(s,i,2)}function nf(i){var s=i.alternate;return i===Et||s!==null&&s===Et}function O0(i,s){Zs=Qc=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function N0(i,s,l){if((l&4194048)!==0){var h=s.lanes;h&=i.pendingLanes,l|=h,s.lanes=l,Rr(i,l)}}var rf={readContext:Vn,use:Jc,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},D0={readContext:Vn,use:Jc,useCallback:function(i,s){return tr().memoizedState=[i,s===void 0?null:s],i},useContext:Vn,useEffect:m0,useImperativeHandle:function(i,s,l){l=l!=null?l.concat([i]):null,tf(4194308,4,x0.bind(null,s,i),l)},useLayoutEffect:function(i,s){return tf(4194308,4,i,s)},useInsertionEffect:function(i,s){tf(4,2,i,s)},useMemo:function(i,s){var l=tr();s=s===void 0?null:s;var h=i();if(Wa){Be(!0);try{i()}finally{Be(!1)}}return l.memoizedState=[h,s],h},useReducer:function(i,s,l){var h=tr();if(l!==void 0){var g=l(s);if(Wa){Be(!0);try{l(s)}finally{Be(!1)}}}else g=s;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=aT.bind(null,Et,i),[h.memoizedState,i]},useRef:function(i){var s=tr();return i={current:i},s.memoizedState=i},useState:function(i){i=kd(i);var s=i.queue,l=L0.bind(null,Et,s);return s.dispatch=l,[i.memoizedState,l]},useDebugValue:Vd,useDeferredValue:function(i,s){var l=tr();return jd(l,i,s)},useTransition:function(){var i=kd(!1);return i=T0.bind(null,Et,i.queue,!0,!1),tr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,l){var h=Et,g=tr();if(zt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),Jt===null)throw Error(r(349));(Ot&124)!==0||e0(h,s,l)}g.memoizedState=l;var b={value:l,getSnapshot:s};return g.queue=b,m0(n0.bind(null,h,b,i),[i]),h.flags|=2048,Ks(9,ef(),t0.bind(null,h,b,l,s),null),l},useId:function(){var i=tr(),s=Jt.identifierPrefix;if(zt){var l=xi,h=bi;l=(h&~(1<<32-$e(h)-1)).toString(32)+l,s="«"+s+"R"+l,l=Kc++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=$M++,s="«"+s+"r"+l.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:qd,useFormState:f0,useActionState:f0,useOptimistic:function(i){var s=tr();s.memoizedState=s.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Xd.bind(null,Et,!0,l),l.dispatch=s,[i,s]},useMemoCache:Fd,useCacheRefresh:function(){return tr().memoizedState=iT.bind(null,Et)}},U0={readContext:Vn,use:Jc,useCallback:w0,useContext:Vn,useEffect:g0,useImperativeHandle:_0,useInsertionEffect:y0,useLayoutEffect:b0,useMemo:E0,useReducer:$c,useRef:v0,useState:function(){return $c(Ei)},useDebugValue:Vd,useDeferredValue:function(i,s){var l=Mn();return M0(l,Wt.memoizedState,i,s)},useTransition:function(){var i=$c(Ei)[0],s=Mn().memoizedState;return[typeof i=="boolean"?i:Il(i),s]},useSyncExternalStore:$y,useId:R0,useHostTransitionStatus:qd,useFormState:h0,useActionState:h0,useOptimistic:function(i,s){var l=Mn();return a0(l,Wt,i,s)},useMemoCache:Fd,useCacheRefresh:C0},sT={readContext:Vn,use:Jc,useCallback:w0,useContext:Vn,useEffect:g0,useImperativeHandle:_0,useInsertionEffect:y0,useLayoutEffect:b0,useMemo:E0,useReducer:Gd,useRef:v0,useState:function(){return Gd(Ei)},useDebugValue:Vd,useDeferredValue:function(i,s){var l=Mn();return Wt===null?jd(l,i,s):M0(l,Wt.memoizedState,i,s)},useTransition:function(){var i=Gd(Ei)[0],s=Mn().memoizedState;return[typeof i=="boolean"?i:Il(i),s]},useSyncExternalStore:$y,useId:R0,useHostTransitionStatus:qd,useFormState:p0,useActionState:p0,useOptimistic:function(i,s){var l=Mn();return Wt!==null?a0(l,Wt,i,s):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:C0},Js=null,Hl=0;function af(i){var s=Hl;return Hl+=1,Js===null&&(Js=[]),Wy(Js,i,s)}function Vl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function sf(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function B0(i){var s=i._init;return s(i._payload)}function P0(i){function s(de,ce){if(i){var ve=de.deletions;ve===null?(de.deletions=[ce],de.flags|=16):ve.push(ce)}}function l(de,ce){if(!i)return null;for(;ce!==null;)s(de,ce),ce=ce.sibling;return null}function h(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function g(de,ce){return de=yi(de,ce),de.index=0,de.sibling=null,de}function b(de,ce,ve){return de.index=ve,i?(ve=de.alternate,ve!==null?(ve=ve.index,ve<ce?(de.flags|=67108866,ce):ve):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function O(de){return i&&de.alternate===null&&(de.flags|=67108866),de}function k(de,ce,ve,we){return ce===null||ce.tag!==6?(ce=pd(ve,de.mode,we),ce.return=de,ce):(ce=g(ce,ve),ce.return=de,ce)}function ie(de,ce,ve,we){var Ge=ve.type;return Ge===_?_e(de,ce,ve.props.children,we,ve.key):ce!==null&&(ce.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===ne&&B0(Ge)===ce.type)?(ce=g(ce,ve.props),Vl(ce,ve),ce.return=de,ce):(ce=kc(ve.type,ve.key,ve.props,null,de.mode,we),Vl(ce,ve),ce.return=de,ce)}function me(de,ce,ve,we){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ve.containerInfo||ce.stateNode.implementation!==ve.implementation?(ce=vd(ve,de.mode,we),ce.return=de,ce):(ce=g(ce,ve.children||[]),ce.return=de,ce)}function _e(de,ce,ve,we,Ge){return ce===null||ce.tag!==7?(ce=za(ve,de.mode,we,Ge),ce.return=de,ce):(ce=g(ce,ve),ce.return=de,ce)}function Me(de,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=pd(""+ce,de.mode,ve),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case m:return ve=kc(ce.type,ce.key,ce.props,null,de.mode,ve),Vl(ve,ce),ve.return=de,ve;case y:return ce=vd(ce,de.mode,ve),ce.return=de,ce;case ne:var we=ce._init;return ce=we(ce._payload),Me(de,ce,ve)}if(z(ce)||he(ce))return ce=za(ce,de.mode,ve,null),ce.return=de,ce;if(typeof ce.then=="function")return Me(de,af(ce),ve);if(ce.$$typeof===C)return Me(de,Wc(de,ce),ve);sf(de,ce)}return null}function ge(de,ce,ve,we){var Ge=ce!==null?ce.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Ge!==null?null:k(de,ce,""+ve,we);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:return ve.key===Ge?ie(de,ce,ve,we):null;case y:return ve.key===Ge?me(de,ce,ve,we):null;case ne:return Ge=ve._init,ve=Ge(ve._payload),ge(de,ce,ve,we)}if(z(ve)||he(ve))return Ge!==null?null:_e(de,ce,ve,we,null);if(typeof ve.then=="function")return ge(de,ce,af(ve),we);if(ve.$$typeof===C)return ge(de,ce,Wc(de,ve),we);sf(de,ve)}return null}function ye(de,ce,ve,we,Ge){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return de=de.get(ve)||null,k(ce,de,""+we,Ge);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case m:return de=de.get(we.key===null?ve:we.key)||null,ie(ce,de,we,Ge);case y:return de=de.get(we.key===null?ve:we.key)||null,me(ce,de,we,Ge);case ne:var Mt=we._init;return we=Mt(we._payload),ye(de,ce,ve,we,Ge)}if(z(we)||he(we))return de=de.get(ve)||null,_e(ce,de,we,Ge,null);if(typeof we.then=="function")return ye(de,ce,ve,af(we),Ge);if(we.$$typeof===C)return ye(de,ce,ve,Wc(ce,we),Ge);sf(ce,we)}return null}function lt(de,ce,ve,we){for(var Ge=null,Mt=null,We=ce,rt=ce=0,Fn=null;We!==null&&rt<ve.length;rt++){We.index>rt?(Fn=We,We=null):Fn=We.sibling;var Bt=ge(de,We,ve[rt],we);if(Bt===null){We===null&&(We=Fn);break}i&&We&&Bt.alternate===null&&s(de,We),ce=b(Bt,ce,rt),Mt===null?Ge=Bt:Mt.sibling=Bt,Mt=Bt,We=Fn}if(rt===ve.length)return l(de,We),zt&&Ia(de,rt),Ge;if(We===null){for(;rt<ve.length;rt++)We=Me(de,ve[rt],we),We!==null&&(ce=b(We,ce,rt),Mt===null?Ge=We:Mt.sibling=We,Mt=We);return zt&&Ia(de,rt),Ge}for(We=h(We);rt<ve.length;rt++)Fn=ye(We,de,rt,ve[rt],we),Fn!==null&&(i&&Fn.alternate!==null&&We.delete(Fn.key===null?rt:Fn.key),ce=b(Fn,ce,rt),Mt===null?Ge=Fn:Mt.sibling=Fn,Mt=Fn);return i&&We.forEach(function(ga){return s(de,ga)}),zt&&Ia(de,rt),Ge}function nt(de,ce,ve,we){if(ve==null)throw Error(r(151));for(var Ge=null,Mt=null,We=ce,rt=ce=0,Fn=null,Bt=ve.next();We!==null&&!Bt.done;rt++,Bt=ve.next()){We.index>rt?(Fn=We,We=null):Fn=We.sibling;var ga=ge(de,We,Bt.value,we);if(ga===null){We===null&&(We=Fn);break}i&&We&&ga.alternate===null&&s(de,We),ce=b(ga,ce,rt),Mt===null?Ge=ga:Mt.sibling=ga,Mt=ga,We=Fn}if(Bt.done)return l(de,We),zt&&Ia(de,rt),Ge;if(We===null){for(;!Bt.done;rt++,Bt=ve.next())Bt=Me(de,Bt.value,we),Bt!==null&&(ce=b(Bt,ce,rt),Mt===null?Ge=Bt:Mt.sibling=Bt,Mt=Bt);return zt&&Ia(de,rt),Ge}for(We=h(We);!Bt.done;rt++,Bt=ve.next())Bt=ye(We,de,rt,Bt.value,we),Bt!==null&&(i&&Bt.alternate!==null&&We.delete(Bt.key===null?rt:Bt.key),ce=b(Bt,ce,rt),Mt===null?Ge=Bt:Mt.sibling=Bt,Mt=Bt);return i&&We.forEach(function(oS){return s(de,oS)}),zt&&Ia(de,rt),Ge}function Xt(de,ce,ve,we){if(typeof ve=="object"&&ve!==null&&ve.type===_&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:e:{for(var Ge=ve.key;ce!==null;){if(ce.key===Ge){if(Ge=ve.type,Ge===_){if(ce.tag===7){l(de,ce.sibling),we=g(ce,ve.props.children),we.return=de,de=we;break e}}else if(ce.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===ne&&B0(Ge)===ce.type){l(de,ce.sibling),we=g(ce,ve.props),Vl(we,ve),we.return=de,de=we;break e}l(de,ce);break}else s(de,ce);ce=ce.sibling}ve.type===_?(we=za(ve.props.children,de.mode,we,ve.key),we.return=de,de=we):(we=kc(ve.type,ve.key,ve.props,null,de.mode,we),Vl(we,ve),we.return=de,de=we)}return O(de);case y:e:{for(Ge=ve.key;ce!==null;){if(ce.key===Ge)if(ce.tag===4&&ce.stateNode.containerInfo===ve.containerInfo&&ce.stateNode.implementation===ve.implementation){l(de,ce.sibling),we=g(ce,ve.children||[]),we.return=de,de=we;break e}else{l(de,ce);break}else s(de,ce);ce=ce.sibling}we=vd(ve,de.mode,we),we.return=de,de=we}return O(de);case ne:return Ge=ve._init,ve=Ge(ve._payload),Xt(de,ce,ve,we)}if(z(ve))return lt(de,ce,ve,we);if(he(ve)){if(Ge=he(ve),typeof Ge!="function")throw Error(r(150));return ve=Ge.call(ve),nt(de,ce,ve,we)}if(typeof ve.then=="function")return Xt(de,ce,af(ve),we);if(ve.$$typeof===C)return Xt(de,ce,Wc(de,ve),we);sf(de,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ce!==null&&ce.tag===6?(l(de,ce.sibling),we=g(ce,ve),we.return=de,de=we):(l(de,ce),we=pd(ve,de.mode,we),we.return=de,de=we),O(de)):l(de,ce)}return function(de,ce,ve,we){try{Hl=0;var Ge=Xt(de,ce,ve,we);return Js=null,Ge}catch(We){if(We===Dl||We===Xc)throw We;var Mt=dr(29,We,null,de.mode);return Mt.lanes=we,Mt.return=de,Mt}finally{}}}var $s=P0(!0),z0=P0(!1),Ur=R(null),ai=null;function na(i){var s=i.alternate;B(Ln,Ln.current&1),B(Ur,i),ai===null&&(s===null||Ys.current!==null||s.memoizedState!==null)&&(ai=i)}function F0(i){if(i.tag===22){if(B(Ln,Ln.current),B(Ur,i),ai===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(ai=i)}}else ra()}function ra(){B(Ln,Ln.current),B(Ur,Ur.current)}function Mi(i){D(Ur),ai===i&&(ai=null),D(Ln)}var Ln=R(0);function of(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||zp(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Yd(i,s,l,h){s=i.memoizedState,l=l(h,s),l=l==null?s:p({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Zd={enqueueSetState:function(i,s,l){i=i._reactInternals;var h=gr(),g=$i(h);g.payload=s,l!=null&&(g.callback=l),s=ea(i,g,h),s!==null&&(yr(s,i,h),Bl(s,i,h))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var h=gr(),g=$i(h);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=ea(i,g,h),s!==null&&(yr(s,i,h),Bl(s,i,h))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=gr(),h=$i(l);h.tag=2,s!=null&&(h.callback=s),s=ea(i,h,l),s!==null&&(yr(s,i,l),Bl(s,i,l))}};function I0(i,s,l,h,g,b,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,O):s.prototype&&s.prototype.isPureReactComponent?!Tl(l,h)||!Tl(g,b):!0}function G0(i,s,l,h){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==i&&Zd.enqueueReplaceState(s,s.state,null)}function qa(i,s){var l=s;if("ref"in s){l={};for(var h in s)h!=="ref"&&(l[h]=s[h])}if(i=i.defaultProps){l===s&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var lf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function k0(i){lf(i)}function H0(i){console.error(i)}function V0(i){lf(i)}function uf(i,s){try{var l=i.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function j0(i,s,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Qd(i,s,l){return l=$i(l),l.tag=3,l.payload={element:null},l.callback=function(){uf(i,s)},l}function W0(i){return i=$i(i),i.tag=3,i}function q0(i,s,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=h.value;i.payload=function(){return g(b)},i.callback=function(){j0(s,l,h)}}var O=l.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){j0(s,l,h),typeof g!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function oT(i,s,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=l.alternate,s!==null&&Ll(s,l,g,!0),l=Ur.current,l!==null){switch(l.tag){case 13:return ai===null?xp():l.alternate===null&&vn===0&&(vn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Td?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([h]):s.add(h),wp(i,h,g)),!1;case 22:return l.flags|=65536,h===Td?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([h]):l.add(h)),wp(i,h,g)),!1}throw Error(r(435,l.tag))}return wp(i,h,g),xp(),!1}if(zt)return s=Ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,h!==yd&&(i=Error(r(422),{cause:h}),Cl(Lr(i,l)))):(h!==yd&&(s=Error(r(423),{cause:h}),Cl(Lr(s,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Lr(h,l),g=Qd(i.stateNode,h,g),Rd(i,g),vn!==4&&(vn=2)),!1;var b=Error(r(520),{cause:h});if(b=Lr(b,l),Ql===null?Ql=[b]:Ql.push(b),vn!==4&&(vn=2),s===null)return!0;h=Lr(h,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Qd(l.stateNode,h,i),Rd(l,i),!1;case 1:if(s=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ua===null||!ua.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=W0(g),q0(g,i,l,h),Rd(l,g),!1}l=l.return}while(l!==null);return!1}var X0=Error(r(461)),Pn=!1;function In(i,s,l,h){s.child=i===null?z0(s,null,l,h):$s(s,i.child,l,h)}function Y0(i,s,l,h,g){l=l.render;var b=s.ref;if("ref"in h){var O={};for(var k in h)k!=="ref"&&(O[k]=h[k])}else O=h;return Va(s),h=Dd(i,s,l,O,b,g),k=Ud(),i!==null&&!Pn?(Bd(i,s,g),Ti(i,s,g)):(zt&&k&&md(s),s.flags|=1,In(i,s,h,g),s.child)}function Z0(i,s,l,h,g){if(i===null){var b=l.type;return typeof b=="function"&&!dd(b)&&b.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=b,Q0(i,s,b,h,g)):(i=kc(l.type,null,h,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(b=i.child,!ip(i,g)){var O=b.memoizedProps;if(l=l.compare,l=l!==null?l:Tl,l(O,h)&&i.ref===s.ref)return Ti(i,s,g)}return s.flags|=1,i=yi(b,h),i.ref=s.ref,i.return=s,s.child=i}function Q0(i,s,l,h,g){if(i!==null){var b=i.memoizedProps;if(Tl(b,h)&&i.ref===s.ref)if(Pn=!1,s.pendingProps=h=b,ip(i,g))(i.flags&131072)!==0&&(Pn=!0);else return s.lanes=i.lanes,Ti(i,s,g)}return Kd(i,s,l,h,g)}function K0(i,s,l){var h=s.pendingProps,g=h.children,b=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=b!==null?b.baseLanes|l:l,i!==null){for(g=s.child=i.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;s.childLanes=b&~h}else s.childLanes=0,s.child=null;return J0(i,s,h,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&qc(s,b!==null?b.cachePool:null),b!==null?Qy(s,b):Ld(),F0(s);else return s.lanes=s.childLanes=536870912,J0(i,s,b!==null?b.baseLanes|l:l,l)}else b!==null?(qc(s,b.cachePool),Qy(s,b),ra(),s.memoizedState=null):(i!==null&&qc(s,null),Ld(),ra());return In(i,s,g,l),s.child}function J0(i,s,l,h){var g=Md();return g=g===null?null:{parent:Cn._currentValue,pool:g},s.memoizedState={baseLanes:l,cachePool:g},i!==null&&qc(s,null),Ld(),F0(s),i!==null&&Ll(i,s,h,!0),null}function cf(i,s){var l=s.ref;if(l===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(s.flags|=4194816)}}function Kd(i,s,l,h,g){return Va(s),l=Dd(i,s,l,h,void 0,g),h=Ud(),i!==null&&!Pn?(Bd(i,s,g),Ti(i,s,g)):(zt&&h&&md(s),s.flags|=1,In(i,s,l,g),s.child)}function $0(i,s,l,h,g,b){return Va(s),s.updateQueue=null,l=Jy(s,h,l,g),Ky(i),h=Ud(),i!==null&&!Pn?(Bd(i,s,b),Ti(i,s,b)):(zt&&h&&md(s),s.flags|=1,In(i,s,l,b),s.child)}function eb(i,s,l,h,g){if(Va(s),s.stateNode===null){var b=Vs,O=l.contextType;typeof O=="object"&&O!==null&&(b=Vn(O)),b=new l(h,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Zd,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=h,b.state=s.memoizedState,b.refs={},Sd(s),O=l.contextType,b.context=typeof O=="object"&&O!==null?Vn(O):Vs,b.state=s.memoizedState,O=l.getDerivedStateFromProps,typeof O=="function"&&(Yd(s,l,O,h),b.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&Zd.enqueueReplaceState(b,b.state,null),zl(s,h,b,g),Pl(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(i===null){b=s.stateNode;var k=s.memoizedProps,ie=qa(l,k);b.props=ie;var me=b.context,_e=l.contextType;O=Vs,typeof _e=="object"&&_e!==null&&(O=Vn(_e));var Me=l.getDerivedStateFromProps;_e=typeof Me=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,_e||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||me!==O)&&G0(s,b,h,O),Ji=!1;var ge=s.memoizedState;b.state=ge,zl(s,h,b,g),Pl(),me=s.memoizedState,k||ge!==me||Ji?(typeof Me=="function"&&(Yd(s,l,Me,h),me=s.memoizedState),(ie=Ji||I0(s,l,ie,h,ge,me,O))?(_e||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=me),b.props=h,b.state=me,b.context=O,h=ie):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,Ad(i,s),O=s.memoizedProps,_e=qa(l,O),b.props=_e,Me=s.pendingProps,ge=b.context,me=l.contextType,ie=Vs,typeof me=="object"&&me!==null&&(ie=Vn(me)),k=l.getDerivedStateFromProps,(me=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==Me||ge!==ie)&&G0(s,b,h,ie),Ji=!1,ge=s.memoizedState,b.state=ge,zl(s,h,b,g),Pl();var ye=s.memoizedState;O!==Me||ge!==ye||Ji||i!==null&&i.dependencies!==null&&jc(i.dependencies)?(typeof k=="function"&&(Yd(s,l,k,h),ye=s.memoizedState),(_e=Ji||I0(s,l,_e,h,ge,ye,ie)||i!==null&&i.dependencies!==null&&jc(i.dependencies))?(me||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,ye,ie),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,ye,ie)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&ge===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ge===i.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ye),b.props=h,b.state=ye,b.context=ie,h=_e):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&ge===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ge===i.memoizedState||(s.flags|=1024),h=!1)}return b=h,cf(i,s),h=(s.flags&128)!==0,b||h?(b=s.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,i!==null&&h?(s.child=$s(s,i.child,null,g),s.child=$s(s,null,l,g)):In(i,s,l,g),s.memoizedState=b.state,i=s.child):i=Ti(i,s,g),i}function tb(i,s,l,h){return Rl(),s.flags|=256,In(i,s,l,h),s.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $d(i){return{baseLanes:i,cachePool:Hy()}}function ep(i,s,l){return i=i!==null?i.childLanes&~l:0,s&&(i|=Br),i}function nb(i,s,l){var h=s.pendingProps,g=!1,b=(s.flags&128)!==0,O;if((O=b)||(O=i!==null&&i.memoizedState===null?!1:(Ln.current&2)!==0),O&&(g=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,i===null){if(zt){if(g?na(s):ra(),zt){var k=pn,ie;if(ie=k){e:{for(ie=k,k=ii;ie.nodeType!==8;){if(!k){k=null;break e}if(ie=Vr(ie.nextSibling),ie===null){k=null;break e}}k=ie}k!==null?(s.memoizedState={dehydrated:k,treeContext:Fa!==null?{id:bi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},ie=dr(18,null,null,0),ie.stateNode=k,ie.return=s,s.child=ie,Yn=s,pn=null,ie=!0):ie=!1}ie||ka(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return zp(k)?s.lanes=32:s.lanes=536870912,null;Mi(s)}return k=h.children,h=h.fallback,g?(ra(),g=s.mode,k=ff({mode:"hidden",children:k},g),h=za(h,g,l,null),k.return=s,h.return=s,k.sibling=h,s.child=k,g=s.child,g.memoizedState=$d(l),g.childLanes=ep(i,O,l),s.memoizedState=Jd,h):(na(s),tp(s,k))}if(ie=i.memoizedState,ie!==null&&(k=ie.dehydrated,k!==null)){if(b)s.flags&256?(na(s),s.flags&=-257,s=np(i,s,l)):s.memoizedState!==null?(ra(),s.child=i.child,s.flags|=128,s=null):(ra(),g=h.fallback,k=s.mode,h=ff({mode:"visible",children:h.children},k),g=za(g,k,l,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,$s(s,i.child,null,l),h=s.child,h.memoizedState=$d(l),h.childLanes=ep(i,O,l),s.memoizedState=Jd,s=g);else if(na(s),zp(k)){if(O=k.nextSibling&&k.nextSibling.dataset,O)var me=O.dgst;O=me,h=Error(r(419)),h.stack="",h.digest=O,Cl({value:h,source:null,stack:null}),s=np(i,s,l)}else if(Pn||Ll(i,s,l,!1),O=(l&i.childLanes)!==0,Pn||O){if(O=Jt,O!==null&&(h=l&-l,h=(h&42)!==0?1:Oa(h),h=(h&(O.suspendedLanes|l))!==0?0:h,h!==0&&h!==ie.retryLane))throw ie.retryLane=h,Hs(i,h),yr(O,i,h),X0;k.data==="$?"||xp(),s=np(i,s,l)}else k.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=ie.treeContext,pn=Vr(k.nextSibling),Yn=s,zt=!0,Ga=null,ii=!1,i!==null&&(Nr[Dr++]=bi,Nr[Dr++]=xi,Nr[Dr++]=Fa,bi=i.id,xi=i.overflow,Fa=s),s=tp(s,h.children),s.flags|=4096);return s}return g?(ra(),g=h.fallback,k=s.mode,ie=i.child,me=ie.sibling,h=yi(ie,{mode:"hidden",children:h.children}),h.subtreeFlags=ie.subtreeFlags&65011712,me!==null?g=yi(me,g):(g=za(g,k,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,k=i.child.memoizedState,k===null?k=$d(l):(ie=k.cachePool,ie!==null?(me=Cn._currentValue,ie=ie.parent!==me?{parent:me,pool:me}:ie):ie=Hy(),k={baseLanes:k.baseLanes|l,cachePool:ie}),g.memoizedState=k,g.childLanes=ep(i,O,l),s.memoizedState=Jd,h):(na(s),l=i.child,i=l.sibling,l=yi(l,{mode:"visible",children:h.children}),l.return=s,l.sibling=null,i!==null&&(O=s.deletions,O===null?(s.deletions=[i],s.flags|=16):O.push(i)),s.child=l,s.memoizedState=null,l)}function tp(i,s){return s=ff({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ff(i,s){return i=dr(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function np(i,s,l){return $s(s,i.child,null,l),i=tp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function rb(i,s,l){i.lanes|=s;var h=i.alternate;h!==null&&(h.lanes|=s),xd(i.return,s,l)}function rp(i,s,l,h,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=l,b.tailMode=g)}function ib(i,s,l){var h=s.pendingProps,g=h.revealOrder,b=h.tail;if(In(i,s,h.children,l),h=Ln.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&rb(i,l,s);else if(i.tag===19)rb(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(B(Ln,h),g){case"forwards":for(l=s.child,g=null;l!==null;)i=l.alternate,i!==null&&of(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),rp(s,!1,g,l,b);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&of(i)===null){s.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}rp(s,!0,l,null,b);break;case"together":rp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ti(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),la|=s.lanes,(l&s.childLanes)===0)if(i!==null){if(Ll(i,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,l=yi(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=yi(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function ip(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&jc(i)))}function lT(i,s,l){switch(s.tag){case 3:le(s,s.stateNode.containerInfo),Ki(s,Cn,i.memoizedState.cache),Rl();break;case 27:case 5:xe(s);break;case 4:le(s,s.stateNode.containerInfo);break;case 10:Ki(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(na(s),s.flags|=128,null):(l&s.child.childLanes)!==0?nb(i,s,l):(na(s),i=Ti(i,s,l),i!==null?i.sibling:null);na(s);break;case 19:var g=(i.flags&128)!==0;if(h=(l&s.childLanes)!==0,h||(Ll(i,s,l,!1),h=(l&s.childLanes)!==0),g){if(h)return ib(i,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),B(Ln,Ln.current),h)break;return null;case 22:case 23:return s.lanes=0,K0(i,s,l);case 24:Ki(s,Cn,i.memoizedState.cache)}return Ti(i,s,l)}function ab(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps)Pn=!0;else{if(!ip(i,l)&&(s.flags&128)===0)return Pn=!1,lT(i,s,l);Pn=(i.flags&131072)!==0}else Pn=!1,zt&&(s.flags&1048576)!==0&&By(s,Vc,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var h=s.elementType,g=h._init;if(h=g(h._payload),s.type=h,typeof h=="function")dd(h)?(i=qa(h,i),s.tag=1,s=eb(null,s,h,i,l)):(s.tag=0,s=Kd(null,s,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===L){s.tag=11,s=Y0(null,s,h,i,l);break e}else if(g===q){s.tag=14,s=Z0(null,s,h,i,l);break e}}throw s=se(h)||h,Error(r(306,s,""))}}return s;case 0:return Kd(i,s,s.type,s.pendingProps,l);case 1:return h=s.type,g=qa(h,s.pendingProps),eb(i,s,h,g,l);case 3:e:{if(le(s,s.stateNode.containerInfo),i===null)throw Error(r(387));h=s.pendingProps;var b=s.memoizedState;g=b.element,Ad(i,s),zl(s,h,null,l);var O=s.memoizedState;if(h=O.cache,Ki(s,Cn,h),h!==b.cache&&_d(s,[Cn],l,!0),Pl(),h=O.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=tb(i,s,h,l);break e}else if(h!==g){g=Lr(Error(r(424)),s),Cl(g),s=tb(i,s,h,l);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pn=Vr(i.firstChild),Yn=s,zt=!0,Ga=null,ii=!0,l=z0(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Rl(),h===g){s=Ti(i,s,l);break e}In(i,s,h,l)}s=s.child}return s;case 26:return cf(i,s),i===null?(l=ux(s.type,null,s.pendingProps,null))?s.memoizedState=l:zt||(l=s.type,i=s.pendingProps,h=Tf(P.current).createElement(l),h[dn]=s,h[Un]=i,kn(h,l,i),Re(h),s.stateNode=h):s.memoizedState=ux(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return xe(s),i===null&&zt&&(h=s.stateNode=sx(s.type,s.pendingProps,P.current),Yn=s,ii=!0,g=pn,ha(s.type)?(Fp=g,pn=Vr(h.firstChild)):pn=g),In(i,s,s.pendingProps.children,l),cf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&zt&&((g=h=pn)&&(h=PT(h,s.type,s.pendingProps,ii),h!==null?(s.stateNode=h,Yn=s,pn=Vr(h.firstChild),ii=!1,g=!0):g=!1),g||ka(s)),xe(s),g=s.type,b=s.pendingProps,O=i!==null?i.memoizedProps:null,h=b.children,Up(g,b)?h=null:O!==null&&Up(g,O)&&(s.flags|=32),s.memoizedState!==null&&(g=Dd(i,s,eT,null,null,l),au._currentValue=g),cf(i,s),In(i,s,h,l),s.child;case 6:return i===null&&zt&&((i=l=pn)&&(l=zT(l,s.pendingProps,ii),l!==null?(s.stateNode=l,Yn=s,pn=null,i=!0):i=!1),i||ka(s)),null;case 13:return nb(i,s,l);case 4:return le(s,s.stateNode.containerInfo),h=s.pendingProps,i===null?s.child=$s(s,null,h,l):In(i,s,h,l),s.child;case 11:return Y0(i,s,s.type,s.pendingProps,l);case 7:return In(i,s,s.pendingProps,l),s.child;case 8:return In(i,s,s.pendingProps.children,l),s.child;case 12:return In(i,s,s.pendingProps.children,l),s.child;case 10:return h=s.pendingProps,Ki(s,s.type,h.value),In(i,s,h.children,l),s.child;case 9:return g=s.type._context,h=s.pendingProps.children,Va(s),g=Vn(g),h=h(g),s.flags|=1,In(i,s,h,l),s.child;case 14:return Z0(i,s,s.type,s.pendingProps,l);case 15:return Q0(i,s,s.type,s.pendingProps,l);case 19:return ib(i,s,l);case 31:return h=s.pendingProps,l=s.mode,h={mode:h.mode,children:h.children},i===null?(l=ff(h,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=yi(i.child,h),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return K0(i,s,l);case 24:return Va(s),h=Vn(Cn),i===null?(g=Md(),g===null&&(g=Jt,b=wd(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),s.memoizedState={parent:h,cache:g},Sd(s),Ki(s,Cn,g)):((i.lanes&l)!==0&&(Ad(i,s),zl(s,null,null,l),Pl()),g=i.memoizedState,b=s.memoizedState,g.parent!==h?(g={parent:h,cache:h},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ki(s,Cn,h)):(h=b.cache,Ki(s,Cn,h),h!==g.cache&&_d(s,[Cn],l,!0))),In(i,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Si(i){i.flags|=4}function sb(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!px(s)){if(s=Ur.current,s!==null&&((Ot&4194048)===Ot?ai!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||s!==ai))throw Ul=Td,Vy;i.flags|=8192}}function hf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?vi():536870912,i.lanes|=s,ro|=s)}function jl(i,s){if(!zt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function cn(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(s)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,s}function uT(i,s,l){var h=s.pendingProps;switch(gd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(s),null;case 1:return cn(s),null;case 3:return l=s.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),wi(Cn),Te(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Al(s)?Si(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fy())),cn(s),null;case 26:return l=s.memoizedState,i===null?(Si(s),l!==null?(cn(s),sb(s,l)):(cn(s),s.flags&=-16777217)):l?l!==i.memoizedState?(Si(s),cn(s),sb(s,l)):(cn(s),s.flags&=-16777217):(i.memoizedProps!==h&&Si(s),cn(s),s.flags&=-16777217),null;case 27:Ae(s),l=P.current;var g=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==h&&Si(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return cn(s),null}i=H.current,Al(s)?Py(s):(i=sx(g,h,l),s.stateNode=i,Si(s))}return cn(s),null;case 5:if(Ae(s),l=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==h&&Si(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return cn(s),null}if(i=H.current,Al(s))Py(s);else{switch(g=Tf(P.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[dn]=s,i[Un]=h;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=i;e:switch(kn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Si(s)}}return cn(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==h&&Si(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(i=P.current,Al(s)){if(i=s.stateNode,l=s.memoizedProps,h=null,g=Yn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[dn]=s,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||$b(i.nodeValue,l)),i||ka(s)}else i=Tf(i).createTextNode(h),i[dn]=s,s.stateNode=i}return cn(s),null;case 13:if(h=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Al(s),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[dn]=s}else Rl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;cn(s),g=!1}else g=Fy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Mi(s),s):(Mi(s),null)}if(Mi(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=s.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048)}return l!==i&&l&&(s.child.flags|=8192),hf(s,s.updateQueue),cn(s),null;case 4:return Te(),i===null&&Cp(s.stateNode.containerInfo),cn(s),null;case 10:return wi(s.type),cn(s),null;case 19:if(D(Ln),g=s.memoizedState,g===null)return cn(s),null;if(h=(s.flags&128)!==0,b=g.rendering,b===null)if(h)jl(g,!1);else{if(vn!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(b=of(i),b!==null){for(s.flags|=128,jl(g,!1),i=b.updateQueue,s.updateQueue=i,hf(s,i),s.subtreeFlags=0,i=l,l=s.child;l!==null;)Uy(l,i),l=l.sibling;return B(Ln,Ln.current&1|2),s.child}i=i.sibling}g.tail!==null&&_t()>vf&&(s.flags|=128,h=!0,jl(g,!1),s.lanes=4194304)}else{if(!h)if(i=of(b),i!==null){if(s.flags|=128,h=!0,i=i.updateQueue,s.updateQueue=i,hf(s,i),jl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!zt)return cn(s),null}else 2*_t()-g.renderingStartTime>vf&&l!==536870912&&(s.flags|=128,h=!0,jl(g,!1),s.lanes=4194304);g.isBackwards?(b.sibling=s.child,s.child=b):(i=g.last,i!==null?i.sibling=b:s.child=b,g.last=b)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=_t(),s.sibling=null,i=Ln.current,B(Ln,h?i&1|2:i&1),s):(cn(s),null);case 22:case 23:return Mi(s),Od(),h=s.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(l&536870912)!==0&&(s.flags&128)===0&&(cn(s),s.subtreeFlags&6&&(s.flags|=8192)):cn(s),l=s.updateQueue,l!==null&&hf(s,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==l&&(s.flags|=2048),i!==null&&D(ja),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),wi(Cn),cn(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function cT(i,s){switch(gd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return wi(Cn),Te(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 13:if(Mi(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Rl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return D(Ln),null;case 4:return Te(),null;case 10:return wi(s.type),null;case 22:case 23:return Mi(s),Od(),i!==null&&D(ja),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return wi(Cn),null;case 25:return null;default:return null}}function ob(i,s){switch(gd(s),s.tag){case 3:wi(Cn),Te();break;case 26:case 27:case 5:Ae(s);break;case 4:Te();break;case 13:Mi(s);break;case 19:D(Ln);break;case 10:wi(s.type);break;case 22:case 23:Mi(s),Od(),i!==null&&D(ja);break;case 24:wi(Cn)}}function Wl(i,s){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var b=l.create,O=l.inst;h=b(),O.destroy=h}l=l.next}while(l!==g)}}catch(k){Yt(s,s.return,k)}}function ia(i,s,l){try{var h=s.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var b=g.next;h=b;do{if((h.tag&i)===i){var O=h.inst,k=O.destroy;if(k!==void 0){O.destroy=void 0,g=s;var ie=l,me=k;try{me()}catch(_e){Yt(g,ie,_e)}}}h=h.next}while(h!==b)}}catch(_e){Yt(s,s.return,_e)}}function lb(i){var s=i.updateQueue;if(s!==null){var l=i.stateNode;try{Zy(s,l)}catch(h){Yt(i,i.return,h)}}}function ub(i,s,l){l.props=qa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Yt(i,s,h)}}function ql(i,s){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Yt(i,s,g)}}function si(i,s){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Yt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Yt(i,s,g)}else l.current=null}function cb(i){var s=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Yt(i,i.return,g)}}function ap(i,s,l){try{var h=i.stateNode;OT(h,i.type,l,s),h[Un]=s}catch(g){Yt(i,i.return,g)}}function fb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ha(i.type)||i.tag===4}function sp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ha(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function op(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(i),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Mf));else if(h!==4&&(h===27&&ha(i.type)&&(l=i.stateNode,s=null),i=i.child,i!==null))for(op(i,s,l),i=i.sibling;i!==null;)op(i,s,l),i=i.sibling}function df(i,s,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(h!==4&&(h===27&&ha(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(df(i,s,l),i=i.sibling;i!==null;)df(i,s,l),i=i.sibling}function hb(i){var s=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);kn(s,h,l),s[dn]=i,s[Un]=l}catch(b){Yt(i,i.return,b)}}var Ai=!1,_n=!1,lp=!1,db=typeof WeakSet=="function"?WeakSet:Set,zn=null;function fT(i,s){if(i=i.containerInfo,Np=Of,i=My(i),sd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var O=0,k=-1,ie=-1,me=0,_e=0,Me=i,ge=null;t:for(;;){for(var ye;Me!==l||g!==0&&Me.nodeType!==3||(k=O+g),Me!==b||h!==0&&Me.nodeType!==3||(ie=O+h),Me.nodeType===3&&(O+=Me.nodeValue.length),(ye=Me.firstChild)!==null;)ge=Me,Me=ye;for(;;){if(Me===i)break t;if(ge===l&&++me===g&&(k=O),ge===b&&++_e===h&&(ie=O),(ye=Me.nextSibling)!==null)break;Me=ge,ge=Me.parentNode}Me=ye}l=k===-1||ie===-1?null:{start:k,end:ie}}else l=null}l=l||{start:0,end:0}}else l=null;for(Dp={focusedElem:i,selectionRange:l},Of=!1,zn=s;zn!==null;)if(s=zn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,zn=i;else for(;zn!==null;){switch(s=zn,b=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=s,g=b.memoizedProps,b=b.memoizedState,h=l.stateNode;try{var lt=qa(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(lt,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(nt){Yt(l,l.return,nt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,l=i.nodeType,l===9)Pp(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Pp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,zn=i;break}zn=s.return}}function pb(i,s,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:aa(i,l),h&4&&Wl(5,l);break;case 1:if(aa(i,l),h&4)if(i=l.stateNode,s===null)try{i.componentDidMount()}catch(O){Yt(l,l.return,O)}else{var g=qa(l.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(O){Yt(l,l.return,O)}}h&64&&lb(l),h&512&&ql(l,l.return);break;case 3:if(aa(i,l),h&64&&(i=l.updateQueue,i!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Zy(i,s)}catch(O){Yt(l,l.return,O)}}break;case 27:s===null&&h&4&&hb(l);case 26:case 5:aa(i,l),s===null&&h&4&&cb(l),h&512&&ql(l,l.return);break;case 12:aa(i,l);break;case 13:aa(i,l),h&4&&gb(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=xT.bind(null,l),FT(i,l))));break;case 22:if(h=l.memoizedState!==null||Ai,!h){s=s!==null&&s.memoizedState!==null||_n,g=Ai;var b=_n;Ai=h,(_n=s)&&!b?sa(i,l,(l.subtreeFlags&8772)!==0):aa(i,l),Ai=g,_n=b}break;case 30:break;default:aa(i,l)}}function vb(i){var s=i.alternate;s!==null&&(i.alternate=null,vb(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Sn(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var an=null,nr=!1;function Ri(i,s,l){for(l=l.child;l!==null;)mb(i,s,l),l=l.sibling}function mb(i,s,l){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Pe,l)}catch{}switch(l.tag){case 26:_n||si(l,s),Ri(i,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_n||si(l,s);var h=an,g=nr;ha(l.type)&&(an=l.stateNode,nr=!1),Ri(i,s,l),tu(l.stateNode),an=h,nr=g;break;case 5:_n||si(l,s);case 6:if(h=an,g=nr,an=null,Ri(i,s,l),an=h,nr=g,an!==null)if(nr)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(l.stateNode)}catch(b){Yt(l,s,b)}else try{an.removeChild(l.stateNode)}catch(b){Yt(l,s,b)}break;case 18:an!==null&&(nr?(i=an,ix(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),uu(i)):ix(an,l.stateNode));break;case 4:h=an,g=nr,an=l.stateNode.containerInfo,nr=!0,Ri(i,s,l),an=h,nr=g;break;case 0:case 11:case 14:case 15:_n||ia(2,l,s),_n||ia(4,l,s),Ri(i,s,l);break;case 1:_n||(si(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"&&ub(l,s,h)),Ri(i,s,l);break;case 21:Ri(i,s,l);break;case 22:_n=(h=_n)||l.memoizedState!==null,Ri(i,s,l),_n=h;break;default:Ri(i,s,l)}}function gb(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{uu(i)}catch(l){Yt(s,s.return,l)}}function hT(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new db),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new db),s;default:throw Error(r(435,i.tag))}}function up(i,s){var l=hT(i);s.forEach(function(h){var g=_T.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function pr(i,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],b=i,O=s,k=O;e:for(;k!==null;){switch(k.tag){case 27:if(ha(k.type)){an=k.stateNode,nr=!1;break e}break;case 5:an=k.stateNode,nr=!1;break e;case 3:case 4:an=k.stateNode.containerInfo,nr=!0;break e}k=k.return}if(an===null)throw Error(r(160));mb(b,O,g),an=null,nr=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)yb(s,i),s=s.sibling}var Hr=null;function yb(i,s){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pr(s,i),vr(i),h&4&&(ia(3,i,i.return),Wl(3,i),ia(5,i,i.return));break;case 1:pr(s,i),vr(i),h&512&&(_n||l===null||si(l,l.return)),h&64&&Ai&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Hr;if(pr(s,i),vr(i),h&512&&(_n||l===null||si(l,l.return)),h&4){var b=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":b=g.getElementsByTagName("title")[0],(!b||b[mi]||b[dn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(h),g.head.insertBefore(b,g.querySelector("head > title"))),kn(b,h,l),b[dn]=i,Re(b),h=b;break e;case"link":var O=hx("link","href",g).get(h+(l.href||""));if(O){for(var k=0;k<O.length;k++)if(b=O[k],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){O.splice(k,1);break t}}b=g.createElement(h),kn(b,h,l),g.head.appendChild(b);break;case"meta":if(O=hx("meta","content",g).get(h+(l.content||""))){for(k=0;k<O.length;k++)if(b=O[k],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){O.splice(k,1);break t}}b=g.createElement(h),kn(b,h,l),g.head.appendChild(b);break;default:throw Error(r(468,h))}b[dn]=i,Re(b),h=b}i.stateNode=h}else dx(g,i.type,i.stateNode);else i.stateNode=fx(g,h,i.memoizedProps);else b!==h?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,h===null?dx(g,i.type,i.stateNode):fx(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&ap(i,i.memoizedProps,l.memoizedProps)}break;case 27:pr(s,i),vr(i),h&512&&(_n||l===null||si(l,l.return)),l!==null&&h&4&&ap(i,i.memoizedProps,l.memoizedProps);break;case 5:if(pr(s,i),vr(i),h&512&&(_n||l===null||si(l,l.return)),i.flags&32){g=i.stateNode;try{ct(g,"")}catch(ye){Yt(i,i.return,ye)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,ap(i,g,l!==null?l.memoizedProps:g)),h&1024&&(lp=!0);break;case 6:if(pr(s,i),vr(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(ye){Yt(i,i.return,ye)}}break;case 3:if(Rf=null,g=Hr,Hr=Sf(s.containerInfo),pr(s,i),Hr=g,vr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{uu(s.containerInfo)}catch(ye){Yt(i,i.return,ye)}lp&&(lp=!1,bb(i));break;case 4:h=Hr,Hr=Sf(i.stateNode.containerInfo),pr(s,i),vr(i),Hr=h;break;case 12:pr(s,i),vr(i);break;case 13:pr(s,i),vr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(vp=_t()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,up(i,h)));break;case 22:g=i.memoizedState!==null;var ie=l!==null&&l.memoizedState!==null,me=Ai,_e=_n;if(Ai=me||g,_n=_e||ie,pr(s,i),_n=_e,Ai=me,vr(i),h&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(l===null||ie||Ai||_n||Xa(i)),l=null,s=i;;){if(s.tag===5||s.tag===26){if(l===null){ie=l=s;try{if(b=ie.stateNode,g)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{k=ie.stateNode;var Me=ie.memoizedProps.style,ge=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;k.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(ye){Yt(ie,ie.return,ye)}}}else if(s.tag===6){if(l===null){ie=s;try{ie.stateNode.nodeValue=g?"":ie.memoizedProps}catch(ye){Yt(ie,ie.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,up(i,l))));break;case 19:pr(s,i),vr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,up(i,h)));break;case 30:break;case 21:break;default:pr(s,i),vr(i)}}function vr(i){var s=i.flags;if(s&2){try{for(var l,h=i.return;h!==null;){if(fb(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,b=sp(i);df(i,b,g);break;case 5:var O=l.stateNode;l.flags&32&&(ct(O,""),l.flags&=-33);var k=sp(i);df(i,k,O);break;case 3:case 4:var ie=l.stateNode.containerInfo,me=sp(i);op(i,me,ie);break;default:throw Error(r(161))}}catch(_e){Yt(i,i.return,_e)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function bb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;bb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function aa(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)pb(i,s.alternate,s),s=s.sibling}function Xa(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ia(4,s,s.return),Xa(s);break;case 1:si(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&ub(s,s.return,l),Xa(s);break;case 27:tu(s.stateNode);case 26:case 5:si(s,s.return),Xa(s);break;case 22:s.memoizedState===null&&Xa(s);break;case 30:Xa(s);break;default:Xa(s)}i=i.sibling}}function sa(i,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,g=i,b=s,O=b.flags;switch(b.tag){case 0:case 11:case 15:sa(g,b,l),Wl(4,b);break;case 1:if(sa(g,b,l),h=b,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(me){Yt(h,h.return,me)}if(h=b,g=h.updateQueue,g!==null){var k=h.stateNode;try{var ie=g.shared.hiddenCallbacks;if(ie!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ie.length;g++)Yy(ie[g],k)}catch(me){Yt(h,h.return,me)}}l&&O&64&&lb(b),ql(b,b.return);break;case 27:hb(b);case 26:case 5:sa(g,b,l),l&&h===null&&O&4&&cb(b),ql(b,b.return);break;case 12:sa(g,b,l);break;case 13:sa(g,b,l),l&&O&4&&gb(g,b);break;case 22:b.memoizedState===null&&sa(g,b,l),ql(b,b.return);break;case 30:break;default:sa(g,b,l)}s=s.sibling}}function cp(i,s){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Ol(l))}function fp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ol(i))}function oi(i,s,l,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xb(i,s,l,h),s=s.sibling}function xb(i,s,l,h){var g=s.flags;switch(s.tag){case 0:case 11:case 15:oi(i,s,l,h),g&2048&&Wl(9,s);break;case 1:oi(i,s,l,h);break;case 3:oi(i,s,l,h),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ol(i)));break;case 12:if(g&2048){oi(i,s,l,h),i=s.stateNode;try{var b=s.memoizedProps,O=b.id,k=b.onPostCommit;typeof k=="function"&&k(O,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ie){Yt(s,s.return,ie)}}else oi(i,s,l,h);break;case 13:oi(i,s,l,h);break;case 23:break;case 22:b=s.stateNode,O=s.alternate,s.memoizedState!==null?b._visibility&2?oi(i,s,l,h):Xl(i,s):b._visibility&2?oi(i,s,l,h):(b._visibility|=2,eo(i,s,l,h,(s.subtreeFlags&10256)!==0)),g&2048&&cp(O,s);break;case 24:oi(i,s,l,h),g&2048&&fp(s.alternate,s);break;default:oi(i,s,l,h)}}function eo(i,s,l,h,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=i,O=s,k=l,ie=h,me=O.flags;switch(O.tag){case 0:case 11:case 15:eo(b,O,k,ie,g),Wl(8,O);break;case 23:break;case 22:var _e=O.stateNode;O.memoizedState!==null?_e._visibility&2?eo(b,O,k,ie,g):Xl(b,O):(_e._visibility|=2,eo(b,O,k,ie,g)),g&&me&2048&&cp(O.alternate,O);break;case 24:eo(b,O,k,ie,g),g&&me&2048&&fp(O.alternate,O);break;default:eo(b,O,k,ie,g)}s=s.sibling}}function Xl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=i,h=s,g=h.flags;switch(h.tag){case 22:Xl(l,h),g&2048&&cp(h.alternate,h);break;case 24:Xl(l,h),g&2048&&fp(h.alternate,h);break;default:Xl(l,h)}s=s.sibling}}var Yl=8192;function to(i){if(i.subtreeFlags&Yl)for(i=i.child;i!==null;)_b(i),i=i.sibling}function _b(i){switch(i.tag){case 26:to(i),i.flags&Yl&&i.memoizedState!==null&&KT(Hr,i.memoizedState,i.memoizedProps);break;case 5:to(i);break;case 3:case 4:var s=Hr;Hr=Sf(i.stateNode.containerInfo),to(i),Hr=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Yl,Yl=16777216,to(i),Yl=s):to(i));break;default:to(i)}}function wb(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Zl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];zn=h,Mb(h,i)}wb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Eb(i),i=i.sibling}function Eb(i){switch(i.tag){case 0:case 11:case 15:Zl(i),i.flags&2048&&ia(9,i,i.return);break;case 3:Zl(i);break;case 12:Zl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,pf(i)):Zl(i);break;default:Zl(i)}}function pf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var h=s[l];zn=h,Mb(h,i)}wb(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ia(8,s,s.return),pf(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,pf(s));break;default:pf(s)}i=i.sibling}}function Mb(i,s){for(;zn!==null;){var l=zn;switch(l.tag){case 0:case 11:case 15:ia(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ol(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,zn=h;else e:for(l=i;zn!==null;){h=zn;var g=h.sibling,b=h.return;if(vb(h),h===l){zn=null;break e}if(g!==null){g.return=b,zn=g;break e}zn=b}}}var dT={getCacheForType:function(i){var s=Vn(Cn),l=s.data.get(i);return l===void 0&&(l=i(),s.data.set(i,l)),l}},pT=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,St=null,Ot=0,kt=0,mr=null,oa=!1,no=!1,hp=!1,Ci=0,vn=0,la=0,Ya=0,dp=0,Br=0,ro=0,Ql=null,rr=null,pp=!1,vp=0,vf=1/0,mf=null,ua=null,Gn=0,ca=null,ao=null,so=0,mp=0,gp=null,Tb=null,Kl=0,yp=null;function gr(){if((Gt&2)!==0&&Ot!==0)return Ot&-Ot;if(N.T!==null){var i=qs;return i!==0?i:Tp()}return Bs()}function Sb(){Br===0&&(Br=(Ot&536870912)===0||zt?Sr():536870912);var i=Ur.current;return i!==null&&(i.flags|=32),Br}function yr(i,s,l){(i===Jt&&(kt===2||kt===9)||i.cancelPendingCommit!==null)&&(oo(i,0),fa(i,Ot,Br,!1)),$n(i,l),((Gt&2)===0||i!==Jt)&&(i===Jt&&((Gt&2)===0&&(Ya|=l),vn===4&&fa(i,Ot,Br,!1)),li(i))}function Ab(i,s,l){if((Gt&6)!==0)throw Error(r(327));var h=!l&&(s&124)===0&&(s&i.expiredLanes)===0||Jn(i,s),g=h?gT(i,s):_p(i,s,!0),b=h;do{if(g===0){no&&!h&&fa(i,s,0,!1);break}else{if(l=i.current.alternate,b&&!vT(l)){g=_p(i,s,!1),b=!1;continue}if(g===2){if(b=s,i.errorRecoveryDisabledLanes&b)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var k=i;g=Ql;var ie=k.current.memoizedState.isDehydrated;if(ie&&(oo(k,O).flags|=256),O=_p(k,O,!1),O!==2){if(hp&&!ie){k.errorRecoveryDisabledLanes|=b,Ya|=b,g=4;break e}b=rr,rr=g,b!==null&&(rr===null?rr=b:rr.push.apply(rr,b))}g=O}if(b=!1,g!==2)continue}}if(g===1){oo(i,0),fa(i,s,0,!0);break}e:{switch(h=i,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:fa(h,s,Br,!oa);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(g=vp+300-_t(),10<g)){if(fa(h,s,Br,!oa),Tr(h,0,!0)!==0)break e;h.timeoutHandle=nx(Rb.bind(null,h,l,rr,mf,pp,s,Br,Ya,ro,oa,b,2,-0,0),g);break e}Rb(h,l,rr,mf,pp,s,Br,Ya,ro,oa,b,0,-0,0)}}break}while(!0);li(i)}function Rb(i,s,l,h,g,b,O,k,ie,me,_e,Me,ge,ye){if(i.timeoutHandle=-1,Me=s.subtreeFlags,(Me&8192||(Me&16785408)===16785408)&&(iu={stylesheets:null,count:0,unsuspend:QT},_b(s),Me=JT(),Me!==null)){i.cancelPendingCommit=Me(Bb.bind(null,i,s,b,l,h,g,O,k,ie,_e,1,ge,ye)),fa(i,b,O,!me);return}Bb(i,s,b,l,h,g,O,k,ie)}function vT(i){for(var s=i;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],b=g.getSnapshot;g=g.value;try{if(!hr(b(),g))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fa(i,s,l,h){s&=~dp,s&=~Ya,i.suspendedLanes|=s,i.pingedLanes&=~s,h&&(i.warmLanes|=s),h=i.expirationTimes;for(var g=s;0<g;){var b=31-$e(g),O=1<<b;h[b]=-1,g&=~O}l!==0&&La(i,l,s)}function gf(){return(Gt&6)===0?(Jl(0),!1):!0}function bp(){if(St!==null){if(kt===0)var i=St.return;else i=St,_i=Ha=null,Pd(i),Js=null,Hl=0,i=St;for(;i!==null;)ob(i.alternate,i),i=i.return;St=null}}function oo(i,s){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,DT(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),bp(),Jt=i,St=l=yi(i.current,null),Ot=s,kt=0,mr=null,oa=!1,no=Jn(i,s),hp=!1,ro=Br=dp=Ya=la=vn=0,rr=Ql=null,pp=!1,(s&8)!==0&&(s|=s&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=s;0<h;){var g=31-$e(h),b=1<<g;s|=i[g],h&=~b}return Ci=s,Fc(),l}function Cb(i,s){Et=null,N.H=rf,s===Dl||s===Xc?(s=qy(),kt=3):s===Vy?(s=qy(),kt=4):kt=s===X0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mr=s,St===null&&(vn=1,uf(i,Lr(s,i.current)))}function Lb(){var i=N.H;return N.H=rf,i===null?rf:i}function Ob(){var i=N.A;return N.A=dT,i}function xp(){vn=4,oa||(Ot&4194048)!==Ot&&Ur.current!==null||(no=!0),(la&134217727)===0&&(Ya&134217727)===0||Jt===null||fa(Jt,Ot,Br,!1)}function _p(i,s,l){var h=Gt;Gt|=2;var g=Lb(),b=Ob();(Jt!==i||Ot!==s)&&(mf=null,oo(i,s)),s=!1;var O=vn;e:do try{if(kt!==0&&St!==null){var k=St,ie=mr;switch(kt){case 8:bp(),O=6;break e;case 3:case 2:case 9:case 6:Ur.current===null&&(s=!0);var me=kt;if(kt=0,mr=null,lo(i,k,ie,me),l&&no){O=0;break e}break;default:me=kt,kt=0,mr=null,lo(i,k,ie,me)}}mT(),O=vn;break}catch(_e){Cb(i,_e)}while(!0);return s&&i.shellSuspendCounter++,_i=Ha=null,Gt=h,N.H=g,N.A=b,St===null&&(Jt=null,Ot=0,Fc()),O}function mT(){for(;St!==null;)Nb(St)}function gT(i,s){var l=Gt;Gt|=2;var h=Lb(),g=Ob();Jt!==i||Ot!==s?(mf=null,vf=_t()+500,oo(i,s)):no=Jn(i,s);e:do try{if(kt!==0&&St!==null){s=St;var b=mr;t:switch(kt){case 1:kt=0,mr=null,lo(i,s,b,1);break;case 2:case 9:if(jy(b)){kt=0,mr=null,Db(s);break}s=function(){kt!==2&&kt!==9||Jt!==i||(kt=7),li(i)},b.then(s,s);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:jy(b)?(kt=0,mr=null,Db(s)):(kt=0,mr=null,lo(i,s,b,7));break;case 5:var O=null;switch(St.tag){case 26:O=St.memoizedState;case 5:case 27:var k=St;if(!O||px(O)){kt=0,mr=null;var ie=k.sibling;if(ie!==null)St=ie;else{var me=k.return;me!==null?(St=me,yf(me)):St=null}break t}}kt=0,mr=null,lo(i,s,b,5);break;case 6:kt=0,mr=null,lo(i,s,b,6);break;case 8:bp(),vn=6;break e;default:throw Error(r(462))}}yT();break}catch(_e){Cb(i,_e)}while(!0);return _i=Ha=null,N.H=h,N.A=g,Gt=l,St!==null?0:(Jt=null,Ot=0,Fc(),vn)}function yT(){for(;St!==null&&!Qe();)Nb(St)}function Nb(i){var s=ab(i.alternate,i,Ci);i.memoizedProps=i.pendingProps,s===null?yf(i):St=s}function Db(i){var s=i,l=s.alternate;switch(s.tag){case 15:case 0:s=$0(l,s,s.pendingProps,s.type,void 0,Ot);break;case 11:s=$0(l,s,s.pendingProps,s.type.render,s.ref,Ot);break;case 5:Pd(s);default:ob(l,s),s=St=Uy(s,Ci),s=ab(l,s,Ci)}i.memoizedProps=i.pendingProps,s===null?yf(i):St=s}function lo(i,s,l,h){_i=Ha=null,Pd(s),Js=null,Hl=0;var g=s.return;try{if(oT(i,g,s,l,Ot)){vn=1,uf(i,Lr(l,i.current)),St=null;return}}catch(b){if(g!==null)throw St=g,b;vn=1,uf(i,Lr(l,i.current)),St=null;return}s.flags&32768?(zt||h===1?i=!0:no||(Ot&536870912)!==0?i=!1:(oa=i=!0,(h===2||h===9||h===3||h===6)&&(h=Ur.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ub(s,i)):yf(s)}function yf(i){var s=i;do{if((s.flags&32768)!==0){Ub(s,oa);return}i=s.return;var l=uT(s.alternate,s,Ci);if(l!==null){St=l;return}if(s=s.sibling,s!==null){St=s;return}St=s=i}while(s!==null);vn===0&&(vn=5)}function Ub(i,s){do{var l=cT(i.alternate,i);if(l!==null){l.flags&=32767,St=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(i=i.sibling,i!==null)){St=i;return}St=i=l}while(i!==null);vn=6,St=null}function Bb(i,s,l,h,g,b,O,k,ie){i.cancelPendingCommit=null;do bf();while(Gn!==0);if((Gt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=fd,Ar(i,l,b,O,k,ie),i===Jt&&(St=Jt=null,Ot=0),ao=s,ca=i,so=l,mp=b,gp=g,Tb=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wT(on,function(){return Gb(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=N.T,N.T=null,g=$.p,$.p=2,O=Gt,Gt|=4;try{fT(i,s,l)}finally{Gt=O,$.p=g,N.T=h}}Gn=1,Pb(),zb(),Fb()}}function Pb(){if(Gn===1){Gn=0;var i=ca,s=ao,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=N.T,N.T=null;var h=$.p;$.p=2;var g=Gt;Gt|=4;try{yb(s,i);var b=Dp,O=My(i.containerInfo),k=b.focusedElem,ie=b.selectionRange;if(O!==k&&k&&k.ownerDocument&&Ey(k.ownerDocument.documentElement,k)){if(ie!==null&&sd(k)){var me=ie.start,_e=ie.end;if(_e===void 0&&(_e=me),"selectionStart"in k)k.selectionStart=me,k.selectionEnd=Math.min(_e,k.value.length);else{var Me=k.ownerDocument||document,ge=Me&&Me.defaultView||window;if(ge.getSelection){var ye=ge.getSelection(),lt=k.textContent.length,nt=Math.min(ie.start,lt),Xt=ie.end===void 0?nt:Math.min(ie.end,lt);!ye.extend&&nt>Xt&&(O=Xt,Xt=nt,nt=O);var de=wy(k,nt),ce=wy(k,Xt);if(de&&ce&&(ye.rangeCount!==1||ye.anchorNode!==de.node||ye.anchorOffset!==de.offset||ye.focusNode!==ce.node||ye.focusOffset!==ce.offset)){var ve=Me.createRange();ve.setStart(de.node,de.offset),ye.removeAllRanges(),nt>Xt?(ye.addRange(ve),ye.extend(ce.node,ce.offset)):(ve.setEnd(ce.node,ce.offset),ye.addRange(ve))}}}}for(Me=[],ye=k;ye=ye.parentNode;)ye.nodeType===1&&Me.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Me.length;k++){var we=Me[k];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Of=!!Np,Dp=Np=null}finally{Gt=g,$.p=h,N.T=l}}i.current=s,Gn=2}}function zb(){if(Gn===2){Gn=0;var i=ca,s=ao,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=N.T,N.T=null;var h=$.p;$.p=2;var g=Gt;Gt|=4;try{pb(i,s.alternate,s)}finally{Gt=g,$.p=h,N.T=l}}Gn=3}}function Fb(){if(Gn===4||Gn===3){Gn=0,dt();var i=ca,s=ao,l=so,h=Tb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gn=5:(Gn=0,ao=ca=null,Ib(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ua=null),Na(l),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Pe,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=N.T,g=$.p,$.p=2,N.T=null;try{for(var b=i.onRecoverableError,O=0;O<h.length;O++){var k=h[O];b(k.value,{componentStack:k.stack})}}finally{N.T=s,$.p=g}}(so&3)!==0&&bf(),li(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===yp?Kl++:(Kl=0,yp=i):Kl=0,Jl(0)}}function Ib(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ol(s)))}function bf(i){return Pb(),zb(),Fb(),Gb()}function Gb(){if(Gn!==5)return!1;var i=ca,s=mp;mp=0;var l=Na(so),h=N.T,g=$.p;try{$.p=32>l?32:l,N.T=null,l=gp,gp=null;var b=ca,O=so;if(Gn=0,ao=ca=null,so=0,(Gt&6)!==0)throw Error(r(331));var k=Gt;if(Gt|=4,Eb(b.current),xb(b,b.current,O,l),Gt=k,Jl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Pe,b)}catch{}return!0}finally{$.p=g,N.T=h,Ib(i,s)}}function kb(i,s,l){s=Lr(l,s),s=Qd(i.stateNode,s,2),i=ea(i,s,2),i!==null&&($n(i,2),li(i))}function Yt(i,s,l){if(i.tag===3)kb(i,i,l);else for(;s!==null;){if(s.tag===3){kb(s,i,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ua===null||!ua.has(h))){i=Lr(l,i),l=W0(2),h=ea(s,l,2),h!==null&&(q0(l,h,s,i),$n(h,2),li(h));break}}s=s.return}}function wp(i,s,l){var h=i.pingCache;if(h===null){h=i.pingCache=new pT;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(hp=!0,g.add(l),i=bT.bind(null,i,s,l),s.then(i,i))}function bT(i,s,l){var h=i.pingCache;h!==null&&h.delete(s),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Jt===i&&(Ot&l)===l&&(vn===4||vn===3&&(Ot&62914560)===Ot&&300>_t()-vp?(Gt&2)===0&&oo(i,0):dp|=l,ro===Ot&&(ro=0)),li(i)}function Hb(i,s){s===0&&(s=vi()),i=Hs(i,s),i!==null&&($n(i,s),li(i))}function xT(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Hb(i,l)}function _T(i,s){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),Hb(i,l)}function wT(i,s){return Ie(i,s)}var xf=null,uo=null,Ep=!1,_f=!1,Mp=!1,Za=0;function li(i){i!==uo&&i.next===null&&(uo===null?xf=uo=i:uo=uo.next=i),_f=!0,Ep||(Ep=!0,MT())}function Jl(i,s){if(!Mp&&_f){Mp=!0;do for(var l=!1,h=xf;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var b=0;else{var O=h.suspendedLanes,k=h.pingedLanes;b=(1<<31-$e(42|i)+1)-1,b&=g&~(O&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,qb(h,b))}else b=Ot,b=Tr(h,h===Jt?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Jn(h,b)||(l=!0,qb(h,b));h=h.next}while(l);Mp=!1}}function ET(){Vb()}function Vb(){_f=Ep=!1;var i=0;Za!==0&&(NT()&&(i=Za),Za=0);for(var s=_t(),l=null,h=xf;h!==null;){var g=h.next,b=jb(h,s);b===0?(h.next=null,l===null?xf=g:l.next=g,g===null&&(uo=l)):(l=h,(i!==0||(b&3)!==0)&&(_f=!0)),h=g}Jl(i)}function jb(i,s){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var O=31-$e(b),k=1<<O,ie=g[O];ie===-1?((k&l)===0||(k&h)!==0)&&(g[O]=Yi(k,s)):ie<=s&&(i.expiredLanes|=k),b&=~k}if(s=Jt,l=Ot,l=Tr(i,i===s?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===s&&(kt===2||kt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ht(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Jn(i,l)){if(s=l&-l,s===i.callbackPriority)return s;switch(h!==null&&ht(h),Na(l)){case 2:case 8:l=Kn;break;case 32:l=on;break;case 268435456:l=vt;break;default:l=on}return h=Wb.bind(null,i),l=Ie(l,h),i.callbackPriority=s,i.callbackNode=l,s}return h!==null&&h!==null&&ht(h),i.callbackPriority=2,i.callbackNode=null,2}function Wb(i,s){if(Gn!==0&&Gn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(bf()&&i.callbackNode!==l)return null;var h=Ot;return h=Tr(i,i===Jt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(Ab(i,h,s),jb(i,_t()),i.callbackNode!=null&&i.callbackNode===l?Wb.bind(null,i):null)}function qb(i,s){if(bf())return null;Ab(i,s,!0)}function MT(){UT(function(){(Gt&6)!==0?Ie(Ke,ET):Vb()})}function Tp(){return Za===0&&(Za=Sr()),Za}function Xb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:jt(""+i)}function Yb(i,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,i.id&&l.setAttribute("form",i.id),s.parentNode.insertBefore(l,s),i=new FormData(i),l.parentNode.removeChild(l),i}function TT(i,s,l,h,g){if(s==="submit"&&l&&l.stateNode===g){var b=Xb((g[Un]||null).action),O=h.submitter;O&&(s=(s=O[Un]||null)?Xb(s.formAction):O.getAttribute("formAction"),s!==null&&(b=s,O=null));var k=new Bc("action","action",null,h,g);i.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Za!==0){var ie=O?Yb(g,O):new FormData(g);Wd(l,{pending:!0,data:ie,method:g.method,action:b},null,ie)}}else typeof b=="function"&&(k.preventDefault(),ie=O?Yb(g,O):new FormData(g),Wd(l,{pending:!0,data:ie,method:g.method,action:b},b,ie))},currentTarget:g}]})}}for(var Sp=0;Sp<cd.length;Sp++){var Ap=cd[Sp],ST=Ap.toLowerCase(),AT=Ap[0].toUpperCase()+Ap.slice(1);kr(ST,"on"+AT)}kr(Ay,"onAnimationEnd"),kr(Ry,"onAnimationIteration"),kr(Cy,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(jM,"onTransitionRun"),kr(WM,"onTransitionStart"),kr(qM,"onTransitionCancel"),kr(Ly,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),Ve("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ve("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ve("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ve("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ve("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function Zb(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var b=void 0;if(s)for(var O=h.length-1;0<=O;O--){var k=h[O],ie=k.instance,me=k.currentTarget;if(k=k.listener,ie!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=me;try{b(g)}catch(_e){lf(_e)}g.currentTarget=null,b=ie}else for(O=0;O<h.length;O++){if(k=h[O],ie=k.instance,me=k.currentTarget,k=k.listener,ie!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=me;try{b(g)}catch(_e){lf(_e)}g.currentTarget=null,b=ie}}}}function At(i,s){var l=s[Da];l===void 0&&(l=s[Da]=new Set);var h=i+"__bubble";l.has(h)||(Qb(s,i,2,!1),l.add(h))}function Rp(i,s,l){var h=0;s&&(h|=4),Qb(l,i,h,s)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Cp(i){if(!i[wf]){i[wf]=!0,He.forEach(function(l){l!=="selectionchange"&&(RT.has(l)||Rp(l,!1,i),Rp(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[wf]||(s[wf]=!0,Rp("selectionchange",!1,s))}}function Qb(i,s,l,h){switch(xx(s)){case 2:var g=tS;break;case 8:g=nS;break;default:g=Vp}l=g.bind(null,s,l,i),g=void 0,!Kh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(s,l,{capture:!0,passive:g}):i.addEventListener(s,l,!0):g!==void 0?i.addEventListener(s,l,{passive:g}):i.addEventListener(s,l,!1)}function Lp(i,s,l,h,g){var b=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var k=h.stateNode.containerInfo;if(k===g)break;if(O===4)for(O=h.return;O!==null;){var ie=O.tag;if((ie===3||ie===4)&&O.stateNode.containerInfo===g)return;O=O.return}for(;k!==null;){if(O=V(k),O===null)return;if(ie=O.tag,ie===5||ie===6||ie===26||ie===27){h=b=O;continue e}k=k.parentNode}}h=h.return}ry(function(){var me=b,_e=nn(l),Me=[];e:{var ge=Oy.get(i);if(ge!==void 0){var ye=Bc,lt=i;switch(i){case"keypress":if(Dc(l)===0)break e;case"keydown":case"keyup":ye=wM;break;case"focusin":lt="focus",ye=td;break;case"focusout":lt="blur",ye=td;break;case"beforeblur":case"afterblur":ye=td;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=cM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=TM;break;case Ay:case Ry:case Cy:ye=dM;break;case Ly:ye=AM;break;case"scroll":case"scrollend":ye=lM;break;case"wheel":ye=CM;break;case"copy":case"cut":case"paste":ye=vM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=ly;break;case"toggle":case"beforetoggle":ye=OM}var nt=(s&4)!==0,Xt=!nt&&(i==="scroll"||i==="scrollend"),de=nt?ge!==null?ge+"Capture":null:ge;nt=[];for(var ce=me,ve;ce!==null;){var we=ce;if(ve=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ve===null||de===null||(we=yl(ce,de),we!=null&&nt.push(eu(ce,we,ve))),Xt)break;ce=ce.return}0<nt.length&&(ge=new ye(ge,lt,null,l,_e),Me.push({event:ge,listeners:nt}))}}if((s&7)===0){e:{if(ge=i==="mouseover"||i==="pointerover",ye=i==="mouseout"||i==="pointerout",ge&&l!==tn&&(lt=l.relatedTarget||l.fromElement)&&(V(lt)||lt[Gr]))break e;if((ye||ge)&&(ge=_e.window===_e?_e:(ge=_e.ownerDocument)?ge.defaultView||ge.parentWindow:window,ye?(lt=l.relatedTarget||l.toElement,ye=me,lt=lt?V(lt):null,lt!==null&&(Xt=o(lt),nt=lt.tag,lt!==Xt||nt!==5&&nt!==27&&nt!==6)&&(lt=null)):(ye=null,lt=me),ye!==lt)){if(nt=sy,we="onMouseLeave",de="onMouseEnter",ce="mouse",(i==="pointerout"||i==="pointerover")&&(nt=ly,we="onPointerLeave",de="onPointerEnter",ce="pointer"),Xt=ye==null?ge:ue(ye),ve=lt==null?ge:ue(lt),ge=new nt(we,ce+"leave",ye,l,_e),ge.target=Xt,ge.relatedTarget=ve,we=null,V(_e)===me&&(nt=new nt(de,ce+"enter",lt,l,_e),nt.target=ve,nt.relatedTarget=Xt,we=nt),Xt=we,ye&&lt)t:{for(nt=ye,de=lt,ce=0,ve=nt;ve;ve=co(ve))ce++;for(ve=0,we=de;we;we=co(we))ve++;for(;0<ce-ve;)nt=co(nt),ce--;for(;0<ve-ce;)de=co(de),ve--;for(;ce--;){if(nt===de||de!==null&&nt===de.alternate)break t;nt=co(nt),de=co(de)}nt=null}else nt=null;ye!==null&&Kb(Me,ge,ye,nt,!1),lt!==null&&Xt!==null&&Kb(Me,Xt,lt,nt,!0)}}e:{if(ge=me?ue(me):window,ye=ge.nodeName&&ge.nodeName.toLowerCase(),ye==="select"||ye==="input"&&ge.type==="file")var Ge=my;else if(py(ge))if(gy)Ge=kM;else{Ge=IM;var Mt=FM}else ye=ge.nodeName,!ye||ye.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?me&&en(me.elementType)&&(Ge=my):Ge=GM;if(Ge&&(Ge=Ge(i,me))){vy(Me,Ge,l,_e);break e}Mt&&Mt(i,ge,me),i==="focusout"&&me&&ge.type==="number"&&me.memoizedProps.value!=null&&ft(ge,"number",ge.value)}switch(Mt=me?ue(me):window,i){case"focusin":(py(Mt)||Mt.contentEditable==="true")&&(Is=Mt,od=me,Sl=null);break;case"focusout":Sl=od=Is=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,Ty(Me,l,_e);break;case"selectionchange":if(VM)break;case"keydown":case"keyup":Ty(Me,l,_e)}var We;if(rd)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Fs?hy(i,l)&&(rt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(uy&&l.locale!=="ko"&&(Fs||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Fs&&(We=iy()):(Qi=_e,Jh="value"in Qi?Qi.value:Qi.textContent,Fs=!0)),Mt=Ef(me,rt),0<Mt.length&&(rt=new oy(rt,i,null,l,_e),Me.push({event:rt,listeners:Mt}),We?rt.data=We:(We=dy(l),We!==null&&(rt.data=We)))),(We=DM?UM(i,l):BM(i,l))&&(rt=Ef(me,"onBeforeInput"),0<rt.length&&(Mt=new oy("onBeforeInput","beforeinput",null,l,_e),Me.push({event:Mt,listeners:rt}),Mt.data=We)),TT(Me,i,me,l,_e)}Zb(Me,s)})}function eu(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Ef(i,s){for(var l=s+"Capture",h=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=yl(i,l),g!=null&&h.unshift(eu(i,g,b)),g=yl(i,s),g!=null&&h.push(eu(i,g,b))),i.tag===3)return h;i=i.return}return[]}function co(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Kb(i,s,l,h,g){for(var b=s._reactName,O=[];l!==null&&l!==h;){var k=l,ie=k.alternate,me=k.stateNode;if(k=k.tag,ie!==null&&ie===h)break;k!==5&&k!==26&&k!==27||me===null||(ie=me,g?(me=yl(l,b),me!=null&&O.unshift(eu(l,me,ie))):g||(me=yl(l,b),me!=null&&O.push(eu(l,me,ie)))),l=l.return}O.length!==0&&i.push({event:s,listeners:O})}var CT=/\r\n?/g,LT=/\u0000|\uFFFD/g;function Jb(i){return(typeof i=="string"?i:""+i).replace(CT,`
`).replace(LT,"")}function $b(i,s){return s=Jb(s),Jb(i)===s}function Mf(){}function qt(i,s,l,h,g,b){switch(l){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||ct(i,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&ct(i,""+h);break;case"className":Vt(i,"class",h);break;case"tabIndex":Vt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(i,l,h);break;case"style":Ct(i,h,b);break;case"data":if(s!=="object"){Vt(i,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=jt(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(s!=="input"&&qt(i,s,"name",g.name,g,null),qt(i,s,"formEncType",g.formEncType,g,null),qt(i,s,"formMethod",g.formMethod,g,null),qt(i,s,"formTarget",g.formTarget,g,null)):(qt(i,s,"encType",g.encType,g,null),qt(i,s,"method",g.method,g,null),qt(i,s,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=jt(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Mf);break;case"onScroll":h!=null&&At("scroll",i);break;case"onScrollEnd":h!=null&&At("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=jt(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":At("beforetoggle",i),At("toggle",i),Ht(i,"popover",h);break;case"xlinkActuate":et(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":et(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":et(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":et(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":et(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":et(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":et(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":et(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":et(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ht(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=un.get(l)||l,Ht(i,l,h))}}function Op(i,s,l,h,g,b){switch(l){case"style":Ct(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?ct(i,h):(typeof h=="number"||typeof h=="bigint")&&ct(i,""+h);break;case"onScroll":h!=null&&At("scroll",i);break;case"onScrollEnd":h!=null&&At("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yt.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),s=l.slice(2,g?l.length-7:void 0),b=i[Un]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(s,b,g),typeof h=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(s,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Ht(i,l,h)}}}function kn(i,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",i),At("load",i);var h=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var O=l[b];if(O!=null)switch(b){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:qt(i,s,b,O,l,null)}}g&&qt(i,s,"srcSet",l.srcSet,l,null),h&&qt(i,s,"src",l.src,l,null);return;case"input":At("invalid",i);var k=b=O=g=null,ie=null,me=null;for(h in l)if(l.hasOwnProperty(h)){var _e=l[h];if(_e!=null)switch(h){case"name":g=_e;break;case"type":O=_e;break;case"checked":ie=_e;break;case"defaultChecked":me=_e;break;case"value":b=_e;break;case"defaultValue":k=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,s));break;default:qt(i,s,h,_e,l,null)}}Je(i,b,k,ie,me,O,g,!1),Y(i);return;case"select":At("invalid",i),h=O=b=null;for(g in l)if(l.hasOwnProperty(g)&&(k=l[g],k!=null))switch(g){case"value":b=k;break;case"defaultValue":O=k;break;case"multiple":h=k;default:qt(i,s,g,k,l,null)}s=b,l=O,i.multiple=!!h,s!=null?ze(i,!!h,s,!1):l!=null&&ze(i,!!h,l,!0);return;case"textarea":At("invalid",i),b=g=h=null;for(O in l)if(l.hasOwnProperty(O)&&(k=l[O],k!=null))switch(O){case"value":h=k;break;case"defaultValue":g=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:qt(i,s,O,k,l,null)}Tt(i,h,g,b),Y(i);return;case"option":for(ie in l)if(l.hasOwnProperty(ie)&&(h=l[ie],h!=null))switch(ie){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:qt(i,s,ie,h,l,null)}return;case"dialog":At("beforetoggle",i),At("toggle",i),At("cancel",i),At("close",i);break;case"iframe":case"object":At("load",i);break;case"video":case"audio":for(h=0;h<$l.length;h++)At($l[h],i);break;case"image":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"embed":case"source":case"link":At("error",i),At("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in l)if(l.hasOwnProperty(me)&&(h=l[me],h!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:qt(i,s,me,h,l,null)}return;default:if(en(s)){for(_e in l)l.hasOwnProperty(_e)&&(h=l[_e],h!==void 0&&Op(i,s,_e,h,l,void 0));return}}for(k in l)l.hasOwnProperty(k)&&(h=l[k],h!=null&&qt(i,s,k,h,l,null))}function OT(i,s,l,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,O=null,k=null,ie=null,me=null,_e=null;for(ye in l){var Me=l[ye];if(l.hasOwnProperty(ye)&&Me!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":ie=Me;default:h.hasOwnProperty(ye)||qt(i,s,ye,null,h,Me)}}for(var ge in h){var ye=h[ge];if(Me=l[ge],h.hasOwnProperty(ge)&&(ye!=null||Me!=null))switch(ge){case"type":b=ye;break;case"name":g=ye;break;case"checked":me=ye;break;case"defaultChecked":_e=ye;break;case"value":O=ye;break;case"defaultValue":k=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,s));break;default:ye!==Me&&qt(i,s,ge,ye,h,Me)}}Le(i,O,k,ie,me,_e,b,g);return;case"select":ye=O=k=ge=null;for(b in l)if(ie=l[b],l.hasOwnProperty(b)&&ie!=null)switch(b){case"value":break;case"multiple":ye=ie;default:h.hasOwnProperty(b)||qt(i,s,b,null,h,ie)}for(g in h)if(b=h[g],ie=l[g],h.hasOwnProperty(g)&&(b!=null||ie!=null))switch(g){case"value":ge=b;break;case"defaultValue":k=b;break;case"multiple":O=b;default:b!==ie&&qt(i,s,g,b,h,ie)}s=k,l=O,h=ye,ge!=null?ze(i,!!l,ge,!1):!!h!=!!l&&(s!=null?ze(i,!!l,s,!0):ze(i,!!l,l?[]:"",!1));return;case"textarea":ye=ge=null;for(k in l)if(g=l[k],l.hasOwnProperty(k)&&g!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:qt(i,s,k,null,h,g)}for(O in h)if(g=h[O],b=l[O],h.hasOwnProperty(O)&&(g!=null||b!=null))switch(O){case"value":ge=g;break;case"defaultValue":ye=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&qt(i,s,O,g,h,b)}at(i,ge,ye);return;case"option":for(var lt in l)if(ge=l[lt],l.hasOwnProperty(lt)&&ge!=null&&!h.hasOwnProperty(lt))switch(lt){case"selected":i.selected=!1;break;default:qt(i,s,lt,null,h,ge)}for(ie in h)if(ge=h[ie],ye=l[ie],h.hasOwnProperty(ie)&&ge!==ye&&(ge!=null||ye!=null))switch(ie){case"selected":i.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:qt(i,s,ie,ge,h,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in l)ge=l[nt],l.hasOwnProperty(nt)&&ge!=null&&!h.hasOwnProperty(nt)&&qt(i,s,nt,null,h,ge);for(me in h)if(ge=h[me],ye=l[me],h.hasOwnProperty(me)&&ge!==ye&&(ge!=null||ye!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,s));break;default:qt(i,s,me,ge,h,ye)}return;default:if(en(s)){for(var Xt in l)ge=l[Xt],l.hasOwnProperty(Xt)&&ge!==void 0&&!h.hasOwnProperty(Xt)&&Op(i,s,Xt,void 0,h,ge);for(_e in h)ge=h[_e],ye=l[_e],!h.hasOwnProperty(_e)||ge===ye||ge===void 0&&ye===void 0||Op(i,s,_e,ge,h,ye);return}}for(var de in l)ge=l[de],l.hasOwnProperty(de)&&ge!=null&&!h.hasOwnProperty(de)&&qt(i,s,de,null,h,ge);for(Me in h)ge=h[Me],ye=l[Me],!h.hasOwnProperty(Me)||ge===ye||ge==null&&ye==null||qt(i,s,Me,ge,h,ye)}var Np=null,Dp=null;function Tf(i){return i.nodeType===9?i:i.ownerDocument}function ex(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tx(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Up(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bp=null;function NT(){var i=window.event;return i&&i.type==="popstate"?i===Bp?!1:(Bp=i,!0):(Bp=null,!1)}var nx=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,rx=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof rx<"u"?function(i){return rx.resolve(null).then(i).catch(BT)}:nx;function BT(i){setTimeout(function(){throw i})}function ha(i){return i==="head"}function ix(i,s){var l=s,h=0,g=0;do{var b=l.nextSibling;if(i.removeChild(l),b&&b.nodeType===8)if(l=b.data,l==="/$"){if(0<h&&8>h){l=h;var O=i.ownerDocument;if(l&1&&tu(O.documentElement),l&2&&tu(O.body),l&4)for(l=O.head,tu(l),O=l.firstChild;O;){var k=O.nextSibling,ie=O.nodeName;O[mi]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&O.rel.toLowerCase()==="stylesheet"||l.removeChild(O),O=k}}if(g===0){i.removeChild(b),uu(s);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=b}while(l);uu(s)}function Pp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Pp(l),Sn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function PT(i,s,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[mi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Vr(i.nextSibling),i===null)break}return null}function zT(i,s,l){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Vr(i.nextSibling),i===null))return null;return i}function zp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function FT(i,s){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")s();else{var h=function(){s(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Vr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Fp=null;function ax(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}function sx(i,s,l){switch(s=Tf(l),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function tu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Sn(i)}var Pr=new Map,ox=new Set;function Sf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Li=$.d;$.d={f:IT,r:GT,D:kT,C:HT,L:VT,m:jT,X:qT,S:WT,M:XT};function IT(){var i=Li.f(),s=gf();return i||s}function GT(i){var s=re(i);s!==null&&s.tag===5&&s.type==="form"?A0(s):Li.r(i)}var fo=typeof document>"u"?null:document;function lx(i,s,l){var h=fo;if(h&&typeof s=="string"&&s){var g=Ee(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),ox.has(g)||(ox.add(g),i={rel:i,crossOrigin:l,href:s},h.querySelector(g)===null&&(s=h.createElement("link"),kn(s,"link",i),Re(s),h.head.appendChild(s)))}}function kT(i){Li.D(i),lx("dns-prefetch",i,null)}function HT(i,s){Li.C(i,s),lx("preconnect",i,s)}function VT(i,s,l){Li.L(i,s,l);var h=fo;if(h&&i&&s){var g='link[rel="preload"][as="'+Ee(s)+'"]';s==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ee(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ee(l.imageSizes)+'"]')):g+='[href="'+Ee(i)+'"]';var b=g;switch(s){case"style":b=ho(i);break;case"script":b=po(i)}Pr.has(b)||(i=p({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:i,as:s},l),Pr.set(b,i),h.querySelector(g)!==null||s==="style"&&h.querySelector(nu(b))||s==="script"&&h.querySelector(ru(b))||(s=h.createElement("link"),kn(s,"link",i),Re(s),h.head.appendChild(s)))}}function jT(i,s){Li.m(i,s);var l=fo;if(l&&i){var h=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Ee(h)+'"][href="'+Ee(i)+'"]',b=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=po(i)}if(!Pr.has(b)&&(i=p({rel:"modulepreload",href:i},s),Pr.set(b,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ru(b)))return}h=l.createElement("link"),kn(h,"link",i),Re(h),l.head.appendChild(h)}}}function WT(i,s,l){Li.S(i,s,l);var h=fo;if(h&&i){var g=Se(h).hoistableStyles,b=ho(i);s=s||"default";var O=g.get(b);if(!O){var k={loading:0,preload:null};if(O=h.querySelector(nu(b)))k.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":s},l),(l=Pr.get(b))&&Ip(i,l);var ie=O=h.createElement("link");Re(ie),kn(ie,"link",i),ie._p=new Promise(function(me,_e){ie.onload=me,ie.onerror=_e}),ie.addEventListener("load",function(){k.loading|=1}),ie.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Af(O,s,h)}O={type:"stylesheet",instance:O,count:1,state:k},g.set(b,O)}}}function qT(i,s){Li.X(i,s);var l=fo;if(l&&i){var h=Se(l).hoistableScripts,g=po(i),b=h.get(g);b||(b=l.querySelector(ru(g)),b||(i=p({src:i,async:!0},s),(s=Pr.get(g))&&Gp(i,s),b=l.createElement("script"),Re(b),kn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function XT(i,s){Li.M(i,s);var l=fo;if(l&&i){var h=Se(l).hoistableScripts,g=po(i),b=h.get(g);b||(b=l.querySelector(ru(g)),b||(i=p({src:i,async:!0,type:"module"},s),(s=Pr.get(g))&&Gp(i,s),b=l.createElement("script"),Re(b),kn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(g,b))}}function ux(i,s,l,h){var g=(g=P.current)?Sf(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ho(l.href),l=Se(g).hoistableStyles,h=l.get(s),h||(h={type:"style",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=ho(l.href);var b=Se(g).hoistableStyles,O=b.get(i);if(O||(g=g.ownerDocument||g,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,O),(b=g.querySelector(nu(i)))&&!b._p&&(O.instance=b,O.state.loading=5),Pr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pr.set(i,l),b||YT(g,i,l,O.state))),s&&h===null)throw Error(r(528,""));return O}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=po(l),l=Se(g).hoistableScripts,h=l.get(s),h||(h={type:"script",instance:null,count:0,state:null},l.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ho(i){return'href="'+Ee(i)+'"'}function nu(i){return'link[rel="stylesheet"]['+i+"]"}function cx(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function YT(i,s,l,h){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=i.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),kn(s,"link",l),Re(s),i.head.appendChild(s))}function po(i){return'[src="'+Ee(i)+'"]'}function ru(i){return"script[async]"+i}function fx(i,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var h=i.querySelector('style[data-href~="'+Ee(l.href)+'"]');if(h)return s.instance=h,Re(h),h;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Re(h),kn(h,"style",g),Af(h,l.precedence,i),s.instance=h;case"stylesheet":g=ho(l.href);var b=i.querySelector(nu(g));if(b)return s.state.loading|=4,s.instance=b,Re(b),b;h=cx(l),(g=Pr.get(g))&&Ip(h,g),b=(i.ownerDocument||i).createElement("link"),Re(b);var O=b;return O._p=new Promise(function(k,ie){O.onload=k,O.onerror=ie}),kn(b,"link",h),s.state.loading|=4,Af(b,l.precedence,i),s.instance=b;case"script":return b=po(l.src),(g=i.querySelector(ru(b)))?(s.instance=g,Re(g),g):(h=l,(g=Pr.get(b))&&(h=p({},l),Gp(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Re(g),kn(g,"link",h),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Af(h,l.precedence,i));return s.instance}function Af(i,s,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,b=g,O=0;O<h.length;O++){var k=h[O];if(k.dataset.precedence===s)b=k;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(i,s.firstChild))}function Ip(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Gp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Rf=null;function hx(i,s,l){if(Rf===null){var h=new Map,g=Rf=new Map;g.set(l,h)}else g=Rf,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var b=l[g];if(!(b[mi]||b[dn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(s)||"";O=i+O;var k=h.get(O);k?k.push(b):h.set(O,[b])}}return h}function dx(i,s,l){i=i.ownerDocument||i,i.head.insertBefore(l,s==="title"?i.querySelector("head > title"):null)}function ZT(i,s,l){if(l===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function px(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var iu=null;function QT(){}function KT(i,s,l){if(iu===null)throw Error(r(475));var h=iu;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=ho(l.href),b=i.querySelector(nu(g));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Cf.bind(h),i.then(h,h)),s.state.loading|=4,s.instance=b,Re(b);return}b=i.ownerDocument||i,l=cx(l),(g=Pr.get(g))&&Ip(l,g),b=b.createElement("link"),Re(b);var O=b;O._p=new Promise(function(k,ie){O.onload=k,O.onerror=ie}),kn(b,"link",l),s.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=Cf.bind(h),i.addEventListener("load",s),i.addEventListener("error",s))}}function JT(){if(iu===null)throw Error(r(475));var i=iu;return i.stylesheets&&i.count===0&&kp(i,i.stylesheets),0<i.count?function(s){var l=setTimeout(function(){if(i.stylesheets&&kp(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Cf(){if(this.count--,this.count===0){if(this.stylesheets)kp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Lf=null;function kp(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Lf=new Map,s.forEach($T,i),Lf=null,Cf.call(i))}function $T(i,s){if(!(s.state.loading&4)){var l=Lf.get(i);if(l)var h=l.get(null);else{l=new Map,Lf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var O=g[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(l.set(O.dataset.precedence,O),h=O)}h&&l.set(null,h)}g=s.instance,O=g.getAttribute("data-precedence"),b=l.get(O)||h,b===h&&l.set(null,g),l.set(O,g),this.count++,h=Cf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var au={$$typeof:C,Provider:null,Consumer:null,_currentValue:x,_currentValue2:x,_threadCount:0};function eS(i,s,l,h,g,b,O,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.hiddenUpdates=yn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function vx(i,s,l,h,g,b,O,k,ie,me,_e,Me){return i=new eS(i,s,l,O,k,ie,me,Me),s=1,b===!0&&(s|=24),b=dr(3,null,null,s),i.current=b,b.stateNode=i,s=wd(),s.refCount++,i.pooledCache=s,s.refCount++,b.memoizedState={element:h,isDehydrated:l,cache:s},Sd(b),i}function mx(i){return i?(i=Vs,i):Vs}function gx(i,s,l,h,g,b){g=mx(g),h.context===null?h.context=g:h.pendingContext=g,h=$i(s),h.payload={element:l},b=b===void 0?null:b,b!==null&&(h.callback=b),l=ea(i,h,s),l!==null&&(yr(l,i,s),Bl(l,i,s))}function yx(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function Hp(i,s){yx(i,s),(i=i.alternate)&&yx(i,s)}function bx(i){if(i.tag===13){var s=Hs(i,67108864);s!==null&&yr(s,i,67108864),Hp(i,67108864)}}var Of=!0;function tS(i,s,l,h){var g=N.T;N.T=null;var b=$.p;try{$.p=2,Vp(i,s,l,h)}finally{$.p=b,N.T=g}}function nS(i,s,l,h){var g=N.T;N.T=null;var b=$.p;try{$.p=8,Vp(i,s,l,h)}finally{$.p=b,N.T=g}}function Vp(i,s,l,h){if(Of){var g=jp(h);if(g===null)Lp(i,s,h,Nf,l),_x(i,h);else if(iS(g,i,s,l,h))h.stopPropagation();else if(_x(i,h),s&4&&-1<rS.indexOf(i)){for(;g!==null;){var b=re(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=rn(b.pendingLanes);if(O!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;O;){var ie=1<<31-$e(O);k.entanglements[1]|=ie,O&=~ie}li(b),(Gt&6)===0&&(vf=_t()+500,Jl(0))}}break;case 13:k=Hs(b,2),k!==null&&yr(k,b,2),gf(),Hp(b,2)}if(b=jp(h),b===null&&Lp(i,s,h,Nf,l),b===g)break;g=b}g!==null&&h.stopPropagation()}else Lp(i,s,h,null,l)}}function jp(i){return i=nn(i),Wp(i)}var Nf=null;function Wp(i){if(Nf=null,i=V(i),i!==null){var s=o(i);if(s===null)i=null;else{var l=s.tag;if(l===13){if(i=u(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Nf=i,null}function xx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case Ke:return 2;case Kn:return 8;case on:case hn:return 32;case vt:return 268435456;default:return 32}default:return 32}}var qp=!1,da=null,pa=null,va=null,su=new Map,ou=new Map,ma=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _x(i,s){switch(i){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":su.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(s.pointerId)}}function lu(i,s,l,h,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:b,targetContainers:[g]},s!==null&&(s=re(s),s!==null&&bx(s)),i):(i.eventSystemFlags|=h,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function iS(i,s,l,h,g){switch(s){case"focusin":return da=lu(da,i,s,l,h,g),!0;case"dragenter":return pa=lu(pa,i,s,l,h,g),!0;case"mouseover":return va=lu(va,i,s,l,h,g),!0;case"pointerover":var b=g.pointerId;return su.set(b,lu(su.get(b)||null,i,s,l,h,g)),!0;case"gotpointercapture":return b=g.pointerId,ou.set(b,lu(ou.get(b)||null,i,s,l,h,g)),!0}return!1}function wx(i){var s=V(i.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){i.blockedOn=s,Ps(i.priority,function(){if(l.tag===13){var h=gr();h=Oa(h);var g=Hs(l,h);g!==null&&yr(g,l,h),Hp(l,h)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Df(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=jp(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);tn=h,l.target.dispatchEvent(h),tn=null}else return s=re(l),s!==null&&bx(s),i.blockedOn=l,!1;s.shift()}return!0}function Ex(i,s,l){Df(i)&&l.delete(s)}function aS(){qp=!1,da!==null&&Df(da)&&(da=null),pa!==null&&Df(pa)&&(pa=null),va!==null&&Df(va)&&(va=null),su.forEach(Ex),ou.forEach(Ex)}function Uf(i,s){i.blockedOn===s&&(i.blockedOn=null,qp||(qp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aS)))}var Bf=null;function Mx(i){Bf!==i&&(Bf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bf===i&&(Bf=null);for(var s=0;s<i.length;s+=3){var l=i[s],h=i[s+1],g=i[s+2];if(typeof h!="function"){if(Wp(h||l)===null)continue;break}var b=re(l);b!==null&&(i.splice(s,3),s-=3,Wd(b,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function uu(i){function s(ie){return Uf(ie,i)}da!==null&&Uf(da,i),pa!==null&&Uf(pa,i),va!==null&&Uf(va,i),su.forEach(s),ou.forEach(s);for(var l=0;l<ma.length;l++){var h=ma[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ma.length&&(l=ma[0],l.blockedOn===null);)wx(l),l.blockedOn===null&&ma.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],b=l[h+1],O=g[Un]||null;if(typeof b=="function")O||Mx(l);else if(O){var k=null;if(b&&b.hasAttribute("formAction")){if(g=b,O=b[Un]||null)k=O.formAction;else if(Wp(g)!==null)continue}else k=O.action;typeof k=="function"?l[h+1]=k:(l.splice(h,3),h-=3),Mx(l)}}}function Xp(i){this._internalRoot=i}Pf.prototype.render=Xp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,h=gr();gx(l,h,i,s,null,null)},Pf.prototype.unmount=Xp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;gx(i.current,2,null,i,null,null),gf(),s[Gr]=null}};function Pf(i){this._internalRoot=i}Pf.prototype.unstable_scheduleHydration=function(i){if(i){var s=Bs();i={blockedOn:null,target:i,priority:s};for(var l=0;l<ma.length&&s!==0&&s<ma[l].priority;l++);ma.splice(l,0,i),l===0&&wx(i)}};var Tx=t.version;if(Tx!=="19.1.0")throw Error(r(527,Tx,"19.1.0"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(s),i=i!==null?d(i):null,i=i===null?null:i.stateNode,i};var sS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zf.isDisabled&&zf.supportsFiber)try{Pe=zf.inject(sS),Fe=zf}catch{}}return fu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var l=!1,h="",g=k0,b=H0,O=V0,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=vx(i,1,!1,null,null,l,h,g,b,O,k,null),i[Gr]=s.current,Cp(i),new Xp(s)},fu.hydrateRoot=function(i,s,l){if(!a(i))throw Error(r(299));var h=!1,g="",b=k0,O=H0,k=V0,ie=null,me=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(k=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ie=l.unstable_transitionCallbacks),l.formState!==void 0&&(me=l.formState)),s=vx(i,1,!0,s,l??null,h,g,b,O,k,ie,me),s.context=mx(null),l=s.current,h=gr(),h=Oa(h),g=$i(h),g.callback=null,ea(l,g,h),l=h,s.current.lanes=l,$n(s,l),li(s),i[Gr]=s.current,Cp(i),new Pf(s)},fu.version="19.1.0",fu}var Bx;function vS(){if(Bx)return Zp.exports;Bx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zp.exports=pS(),Zp.exports}var mS=vS(),J=eg();const Ui=xc(J);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Px="popstate";function gS(e={}){function t(a,o){let{pathname:u="/",search:c="",hash:f=""}=Ss(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),wm("",{pathname:u,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){let u=a.document.querySelector("base"),c="";if(u&&u.getAttribute("href")){let f=a.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof o=="string"?o:wu(o))}function r(a,o){qr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return bS(t,n,r,e)}function fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yS(){return Math.random().toString(36).substring(2,10)}function zx(e,t){return{usr:e.state,key:e.key,idx:t}}function wm(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ss(t):t,state:n,key:t&&t.key||r||yS()}}function wu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ss(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function bS(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,c="POP",f=null,d=p();d==null&&(d=0,u.replaceState({...u.state,idx:d},""));function p(){return(u.state||{idx:null}).idx}function v(){c="POP";let T=p(),E=T==null?null:T-d;d=T,f&&f({action:c,location:M.location,delta:E})}function m(T,E){c="PUSH";let A=wm(M.location,T,E);n&&n(A,T),d=p()+1;let C=zx(A,d),L=M.createHref(A);try{u.pushState(C,"",L)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(L)}o&&f&&f({action:c,location:M.location,delta:1})}function y(T,E){c="REPLACE";let A=wm(M.location,T,E);n&&n(A,T),d=p();let C=zx(A,d),L=M.createHref(A);u.replaceState(C,"",L),o&&f&&f({action:c,location:M.location,delta:0})}function _(T){return xS(T)}let M={get action(){return c},get location(){return e(a,u)},listen(T){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Px,v),f=T,()=>{a.removeEventListener(Px,v),f=null}},createHref(T){return t(a,T)},createURL:_,encodeLocation(T){let E=_(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:y,go(T){return u.go(T)}};return M}function xS(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),fn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:wu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function mw(e,t,n="/"){return _S(e,t,n,!1)}function _S(e,t,n,r){let a=typeof t=="string"?Ss(t):t,o=Hi(a.pathname||"/",n);if(o==null)return null;let u=gw(e);wS(u);let c=null;for(let f=0;c==null&&f<u.length;++f){let d=DS(o);c=OS(u[f],d,r)}return c}function gw(e,t=[],n=[],r=""){let a=(o,u,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(fn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let d=Fi([r,f.relativePath]),p=n.concat(f);o.children&&o.children.length>0&&(fn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),gw(o.children,t,p,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:CS(d,o.index),routesMeta:p})};return e.forEach((o,u)=>{if(o.path===""||!o.path?.includes("?"))a(o,u);else for(let c of yw(o.path))a(o,u,c)}),t}function yw(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=yw(r.join("/")),c=[];return c.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&c.push(...u),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function wS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:LS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ES=/^:[\w-]+$/,MS=3,TS=2,SS=1,AS=10,RS=-2,Fx=e=>e==="*";function CS(e,t){let n=e.split("/"),r=n.length;return n.some(Fx)&&(r+=RS),t&&(r+=TS),n.filter(a=>!Fx(a)).reduce((a,o)=>a+(ES.test(o)?MS:o===""?SS:AS),r)}function LS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function OS(e,t,n=!1){let{routesMeta:r}=e,a={},o="/",u=[];for(let c=0;c<r.length;++c){let f=r[c],d=c===r.length-1,p=o==="/"?t:t.slice(o.length)||"/",v=Kf({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),m=f.route;if(!v&&d&&n&&!r[r.length-1].route.index&&(v=Kf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Fi([o,v.pathname]),pathnameBase:zS(Fi([o,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(o=Fi([o,v.pathnameBase]))}return u}function Kf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=NS(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((d,{paramName:p,isOptional:v},m)=>{if(p==="*"){let _=c[m]||"";u=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const y=c[m];return v&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:u,pattern:e}}function NS(e,t=!1,n=!0){qr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function DS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function US(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Ss(e):e;return{pathname:n?n.startsWith("/")?n:BS(n,t):t,search:FS(r),hash:IS(a)}}function BS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ev(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bw(e){let t=PS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function xw(e,t,n,r=!1){let a;typeof e=="string"?a=Ss(e):(a={...e},fn(!a.pathname||!a.pathname.includes("?"),ev("?","pathname","search",a)),fn(!a.pathname||!a.pathname.includes("#"),ev("#","pathname","hash",a)),fn(!a.search||!a.search.includes("#"),ev("#","search","hash",a)));let o=e===""||a.pathname==="",u=o?"/":a.pathname,c;if(u==null)c=n;else{let v=t.length-1;if(!r&&u.startsWith("..")){let m=u.split("/");for(;m[0]==="..";)m.shift(),v-=1;a.pathname=m.join("/")}c=v>=0?t[v]:"/"}let f=US(a,c),d=u&&u!=="/"&&u.endsWith("/"),p=(o||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var Fi=e=>e.join("/").replace(/\/\/+/g,"/"),zS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var _w=["POST","PUT","PATCH","DELETE"];new Set(_w);var kS=["GET",..._w];new Set(kS);var al=J.createContext(null);al.displayName="DataRouter";var Ah=J.createContext(null);Ah.displayName="DataRouterState";J.createContext(!1);var ww=J.createContext({isTransitioning:!1});ww.displayName="ViewTransition";var HS=J.createContext(new Map);HS.displayName="Fetchers";var VS=J.createContext(null);VS.displayName="Await";var pi=J.createContext(null);pi.displayName="Navigation";var _c=J.createContext(null);_c.displayName="Location";var Wi=J.createContext({outlet:null,matches:[],isDataRoute:!1});Wi.displayName="Route";var tg=J.createContext(null);tg.displayName="RouteError";function jS(e,{relative:t}={}){fn(wc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=J.useContext(pi),{hash:a,pathname:o,search:u}=Ec(e,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:Fi([n,o])),r.createHref({pathname:c,search:u,hash:a})}function wc(){return J.useContext(_c)!=null}function As(){return fn(wc(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(_c).location}var Ew="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mw(e){J.useContext(pi).static||J.useLayoutEffect(e)}function Rh(){let{isDataRoute:e}=J.useContext(Wi);return e?rA():WS()}function WS(){fn(wc(),"useNavigate() may be used only in the context of a <Router> component.");let e=J.useContext(al),{basename:t,navigator:n}=J.useContext(pi),{matches:r}=J.useContext(Wi),{pathname:a}=As(),o=JSON.stringify(bw(r)),u=J.useRef(!1);return Mw(()=>{u.current=!0}),J.useCallback((f,d={})=>{if(qr(u.current,Ew),!u.current)return;if(typeof f=="number"){n.go(f);return}let p=xw(f,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Fi([t,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[t,n,o,a,e])}J.createContext(null);function Ec(e,{relative:t}={}){let{matches:n}=J.useContext(Wi),{pathname:r}=As(),a=JSON.stringify(bw(n));return J.useMemo(()=>xw(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function qS(e,t){return Tw(e,t)}function Tw(e,t,n,r){fn(wc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=J.useContext(pi),{matches:o}=J.useContext(Wi),u=o[o.length-1],c=u?u.params:{},f=u?u.pathname:"/",d=u?u.pathnameBase:"/",p=u&&u.route;{let E=p&&p.path||"";Sw(f,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let v=As(),m;if(t){let E=typeof t=="string"?Ss(t):t;fn(d==="/"||E.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=v;let y=m.pathname||"/",_=y;if(d!=="/"){let E=d.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(E.length).join("/")}let M=mw(e,{pathname:_});qr(p||M!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),qr(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=KS(M&&M.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:Fi([d,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:Fi([d,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return t&&T?J.createElement(_c.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},T):T}function XS(){let e=nA(),t=GS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:o},"ErrorBoundary")," or"," ",J.createElement("code",{style:o},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},t),n?J.createElement("pre",{style:a},n):null,u)}var YS=J.createElement(XS,null),ZS=class extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?J.createElement(Wi.Provider,{value:this.props.routeContext},J.createElement(tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QS({routeContext:e,match:t,children:n}){let r=J.useContext(al);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),J.createElement(Wi.Provider,{value:e},n)}function KS(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let f=a.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);fn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:p,errors:v}=n,m=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!v||v[d.route.id]===void 0);if(d.route.lazy||m){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,d,p)=>{let v,m=!1,y=null,_=null;n&&(v=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||YS,u&&(c<0&&p===0?(Sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,_=null):c===p&&(m=!0,_=d.route.hydrateFallbackElement||null)));let M=t.concat(a.slice(0,p+1)),T=()=>{let E;return v?E=y:m?E=_:d.route.Component?E=J.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=f,J.createElement(QS,{match:d,routeContext:{outlet:f,matches:M,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?J.createElement(ZS,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:T(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):T()},null)}function ng(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JS(e){let t=J.useContext(al);return fn(t,ng(e)),t}function $S(e){let t=J.useContext(Ah);return fn(t,ng(e)),t}function eA(e){let t=J.useContext(Wi);return fn(t,ng(e)),t}function rg(e){let t=eA(e),n=t.matches[t.matches.length-1];return fn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function tA(){return rg("useRouteId")}function nA(){let e=J.useContext(tg),t=$S("useRouteError"),n=rg("useRouteError");return e!==void 0?e:t.errors?.[n]}function rA(){let{router:e}=JS("useNavigate"),t=rg("useNavigate"),n=J.useRef(!1);return Mw(()=>{n.current=!0}),J.useCallback(async(a,o={})=>{qr(n.current,Ew),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var Ix={};function Sw(e,t,n){!t&&!Ix[e]&&(Ix[e]=!0,qr(!1,n))}J.memo(iA);function iA({routes:e,future:t,state:n}){return Tw(e,void 0,n,t)}function vu(e){fn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aA({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:o=!1}){fn(!wc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),c=J.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof n=="string"&&(n=Ss(n));let{pathname:f="/",search:d="",hash:p="",state:v=null,key:m="default"}=n,y=J.useMemo(()=>{let _=Hi(f,u);return _==null?null:{location:{pathname:_,search:d,hash:p,state:v,key:m},navigationType:r}},[u,f,d,p,v,m,r]);return qr(y!=null,`<Router basename="${u}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:J.createElement(pi.Provider,{value:c},J.createElement(_c.Provider,{children:t,value:y}))}function sA({children:e,location:t}){return qS(Em(e),t)}function Em(e,t=[]){let n=[];return J.Children.forEach(e,(r,a)=>{if(!J.isValidElement(r))return;let o=[...t,a];if(r.type===J.Fragment){n.push.apply(n,Em(r.props.children,o));return}fn(r.type===vu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Em(r.props.children,o)),n.push(u)}),n}var qf="get",Xf="application/x-www-form-urlencoded";function Ch(e){return e!=null&&typeof e.tagName=="string"}function oA(e){return Ch(e)&&e.tagName.toLowerCase()==="button"}function lA(e){return Ch(e)&&e.tagName.toLowerCase()==="form"}function uA(e){return Ch(e)&&e.tagName.toLowerCase()==="input"}function cA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fA(e,t){return e.button===0&&(!t||t==="_self")&&!cA(e)}var Ff=null;function hA(){if(Ff===null)try{new FormData(document.createElement("form"),0),Ff=!1}catch{Ff=!0}return Ff}var dA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tv(e){return e!=null&&!dA.has(e)?(qr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xf}"`),null):e}function pA(e,t){let n,r,a,o,u;if(lA(e)){let c=e.getAttribute("action");r=c?Hi(c,t):null,n=e.getAttribute("method")||qf,a=tv(e.getAttribute("enctype"))||Xf,o=new FormData(e)}else if(oA(e)||uA(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||c.getAttribute("action");if(r=f?Hi(f,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||qf,a=tv(e.getAttribute("formenctype"))||tv(c.getAttribute("enctype"))||Xf,o=new FormData(c,e),!hA()){let{name:d,type:p,value:v}=e;if(p==="image"){let m=d?`${d}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else d&&o.append(d,v)}}else{if(Ch(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qf,r=null,a=Xf,u=e}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ig(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vA(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Hi(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function mA(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gA(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function yA(e,t,n){let r=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let u=await mA(o,n);return u.links?u.links():[]}return[]}));return wA(r.flat(1).filter(gA).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Gx(e,t,n,r,a,o){let u=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,c=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,d)=>u(f,d)||c(f,d)):o==="data"?t.filter((f,d)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(u(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function bA(e,t,{includeHydrateFallback:n}={}){return xA(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function xA(e){return[...new Set(e)]}function _A(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function wA(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let o=JSON.stringify(_A(a));return n.has(o)||(n.add(o),r.push({key:o,link:a})),r},[])}function Aw(){let e=J.useContext(al);return ig(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function EA(){let e=J.useContext(Ah);return ig(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ag=J.createContext(void 0);ag.displayName="FrameworkContext";function Rw(){let e=J.useContext(ag);return ig(e,"You must render this element inside a <HydratedRouter> element"),e}function MA(e,t){let n=J.useContext(ag),[r,a]=J.useState(!1),[o,u]=J.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:v}=t,m=J.useRef(null);J.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let M=E=>{E.forEach(A=>{u(A.isIntersecting)})},T=new IntersectionObserver(M,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[e]),J.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let y=()=>{a(!0)},_=()=>{a(!1),u(!1)};return n?e!=="intent"?[o,m,{}]:[o,m,{onFocus:hu(c,y),onBlur:hu(f,_),onMouseEnter:hu(d,y),onMouseLeave:hu(p,_),onTouchStart:hu(v,y)}]:[!1,m,{}]}function hu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function TA({page:e,...t}){let{router:n}=Aw(),r=J.useMemo(()=>mw(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?J.createElement(AA,{page:e,matches:r,...t}):null}function SA(e){let{manifest:t,routeModules:n}=Rw(),[r,a]=J.useState([]);return J.useEffect(()=>{let o=!1;return yA(e,t,n).then(u=>{o||a(u)}),()=>{o=!0}},[e,t,n]),r}function AA({page:e,matches:t,...n}){let r=As(),{manifest:a,routeModules:o}=Rw(),{basename:u}=Aw(),{loaderData:c,matches:f}=EA(),d=J.useMemo(()=>Gx(e,t,f,a,r,"data"),[e,t,f,a,r]),p=J.useMemo(()=>Gx(e,t,f,a,r,"assets"),[e,t,f,a,r]),v=J.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let _=new Set,M=!1;if(t.forEach(E=>{let A=a.routes[E.route.id];!A||!A.hasLoader||(!d.some(C=>C.route.id===E.route.id)&&E.route.id in c&&o[E.route.id]?.shouldRevalidate||A.hasClientLoader?M=!0:_.add(E.route.id))}),_.size===0)return[];let T=vA(e,u,"data");return M&&_.size>0&&T.searchParams.set("_routes",t.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[T.pathname+T.search]},[u,c,r,a,d,t,e,o]),m=J.useMemo(()=>bA(p,a),[p,a]),y=SA(p);return J.createElement(J.Fragment,null,v.map(_=>J.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>J.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),y.map(({key:_,link:M})=>J.createElement("link",{key:_,...M})))}function RA(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Cw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cw&&(window.__reactRouterVersion="7.7.1")}catch{}function CA({basename:e,children:t,window:n}){let r=J.useRef();r.current==null&&(r.current=gS({window:n,v5Compat:!0}));let a=r.current,[o,u]=J.useState({action:a.action,location:a.location}),c=J.useCallback(f=>{J.startTransition(()=>u(f))},[u]);return J.useLayoutEffect(()=>a.listen(c),[a,c]),J.createElement(aA,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var Lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yu=J.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:c,target:f,to:d,preventScrollReset:p,viewTransition:v,...m},y){let{basename:_}=J.useContext(pi),M=typeof d=="string"&&Lw.test(d),T,E=!1;if(typeof d=="string"&&M&&(T=d,Cw))try{let W=new URL(window.location.href),oe=d.startsWith("//")?new URL(W.protocol+d):new URL(d),ae=Hi(oe.pathname,_);oe.origin===W.origin&&ae!=null?d=ae+oe.search+oe.hash:E=!0}catch{qr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=jS(d,{relative:a}),[C,L,I]=MA(r,m),j=DA(d,{replace:u,state:c,target:f,preventScrollReset:p,relative:a,viewTransition:v});function q(W){t&&t(W),W.defaultPrevented||j(W)}let ne=J.createElement("a",{...m,...I,href:T||A,onClick:E||o?t:q,ref:RA(y,L),target:f,"data-discover":!M&&n==="render"?"true":void 0});return C&&!M?J.createElement(J.Fragment,null,ne,J.createElement(TA,{page:A})):ne});yu.displayName="Link";var LA=J.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:c,children:f,...d},p){let v=Ec(u,{relative:d.relative}),m=As(),y=J.useContext(Ah),{navigator:_,basename:M}=J.useContext(pi),T=y!=null&&FA(v)&&c===!0,E=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,A=m.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(A=A.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&M&&(C=Hi(C,M)||C);const L=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let I=A===E||!a&&A.startsWith(E)&&A.charAt(L)==="/",j=C!=null&&(C===E||!a&&C.startsWith(E)&&C.charAt(E.length)==="/"),q={isActive:I,isPending:j,isTransitioning:T},ne=I?t:void 0,W;typeof r=="function"?W=r(q):W=[r,I?"active":null,j?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let oe=typeof o=="function"?o(q):o;return J.createElement(yu,{...d,"aria-current":ne,className:W,ref:p,style:oe,to:u,viewTransition:c},typeof f=="function"?f(q):f)});LA.displayName="NavLink";var OA=J.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:o,method:u=qf,action:c,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:v,...m},y)=>{let _=PA(),M=zA(c,{relative:d}),T=u.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&Lw.test(c),A=C=>{if(f&&f(C),C.defaultPrevented)return;C.preventDefault();let L=C.nativeEvent.submitter,I=L?.getAttribute("formmethod")||u;_(L||C.currentTarget,{fetcherKey:t,method:I,navigate:n,replace:a,state:o,relative:d,preventScrollReset:p,viewTransition:v})};return J.createElement("form",{ref:y,method:T,action:M,onSubmit:r?f:A,...m,"data-discover":!E&&e==="render"?"true":void 0})});OA.displayName="Form";function NA(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ow(e){let t=J.useContext(al);return fn(t,NA(e)),t}function DA(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:u}={}){let c=Rh(),f=As(),d=Ec(e,{relative:o});return J.useCallback(p=>{if(fA(p,t)){p.preventDefault();let v=n!==void 0?n:wu(f)===wu(d);c(e,{replace:v,state:r,preventScrollReset:a,relative:o,viewTransition:u})}},[f,c,d,n,r,t,e,a,o,u])}var UA=0,BA=()=>`__${String(++UA)}__`;function PA(){let{router:e}=Ow("useSubmit"),{basename:t}=J.useContext(pi),n=tA();return J.useCallback(async(r,a={})=>{let{action:o,method:u,encType:c,formData:f,body:d}=pA(r,t);if(a.navigate===!1){let p=a.fetcherKey||BA();await e.fetch(p,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:d,formMethod:a.method||u,formEncType:a.encType||c,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:d,formMethod:a.method||u,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function zA(e,{relative:t}={}){let{basename:n}=J.useContext(pi),r=J.useContext(Wi);fn(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Ec(e||".",{relative:t})},u=As();if(e==null){o.search=u.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(v=>v).forEach(v=>c.append("index",v));let p=c.toString();o.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Fi([n,o.pathname])),wu(o)}function FA(e,{relative:t}={}){let n=J.useContext(ww);fn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ow("useViewTransitionState"),a=Ec(e,{relative:t});if(!n.isTransitioning)return!1;let o=Hi(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Hi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kf(a.pathname,u)!=null||Kf(a.pathname,o)!=null}var IA=vw();const go=xc(IA);var nv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var kx;function GA(){return kx||(kx=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(o=a(o,r(c)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var u="";for(var c in o)t.call(o,c)&&o[c]&&(u=a(u,c));return u}function a(o,u){return u?o?o+" "+u:o+u:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(nv)),nv.exports}var kA=GA();const Pt=xc(kA);function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mm.apply(null,arguments)}function Nw(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Hx(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function HA(e){var t=VA(e,"string");return typeof t=="symbol"?t:String(t)}function VA(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jA(e,t,n){var r=J.useRef(e!==void 0),a=J.useState(t),o=a[0],u=a[1],c=e!==void 0,f=r.current;return r.current=c,!c&&f&&o!==t&&u(t),[c?e:o,J.useCallback(function(d){for(var p=arguments.length,v=new Array(p>1?p-1:0),m=1;m<p;m++)v[m-1]=arguments[m];n&&n.apply(void 0,[d].concat(v)),u(d)},[n])]}function Dw(e,t){return Object.keys(t).reduce(function(n,r){var a,o=n,u=o[Hx(r)],c=o[r],f=Nw(o,[Hx(r),r].map(HA)),d=t[r],p=jA(c,u,e[d]),v=p[0],m=p[1];return Mm({},f,(a={},a[r]=v,a[d]=m,a))},e)}function Tm(e,t){return Tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Tm(e,t)}function WA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Tm(e,t)}const qA=["xxl","xl","lg","md","sm","xs"],XA="xs",Lh=J.createContext({prefixes:{},breakpoints:qA,minBreakpoint:XA}),{Consumer:fD,Provider:hD}=Lh;function Kt(e,t){const{prefixes:n}=J.useContext(Lh);return e||n[t]||t}function Uw(){const{breakpoints:e}=J.useContext(Lh);return e}function Bw(){const{minBreakpoint:e}=J.useContext(Lh);return e}function sg(e){return e&&e.ownerDocument||document}function YA(e){var t=sg(e);return t&&t.defaultView||window}function ZA(e,t){return YA(e).getComputedStyle(e,t)}var QA=/([A-Z])/g;function KA(e){return e.replace(QA,"-$1").toLowerCase()}var JA=/^ms-/;function If(e){return KA(e).replace(JA,"-ms-")}var $A=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function eR(e){return!!(e&&$A.test(e))}function Ii(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue(If(t))||ZA(e).getPropertyValue(If(t));Object.keys(t).forEach(function(a){var o=t[a];!o&&o!==0?e.style.removeProperty(If(a)):eR(a)?r+=a+"("+o+") ":n+=If(a)+": "+o+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}var rv={exports:{}},iv,Vx;function tR(){if(Vx)return iv;Vx=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iv=e,iv}var av,jx;function nR(){if(jx)return av;jx=1;var e=tR();function t(){}function n(){}return n.resetWarningCache=t,av=function(){function r(u,c,f,d,p,v){if(v!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function a(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},av}var Wx;function rR(){return Wx||(Wx=1,rv.exports=nR()()),rv.exports}var iR=rR();const sv=xc(iR),qx={disabled:!1},Pw=Ui.createContext(null);var aR=function(t){return t.scrollTop},mu="unmounted",ya="exited",jr="entering",Ni="entered",Eu="exiting",qi=function(e){WA(t,e);function t(r,a){var o;o=e.call(this,r,a)||this;var u=a,c=u&&!u.isMounting?r.enter:r.appear,f;return o.appearStatus=null,r.in?c?(f=ya,o.appearStatus=jr):f=Ni:r.unmountOnExit||r.mountOnEnter?f=mu:f=ya,o.state={status:f},o.nextCallback=null,o}t.getDerivedStateFromProps=function(a,o){var u=a.in;return u&&o.status===mu?{status:ya}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var o=null;if(a!==this.props){var u=this.state.status;this.props.in?u!==jr&&u!==Ni&&(o=jr):(u===jr||u===Ni)&&(o=Eu)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,o,u,c;return o=u=c=a,a!=null&&typeof a!="number"&&(o=a.exit,u=a.enter,c=a.appear!==void 0?a.appear:u),{exit:o,enter:u,appear:c}},n.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===jr){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:go.findDOMNode(this);u&&aR(u)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ya&&this.setState({status:mu})},n.performEnter=function(a){var o=this,u=this.props.enter,c=this.context?this.context.isMounting:a,f=this.props.nodeRef?[c]:[go.findDOMNode(this),c],d=f[0],p=f[1],v=this.getTimeouts(),m=c?v.appear:v.enter;if(!a&&!u||qx.disabled){this.safeSetState({status:Ni},function(){o.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:jr},function(){o.props.onEntering(d,p),o.onTransitionEnd(m,function(){o.safeSetState({status:Ni},function(){o.props.onEntered(d,p)})})})},n.performExit=function(){var a=this,o=this.props.exit,u=this.getTimeouts(),c=this.props.nodeRef?void 0:go.findDOMNode(this);if(!o||qx.disabled){this.safeSetState({status:ya},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Eu},function(){a.props.onExiting(c),a.onTransitionEnd(u.exit,function(){a.safeSetState({status:ya},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},n.setNextCallback=function(a){var o=this,u=!0;return this.nextCallback=function(c){u&&(u=!1,o.nextCallback=null,a(c))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},n.onTransitionEnd=function(a,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:go.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!u||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===mu)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=Nw(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ui.createElement(Pw.Provider,{value:null},typeof u=="function"?u(a,c):Ui.cloneElement(Ui.Children.only(u),c))},t}(Ui.Component);qi.contextType=Pw;qi.propTypes={};function vo(){}qi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vo,onEntering:vo,onEntered:vo,onExit:vo,onExiting:vo,onExited:vo};qi.UNMOUNTED=mu;qi.EXITED=ya;qi.ENTERING=jr;qi.ENTERED=Ni;qi.EXITING=Eu;function sR(e){return e.code==="Escape"||e.keyCode===27}function oR(){const e=J.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function sl(e){if(!e||typeof e=="function")return null;const{major:t}=oR();return t>=19?e.props.ref:e.ref}const Oh=!!(typeof window<"u"&&window.document&&window.document.createElement);var Sm=!1,Am=!1;try{var ov={get passive(){return Sm=!0},get once(){return Am=Sm=!0}};Oh&&(window.addEventListener("test",ov,ov),window.removeEventListener("test",ov,!0))}catch{}function lR(e,t,n,r){if(r&&typeof r!="boolean"&&!Am){var a=r.once,o=r.capture,u=n;!Am&&a&&(u=n.__once||function c(f){this.removeEventListener(t,c,o),n.call(this,f)},n.__once=u),e.addEventListener(t,u,Sm?r:o)}e.addEventListener(t,n,r)}function uR(e,t,n,r){var a=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)}function Jf(e,t,n,r){return lR(e,t,n,r),function(){uR(e,t,n,r)}}function cR(e,t,n,r){if(r===void 0&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}function fR(e){var t=Ii(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function hR(e,t,n){n===void 0&&(n=5);var r=!1,a=setTimeout(function(){r||cR(e,"transitionend",!0)},t+n),o=Jf(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),o()}}function dR(e,t,n,r){n==null&&(n=fR(e)||0);var a=hR(e,n,r),o=Jf(e,"transitionend",t);return function(){a(),o()}}function Xx(e,t){const n=Ii(e,t)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function og(e,t){const n=Xx(e,"transitionDuration"),r=Xx(e,"transitionDelay"),a=dR(e,o=>{o.target===e&&(a(),t(o))},n+r)}function du(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...a){t.apply(this,a),n.apply(this,a)}},null)}function zw(e){e.offsetHeight}const Yx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function pR(e,t){const n=Yx(e),r=Yx(t);return a=>{n&&n(a),r&&r(a)}}function vR(e,t){return J.useMemo(()=>pR(e,t),[e,t])}function mR(e){return e&&"setState"in e?go.findDOMNode(e):e??null}const Nh=Ui.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:a,onExited:o,addEndListener:u,children:c,childRef:f,...d},p)=>{const v=J.useRef(null),m=vR(v,f),y=j=>{m(mR(j))},_=j=>q=>{j&&v.current&&j(v.current,q)},M=J.useCallback(_(e),[e]),T=J.useCallback(_(t),[t]),E=J.useCallback(_(n),[n]),A=J.useCallback(_(r),[r]),C=J.useCallback(_(a),[a]),L=J.useCallback(_(o),[o]),I=J.useCallback(_(u),[u]);return te.jsx(qi,{ref:p,...d,onEnter:M,onEntered:E,onEntering:T,onExit:A,onExited:L,onExiting:C,addEndListener:I,nodeRef:v,children:typeof c=="function"?(j,q)=>c(j,{...q,ref:y}):Ui.cloneElement(c,{ref:y})})});Nh.displayName="TransitionWrapper";const gR={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function yR(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,r=t[n],a=gR[e];return r+parseInt(Ii(t,a[0]),10)+parseInt(Ii(t,a[1]),10)}const bR={[ya]:"collapse",[Eu]:"collapsing",[jr]:"collapsing",[Ni]:"collapse show"},Fw=Ui.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:a,className:o,children:u,dimension:c="height",in:f=!1,timeout:d=300,mountOnEnter:p=!1,unmountOnExit:v=!1,appear:m=!1,getDimensionValue:y=yR,..._},M)=>{const T=typeof c=="function"?c():c,E=J.useMemo(()=>du(j=>{j.style[T]="0"},e),[T,e]),A=J.useMemo(()=>du(j=>{const q=`scroll${T[0].toUpperCase()}${T.slice(1)}`;j.style[T]=`${j[q]}px`},t),[T,t]),C=J.useMemo(()=>du(j=>{j.style[T]=null},n),[T,n]),L=J.useMemo(()=>du(j=>{j.style[T]=`${y(T,j)}px`,zw(j)},r),[r,y,T]),I=J.useMemo(()=>du(j=>{j.style[T]=null},a),[T,a]);return te.jsx(Nh,{ref:M,addEndListener:og,..._,"aria-expanded":_.role?f:null,onEnter:E,onEntering:A,onEntered:C,onExit:L,onExiting:I,childRef:sl(u),in:f,timeout:d,mountOnEnter:p,unmountOnExit:v,appear:m,children:(j,q)=>Ui.cloneElement(u,{...q,className:Pt(o,u.props.className,bR[j],T==="width"&&"collapse-horizontal")})})});Fw.displayName="Collapse";function xR(e){const t=J.useRef(e);return J.useEffect(()=>{t.current=e},[e]),t}function Dh(e){const t=xR(e);return J.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const lg=e=>J.forwardRef((t,n)=>te.jsx("div",{...t,ref:n,className:Pt(t.className,e)}));function _R(e){const t=J.useRef(e);return J.useEffect(()=>{t.current=e},[e]),t}function Di(e){const t=_R(e);return J.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function wR(){const e=J.useRef(!0),t=J.useRef(()=>e.current);return J.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function ER(e){const t=J.useRef(null);return J.useEffect(()=>{t.current=e}),t.current}const MR=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",TR=typeof document<"u",Zx=TR||MR?J.useLayoutEffect:J.useEffect,SR=["as","disabled"];function AR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RR(e){return!e||e.trim()==="#"}function ug({tagName:e,disabled:t,href:n,target:r,rel:a,role:o,onClick:u,tabIndex:c=0,type:f}){e||(n!=null||r!=null||a!=null?e="a":e="button");const d={tagName:e};if(e==="button")return[{type:f||"button",disabled:t},d];const p=m=>{if((t||e==="a"&&RR(n))&&m.preventDefault(),t){m.stopPropagation();return}u?.(m)},v=m=>{m.key===" "&&(m.preventDefault(),p(m))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:c,href:n,target:e==="a"?r:void 0,"aria-disabled":t||void 0,rel:e==="a"?a:void 0,onClick:p,onKeyDown:v},d]}const Iw=J.forwardRef((e,t)=>{let{as:n,disabled:r}=e,a=AR(e,SR);const[o,{tagName:u}]=ug(Object.assign({tagName:n,disabled:r},a));return te.jsx(u,Object.assign({},a,o,{ref:t}))});Iw.displayName="Button";const CR=["onKeyDown"];function LR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function OR(e){return!e||e.trim()==="#"}const Gw=J.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=LR(e,CR);const[a]=ug(Object.assign({tagName:"a"},r)),o=Di(u=>{a.onKeyDown(u),n?.(u)});return OR(r.href)||r.role==="button"?te.jsx("a",Object.assign({ref:t},r,a,{onKeyDown:o})):te.jsx("a",Object.assign({ref:t},r,{onKeyDown:n}))});Gw.displayName="Anchor";const NR={[jr]:"show",[Ni]:"show"},kw=J.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:r,...a},o)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=J.useCallback((f,d)=>{zw(f),r?.(f,d)},[r]);return te.jsx(Nh,{ref:o,addEndListener:og,...u,onEnter:c,childRef:sl(t),children:(f,d)=>J.cloneElement(t,{...d,className:Pt("fade",e,t.props.className,NR[f],n[f])})})});kw.displayName="Fade";const DR={"aria-label":sv.string,onClick:sv.func,variant:sv.oneOf(["white"])},cg=J.forwardRef(({className:e,variant:t,"aria-label":n="Close",...r},a)=>te.jsx("button",{ref:a,type:"button",className:Pt("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...r}));cg.displayName="CloseButton";cg.propTypes=DR;const wa=J.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:a=!1,disabled:o=!1,className:u,...c},f)=>{const d=Kt(t,"btn"),[p,{tagName:v}]=ug({tagName:e,disabled:o,...c}),m=v;return te.jsx(m,{...p,...c,ref:f,disabled:o,className:Pt(u,d,a&&"active",n&&`${d}-${n}`,r&&`${d}-${r}`,c.href&&o&&"disabled")})});wa.displayName="Button";const fg=J.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=Kt(t,"card-body"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));fg.displayName="CardBody";const Hw=J.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=Kt(t,"card-footer"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));Hw.displayName="CardFooter";const hg=J.createContext(null);hg.displayName="CardHeaderContext";const Vw=J.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},a)=>{const o=Kt(e,"card-header"),u=J.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return te.jsx(hg.Provider,{value:u,children:te.jsx(n,{ref:a,...r,className:Pt(t,o)})})});Vw.displayName="CardHeader";const jw=J.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...a},o)=>{const u=Kt(e,"card-img");return te.jsx(r,{ref:o,className:Pt(n?`${u}-${n}`:u,t),...a})});jw.displayName="CardImg";const Ww=J.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=Kt(t,"card-img-overlay"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));Ww.displayName="CardImgOverlay";const qw=J.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},a)=>(t=Kt(t,"card-link"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));qw.displayName="CardLink";const UR=lg("h6"),Xw=J.forwardRef(({className:e,bsPrefix:t,as:n=UR,...r},a)=>(t=Kt(t,"card-subtitle"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));Xw.displayName="CardSubtitle";const Yw=J.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},a)=>(t=Kt(t,"card-text"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));Yw.displayName="CardText";const BR=lg("h5"),Zw=J.forwardRef(({className:e,bsPrefix:t,as:n=BR,...r},a)=>(t=Kt(t,"card-title"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));Zw.displayName="CardTitle";const Qw=J.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:a,body:o=!1,children:u,as:c="div",...f},d)=>{const p=Kt(e,"card");return te.jsx(c,{ref:d,...f,className:Pt(t,p,n&&`bg-${n}`,r&&`text-${r}`,a&&`border-${a}`),children:o?te.jsx(fg,{children:u}):u})});Qw.displayName="Card";const On=Object.assign(Qw,{Img:jw,Title:Zw,Subtitle:Xw,Body:fg,Link:qw,Text:Yw,Header:Vw,Footer:Hw,ImgOverlay:Ww});function PR({as:e,bsPrefix:t,className:n,...r}){t=Kt(t,"col");const a=Uw(),o=Bw(),u=[],c=[];return a.forEach(f=>{const d=r[f];delete r[f];let p,v,m;typeof d=="object"&&d!=null?{span:p,offset:v,order:m}=d:p=d;const y=f!==o?`-${f}`:"";p&&u.push(p===!0?`${t}${y}`:`${t}${y}-${p}`),m!=null&&c.push(`order${y}-${m}`),v!=null&&c.push(`offset${y}-${v}`)}),[{...r,className:Pt(n,...u,...c)},{as:e,bsPrefix:t,spans:u}]}const ba=J.forwardRef((e,t)=>{const[{className:n,...r},{as:a="div",bsPrefix:o,spans:u}]=PR(e);return te.jsx(a,{...r,ref:t,className:Pt(n,!u.length&&o)})});ba.displayName="Col";const ns=J.forwardRef(({bsPrefix:e,fluid:t=!1,as:n="div",className:r,...a},o)=>{const u=Kt(e,"container"),c=typeof t=="string"?`-${t}`:"-fluid";return te.jsx(n,{ref:o,...a,className:Pt(r,t?`${u}${c}`:u)})});ns.displayName="Container";var zR=Function.prototype.bind.call(Function.prototype.call,[].slice);function Qa(e,t){return zR(e.querySelectorAll(t))}function FR(){const[,e]=J.useReducer(t=>t+1,0);return e}function Qx(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const $f=J.createContext(null),dg=(e,t=null)=>e!=null?String(e):t||null,pg=J.createContext(null);pg.displayName="NavContext";const IR="data-rr-ui-",GR="rrUi";function Uh(e){return`${IR}${e}`}function kR(e){return`${GR}${e}`}const Kw=J.createContext(Oh?window:void 0);Kw.Provider;function vg(){return J.useContext(Kw)}const HR=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",VR=typeof document<"u",jR=VR||HR?J.useLayoutEffect:J.useEffect,ol=J.createContext(null);ol.displayName="NavbarContext";const Kx=e=>!e||typeof e=="function"?e:t=>{e.current=t};function WR(e,t){const n=Kx(e),r=Kx(t);return a=>{n&&n(a),r&&r(a)}}function Bh(e,t){return J.useMemo(()=>WR(e,t),[e,t])}const Jw=J.createContext(null),qR=["as","active","eventKey"];function XR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $w({key:e,onClick:t,active:n,id:r,role:a,disabled:o}){const u=J.useContext($f),c=J.useContext(pg),f=J.useContext(Jw);let d=n;const p={role:a};if(c){!a&&c.role==="tablist"&&(p.role="tab");const v=c.getControllerId(e??null),m=c.getControlledId(e??null);p[Uh("event-key")]=e,p.id=v||r,d=n==null&&e!=null?c.activeKey===e:n,(d||!(f!=null&&f.unmountOnExit)&&!(f!=null&&f.mountOnEnter))&&(p["aria-controls"]=m)}return p.role==="tab"&&(p["aria-selected"]=d,d||(p.tabIndex=-1),o&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=Di(v=>{o||(t?.(v),e!=null&&u&&!v.isPropagationStopped()&&u(e,v))}),[p,{isActive:d}]}const eE=J.forwardRef((e,t)=>{let{as:n=Iw,active:r,eventKey:a}=e,o=XR(e,qR);const[u,c]=$w(Object.assign({key:dg(a,o.href),active:r},o));return u[Uh("active")]=c.isActive,te.jsx(n,Object.assign({},o,u,{ref:t}))});eE.displayName="NavItem";const YR=["as","onSelect","activeKey","role","onKeyDown"];function ZR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const Jx=()=>{},$x=Uh("event-key"),tE=J.forwardRef((e,t)=>{let{as:n="div",onSelect:r,activeKey:a,role:o,onKeyDown:u}=e,c=ZR(e,YR);const f=FR(),d=J.useRef(!1),p=J.useContext($f),v=J.useContext(Jw);let m,y;v&&(o=o||"tablist",a=v.activeKey,m=v.getControlledId,y=v.getControllerId);const _=J.useRef(null),M=C=>{const L=_.current;if(!L)return null;const I=Qa(L,`[${$x}]:not([aria-disabled=true])`),j=L.querySelector("[aria-selected=true]");if(!j||j!==document.activeElement)return null;const q=I.indexOf(j);if(q===-1)return null;let ne=q+C;return ne>=I.length&&(ne=0),ne<0&&(ne=I.length-1),I[ne]},T=(C,L)=>{C!=null&&(r?.(C,L),p?.(C,L))},E=C=>{if(u?.(C),!v)return;let L;switch(C.key){case"ArrowLeft":case"ArrowUp":L=M(-1);break;case"ArrowRight":case"ArrowDown":L=M(1);break;default:return}L&&(C.preventDefault(),T(L.dataset[kR("EventKey")]||null,C),d.current=!0,f())};J.useEffect(()=>{if(_.current&&d.current){const C=_.current.querySelector(`[${$x}][aria-selected=true]`);C?.focus()}d.current=!1});const A=Bh(t,_);return te.jsx($f.Provider,{value:T,children:te.jsx(pg.Provider,{value:{role:o,activeKey:dg(a),getControlledId:m||Jx,getControllerId:y||Jx},children:te.jsx(n,Object.assign({},c,{onKeyDown:E,ref:A,role:o}))})})});tE.displayName="Nav";const QR=Object.assign(tE,{Item:eE});function lv(e){e===void 0&&(e=sg());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function KR(e){const t=J.useRef(e);return t.current=e,t}function JR(e){const t=KR(e);J.useEffect(()=>()=>t.current(),[])}function $R(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const e_=Uh("modal-open");class mg{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return $R(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();t.style={overflow:a.style.overflow,[r]:a.style[r]},t.scrollBarWidth&&(n[r]=`${parseInt(Ii(a,r)||"0",10)+t.scrollBarWidth}px`),a.setAttribute(e_,""),Ii(a,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(e_),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const uv=(e,t)=>Oh?e==null?(t||sg()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function eC(e,t){const n=vg(),[r,a]=J.useState(()=>uv(e,n?.document));if(!r){const o=uv(e);o&&a(o)}return J.useEffect(()=>{},[t,r]),J.useEffect(()=>{const o=uv(e);o!==r&&a(o)},[e,r]),r}function tC({children:e,in:t,onExited:n,mountOnEnter:r,unmountOnExit:a}){const o=J.useRef(null),u=J.useRef(t),c=Di(n);J.useEffect(()=>{t?u.current=!0:c(o.current)},[t,c]);const f=Bh(o,sl(e)),d=J.cloneElement(e,{ref:f});return t?d:a||!u.current&&r?null:d}const nC=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function rC(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function iC(e){let{onEnter:t,onEntering:n,onEntered:r,onExit:a,onExiting:o,onExited:u,addEndListener:c,children:f}=e,d=rC(e,nC);const p=J.useRef(null),v=Bh(p,sl(f)),m=L=>I=>{L&&p.current&&L(p.current,I)},y=J.useCallback(m(t),[t]),_=J.useCallback(m(n),[n]),M=J.useCallback(m(r),[r]),T=J.useCallback(m(a),[a]),E=J.useCallback(m(o),[o]),A=J.useCallback(m(u),[u]),C=J.useCallback(m(c),[c]);return Object.assign({},d,{nodeRef:p},t&&{onEnter:y},n&&{onEntering:_},r&&{onEntered:M},a&&{onExit:T},o&&{onExiting:E},u&&{onExited:A},c&&{addEndListener:C},{children:typeof f=="function"?(L,I)=>f(L,Object.assign({},I,{ref:v})):J.cloneElement(f,{ref:v})})}const aC=["component"];function sC(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}const oC=J.forwardRef((e,t)=>{let{component:n}=e,r=sC(e,aC);const a=iC(r);return te.jsx(n,Object.assign({ref:t},a))});function lC({in:e,onTransition:t}){const n=J.useRef(null),r=J.useRef(!0),a=Di(t);return Zx(()=>{if(!n.current)return;let o=!1;return a({in:e,element:n.current,initial:r.current,isStale:()=>o}),()=>{o=!0}},[e,a]),Zx(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function uC({children:e,in:t,onExited:n,onEntered:r,transition:a}){const[o,u]=J.useState(!t);t&&o&&u(!1);const c=lC({in:!!t,onTransition:d=>{const p=()=>{d.isStale()||(d.in?r?.(d.element,d.initial):(u(!0),n?.(d.element)))};Promise.resolve(a(d)).then(p,v=>{throw d.in||u(!0),v})}}),f=Bh(c,sl(e));return o&&!t?null:J.cloneElement(e,{ref:f})}function t_(e,t,n){return e?te.jsx(oC,Object.assign({},n,{component:e})):t?te.jsx(uC,Object.assign({},n,{transition:t})):te.jsx(tC,Object.assign({},n))}const cC=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function fC(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}let cv;function hC(e){return cv||(cv=new mg({ownerDocument:e?.document})),cv}function dC(e){const t=vg(),n=e||hC(t),r=J.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:J.useCallback(a=>{r.current.dialog=a},[]),setBackdropRef:J.useCallback(a=>{r.current.backdrop=a},[])})}const nE=J.forwardRef((e,t)=>{let{show:n=!1,role:r="dialog",className:a,style:o,children:u,backdrop:c=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:v,runTransition:m,backdropTransition:y,runBackdropTransition:_,autoFocus:M=!0,enforceFocus:T=!0,restoreFocus:E=!0,restoreFocusOptions:A,renderDialog:C,renderBackdrop:L=Qe=>te.jsx("div",Object.assign({},Qe)),manager:I,container:j,onShow:q,onHide:ne=()=>{},onExit:W,onExited:oe,onExiting:ae,onEnter:he,onEntering:fe,onEntered:se}=e,z=fC(e,cC);const N=vg(),$=eC(j),x=dC(I),S=wR(),w=ER(n),[R,D]=J.useState(!n),B=J.useRef(null);J.useImperativeHandle(t,()=>x,[x]),Oh&&!w&&n&&(B.current=lv(N?.document)),n&&R&&D(!1);const H=Di(()=>{if(x.add(),xe.current=Jf(document,"keydown",le),Te.current=Jf(document,"focus",()=>setTimeout(P),!0),q&&q(),M){var Qe,dt;const _t=lv((Qe=(dt=x.dialog)==null?void 0:dt.ownerDocument)!=null?Qe:N?.document);x.dialog&&_t&&!Qx(x.dialog,_t)&&(B.current=_t,x.dialog.focus())}}),Q=Di(()=>{if(x.remove(),xe.current==null||xe.current(),Te.current==null||Te.current(),E){var Qe;(Qe=B.current)==null||Qe.focus==null||Qe.focus(A),B.current=null}});J.useEffect(()=>{!n||!$||H()},[n,$,H]),J.useEffect(()=>{R&&Q()},[R,Q]),JR(()=>{Q()});const P=Di(()=>{if(!T||!S()||!x.isTopModal())return;const Qe=lv(N?.document);x.dialog&&Qe&&!Qx(x.dialog,Qe)&&x.dialog.focus()}),X=Di(Qe=>{Qe.target===Qe.currentTarget&&(d?.(Qe),c===!0&&ne())}),le=Di(Qe=>{f&&sR(Qe)&&x.isTopModal()&&(p?.(Qe),Qe.defaultPrevented||ne())}),Te=J.useRef(),xe=J.useRef(),Ae=(...Qe)=>{D(!0),oe?.(...Qe)};if(!$)return null;const Oe=Object.assign({role:r,ref:x.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},z,{style:o,className:a,tabIndex:-1});let Ie=C?C(Oe):te.jsx("div",Object.assign({},Oe,{children:J.cloneElement(u,{role:"document"})}));Ie=t_(v,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:W,onExiting:ae,onExited:Ae,onEnter:he,onEntering:fe,onEntered:se,children:Ie});let ht=null;return c&&(ht=L({ref:x.setBackdropRef,onClick:X}),ht=t_(y,_,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ht})),te.jsx(te.Fragment,{children:go.createPortal(te.jsxs(te.Fragment,{children:[ht,Ie]}),$)})});nE.displayName="Modal";const pC=Object.assign(nE,{Manager:mg});function vC(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function mC(e,t){e.classList?e.classList.add(t):vC(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function n_(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function gC(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=n_(e.className,t):e.setAttribute("class",n_(e.className&&e.className.baseVal||"",t))}const mo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class rE extends mg{adjustAndStore(t,n,r){const a=n.style[t];n.dataset[t]=a,Ii(n,{[t]:`${parseFloat(Ii(n,t))+r}px`})}restore(t,n){const r=n.dataset[t];r!==void 0&&(delete n.dataset[t],Ii(n,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(mC(n,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Qa(n,mo.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth)),Qa(n,mo.STICKY_CONTENT).forEach(o=>this.adjustAndStore(a,o,-t.scrollBarWidth)),Qa(n,mo.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(a,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();gC(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Qa(n,mo.FIXED_CONTENT).forEach(o=>this.restore(r,o)),Qa(n,mo.STICKY_CONTENT).forEach(o=>this.restore(a,o)),Qa(n,mo.NAVBAR_TOGGLER).forEach(o=>this.restore(a,o))}}let fv;function yC(e){return fv||(fv=new rE(e)),fv}const iE=J.createContext({onHide(){}}),aE=J.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:r,children:a,...o},u)=>{const c=J.useContext(iE),f=Dh(()=>{c?.onHide(),r?.()});return te.jsxs("div",{ref:u,...o,children:[a,n&&te.jsx(cg,{"aria-label":e,variant:t,onClick:f})]})});aE.displayName="AbstractModalHeader";const sE=J.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=Kt(t,"nav-item"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));sE.displayName="NavItem";const oE=J.forwardRef(({bsPrefix:e,className:t,as:n=Gw,active:r,eventKey:a,disabled:o=!1,...u},c)=>{e=Kt(e,"nav-link");const[f,d]=$w({key:dg(a,u.href),active:r,disabled:o,...u});return te.jsx(n,{...u,...f,ref:c,disabled:o,className:Pt(t,e,o&&"disabled",d.isActive&&"active")})});oE.displayName="NavLink";const lE=J.forwardRef((e,t)=>{const{as:n="div",bsPrefix:r,variant:a,fill:o=!1,justify:u=!1,navbar:c,navbarScroll:f,className:d,activeKey:p,...v}=Dw(e,{activeKey:"onSelect"}),m=Kt(r,"nav");let y,_,M=!1;const T=J.useContext(ol),E=J.useContext(hg);return T?(y=T.bsPrefix,M=c??!0):E&&({cardHeaderBsPrefix:_}=E),te.jsx(QR,{as:n,ref:t,activeKey:p,className:Pt(d,{[m]:!M,[`${y}-nav`]:M,[`${y}-nav-scroll`]:M&&f,[`${_}-${a}`]:!!_,[`${m}-${a}`]:!!a,[`${m}-fill`]:o,[`${m}-justified`]:u}),...v})});lE.displayName="Nav";const Gf=Object.assign(lE,{Item:sE,Link:oE}),uE=J.forwardRef(({bsPrefix:e,className:t,as:n,...r},a)=>{e=Kt(e,"navbar-brand");const o=n||(r.href?"a":"span");return te.jsx(o,{...r,ref:a,className:Pt(t,e)})});uE.displayName="NavbarBrand";const cE=J.forwardRef(({children:e,bsPrefix:t,...n},r)=>{t=Kt(t,"navbar-collapse");const a=J.useContext(ol);return te.jsx(Fw,{in:!!(a&&a.expanded),...n,children:te.jsx("div",{ref:r,className:t,children:e})})});cE.displayName="NavbarCollapse";const fE=J.forwardRef(({bsPrefix:e,className:t,children:n,label:r="Toggle navigation",as:a="button",onClick:o,...u},c)=>{e=Kt(e,"navbar-toggler");const{onToggle:f,expanded:d}=J.useContext(ol)||{},p=Dh(v=>{o&&o(v),f&&f()});return a==="button"&&(u.type="button"),te.jsx(a,{...u,ref:c,onClick:p,"aria-label":r,className:Pt(t,e,!d&&"collapsed"),children:n||te.jsx("span",{className:`${e}-icon`})})});fE.displayName="NavbarToggle";const Rm=new WeakMap,r_=(e,t)=>{if(!e||!t)return;const n=Rm.get(t)||new Map;Rm.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function bC(e,t=typeof window>"u"?void 0:window){const n=r_(e,t),[r,a]=J.useState(()=>n?n.matches:!1);return jR(()=>{let o=r_(e,t);if(!o)return a(!1);let u=Rm.get(t);const c=()=>{a(o.matches)};return o.refCount++,o.addListener(c),c(),()=>{o.removeListener(c),o.refCount--,o.refCount<=0&&u?.delete(o.media),o=void 0}},[e]),r}function xC(e){const t=Object.keys(e);function n(c,f){return c===f?f:c?`${c} and ${f}`:f}function r(c){return t[Math.min(t.indexOf(c)+1,t.length-1)]}function a(c){const f=r(c);let d=e[f];return typeof d=="number"?d=`${d-.2}px`:d=`calc(${d} - 0.2px)`,`(max-width: ${d})`}function o(c){let f=e[c];return typeof f=="number"&&(f=`${f}px`),`(min-width: ${f})`}function u(c,f,d){let p;typeof c=="object"?(p=c,d=f,f=!0):(f=f||!0,p={[c]:f});let v=J.useMemo(()=>Object.entries(p).reduce((m,[y,_])=>((_==="up"||_===!0)&&(m=n(m,o(y))),(_==="down"||_===!0)&&(m=n(m,a(y))),m),""),[JSON.stringify(p)]);return bC(v,d)}return u}const _C=xC({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),hE=J.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},a)=>(t=Kt(t,"offcanvas-body"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));hE.displayName="OffcanvasBody";const wC={[jr]:"show",[Ni]:"show"},dE=J.forwardRef(({bsPrefix:e,className:t,children:n,in:r=!1,mountOnEnter:a=!1,unmountOnExit:o=!1,appear:u=!1,...c},f)=>(e=Kt(e,"offcanvas"),te.jsx(Nh,{ref:f,addEndListener:og,in:r,mountOnEnter:a,unmountOnExit:o,appear:u,...c,childRef:sl(n),children:(d,p)=>J.cloneElement(n,{...p,className:Pt(t,n.props.className,(d===jr||d===Eu)&&`${e}-toggling`,wC[d])})})));dE.displayName="OffcanvasToggling";const pE=J.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:r=!1,...a},o)=>(e=Kt(e,"offcanvas-header"),te.jsx(aE,{ref:o,...a,className:Pt(t,e),closeLabel:n,closeButton:r})));pE.displayName="OffcanvasHeader";const EC=lg("h5"),vE=J.forwardRef(({className:e,bsPrefix:t,as:n=EC,...r},a)=>(t=Kt(t,"offcanvas-title"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));vE.displayName="OffcanvasTitle";function MC(e){return te.jsx(dE,{...e})}function TC(e){return te.jsx(kw,{...e})}const mE=J.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:a="start",responsive:o,show:u=!1,backdrop:c=!0,keyboard:f=!0,scroll:d=!1,onEscapeKeyDown:p,onShow:v,onHide:m,container:y,autoFocus:_=!0,enforceFocus:M=!0,restoreFocus:T=!0,restoreFocusOptions:E,onEntered:A,onExit:C,onExiting:L,onEnter:I,onEntering:j,onExited:q,backdropClassName:ne,manager:W,renderStaticNode:oe=!1,...ae},he)=>{const fe=J.useRef();e=Kt(e,"offcanvas");const[se,z]=J.useState(!1),N=Dh(m),$=_C(o||"xs","up");J.useEffect(()=>{z(o?u&&!$:u)},[u,o,$]);const x=J.useMemo(()=>({onHide:N}),[N]);function S(){return W||(d?(fe.current||(fe.current=new rE({handleContainerOverflow:!1})),fe.current):yC())}const w=(H,...Q)=>{H&&(H.style.visibility="visible"),I?.(H,...Q)},R=(H,...Q)=>{H&&(H.style.visibility=""),q?.(...Q)},D=J.useCallback(H=>te.jsx("div",{...H,className:Pt(`${e}-backdrop`,ne)}),[ne,e]),B=H=>te.jsx("div",{...H,...ae,className:Pt(t,o?`${e}-${o}`:e,`${e}-${a}`),"aria-labelledby":r,children:n});return te.jsxs(te.Fragment,{children:[!se&&(o||oe)&&B({}),te.jsx(iE.Provider,{value:x,children:te.jsx(pC,{show:se,ref:he,backdrop:c,container:y,keyboard:f,autoFocus:_,enforceFocus:M&&!d,restoreFocus:T,restoreFocusOptions:E,onEscapeKeyDown:p,onShow:v,onHide:N,onEnter:w,onEntering:j,onEntered:A,onExit:C,onExiting:L,onExited:R,manager:S(),transition:MC,backdropTransition:TC,renderBackdrop:D,renderDialog:B})})]})});mE.displayName="Offcanvas";const SC=Object.assign(mE,{Body:hE,Header:pE,Title:vE}),gE=J.forwardRef(({onHide:e,...t},n)=>{const r=J.useContext(ol),a=Dh(()=>{r==null||r.onToggle==null||r.onToggle(),e?.()});return te.jsx(SC,{ref:n,show:!!(r!=null&&r.expanded),...t,renderStaticNode:!0,onHide:a})});gE.displayName="NavbarOffcanvas";const yE=J.forwardRef(({className:e,bsPrefix:t,as:n="span",...r},a)=>(t=Kt(t,"navbar-text"),te.jsx(n,{ref:a,className:Pt(e,t),...r})));yE.displayName="NavbarText";const bE=J.forwardRef((e,t)=>{const{bsPrefix:n,expand:r=!0,variant:a="light",bg:o,fixed:u,sticky:c,className:f,as:d="nav",expanded:p,onToggle:v,onSelect:m,collapseOnSelect:y=!1,..._}=Dw(e,{expanded:"onToggle"}),M=Kt(n,"navbar"),T=J.useCallback((...C)=>{m?.(...C),y&&p&&v?.(!1)},[m,y,p,v]);_.role===void 0&&d!=="nav"&&(_.role="navigation");let E=`${M}-expand`;typeof r=="string"&&(E=`${E}-${r}`);const A=J.useMemo(()=>({onToggle:()=>v?.(!p),bsPrefix:M,expanded:!!p,expand:r}),[M,p,r,v]);return te.jsx(ol.Provider,{value:A,children:te.jsx($f.Provider,{value:T,children:te.jsx(d,{ref:t,..._,className:Pt(f,M,r&&E,a&&`${M}-${a}`,o&&`bg-${o}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})});bE.displayName="Navbar";const AC=Object.assign(bE,{Brand:uE,Collapse:cE,Offcanvas:gE,Text:yE,Toggle:fE}),eh=J.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},a)=>{const o=Kt(e,"row"),u=Uw(),c=Bw(),f=`${o}-cols`,d=[];return u.forEach(p=>{const v=r[p];delete r[p];let m;v!=null&&typeof v=="object"?{cols:m}=v:m=v;const y=p!==c?`-${p}`:"";m!=null&&d.push(`${f}${y}-${m}`)}),te.jsx(n,{ref:a,...r,className:Pt(t,o,...d)})});eh.displayName="Row";function RC(){return te.jsx(AC,{bg:"dark",variant:"dark",sticky:"top",style:{width:"100vw"},children:te.jsx(ns,{fluid:!0,children:te.jsxs(Gf,{className:"me-auto",children:[te.jsx(Gf.Link,{as:yu,to:"/",children:"Home"}),te.jsx(Gf.Link,{as:yu,to:"/robot",children:"Robot"}),te.jsx(Gf.Link,{as:yu,to:"/settings",children:"Settings"})]})})})}function CC(){const e=Rh(),t=()=>{e("/robot")};return te.jsxs("div",{className:"p-4 bg-black text-white min-vh-100",children:[te.jsx("section",{className:"my-5",children:te.jsx(ns,{children:te.jsxs(eh,{className:"align-items-center",children:[te.jsxs(ba,{lg:6,children:[te.jsx("h1",{className:"display-4 fw-bold",children:"Assistive Robotic Arm"}),te.jsx("p",{className:"lead text-light mb-4",children:"Bringing independence around the house."}),te.jsx("p",{className:"text-light",children:`The Assistive Robotic Arm is designed to support users with limited mobility to independently complete everyday tasks hands-free. Whether it's simply moving an object or helping with daily routines, the robot arm responds to natural commands like "pick up the cup," "place the plate on the table," or "twist open the jar." Using advanced language understanding and task planning, the system interprets the given command, breaks it down into a sequence of executable steps, and carries out the task. The process is fully visualized in real time, giving users clear feedback on how the robot understands and responds to their requests. This allows for trust, transparency, and easy corrections if needed. Designed with accessibility and autonomy in mind, the Assistive Robotic Arm opens new possibilities for hands-free assistance in home and care settings.`}),te.jsx(wa,{size:"lg",className:"mb-3 mb-lg-0",style:{backgroundColor:"#008080",borderColor:"#008080"},onClick:t,children:"Try It Now"})]}),te.jsx(ba,{lg:6,className:"text-center",children:te.jsxs("video",{controls:!0,className:"rounded shadow",style:{width:"100%",maxWidth:"500px",height:"auto"},children:[te.jsx("source",{src:"/p13/demo.webm",type:"video/webm"}),"Your browser does not support the video tag."]})})]})})}),te.jsxs("section",{className:"my-5",children:[te.jsx("h2",{className:"text-center mb-4",children:"What it can do"}),te.jsx(ns,{children:te.jsxs(eh,{className:"g-4",children:[te.jsx(ba,{lg:4,children:te.jsxs(On,{bg:"dark",text:"white",className:"text-center",style:{height:"100%",display:"grid",gridTemplateRows:"1fr auto",padding:"1rem"},children:[te.jsx("div",{className:"d-flex justify-content-center align-items-center",children:te.jsxs("div",{children:[te.jsx(On.Img,{src:"/p13/text-input.png",className:"img-fluid mb-2",alt:"Text input example"}),te.jsx(On.Img,{src:"/p13/speech-input.png",className:"img-fluid",alt:"Speech input example"})]})}),te.jsxs(On.Body,{style:{paddingBottom:0},children:[te.jsx(On.Title,{className:"fw-bold",children:"Accessible Communication"}),te.jsx(On.Text,{children:"Easily switch between typing and speech communication modes."})]})]})}),te.jsx(ba,{lg:4,children:te.jsxs(On,{bg:"dark",text:"white",className:"text-center",style:{height:"100%",display:"grid",gridTemplateRows:"1fr auto",padding:"1rem"},children:[te.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column",children:[te.jsx(On.Img,{src:"/p13/task-planning-user.jpg",className:"mb-2 img-fluid",alt:"First user command"}),te.jsx(On.Img,{src:"/p13/task-planning-agent.jpg",className:"mb-2 img-fluid",alt:"First task planning from agent"}),te.jsx(On.Img,{src:"/p13/task-planning-user-2.png",className:"mb-2 img-fluid",alt:"Second user command"}),te.jsx(On.Img,{src:"/p13/task-planning-agent-2.png",className:"img-fluid",alt:"Second task planning from agent"})]}),te.jsxs(On.Body,{style:{paddingBottom:0},children:[te.jsx(On.Title,{className:"fw-bold",children:"Smart Task Planning"}),te.jsx(On.Text,{children:"The model accurately breaks down complex tasks into achievable steps, so you don't need to worry about every detail."})]})]})}),te.jsx(ba,{lg:4,children:te.jsxs(On,{bg:"dark",text:"white",className:"text-center",style:{height:"100%",display:"grid",gridTemplateRows:"1fr auto",padding:"1rem"},children:[te.jsx("div",{className:"d-flex justify-content-center align-items-center",children:te.jsx(On.Img,{src:"/p13/visualization.jpg",className:"img-fluid",alt:"Live visualization of robot arm and objects in environment"})}),te.jsxs(On.Body,{style:{paddingBottom:0},children:[te.jsx(On.Title,{className:"fw-bold",children:"Live Visualization"}),te.jsx(On.Text,{children:"Watch the robot visualized on screen before real-world manipulation."})]})]})})]})})]}),te.jsxs("section",{className:"text-center my-5",children:[te.jsx("h2",{className:"mb-3",children:"Get started with the Assistive Robotic Arm"}),te.jsx("p",{className:"lead text-light",children:"Experience how it brings more autonomy to daily life."}),te.jsx(wa,{size:"lg",style:{backgroundColor:"#008080",borderColor:"#008080"},onClick:t,children:"Try It Now"})]})]})}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var hv,i_;function Rs(){if(i_)return hv;i_=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function r(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function a(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var u={},c=0;c<10;c++)u["_"+String.fromCharCode(c)]=c;var f=Object.getOwnPropertyNames(u).map(function(p){return u[p]});if(f.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(p){d[p]=p}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return hv=a()?Object.assign:function(o,u){for(var c,f=r(o),d,p=1;p<arguments.length;p++){c=Object(arguments[p]);for(var v in c)t.call(c,v)&&(f[v]=c[v]);if(e){d=e(c);for(var m=0;m<d.length;m++)n.call(c,d[m])&&(f[d[m]]=c[d[m]])}}return f},hv}var dv={exports:{}},pv,a_;function gg(){return a_||(a_=1,pv=function(e,t,n){t.forEach(function(r){var a=n[r];e.prototype[r]=function(o){return o.ros=this,new a(o)}})}),pv}var vv,s_;function xE(){return s_||(s_=1,vv=typeof window<"u"?window.WebSocket:WebSocket),vv}var mv,o_;function LC(){if(o_)return mv;o_=1;var e=arguments[3],t=arguments[4],n=arguments[5],r=JSON.stringify;return mv=function(a,o){for(var u,c=Object.keys(n),f=0,d=c.length;f<d;f++){var p=c[f],v=n[p].exports;if(v===a||v&&v.default===a){u=p;break}}if(!u){u=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var m={},f=0,d=c.length;f<d;f++){var p=c[f];m[p]=p}t[u]=["function(require,module,exports){"+a+"(self); }",m]}var y=Math.floor(Math.pow(16,8)*Math.random()).toString(16),_={};_[u]=u,t[y]=["function(require,module,exports){var f = require("+r(u)+");(f.default ? f.default : f)(self);}",_];var M={};T(y);function T(j){M[j]=!0;for(var q in t[j][1]){var ne=t[j][1][q];M[ne]||T(ne)}}var E="("+e+")({"+Object.keys(M).map(function(j){return r(j)+":["+t[j][0]+","+r(t[j][1])+"]"}).join(",")+"},{},["+r(y)+"])",A=window.URL||window.webkitURL||window.mozURL||window.msURL,C=new Blob([E],{type:"text/javascript"});if(o&&o.bare)return C;var L=A.createObjectURL(C),I=new Worker(L);return I.objectURL=L,I},mv}var gv={exports:{}},l_;function OC(){return l_||(l_=1,function(e){function t(d){var p={};function v(y){if(p[y])return p[y].exports;var _=p[y]={i:y,l:!1,exports:{}};return d[y].call(_.exports,_,_.exports,v),_.l=!0,_.exports}v.m=d,v.c=p,v.i=function(y){return y},v.d=function(y,_,M){v.o(y,_)||Object.defineProperty(y,_,{configurable:!1,enumerable:!0,get:M})},v.r=function(y){Object.defineProperty(y,"__esModule",{value:!0})},v.n=function(y){var _=y&&y.__esModule?function(){return y.default}:function(){return y};return v.d(_,"a",_),_},v.o=function(y,_){return Object.prototype.hasOwnProperty.call(y,_)},v.p="/",v.oe=function(y){throw console.error(y),y};var m=v(v.s=ENTRY_MODULE);return m.default||m}var n="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+n+").*?\\)";function a(d){return(d+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(d){return!isNaN(1*d)}function u(d,p,v){var m={};m[v]=[];var y=p.toString(),_=y.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return m;for(var M=_[1],T=new RegExp("(\\\\n|\\W)"+a(M)+r,"g"),E;E=T.exec(y);)E[3]!=="dll-reference"&&m[v].push(E[3]);for(T=new RegExp("\\("+a(M)+'\\("(dll-reference\\s('+n+'))"\\)\\)'+r,"g");E=T.exec(y);)d[E[2]]||(m[v].push(E[1]),d[E[2]]=__webpack_require__(E[1]).m),m[E[2]]=m[E[2]]||[],m[E[2]].push(E[4]);for(var A=Object.keys(m),C=0;C<A.length;C++)for(var L=0;L<m[A[C]].length;L++)o(m[A[C]][L])&&(m[A[C]][L]=1*m[A[C]][L]);return m}function c(d){var p=Object.keys(d);return p.reduce(function(v,m){return v||d[m].length>0},!1)}function f(d,p){for(var v={main:[p]},m={main:[]},y={main:{}};c(v);)for(var _=Object.keys(v),M=0;M<_.length;M++){var T=_[M],E=v[T],A=E.pop();if(y[T]=y[T]||{},!(y[T][A]||!d[T][A])){y[T][A]=!0,m[T]=m[T]||[],m[T].push(A);for(var C=u(d,d[T][A],T),L=Object.keys(C),I=0;I<L.length;I++)v[L[I]]=v[L[I]]||[],v[L[I]]=v[L[I]].concat(C[L[I]])}}return m}e.exports=function(d,p){p=p||{};var v={main:__webpack_modules__},m=p.all?{main:Object.keys(v.main)}:f(v,d),y="";Object.keys(m).filter(function(A){return A!=="main"}).forEach(function(A){for(var C=0;m[A][C];)C++;m[A].push(C),v[A][C]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",y=y+"var "+A+" = ("+t.toString().replace("ENTRY_MODULE",JSON.stringify(C))+")({"+m[A].map(function(L){return""+JSON.stringify(L)+": "+v[A][L].toString()}).join(",")+`});
`}),y=y+"new (("+t.toString().replace("ENTRY_MODULE",JSON.stringify(d))+")({"+m.main.map(function(A){return""+JSON.stringify(A)+": "+v.main[A].toString()}).join(",")+"}))(self);";var _=new window.Blob([y],{type:"text/javascript"});if(p.bare)return _;var M=window.URL||window.webkitURL||window.mozURL||window.msURL,T=M.createObjectURL(_),E=new window.Worker(T);return E.objectURL=T,E}}(gv)),gv.exports}var yv,u_;function NC(){if(u_)return yv;u_=1;var e=e||xE();return yv=function(t){var n=null;function r(o){var u=o.data;u instanceof ArrayBuffer?t.postMessage(u,[u]):t.postMessage(u)}function a(o){t.postMessage({type:o.type})}t.addEventListener("message",function(o){var u=o.data;if(typeof u=="string")n.send(u);else if(u.hasOwnProperty("close"))n.close(),n=null;else if(u.hasOwnProperty("uri")){var c=u.uri;n=new e(c),n.binaryType="arraybuffer",n.onmessage=r,n.onclose=a,n.onopen=a,n.onerror=a}else throw"Unknown message to WorkerSocket"})},yv}var bv,c_;function DC(){if(c_)return bv;c_=1;try{var e=LC()}catch{var e=OC()}var t=NC();function n(r){this.socket_=e(t),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:r})}return n.prototype.handleWorkerMessage_=function(r){var a=r.data;if(a instanceof ArrayBuffer||typeof a=="string")this.onmessage(r);else{var o=a.type;if(o==="close")this.onclose(null);else if(o==="open")this.onopen(null);else if(o==="error")this.onerror(null);else throw"Unknown message from workersocket"}},n.prototype.send=function(r){this.socket_.postMessage(r)},n.prototype.close=function(){this.socket_.postMessage({close:!0})},bv=n,bv}var xv,f_;function UC(){return f_||(f_=1,xv=function(){return document.createElement("canvas")}),xv}var _v,h_;function BC(){if(h_)return _v;h_=1;var e=UC(),t=e.Image||window.Image;function n(r,a){var o=new t;o.onload=function(){var u=new e,c=u.getContext("2d");u.width=o.width,u.height=o.height,c.imageSmoothingEnabled=!1,c.webkitImageSmoothingEnabled=!1,c.mozImageSmoothingEnabled=!1,c.drawImage(o,0,0);for(var f=c.getImageData(0,0,o.width,o.height).data,d="",p=0;p<f.length;p+=4)d+=String.fromCharCode(f[p],f[p+1],f[p+2]);a(JSON.parse(d))},o.src="data:image/png;base64,"+r}return _v=n,_v}var Yf={exports:{}},PC=Yf.exports,d_;function zC(){return d_||(d_=1,function(e){(function(t,n){var r=Math.pow(2,-24),a=Math.pow(2,32),o=Math.pow(2,53);function u(d){var p=new ArrayBuffer(256),v=new DataView(p),m,y=0;function _(ae){for(var he=p.byteLength,fe=y+ae;he<fe;)he*=2;if(he!==p.byteLength){var se=v;p=new ArrayBuffer(he),v=new DataView(p);for(var z=y+3>>2,N=0;N<z;++N)v.setUint32(N*4,se.getUint32(N*4))}return m=ae,v}function M(){y+=m}function T(ae){M(_(8).setFloat64(y,ae))}function E(ae){M(_(1).setUint8(y,ae))}function A(ae){for(var he=_(ae.length),fe=0;fe<ae.length;++fe)he.setUint8(y+fe,ae[fe]);M()}function C(ae){M(_(2).setUint16(y,ae))}function L(ae){M(_(4).setUint32(y,ae))}function I(ae){var he=ae%a,fe=(ae-he)/a,se=_(8);se.setUint32(y,fe),se.setUint32(y+4,he),M()}function j(ae,he){he<24?E(ae<<5|he):he<256?(E(ae<<5|24),E(he)):he<65536?(E(ae<<5|25),C(he)):he<4294967296?(E(ae<<5|26),L(he)):(E(ae<<5|27),I(he))}function q(ae){var he;if(ae===!1)return E(244);if(ae===!0)return E(245);if(ae===null)return E(246);if(ae===n)return E(247);switch(typeof ae){case"number":if(Math.floor(ae)===ae){if(0<=ae&&ae<=o)return j(0,ae);if(-o<=ae&&ae<0)return j(1,-(ae+1))}return E(251),T(ae);case"string":var fe=[];for(he=0;he<ae.length;++he){var se=ae.charCodeAt(he);se<128?fe.push(se):se<2048?(fe.push(192|se>>6),fe.push(128|se&63)):se<55296?(fe.push(224|se>>12),fe.push(128|se>>6&63),fe.push(128|se&63)):(se=(se&1023)<<10,se|=ae.charCodeAt(++he)&1023,se+=65536,fe.push(240|se>>18),fe.push(128|se>>12&63),fe.push(128|se>>6&63),fe.push(128|se&63))}return j(3,fe.length),A(fe);default:var z;if(Array.isArray(ae))for(z=ae.length,j(4,z),he=0;he<z;++he)q(ae[he]);else if(ae instanceof Uint8Array)j(2,ae.length),A(ae);else{var N=Object.keys(ae);for(z=N.length,j(5,z),he=0;he<z;++he){var $=N[he];q($),q(ae[$])}}}}if(q(d),"slice"in p)return p.slice(0,y);for(var ne=new ArrayBuffer(y),W=new DataView(ne),oe=0;oe<y;++oe)W.setUint8(oe,v.getUint8(oe));return ne}function c(d,p,v){var m=new DataView(d),y=0;typeof p!="function"&&(p=function(fe){return fe}),typeof v!="function"&&(v=function(){return n});function _(fe,se){return y+=se,fe}function M(fe){return _(new Uint8Array(d,y,fe),fe)}function T(){var fe=new ArrayBuffer(4),se=new DataView(fe),z=L(),N=z&32768,$=z&31744,x=z&1023;if($===31744)$=261120;else if($!==0)$+=114688;else if(x!==0)return x*r;return se.setUint32(0,N<<16|$<<13|x<<13),se.getFloat32(0)}function E(){return _(m.getFloat32(y),4)}function A(){return _(m.getFloat64(y),8)}function C(){return _(m.getUint8(y),1)}function L(){return _(m.getUint16(y),2)}function I(){return _(m.getUint32(y),4)}function j(){return I()*a+I()}function q(){return m.getUint8(y)!==255?!1:(y+=1,!0)}function ne(fe){if(fe<24)return fe;if(fe===24)return C();if(fe===25)return L();if(fe===26)return I();if(fe===27)return j();if(fe===31)return-1;throw"Invalid length encoding"}function W(fe){var se=C();if(se===255)return-1;var z=ne(se&31);if(z<0||se>>5!==fe)throw"Invalid indefinite length element";return z}function oe(fe,se){for(var z=0;z<se;++z){var N=C();N&128&&(N<224?(N=(N&31)<<6|C()&63,se-=1):N<240?(N=(N&15)<<12|(C()&63)<<6|C()&63,se-=2):(N=(N&15)<<18|(C()&63)<<12|(C()&63)<<6|C()&63,se-=3)),N<65536?fe.push(N):(N-=65536,fe.push(55296|N>>10),fe.push(56320|N&1023))}}function ae(){var fe=C(),se=fe>>5,z=fe&31,N,$;if(se===7)switch(z){case 25:return T();case 26:return E();case 27:return A()}if($=ne(z),$<0&&(se<2||6<se))throw"Invalid length";switch(se){case 0:return $;case 1:return-1-$;case 2:if($<0){for(var x=[],S=0;($=W(se))>=0;)S+=$,x.push(M($));var w=new Uint8Array(S),R=0;for(N=0;N<x.length;++N)w.set(x[N],R),R+=x[N].length;return w}return M($);case 3:var D=[];if($<0)for(;($=W(se))>=0;)oe(D,$);else oe(D,$);return String.fromCharCode.apply(null,D);case 4:var B;if($<0)for(B=[];!q();)B.push(ae());else for(B=new Array($),N=0;N<$;++N)B[N]=ae();return B;case 5:var H={};for(N=0;N<$||$<0&&!q();++N){var Q=ae();H[Q]=ae()}return H;case 6:return p(ae(),$);case 7:switch($){case 20:return!1;case 21:return!0;case 22:return null;case 23:return n;default:return v($)}}}var he=ae();if(y!==d.byteLength)throw"Remaining bytes";return he}var f={encode:u,decode:c};e.exports?e.exports=f:t.CBOR||(t.CBOR=f)})(PC)}(Yf)),Yf.exports}var wv={exports:{}},p_;function FC(){return p_||(p_=1,function(e){var t=Math.pow(2,32),n=!1;function r(){n||(n=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}function a(p){r();for(var v=p.byteLength,m=p.byteOffset,y=v/8,_=p.buffer.slice(m,m+v),M=new Uint32Array(_),T=new Array(y),E=0;E<y;E++){var A=E*2,C=M[A],L=M[A+1];T[E]=C+t*L}return T}function o(p){r();for(var v=p.byteLength,m=p.byteOffset,y=v/8,_=p.buffer.slice(m,m+v),M=new Uint32Array(_),T=new Int32Array(_),E=new Array(y),A=0;A<y;A++){var C=A*2,L=M[C],I=T[C+1];E[A]=L+t*I}return E}function u(p,v){var m=p.byteLength,y=p.byteOffset,_=p.buffer.slice(y,y+m);return new v(_)}var c={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},f={71:a,79:o};function d(p,v){if(v in c){var m=c[v];return u(p,m)}return v in f?f[v](p):p}e.exports&&(e.exports=d)}(wv)),wv.exports}var Ev,v_;function IC(){if(v_)return Ev;v_=1;var e=BC(),t=zC(),n=FC(),r=null;typeof bson<"u"&&(r=bson().BSON);function a(o){var u=null;o.transportOptions.decoder&&(u=o.transportOptions.decoder);function c(p){p.op==="publish"?o.emit(p.topic,p.msg):p.op==="service_response"?o.emit(p.id,p):p.op==="call_service"?o.emit(p.service,p):p.op==="status"&&(p.id?o.emit("status:"+p.id,p):o.emit("status",p))}function f(p,v){p.op==="png"?e(p.data,v):v(p)}function d(p,v){if(!r)throw"Cannot process BSON encoded message without BSON header.";var m=new FileReader;m.onload=function(){var y=new Uint8Array(this.result),_=r.deserialize(y);v(_)},m.readAsArrayBuffer(p)}return{onopen:function(v){o.isConnected=!0,o.emit("connection",v)},onclose:function(v){o.isConnected=!1,o.emit("close",v)},onerror:function(v){o.emit("error",v)},onmessage:function(v){if(u)u(v.data,function(_){c(_)});else if(typeof Blob<"u"&&v.data instanceof Blob)d(v.data,function(_){f(_,c)});else if(v.data instanceof ArrayBuffer){var m=t.decode(v.data,n);c(m)}else{var y=JSON.parse(typeof v=="string"?v:v.data);f(y,c)}}}}return Ev=a,Ev}var Mv,m_;function _E(){if(m_)return Mv;m_=1;var e=Rs();function t(n){e(this,n)}return Mv=t,Mv}var Tv,g_;function Mc(){if(g_)return Tv;g_=1;var e=Rs();function t(n){e(this,n)}return Tv=t,Tv}var Sv={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var y_;function Cs(){return y_||(y_=1,function(e,t){(function(n){var r=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(S){return Object.prototype.toString.call(S)==="[object Array]"},o=10,u=typeof process=="object"&&typeof process.nextTick=="function",c=typeof Symbol=="function",f=typeof Reflect=="object",d=typeof setImmediate=="function",p=d?setImmediate:setTimeout,v=c?f&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(x){var S=Object.getOwnPropertyNames(x);return S.push.apply(S,Object.getOwnPropertySymbols(x)),S}:Object.keys;function m(){this._events={},this._conf&&y.call(this,this._conf)}function y(x){x&&(this._conf=x,x.delimiter&&(this.delimiter=x.delimiter),x.maxListeners!==n&&(this._maxListeners=x.maxListeners),x.wildcard&&(this.wildcard=x.wildcard),x.newListener&&(this._newListener=x.newListener),x.removeListener&&(this._removeListener=x.removeListener),x.verboseMemoryLeak&&(this.verboseMemoryLeak=x.verboseMemoryLeak),x.ignoreErrors&&(this.ignoreErrors=x.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function _(x,S){var w="(node) warning: possible EventEmitter memory leak detected. "+x+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(w+=" Event name: "+S+"."),typeof process<"u"&&process.emitWarning){var R=new Error(w);R.name="MaxListenersExceededWarning",R.emitter=this,R.count=x,process.emitWarning(R)}else console.error(w),console.trace&&console.trace()}var M=function(x,S,w){var R=arguments.length;switch(R){case 0:return[];case 1:return[x];case 2:return[x,S];case 3:return[x,S,w];default:for(var D=new Array(R);R--;)D[R]=arguments[R];return D}};function T(x,S){for(var w={},R,D=x.length,B=0,H=0;H<D;H++)R=x[H],w[R]=H<B?S[H]:n;return w}function E(x,S,w){this._emitter=x,this._target=S,this._listeners={},this._listenersCount=0;var R,D;if((w.on||w.off)&&(R=w.on,D=w.off),S.addEventListener?(R=S.addEventListener,D=S.removeEventListener):S.addListener?(R=S.addListener,D=S.removeListener):S.on&&(R=S.on,D=S.off),!R&&!D)throw Error("target does not implement any known event API");if(typeof R!="function")throw TypeError("on method must be a function");if(typeof D!="function")throw TypeError("off method must be a function");this._on=R,this._off=D;var B=x._observers;B?B.push(this):x._observers=[this]}Object.assign(E.prototype,{subscribe:function(x,S,w){var R=this,D=this._target,B=this._emitter,H=this._listeners,Q=function(){var P=M.apply(null,arguments),X={data:P,name:S,original:x};if(w){var le=w.call(D,X);le!==!1&&B.emit.apply(B,[X.name].concat(P));return}B.emit.apply(B,[S].concat(P))};if(H[x])throw Error("Event '"+x+"' is already listening");this._listenersCount++,B._newListener&&B._removeListener&&!R._onNewListener?(this._onNewListener=function(P){P===S&&H[x]===null&&(H[x]=Q,R._on.call(D,x,Q))},B.on("newListener",this._onNewListener),this._onRemoveListener=function(P){P===S&&!B.hasListeners(P)&&H[x]&&(H[x]=null,R._off.call(D,x,Q))},H[x]=null,B.on("removeListener",this._onRemoveListener)):(H[x]=Q,R._on.call(D,x,Q))},unsubscribe:function(x){var S=this,w=this._listeners,R=this._emitter,D,B,H=this._off,Q=this._target,P;if(x&&typeof x!="string")throw TypeError("event must be a string");function X(){S._onNewListener&&(R.off("newListener",S._onNewListener),R.off("removeListener",S._onRemoveListener),S._onNewListener=null,S._onRemoveListener=null);var le=ne.call(R,S);R._observers.splice(le,1)}if(x){if(D=w[x],!D)return;H.call(Q,x,D),delete w[x],--this._listenersCount||X()}else{for(B=v(w),P=B.length;P-- >0;)x=B[P],H.call(Q,x,w[x]);this._listeners={},this._listenersCount=0,X()}}});function A(x,S,w,R){var D=Object.assign({},S);if(!x)return D;if(typeof x!="object")throw TypeError("options must be an object");var B=Object.keys(x),H=B.length,Q,P,X;function le(xe){throw Error('Invalid "'+Q+'" option value'+(xe?". Reason: "+xe:""))}for(var Te=0;Te<H;Te++){if(Q=B[Te],!r.call(S,Q))throw Error('Unknown "'+Q+'" option');P=x[Q],P!==n&&(X=w[Q],D[Q]=X?X(P,le):P)}return D}function C(x,S){return(typeof x!="function"||!x.hasOwnProperty("prototype"))&&S("value must be a constructor"),x}function L(x){var S="value must be type of "+x.join("|"),w=x.length,R=x[0],D=x[1];return w===1?function(B,H){if(typeof B===R)return B;H(S)}:w===2?function(B,H){var Q=typeof B;if(Q===R||Q===D)return B;H(S)}:function(B,H){for(var Q=typeof B,P=w;P-- >0;)if(Q===x[P])return B;H(S)}}var I=L(["function"]),j=L(["object","function"]);function q(x,S,w){var R,D,B=0,H,Q=new x(function(P,X,le){w=A(w,{timeout:0,overload:!1},{timeout:function(Oe,Ie){return Oe*=1,(typeof Oe!="number"||Oe<0||!Number.isFinite(Oe))&&Ie("timeout must be a positive number"),Oe}}),R=!w.overload&&typeof x.prototype.cancel=="function"&&typeof le=="function";function Te(){D&&(D=null),B&&(clearTimeout(B),B=0)}var xe=function(Oe){Te(),P(Oe)},Ae=function(Oe){Te(),X(Oe)};R?S(xe,Ae,le):(D=[function(Oe){Ae(Oe||Error("canceled"))}],S(xe,Ae,function(Oe){if(H)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Oe!="function")throw TypeError("onCancel callback must be a function");D.push(Oe)}),H=!0),w.timeout>0&&(B=setTimeout(function(){var Oe=Error("timeout");Oe.code="ETIMEDOUT",B=0,Q.cancel(Oe),X(Oe)},w.timeout))});return R||(Q.cancel=function(P){if(D){for(var X=D.length,le=1;le<X;le++)D[le](P);D[0](P),D=null}}),Q}function ne(x){var S=this._observers;if(!S)return-1;for(var w=S.length,R=0;R<w;R++)if(S[R]._target===x)return R;return-1}function W(x,S,w,R,D){if(!w)return null;if(R===0){var B=typeof S;if(B==="string"){var H,Q,P=0,X=0,le=this.delimiter,Te=le.length;if((Q=S.indexOf(le))!==-1){H=new Array(5);do H[P++]=S.slice(X,Q),X=Q+Te;while((Q=S.indexOf(le,X))!==-1);H[P++]=S.slice(X),S=H,D=P}else S=[S],D=1}else B==="object"?D=S.length:(S=[S],D=1)}var xe=null,Ae,Oe,Ie,ht,Qe,dt=S[R],_t=S[R+1],mt,Ke;if(R===D)w._listeners&&(typeof w._listeners=="function"?(x&&x.push(w._listeners),xe=[w]):(x&&x.push.apply(x,w._listeners),xe=[w]));else if(dt==="*"){for(mt=v(w),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ke=W(x,S,w[Ae],R+1,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke));return xe}else if(dt==="**"){for(Qe=R+1===D||R+2===D&&_t==="*",Qe&&w._listeners&&(xe=W(x,S,w,D,D)),mt=v(w),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ae==="*"||Ae==="**"?(w[Ae]._listeners&&!Qe&&(Ke=W(x,S,w[Ae],D,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke)),Ke=W(x,S,w[Ae],R,D)):Ae===_t?Ke=W(x,S,w[Ae],R+2,D):Ke=W(x,S,w[Ae],R,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke));return xe}else w[dt]&&(xe=W(x,S,w[dt],R+1,D));if(Oe=w["*"],Oe&&W(x,S,Oe,R+1,D),Ie=w["**"],Ie)if(R<D)for(Ie._listeners&&W(x,S,Ie,D,D),mt=v(Ie),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ae===_t?W(x,S,Ie[Ae],R+2,D):Ae===dt?W(x,S,Ie[Ae],R+1,D):(ht={},ht[Ae]=Ie[Ae],W(x,S,{"**":ht},R+1,D)));else Ie._listeners?W(x,S,Ie,D,D):Ie["*"]&&Ie["*"]._listeners&&W(x,S,Ie["*"],D,D);return xe}function oe(x,S,w){var R=0,D=0,B,H=this.delimiter,Q=H.length,P;if(typeof x=="string")if((B=x.indexOf(H))!==-1){P=new Array(5);do P[R++]=x.slice(D,B),D=B+Q;while((B=x.indexOf(H,D))!==-1);P[R++]=x.slice(D)}else P=[x],R=1;else P=x,R=x.length;if(R>1){for(B=0;B+1<R;B++)if(P[B]==="**"&&P[B+1]==="**")return}var X=this.listenerTree,le;for(B=0;B<R;B++)if(le=P[B],X=X[le]||(X[le]={}),B===R-1)return X._listeners?(typeof X._listeners=="function"&&(X._listeners=[X._listeners]),w?X._listeners.unshift(S):X._listeners.push(S),!X._listeners.warned&&this._maxListeners>0&&X._listeners.length>this._maxListeners&&(X._listeners.warned=!0,_.call(this,X._listeners.length,le))):X._listeners=S,!0;return!0}function ae(x,S,w,R){for(var D=v(x),B=D.length,H,Q,P,X=x._listeners,le;B-- >0;)Q=D[B],H=x[Q],Q==="_listeners"?P=w:P=w?w.concat(Q):[Q],le=R||typeof Q=="symbol",X&&S.push(le?P:P.join(this.delimiter)),typeof H=="object"&&ae.call(this,H,S,P,le);return S}function he(x){for(var S=v(x),w=S.length,R,D,B;w-- >0;)D=S[w],R=x[D],R&&(B=!0,D!=="_listeners"&&!he(R)&&delete x[D]);return B}function fe(x,S,w){this.emitter=x,this.event=S,this.listener=w}fe.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function se(x,S,w){if(w===!0)D=!0;else if(w===!1)R=!0;else{if(!w||typeof w!="object")throw TypeError("options should be an object or true");var R=w.async,D=w.promisify,B=w.nextTick,H=w.objectify}if(R||B||D){var Q=S,P=S._origin||S;if(B&&!u)throw Error("process.nextTick is not supported");D===n&&(D=S.constructor.name==="AsyncFunction"),S=function(){var X=arguments,le=this,Te=this.event;return D?B?Promise.resolve():new Promise(function(xe){p(xe)}).then(function(){return le.event=Te,Q.apply(le,X)}):(B?process.nextTick:p)(function(){le.event=Te,Q.apply(le,X)})},S._async=!0,S._origin=P}return[S,H?new fe(this,x,S):this]}function z(x){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,y.call(this,x)}z.EventEmitter2=z,z.prototype.listenTo=function(x,S,w){if(typeof x!="object")throw TypeError("target musts be an object");var R=this;w=A(w,{on:n,off:n,reducers:n},{on:I,off:I,reducers:j});function D(B){if(typeof B!="object")throw TypeError("events must be an object");var H=w.reducers,Q=ne.call(R,x),P;Q===-1?P=new E(R,x,w):P=R._observers[Q];for(var X=v(B),le=X.length,Te,xe=typeof H=="function",Ae=0;Ae<le;Ae++)Te=X[Ae],P.subscribe(Te,B[Te]||Te,xe?H:H&&H[Te])}return a(S)?D(T(S)):D(typeof S=="string"?T(S.split(/\s+/)):S),this},z.prototype.stopListeningTo=function(x,S){var w=this._observers;if(!w)return!1;var R=w.length,D,B=!1;if(x&&typeof x!="object")throw TypeError("target should be an object");for(;R-- >0;)D=w[R],(!x||D._target===x)&&(D.unsubscribe(S),B=!0);return B},z.prototype.delimiter=".",z.prototype.setMaxListeners=function(x){x!==n&&(this._maxListeners=x,this._conf||(this._conf={}),this._conf.maxListeners=x)},z.prototype.getMaxListeners=function(){return this._maxListeners},z.prototype.event="",z.prototype.once=function(x,S,w){return this._once(x,S,!1,w)},z.prototype.prependOnceListener=function(x,S,w){return this._once(x,S,!0,w)},z.prototype._once=function(x,S,w,R){return this._many(x,1,S,w,R)},z.prototype.many=function(x,S,w,R){return this._many(x,S,w,!1,R)},z.prototype.prependMany=function(x,S,w,R){return this._many(x,S,w,!0,R)},z.prototype._many=function(x,S,w,R,D){var B=this;if(typeof w!="function")throw new Error("many only accepts instances of Function");function H(){return--S===0&&B.off(x,H),w.apply(this,arguments)}return H._origin=w,this._on(x,H,R,D)},z.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||m.call(this);var x=arguments[0],S,w=this.wildcard,R,D,B,H,Q;if(x==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(w&&(S=x,x!=="newListener"&&x!=="removeListener"&&typeof x=="object")){if(D=x.length,c){for(B=0;B<D;B++)if(typeof x[B]=="symbol"){Q=!0;break}}Q||(x=x.join(this.delimiter))}var P=arguments.length,X;if(this._all&&this._all.length)for(X=this._all.slice(),B=0,D=X.length;B<D;B++)switch(this.event=x,P){case 1:X[B].call(this,x);break;case 2:X[B].call(this,x,arguments[1]);break;case 3:X[B].call(this,x,arguments[1],arguments[2]);break;default:X[B].apply(this,arguments)}if(w)X=[],W.call(this,X,S,this.listenerTree,0,D);else if(X=this._events[x],typeof X=="function"){switch(this.event=x,P){case 1:X.call(this);break;case 2:X.call(this,arguments[1]);break;case 3:X.call(this,arguments[1],arguments[2]);break;default:for(R=new Array(P-1),H=1;H<P;H++)R[H-1]=arguments[H];X.apply(this,R)}return!0}else X&&(X=X.slice());if(X&&X.length){if(P>3)for(R=new Array(P-1),H=1;H<P;H++)R[H-1]=arguments[H];for(B=0,D=X.length;B<D;B++)switch(this.event=x,P){case 1:X[B].call(this);break;case 2:X[B].call(this,arguments[1]);break;case 3:X[B].call(this,arguments[1],arguments[2]);break;default:X[B].apply(this,R)}return!0}else if(!this.ignoreErrors&&!this._all&&x==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},z.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||m.call(this);var x=arguments[0],S=this.wildcard,w,R,D,B,H,Q;if(x==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(S&&(w=x,x!=="newListener"&&x!=="removeListener"&&typeof x=="object")){if(B=x.length,c){for(H=0;H<B;H++)if(typeof x[H]=="symbol"){R=!0;break}}R||(x=x.join(this.delimiter))}var P=[],X=arguments.length,le;if(this._all)for(H=0,B=this._all.length;H<B;H++)switch(this.event=x,X){case 1:P.push(this._all[H].call(this,x));break;case 2:P.push(this._all[H].call(this,x,arguments[1]));break;case 3:P.push(this._all[H].call(this,x,arguments[1],arguments[2]));break;default:P.push(this._all[H].apply(this,arguments))}if(S?(le=[],W.call(this,le,w,this.listenerTree,0)):le=this._events[x],typeof le=="function")switch(this.event=x,X){case 1:P.push(le.call(this));break;case 2:P.push(le.call(this,arguments[1]));break;case 3:P.push(le.call(this,arguments[1],arguments[2]));break;default:for(D=new Array(X-1),Q=1;Q<X;Q++)D[Q-1]=arguments[Q];P.push(le.apply(this,D))}else if(le&&le.length){if(le=le.slice(),X>3)for(D=new Array(X-1),Q=1;Q<X;Q++)D[Q-1]=arguments[Q];for(H=0,B=le.length;H<B;H++)switch(this.event=x,X){case 1:P.push(le[H].call(this));break;case 2:P.push(le[H].call(this,arguments[1]));break;case 3:P.push(le[H].call(this,arguments[1],arguments[2]));break;default:P.push(le[H].apply(this,D))}}else if(!this.ignoreErrors&&!this._all&&x==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(P)},z.prototype.on=function(x,S,w){return this._on(x,S,!1,w)},z.prototype.prependListener=function(x,S,w){return this._on(x,S,!0,w)},z.prototype.onAny=function(x){return this._onAny(x,!1)},z.prototype.prependAny=function(x){return this._onAny(x,!0)},z.prototype.addListener=z.prototype.on,z.prototype._onAny=function(x,S){if(typeof x!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),S?this._all.unshift(x):this._all.push(x),this},z.prototype._on=function(x,S,w,R){if(typeof x=="function")return this._onAny(x,S),this;if(typeof S!="function")throw new Error("on only accepts instances of Function");this._events||m.call(this);var D=this,B;return R!==n&&(B=se.call(this,x,S,R),S=B[0],D=B[1]),this._newListener&&this.emit("newListener",x,S),this.wildcard?(oe.call(this,x,S,w),D):(this._events[x]?(typeof this._events[x]=="function"&&(this._events[x]=[this._events[x]]),w?this._events[x].unshift(S):this._events[x].push(S),!this._events[x].warned&&this._maxListeners>0&&this._events[x].length>this._maxListeners&&(this._events[x].warned=!0,_.call(this,this._events[x].length,x))):this._events[x]=S,D)},z.prototype.off=function(x,S){if(typeof S!="function")throw new Error("removeListener only takes instances of Function");var w,R=[];if(this.wildcard){var D=typeof x=="string"?x.split(this.delimiter):x.slice();if(R=W.call(this,null,D,this.listenerTree,0),!R)return this}else{if(!this._events[x])return this;w=this._events[x],R.push({_listeners:w})}for(var B=0;B<R.length;B++){var H=R[B];if(w=H._listeners,a(w)){for(var Q=-1,P=0,X=w.length;P<X;P++)if(w[P]===S||w[P].listener&&w[P].listener===S||w[P]._origin&&w[P]._origin===S){Q=P;break}if(Q<0)continue;return this.wildcard?H._listeners.splice(Q,1):this._events[x].splice(Q,1),w.length===0&&(this.wildcard?delete H._listeners:delete this._events[x]),this._removeListener&&this.emit("removeListener",x,S),this}else(w===S||w.listener&&w.listener===S||w._origin&&w._origin===S)&&(this.wildcard?delete H._listeners:delete this._events[x],this._removeListener&&this.emit("removeListener",x,S))}return this.listenerTree&&he(this.listenerTree),this},z.prototype.offAny=function(x){var S=0,w=0,R;if(x&&this._all&&this._all.length>0){for(R=this._all,S=0,w=R.length;S<w;S++)if(x===R[S])return R.splice(S,1),this._removeListener&&this.emit("removeListenerAny",x),this}else{if(R=this._all,this._removeListener)for(S=0,w=R.length;S<w;S++)this.emit("removeListenerAny",R[S]);this._all=[]}return this},z.prototype.removeListener=z.prototype.off,z.prototype.removeAllListeners=function(x){if(x===n)return!this._events||m.call(this),this;if(this.wildcard){var S=W.call(this,null,x,this.listenerTree,0),w,R;if(!S)return this;for(R=0;R<S.length;R++)w=S[R],w._listeners=null;this.listenerTree&&he(this.listenerTree)}else this._events&&(this._events[x]=null);return this},z.prototype.listeners=function(x){var S=this._events,w,R,D,B,H;if(x===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!S)return[];for(w=v(S),B=w.length,D=[];B-- >0;)R=S[w[B]],typeof R=="function"?D.push(R):D.push.apply(D,R);return D}else{if(this.wildcard){if(H=this.listenerTree,!H)return[];var Q=[],P=typeof x=="string"?x.split(this.delimiter):x.slice();return W.call(this,Q,P,H,0),Q}return S?(R=S[x],R?typeof R=="function"?[R]:R:[]):[]}},z.prototype.eventNames=function(x){var S=this._events;return this.wildcard?ae.call(this,this.listenerTree,[],null,x):S?v(S):[]},z.prototype.listenerCount=function(x){return this.listeners(x).length},z.prototype.hasListeners=function(x){if(this.wildcard){var S=[],w=typeof x=="string"?x.split(this.delimiter):x.slice();return W.call(this,S,w,this.listenerTree,0),S.length>0}var R=this._events,D=this._all;return!!(D&&D.length||R&&(x===n?v(R).length:R[x]))},z.prototype.listenersAny=function(){return this._all?this._all:[]},z.prototype.waitFor=function(x,S){var w=this,R=typeof S;return R==="number"?S={timeout:S}:R==="function"&&(S={filter:S}),S=A(S,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:I,Promise:C}),q(S.Promise,function(D,B,H){function Q(){var P=S.filter;if(!(P&&!P.apply(w,arguments)))if(w.off(x,Q),S.handleError){var X=arguments[0];X?B(X):D(M.apply(null,arguments).slice(1))}else D(M.apply(null,arguments))}H(function(){w.off(x,Q)}),w._on(x,Q,!1)},{timeout:S.timeout,overload:S.overload})};function N(x,S,w){w=A(w,{Promise,timeout:0,overload:!1},{Promise:C});var R=w.Promise;return q(R,function(D,B,H){var Q;if(typeof x.addEventListener=="function"){Q=function(){D(M.apply(null,arguments))},H(function(){x.removeEventListener(S,Q)}),x.addEventListener(S,Q,{once:!0});return}var P=function(){X&&x.removeListener("error",X),D(M.apply(null,arguments))},X;S!=="error"&&(X=function(le){x.removeListener(S,P),B(le)},x.once("error",X)),H(function(){X&&x.removeListener("error",X),x.removeListener(S,P)}),x.once(S,P)},{timeout:w.timeout,overload:w.overload})}var $=z.prototype;Object.defineProperties(z,{defaultMaxListeners:{get:function(){return $._maxListeners},set:function(x){if(typeof x!="number"||x<0||Number.isNaN(x))throw TypeError("n must be a non-negative number");$._maxListeners=x},enumerable:!0},once:{value:N,writable:!0,configurable:!0}}),Object.defineProperties($,{_maxListeners:{value:o,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=z})()}(Sv)),Sv.exports}var Av,b_;function Ph(){if(b_)return Av;b_=1;var e=_E();Mc();var t=Cs().EventEmitter2;function n(r){r=r||{},this.ros=r.ros,this.name=r.name,this.serviceType=r.serviceType,this.isAdvertised=!1,this._serviceCallback=null}return n.prototype.__proto__=t.prototype,n.prototype.callService=function(r,a,o){if(!this.isAdvertised){var u="call_service:"+this.name+":"+ ++this.ros.idCounter;(a||o)&&this.ros.once(u,function(f){f.result!==void 0&&f.result===!1?typeof o=="function"&&o(f.values):typeof a=="function"&&a(new e(f.values))});var c={op:"call_service",id:u,service:this.name,type:this.serviceType,args:r};this.ros.callOnConnection(c)}},n.prototype.advertise=function(r){this.isAdvertised||typeof r!="function"||(this._serviceCallback=r,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},n.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},n.prototype._serviceResponse=function(r){var a={},o=this._serviceCallback(r.args,a),u={op:"service_response",service:this.name,values:new e(a),result:o};r.id&&(u.id=r.id),this.ros.callOnConnection(u)},Av=n,Av}var Rv,x_;function yg(){if(x_)return Rv;x_=1;var e=xE(),t=DC(),n=IC(),r=Ph(),a=Mc(),o=Rs(),u=Cs().EventEmitter2;function c(f){f=f||{};var d=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=f.transportLibrary||"websocket",this.transportOptions=f.transportOptions||{},this._sendFunc=function(p){d.sendEncodedMessage(p)},typeof f.groovyCompatibility>"u"?this.groovyCompatibility=!0:this.groovyCompatibility=f.groovyCompatibility,this.setMaxListeners(0),f.url&&this.connect(f.url)}return c.prototype.__proto__=u.prototype,c.prototype.connect=function(f){if(this.transportLibrary==="socket.io")this.socket=o(io(f,{"force new connection":!0}),n(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if(this.transportLibrary.constructor.name==="RTCPeerConnection")this.socket=o(this.transportLibrary.createDataChannel(f,this.transportOptions),n(this));else if(this.transportLibrary==="websocket"){if(!this.socket||this.socket.readyState===e.CLOSED){var d=new e(f);d.binaryType="arraybuffer",this.socket=o(d,n(this))}}else if(this.transportLibrary==="workersocket")this.socket=o(new t(f),n(this));else throw"Unknown transportLibrary: "+this.transportLibrary.toString()},c.prototype.close=function(){this.socket&&this.socket.close()},c.prototype.authenticate=function(f,d,p,v,m,y,_){var M={op:"auth",mac:f,client:d,dest:p,rand:v,t:m,level:y,end:_};this.callOnConnection(M)},c.prototype.sendEncodedMessage=function(f){var d=null,p=this;this.transportLibrary==="socket.io"?d=function(v){p.socket.emit("operation",v)}:d=function(v){p.socket.send(v)},this.isConnected?d(f):p.once("connection",function(){d(f)})},c.prototype.callOnConnection=function(f){this.transportOptions.encoder?this.transportOptions.encoder(f,this._sendFunc):this._sendFunc(JSON.stringify(f))},c.prototype.setStatusLevel=function(f,d){var p={op:"set_level",level:f,id:d};this.callOnConnection(p)},c.prototype.getActionServers=function(f,d){var p=new r({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),v=new a({});typeof d=="function"?p.callService(v,function(m){f(m.action_servers)},function(m){d(m)}):p.callService(v,function(m){f(m.action_servers)})},c.prototype.getTopics=function(f,d){var p=new r({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),v=new a;typeof d=="function"?p.callService(v,function(m){f(m)},function(m){d(m)}):p.callService(v,function(m){f(m)})},c.prototype.getTopicsForType=function(f,d,p){var v=new r({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),m=new a({type:f});typeof p=="function"?v.callService(m,function(y){d(y.topics)},function(y){p(y)}):v.callService(m,function(y){d(y.topics)})},c.prototype.getServices=function(f,d){var p=new r({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),v=new a;typeof d=="function"?p.callService(v,function(m){f(m.services)},function(m){d(m)}):p.callService(v,function(m){f(m.services)})},c.prototype.getServicesForType=function(f,d,p){var v=new r({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),m=new a({type:f});typeof p=="function"?v.callService(m,function(y){d(y.services)},function(y){p(y)}):v.callService(m,function(y){d(y.services)})},c.prototype.getServiceRequestDetails=function(f,d,p){var v=new r({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),m=new a({type:f});typeof p=="function"?v.callService(m,function(y){d(y)},function(y){p(y)}):v.callService(m,function(y){d(y)})},c.prototype.getServiceResponseDetails=function(f,d,p){var v=new r({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),m=new a({type:f});typeof p=="function"?v.callService(m,function(y){d(y)},function(y){p(y)}):v.callService(m,function(y){d(y)})},c.prototype.getNodes=function(f,d){var p=new r({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),v=new a;typeof d=="function"?p.callService(v,function(m){f(m.nodes)},function(m){d(m)}):p.callService(v,function(m){f(m.nodes)})},c.prototype.getNodeDetails=function(f,d,p){var v=new r({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),m=new a({node:f});typeof p=="function"?v.callService(m,function(y){d(y.subscribing,y.publishing,y.services)},function(y){p(y)}):v.callService(m,function(y){d(y)})},c.prototype.getParams=function(f,d){var p=new r({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),v=new a;typeof d=="function"?p.callService(v,function(m){f(m.names)},function(m){d(m)}):p.callService(v,function(m){f(m.names)})},c.prototype.getTopicType=function(f,d,p){var v=new r({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),m=new a({topic:f});typeof p=="function"?v.callService(m,function(y){d(y.type)},function(y){p(y)}):v.callService(m,function(y){d(y.type)})},c.prototype.getServiceType=function(f,d,p){var v=new r({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),m=new a({service:f});typeof p=="function"?v.callService(m,function(y){d(y.type)},function(y){p(y)}):v.callService(m,function(y){d(y.type)})},c.prototype.getMessageDetails=function(f,d,p){var v=new r({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),m=new a({type:f});typeof p=="function"?v.callService(m,function(y){d(y.typedefs)},function(y){p(y)}):v.callService(m,function(y){d(y.typedefs)})},c.prototype.decodeTypeDefs=function(f){var d=this,p=function(v,m){for(var y={},_=0;_<v.fieldnames.length;_++){var M=v.fieldarraylen[_],T=v.fieldnames[_],E=v.fieldtypes[_];if(E.indexOf("/")===-1)M===-1?y[T]=E:y[T]=[E];else{for(var A=!1,C=0;C<m.length;C++)if(m[C].type.toString()===E.toString()){A=m[C];break}if(A){var L=p(A,m);M===-1?y[T]=L:y[T]=[L]}else d.emit("error","Cannot find "+E+" in decodeTypeDefs")}}return y};return p(f[0],f)},c.prototype.getTopicsAndRawTypes=function(f,d){var p=new r({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),v=new a;typeof d=="function"?p.callService(v,function(m){f(m)},function(m){d(m)}):p.callService(v,function(m){f(m)})},Rv=c,Rv}var Cv,__;function ll(){if(__)return Cv;__=1;var e=Rs();function t(n){e(this,n)}return Cv=t,Cv}var Lv,w_;function Tc(){if(w_)return Lv;w_=1;var e=Cs().EventEmitter2,t=ll();function n(r){r=r||{},this.ros=r.ros,this.name=r.name,this.messageType=r.messageType,this.isAdvertised=!1,this.compression=r.compression||"none",this.throttle_rate=r.throttle_rate||0,this.latch=r.latch||!1,this.queue_size=r.queue_size||100,this.queue_length=r.queue_length||0,this.reconnect_on_close=r.reconnect_on_close!==void 0?r.reconnect_on_close:!0,this.compression&&this.compression!=="png"&&this.compression!=="cbor"&&this.compression!=="cbor-raw"&&this.compression!=="none"&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var a=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(o){a.ros.callOnConnection(o),a.waitForReconnect=!1,a.reconnectFunc=function(){a.waitForReconnect||(a.waitForReconnect=!0,a.ros.callOnConnection(o),a.ros.once("connection",function(){a.waitForReconnect=!1}))},a.ros.on("close",a.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(o){a.emit("message",new t(o))}}return n.prototype.__proto__=e.prototype,n.prototype.subscribe=function(r){typeof r=="function"&&this.on("message",r),!this.subscribeId&&(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},n.prototype.unsubscribe=function(r){r&&(this.off("message",r),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},n.prototype.advertise=function(){if(!this.isAdvertised&&(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,!this.reconnect_on_close)){var r=this;this.ros.on("close",function(){r.isAdvertised=!1})}},n.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},n.prototype.publish=function(r){this.isAdvertised||this.advertise(),this.ros.idCounter++;var a={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:r,latch:this.latch};this.ros.callOnConnection(a)},Lv=n,Lv}var Ov,E_;function GC(){if(E_)return Ov;E_=1;var e=Ph(),t=Mc();function n(r){r=r||{},this.ros=r.ros,this.name=r.name}return n.prototype.get=function(r,a){var o=new e({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),u=new t({name:this.name});o.callService(u,function(c){var f=JSON.parse(c.value);r(f)},a)},n.prototype.set=function(r,a,o){var u=new e({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),c=new t({name:this.name,value:JSON.stringify(r)});u.callService(c,a,o)},n.prototype.delete=function(r,a){var o=new e({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),u=new t({name:this.name});o.callService(u,r,a)},Ov=n,Ov}var M_;function kC(){if(M_)return dv.exports;M_=1;var e=gg(),t=dv.exports={Ros:yg(),Topic:Tc(),Message:ll(),Param:GC(),Service:Ph(),ServiceRequest:Mc(),ServiceResponse:_E()};return e(t.Ros,["Param","Service","Topic"],t),dv.exports}var Nv={exports:{}},Dv,T_;function wE(){if(T_)return Dv;T_=1;var e=Tc(),t=ll(),n=Cs().EventEmitter2;function r(a){var o=this;a=a||{},this.ros=a.ros,this.serverName=a.serverName,this.actionName=a.actionName,this.timeout=a.timeout,this.omitFeedback=a.omitFeedback,this.omitStatus=a.omitStatus,this.omitResult=a.omitResult,this.goals={};var u=!1;this.feedbackListener=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new e({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(c){u=!0,c.status_list.forEach(function(f){var d=o.goals[f.goal_id.id];d&&d.emit("status",f)})}),this.omitFeedback||this.feedbackListener.subscribe(function(c){var f=o.goals[c.status.goal_id.id];f&&(f.emit("status",c.status),f.emit("feedback",c.feedback))}),this.omitResult||this.resultListener.subscribe(function(c){var f=o.goals[c.status.goal_id.id];f&&(f.emit("status",c.status),f.emit("result",c.result))}),this.timeout&&setTimeout(function(){u||o.emit("timeout")},this.timeout)}return r.prototype.__proto__=n.prototype,r.prototype.cancel=function(){var a=new t;this.cancelTopic.publish(a)},r.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},Dv=r,Dv}var Uv,S_;function HC(){if(S_)return Uv;S_=1;var e=Tc();ll();var t=Cs().EventEmitter2;function n(r){var a=this;r=r||{},this.ros=r.ros,this.serverName=r.serverName,this.actionName=r.actionName;var o=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),u=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),c=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),f=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});o.subscribe(function(d){a.emit("goal",d)}),c.subscribe(function(d){d.status_list.forEach(function(p){a.emit("status",p)})}),u.subscribe(function(d){a.emit("status",d.status),a.emit("feedback",d.feedback)}),f.subscribe(function(d){a.emit("status",d.status),a.emit("result",d.result)})}return n.prototype.__proto__=t.prototype,Uv=n,Uv}var Bv,A_;function EE(){if(A_)return Bv;A_=1;var e=ll(),t=Cs().EventEmitter2;function n(r){var a=this;this.actionClient=r.actionClient,this.goalMessage=r.goalMessage,this.isFinished=!1;var o=new Date;this.goalID="goal_"+Math.random()+"_"+o.getTime(),this.goalMessage=new e({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(u){a.status=u}),this.on("result",function(u){a.isFinished=!0,a.result=u}),this.on("feedback",function(u){a.feedback=u}),this.actionClient.goals[this.goalID]=this}return n.prototype.__proto__=t.prototype,n.prototype.send=function(r){var a=this;a.actionClient.goalTopic.publish(a.goalMessage),r&&setTimeout(function(){a.isFinished||a.emit("timeout")},r)},n.prototype.cancel=function(){var r=new e({id:this.goalID});this.actionClient.cancelTopic.publish(r)},Bv=n,Bv}var Pv,R_;function VC(){if(R_)return Pv;R_=1;var e=Tc(),t=ll(),n=Cs().EventEmitter2;function r(a){var o=this;a=a||{},this.ros=a.ros,this.serverName=a.serverName,this.actionName=a.actionName,this.feedbackPublisher=new e({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var u=new e({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});u.advertise(),this.resultPublisher=new e({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var c=new e({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),f=new e({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new t({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,c.subscribe(function(p){o.currentGoal?(o.nextGoal=p,o.emit("cancel")):(o.statusMessage.status_list=[{goal_id:p.goal_id,status:1}],o.currentGoal=p,o.emit("goal",p.goal))});var d=function(p,v){return p.secs>v.secs?!1:p.secs<v.secs?!0:p.nsecs<v.nsecs};f.subscribe(function(p){p.stamp.secs===0&&p.stamp.secs===0&&p.id===""?(o.nextGoal=null,o.currentGoal&&o.emit("cancel")):(o.currentGoal&&p.id===o.currentGoal.goal_id.id?o.emit("cancel"):o.nextGoal&&p.id===o.nextGoal.goal_id.id&&(o.nextGoal=null),o.nextGoal&&d(o.nextGoal.goal_id.stamp,p.stamp)&&(o.nextGoal=null),o.currentGoal&&d(o.currentGoal.goal_id.stamp,p.stamp)&&o.emit("cancel"))}),setInterval(function(){var p=new Date,v=Math.floor(p.getTime()/1e3),m=Math.round(1e9*(p.getTime()/1e3-v));o.statusMessage.header.stamp.secs=v,o.statusMessage.header.stamp.nsecs=m,u.publish(o.statusMessage)},500)}return r.prototype.__proto__=n.prototype,r.prototype.setSucceeded=function(a){var o=new t({status:{goal_id:this.currentGoal.goal_id,status:3},result:a});this.resultPublisher.publish(o),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.setAborted=function(a){var o=new t({status:{goal_id:this.currentGoal.goal_id,status:4},result:a});this.resultPublisher.publish(o),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.sendFeedback=function(a){var o=new t({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:a});this.feedbackPublisher.publish(o)},r.prototype.setPreempted=function(){this.statusMessage.status_list=[];var a=new t({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(a),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},Pv=r,Pv}var C_;function jC(){if(C_)return Nv.exports;C_=1;var e=yg(),t=gg(),n=Nv.exports={ActionClient:wE(),ActionListener:HC(),Goal:EE(),SimpleActionServer:VC()};return t(e,["ActionClient","SimpleActionServer"],n),Nv.exports}var zv,L_;function Ls(){if(L_)return zv;L_=1;function e(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0}return e.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},e.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},e.prototype.multiplyQuaternion=function(t){var n=t.w*this.x+t.y*this.z-t.z*this.y,r=t.w*this.y+t.z*this.x-t.x*this.z,a=t.w*this.z+t.x*this.y-t.y*this.x,o=-t.x*this.x-t.y*this.y-t.z*this.z;this.x=n*t.w+o*-t.x+r*-t.z-a*-t.y,this.y=r*t.w+o*-t.y+a*-t.x-n*-t.z,this.z=a*t.w+o*-t.z+n*-t.y-r*-t.x},e.prototype.clone=function(){return new e(this)},zv=e,zv}var Fv,O_;function Sc(){if(O_)return Fv;O_=1;function e(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=typeof t.w=="number"?t.w:1}return e.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},e.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);t===0?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t)},e.prototype.invert=function(){this.conjugate(),this.normalize()},e.prototype.multiply=function(t){var n=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,r=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,a=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,o=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;this.x=n,this.y=r,this.z=a,this.w=o},e.prototype.clone=function(){return new e(this)},Fv=e,Fv}var Iv,N_;function bg(){if(N_)return Iv;N_=1;var e=Ls(),t=Sc();function n(r){r=r||{},this.position=new e(r.position),this.orientation=new t(r.orientation)}return n.prototype.applyTransform=function(r){this.position.multiplyQuaternion(r.rotation),this.position.add(r.translation);var a=r.rotation.clone();a.multiply(this.orientation),this.orientation=a},n.prototype.clone=function(){return new n(this)},n.prototype.multiply=function(r){var a=r.clone();return a.applyTransform({rotation:this.orientation,translation:this.position}),a},n.prototype.getInverse=function(){var r=this.clone();return r.orientation.invert(),r.position.multiplyQuaternion(r.orientation),r.position.x*=-1,r.position.y*=-1,r.position.z*=-1,r},Iv=n,Iv}var Gv,D_;function ME(){if(D_)return Gv;D_=1;var e=Ls(),t=Sc();function n(r){r=r||{},this.translation=new e(r.translation),this.rotation=new t(r.rotation)}return n.prototype.clone=function(){return new n(this)},Gv=n,Gv}var kv,U_;function WC(){return U_||(U_=1,kv={Pose:bg(),Quaternion:Sc(),Transform:ME(),Vector3:Ls()}),kv}var Hv={exports:{}},Vv,B_;function qC(){if(B_)return Vv;B_=1;var e=wE(),t=EE(),n=Ph(),r=Mc(),a=Tc(),o=ME();function u(c){c=c||{},this.ros=c.ros,this.fixedFrame=c.fixedFrame||"base_link",this.angularThres=c.angularThres||2,this.transThres=c.transThres||.01,this.rate=c.rate||10,this.updateDelay=c.updateDelay||50;var f=c.topicTimeout||2,d=Math.floor(f),p=Math.floor((f-d)*1e9);this.topicTimeout={secs:d,nsecs:p},this.serverName=c.serverName||"/tf2_web_republisher",this.repubServiceName=c.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new e({ros:c.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new n({ros:c.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}return u.prototype.processTFArray=function(c){c.transforms.forEach(function(f){var d=f.child_frame_id;d[0]==="/"&&(d=d.substring(1));var p=this.frameInfos[d];p&&(p.transform=new o({translation:f.transform.translation,rotation:f.transform.rotation}),p.cbs.forEach(function(v){v(p.transform)}))},this)},u.prototype.updateGoal=function(){var c={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new t({actionClient:this.actionClient,goalMessage:c}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{c.timeout=this.topicTimeout;var f=new r(c);this.serviceClient.callService(f,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},u.prototype.processResponse=function(c){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new a({ros:this.ros,name:c.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},u.prototype.subscribe=function(c,f){c[0]==="/"&&(c=c.substring(1)),this.frameInfos[c]?this.frameInfos[c].transform&&f(this.frameInfos[c].transform):(this.frameInfos[c]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[c].cbs.push(f)},u.prototype.unsubscribe=function(c,f){c[0]==="/"&&(c=c.substring(1));for(var d=this.frameInfos[c],p=d&&d.cbs||[],v=p.length;v--;)p[v]===f&&p.splice(v,1);(!f||p.length===0)&&delete this.frameInfos[c]},u.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},Vv=u,Vv}var P_;function XC(){if(P_)return Hv.exports;P_=1;var e=yg(),t=gg(),n=Hv.exports={TFClient:qC()};return t(e,["TFClient"],n),Hv.exports}var jv,z_;function Ac(){return z_||(z_=1,jv={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}),jv}var Wv,F_;function TE(){if(F_)return Wv;F_=1;var e=Ls(),t=Ac();function n(r){this.dimension=null,this.type=t.URDF_BOX;var a=r.xml.getAttribute("size").split(" ");this.dimension=new e({x:parseFloat(a[0]),y:parseFloat(a[1]),z:parseFloat(a[2])})}return Wv=n,Wv}var qv,I_;function SE(){if(I_)return qv;I_=1;function e(t){var n=t.xml.getAttribute("rgba").split(" ");this.r=parseFloat(n[0]),this.g=parseFloat(n[1]),this.b=parseFloat(n[2]),this.a=parseFloat(n[3])}return qv=e,qv}var Xv,G_;function AE(){if(G_)return Xv;G_=1;var e=Ac();function t(n){this.type=e.URDF_CYLINDER,this.length=parseFloat(n.xml.getAttribute("length")),this.radius=parseFloat(n.xml.getAttribute("radius"))}return Xv=t,Xv}var Yv,k_;function xg(){if(k_)return Yv;k_=1;var e=SE();function t(r){this.textureFilename=null,this.color=null,this.name=r.xml.getAttribute("name");var a=r.xml.getElementsByTagName("texture");a.length>0&&(this.textureFilename=a[0].getAttribute("filename"));var o=r.xml.getElementsByTagName("color");o.length>0&&(this.color=new e({xml:o[0]}))}t.prototype.isLink=function(){return this.color===null&&this.textureFilename===null};var n=Rs();return t.prototype.assign=function(r){return n(this,r)},Yv=t,Yv}var Zv,H_;function RE(){if(H_)return Zv;H_=1;var e=Ls(),t=Ac();function n(r){this.scale=null,this.type=t.URDF_MESH,this.filename=r.xml.getAttribute("filename");var a=r.xml.getAttribute("scale");if(a){var o=a.split(" ");this.scale=new e({x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])})}}return Zv=n,Zv}var Qv,V_;function CE(){if(V_)return Qv;V_=1;var e=Ac();function t(n){this.type=e.URDF_SPHERE,this.radius=parseFloat(n.xml.getAttribute("radius"))}return Qv=t,Qv}var Kv,j_;function LE(){if(j_)return Kv;j_=1;var e=bg(),t=Ls(),n=Sc(),r=AE(),a=TE(),o=xg(),u=RE(),c=CE();function f(d){var p=d.xml;this.origin=null,this.geometry=null,this.material=null,this.name=d.xml.getAttribute("name");var v=p.getElementsByTagName("origin");if(v.length===0)this.origin=new e;else{var m=v[0].getAttribute("xyz"),y=new t;m&&(m=m.split(" "),y=new t({x:parseFloat(m[0]),y:parseFloat(m[1]),z:parseFloat(m[2])}));var _=v[0].getAttribute("rpy"),M=new n;if(_){_=_.split(" ");var T=parseFloat(_[0]),E=parseFloat(_[1]),A=parseFloat(_[2]),C=T/2,L=E/2,I=A/2,j=Math.sin(C)*Math.cos(L)*Math.cos(I)-Math.cos(C)*Math.sin(L)*Math.sin(I),q=Math.cos(C)*Math.sin(L)*Math.cos(I)+Math.sin(C)*Math.cos(L)*Math.sin(I),ne=Math.cos(C)*Math.cos(L)*Math.sin(I)-Math.sin(C)*Math.sin(L)*Math.cos(I),W=Math.cos(C)*Math.cos(L)*Math.cos(I)+Math.sin(C)*Math.sin(L)*Math.sin(I);M=new n({x:j,y:q,z:ne,w:W}),M.normalize()}this.origin=new e({position:y,orientation:M})}var oe=p.getElementsByTagName("geometry");if(oe.length>0){for(var ae=oe[0],he=null,fe=0;fe<ae.childNodes.length;fe++){var se=ae.childNodes[fe];if(se.nodeType===1){he=se;break}}var z=he.nodeName;z==="sphere"?this.geometry=new c({xml:he}):z==="box"?this.geometry=new a({xml:he}):z==="cylinder"?this.geometry=new r({xml:he}):z==="mesh"?this.geometry=new u({xml:he}):console.warn("Unknown geometry type "+z)}var N=p.getElementsByTagName("material");N.length>0&&(this.material=new o({xml:N[0]}))}return Kv=f,Kv}var Jv,W_;function OE(){if(W_)return Jv;W_=1;var e=LE();function t(n){this.name=n.xml.getAttribute("name"),this.visuals=[];for(var r=n.xml.getElementsByTagName("visual"),a=0;a<r.length;a++)this.visuals.push(new e({xml:r[a]}))}return Jv=t,Jv}var $v,q_;function YC(){if(q_)return $v;q_=1;var e=bg(),t=Ls(),n=Sc();function r(a){this.name=a.xml.getAttribute("name"),this.type=a.xml.getAttribute("type");var o=a.xml.getElementsByTagName("parent");o.length>0&&(this.parent=o[0].getAttribute("link"));var u=a.xml.getElementsByTagName("child");u.length>0&&(this.child=u[0].getAttribute("link"));var c=a.xml.getElementsByTagName("limit");c.length>0&&(this.minval=parseFloat(c[0].getAttribute("lower")),this.maxval=parseFloat(c[0].getAttribute("upper")));var f=a.xml.getElementsByTagName("origin");if(f.length===0)this.origin=new e;else{var d=f[0].getAttribute("xyz"),p=new t;d&&(d=d.split(" "),p=new t({x:parseFloat(d[0]),y:parseFloat(d[1]),z:parseFloat(d[2])}));var v=f[0].getAttribute("rpy"),m=new n;if(v){v=v.split(" ");var y=parseFloat(v[0]),_=parseFloat(v[1]),M=parseFloat(v[2]),T=y/2,E=_/2,A=M/2,C=Math.sin(T)*Math.cos(E)*Math.cos(A)-Math.cos(T)*Math.sin(E)*Math.sin(A),L=Math.cos(T)*Math.sin(E)*Math.cos(A)+Math.sin(T)*Math.cos(E)*Math.sin(A),I=Math.cos(T)*Math.cos(E)*Math.sin(A)-Math.sin(T)*Math.sin(E)*Math.cos(A),j=Math.cos(T)*Math.cos(E)*Math.cos(A)+Math.sin(T)*Math.sin(E)*Math.sin(A);m=new n({x:C,y:L,z:I,w:j}),m.normalize()}this.origin=new e({position:p,orientation:m})}}return $v=r,$v}var pu={},X_;function ZC(){return X_||(X_=1,pu.DOMImplementation=window.DOMImplementation,pu.XMLSerializer=window.XMLSerializer,pu.DOMParser=window.DOMParser),pu}var em,Y_;function QC(){if(Y_)return em;Y_=1;var e=xg(),t=OE(),n=YC(),r=ZC().DOMParser;function a(o){o=o||{};var u=o.xml,c=o.string;if(this.materials={},this.links={},this.joints={},c){var f=new r;u=f.parseFromString(c,"text/xml")}var d=u.documentElement;this.name=d.getAttribute("name");for(var p=d.childNodes,v=0;v<p.length;v++){var m=p[v];if(m.tagName==="material"){var y=new e({xml:m});this.materials[y.name]!==void 0?this.materials[y.name].isLink()?this.materials[y.name].assign(y):console.warn("Material "+y.name+"is not unique."):this.materials[y.name]=y}else if(m.tagName==="link"){var _=new t({xml:m});if(this.links[_.name]!==void 0)console.warn("Link "+_.name+" is not unique.");else{for(var M=0;M<_.visuals.length;M++){var T=_.visuals[M].material;T!==null&&T.name&&(this.materials[T.name]!==void 0?_.visuals[M].material=this.materials[T.name]:this.materials[T.name]=T)}this.links[_.name]=_}}else if(m.tagName==="joint"){var E=new n({xml:m});this.joints[E.name]=E}}}return em=a,em}var tm,Z_;function KC(){return Z_||(Z_=1,tm=Rs()({UrdfBox:TE(),UrdfColor:SE(),UrdfCylinder:AE(),UrdfLink:OE(),UrdfMaterial:xg(),UrdfMesh:RE(),UrdfModel:QC(),UrdfSphere:CE(),UrdfVisual:LE()},Ac())),tm}var kf,Q_;function JC(){if(Q_)return kf;Q_=1;var e=kf.ROSLIB||{REVISION:"1.4.1"},t=Rs();return t(e,kC()),t(e,jC()),t(e,WC()),t(e,XC()),t(e,KC()),kf=e,kf}var Nt=JC();const xa=xc(Nt);class $C{constructor(t,n,r,a){this.ros=t,this.divID=n,this.chatHistoryID=r,this.runOnBotID=a,this.llmListener=new xa.Topic({ros:this.ros,name:"/llm_response",messageType:"std_msgs/String"}),this.llmListener.subscribe(o=>this.llmListenerCallback(o)),this.userResponsePub=new xa.Topic({ros:this.ros,name:"/user_response",messageType:"std_msgs/String"})}changeButtonVisibility(t){let n="none";t&&(n="visible"),document.getElementById(this.runOnBotID).style.display=n}llmListenerCallback(t){this.changeButtonVisibility(!1)}userInputCallback(t){this.changeButtonVisibility(!1);let r=document.getElementById(t).value,a=new xa.Message({data:r});this.userResponsePub.publish(a);let o=document.getElementById(this.chatHistoryID);const u=document.createElement("div");u.textContent=`USER: ${r}`,o.appendChild(u)}}const e2=({children:e})=>{const[t,n]=J.useState(()=>{const o=sessionStorage.getItem("chatMessages");return o?JSON.parse(o):[]}),r=J.useRef(null);J.useEffect(()=>{sessionStorage.setItem("chatMessages",JSON.stringify(t))},[t]),J.useEffect(()=>{const o=new xa.Ros({url:"ws://localhost:9090"});o.on("connection",()=>console.log("Connected")),o.on("error",c=>console.error(c)),o.on("close",()=>console.warn("Closed"));const u=new $C(o,"","","runOnBotButton");u.llmListenerCallback=c=>{n(f=>[...f,{role:"agent",text:c.data}])},window.llmChat=u},[]);const a=o=>{n(c=>[...c,{role:"user",text:o}]);const u=new xa.Message({data:o});window.llmChat.userResponsePub.publish(u)};return te.jsxs(te.Fragment,{children:[te.jsx("button",{id:"runOnBotButton",ref:r,style:{display:"none"},children:"Run"}),e({messages:t,handleUserMessage:a})]})};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(e){var t=arguments;if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var a=t[r];if(a!=null)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n}}();function Xi(){}Object.assign(Xi.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners!==void 0){var n=this._listeners,r=n[e];if(r!==void 0){var a=r.indexOf(t);a!==-1&&r.splice(a,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners,n=t[e.type];if(n!==void 0){e.target=this;for(var r=n.slice(0),a=0,o=r.length;a<o;a++)r[a].call(this,e)}}}});var NE="89",t2={LEFT:0,MIDDLE:1,RIGHT:2},DE=0,Mu=1,_g=2,n2=3,UE=0,r2=1,i2=0,wg=1,BE=2,bo=0,Ea=1,ul=2,Eg=1,a2=2,zh=0,Mg=1,Os=2,th=0,cl=1,Tg=2,Sg=3,Ag=4,Rg=5,Cg=100,PE=101,zE=102,Cm=103,Lm=104,FE=200,IE=201,GE=202,kE=203,Lg=204,Og=205,HE=206,VE=207,jE=208,WE=209,qE=210,XE=0,YE=1,ZE=2,nh=3,QE=4,KE=5,JE=6,$E=7,Rc=0,e1=1,t1=2,Zf=0,Ng=1,n1=2,r1=3,i1=4,Fh=300,Ih=301,rh=302,Dg=303,ih=304,Ug=305,Gh=306,kh=307,Bi=1e3,xr=1001,rs=1002,_r=1003,Hh=1004,Vh=1005,ar=1006,Bg=1007,Cc=1008,jh=1009,a1=1010,s1=1011,Tu=1012,o1=1013,Pg=1014,wo=1015,Wh=1016,l1=1017,u1=1018,c1=1019,Su=1020,f1=1021,Eo=1022,ui=1023,h1=1024,d1=1025,s2=ui,es=1026,Mo=1027,Om=2001,Nm=2002,Dm=2003,Um=2004,Bm=2100,Pm=2101,zm=2102,Fm=2103,p1=2151,v1=2200,m1=2201,g1=2202,Au=2300,bu=2301,Qf=2302,is=2400,Ja=2401,Ru=2402,zg=0,y1=1,b1=2,Cu=3e3,x1=3001,Fg=3007,_1=3002,o2=3003,w1=3004,E1=3005,M1=3006,T1=3200,S1=3201,pt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,a=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return e[n&255]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+"-"+e[r&255]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[a&63|128]+e[a>>8&255]+"-"+e[a>>16&255]+e[a>>24&255]+e[o&255]+e[o>>8&255]+e[o>>16&255]+e[o>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*pt.DEG2RAD},radToDeg:function(e){return e*pt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Ce(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(Ce.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(Ce.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new Ce,t=new Ce;return function(r,a){return e.set(r,r),t.set(a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*r+e.x,this.y=a*r+o*n+e.y,this}});function ut(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(ut.prototype,{isMatrix4:!0,set:function(e,t,n,r,a,o,u,c,f,d,p,v,m,y,_,M){var T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=a,T[5]=o,T[9]=u,T[13]=c,T[2]=f,T[6]=d,T[10]=p,T[14]=v,T[3]=m,T[7]=y,T[11]=_,T[15]=M,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new ut().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new ee;return function(n){var r=this.elements,a=n.elements,o=1/e.setFromMatrixColumn(n,0).length(),u=1/e.setFromMatrixColumn(n,1).length(),c=1/e.setFromMatrixColumn(n,2).length();return r[0]=a[0]*o,r[1]=a[1]*o,r[2]=a[2]*o,r[4]=a[4]*u,r[5]=a[5]*u,r[6]=a[6]*u,r[8]=a[8]*c,r[9]=a[9]*c,r[10]=a[10]*c,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,o=Math.cos(n),u=Math.sin(n),c=Math.cos(r),f=Math.sin(r),d=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){var v=o*d,m=o*p,y=u*d,_=u*p;t[0]=c*d,t[4]=-c*p,t[8]=f,t[1]=m+y*f,t[5]=v-_*f,t[9]=-u*c,t[2]=_-v*f,t[6]=y+m*f,t[10]=o*c}else if(e.order==="YXZ"){var M=c*d,T=c*p,E=f*d,A=f*p;t[0]=M+A*u,t[4]=E*u-T,t[8]=o*f,t[1]=o*p,t[5]=o*d,t[9]=-u,t[2]=T*u-E,t[6]=A+M*u,t[10]=o*c}else if(e.order==="ZXY"){var M=c*d,T=c*p,E=f*d,A=f*p;t[0]=M-A*u,t[4]=-o*p,t[8]=E+T*u,t[1]=T+E*u,t[5]=o*d,t[9]=A-M*u,t[2]=-o*f,t[6]=u,t[10]=o*c}else if(e.order==="ZYX"){var v=o*d,m=o*p,y=u*d,_=u*p;t[0]=c*d,t[4]=y*f-m,t[8]=v*f+_,t[1]=c*p,t[5]=_*f+v,t[9]=m*f-y,t[2]=-f,t[6]=u*c,t[10]=o*c}else if(e.order==="YZX"){var C=o*c,L=o*f,I=u*c,j=u*f;t[0]=c*d,t[4]=j-C*p,t[8]=I*p+L,t[1]=p,t[5]=o*d,t[9]=-u*d,t[2]=-f*d,t[6]=L*p+I,t[10]=C-j*p}else if(e.order==="XZY"){var C=o*c,L=o*f,I=u*c,j=u*f;t[0]=c*d,t[4]=-p,t[8]=f*d,t[1]=C*p+j,t[5]=o*d,t[9]=L*p-I,t[2]=I*p-L,t[6]=u*d,t[10]=j*p+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,a=e._z,o=e._w,u=n+n,c=r+r,f=a+a,d=n*u,p=n*c,v=n*f,m=r*c,y=r*f,_=a*f,M=o*u,T=o*c,E=o*f;return t[0]=1-(m+_),t[4]=p-E,t[8]=v+T,t[1]=p+E,t[5]=1-(d+_),t[9]=y-M,t[2]=v-T,t[6]=y+M,t[10]=1-(d+m),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new ee,t=new ee,n=new ee;return function(a,o,u){var c=this.elements;return n.subVectors(a,o),n.lengthSq()===0&&(n.z=1),n.normalize(),e.crossVectors(u,n),e.lengthSq()===0&&(Math.abs(u.z)===1?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(u,n)),e.normalize(),t.crossVectors(n,e),c[0]=e.x,c[4]=t.x,c[8]=n.x,c[1]=e.y,c[5]=t.y,c[9]=n.y,c[2]=e.z,c[6]=t.z,c[10]=n.z,this}}(),multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,a=this.elements,o=n[0],u=n[4],c=n[8],f=n[12],d=n[1],p=n[5],v=n[9],m=n[13],y=n[2],_=n[6],M=n[10],T=n[14],E=n[3],A=n[7],C=n[11],L=n[15],I=r[0],j=r[4],q=r[8],ne=r[12],W=r[1],oe=r[5],ae=r[9],he=r[13],fe=r[2],se=r[6],z=r[10],N=r[14],$=r[3],x=r[7],S=r[11],w=r[15];return a[0]=o*I+u*W+c*fe+f*$,a[4]=o*j+u*oe+c*se+f*x,a[8]=o*q+u*ae+c*z+f*S,a[12]=o*ne+u*he+c*N+f*w,a[1]=d*I+p*W+v*fe+m*$,a[5]=d*j+p*oe+v*se+m*x,a[9]=d*q+p*ae+v*z+m*S,a[13]=d*ne+p*he+v*N+m*w,a[2]=y*I+_*W+M*fe+T*$,a[6]=y*j+_*oe+M*se+T*x,a[10]=y*q+_*ae+M*z+T*S,a[14]=y*ne+_*he+M*N+T*w,a[3]=E*I+A*W+C*fe+L*$,a[7]=E*j+A*oe+C*se+L*x,a[11]=E*q+A*ae+C*z+L*S,a[15]=E*ne+A*he+C*N+L*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new ee;return function(n){for(var r=0,a=n.count;r<a;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix4(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],o=e[1],u=e[5],c=e[9],f=e[13],d=e[2],p=e[6],v=e[10],m=e[14],y=e[3],_=e[7],M=e[11],T=e[15];return y*(+a*c*p-r*f*p-a*u*v+n*f*v+r*u*m-n*c*m)+_*(+t*c*m-t*f*v+a*o*v-r*o*m+r*f*d-a*c*d)+M*(+t*f*p-t*u*m-a*o*p+n*o*m+a*u*d-n*f*d)+T*(-r*u*d-t*c*p+t*u*v+r*o*p-n*o*v+n*c*d)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,a=r[0],o=r[1],u=r[2],c=r[3],f=r[4],d=r[5],p=r[6],v=r[7],m=r[8],y=r[9],_=r[10],M=r[11],T=r[12],E=r[13],A=r[14],C=r[15],L=y*A*v-E*_*v+E*p*M-d*A*M-y*p*C+d*_*C,I=T*_*v-m*A*v-T*p*M+f*A*M+m*p*C-f*_*C,j=m*E*v-T*y*v+T*d*M-f*E*M-m*d*C+f*y*C,q=T*y*p-m*E*p-T*d*_+f*E*_+m*d*A-f*y*A,ne=a*L+o*I+u*j+c*q;if(ne===0){var W="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(W);return console.warn(W),this.identity()}var oe=1/ne;return n[0]=L*oe,n[1]=(E*_*c-y*A*c-E*u*M+o*A*M+y*u*C-o*_*C)*oe,n[2]=(d*A*c-E*p*c+E*u*v-o*A*v-d*u*C+o*p*C)*oe,n[3]=(y*p*c-d*_*c-y*u*v+o*_*v+d*u*M-o*p*M)*oe,n[4]=I*oe,n[5]=(m*A*c-T*_*c+T*u*M-a*A*M-m*u*C+a*_*C)*oe,n[6]=(T*p*c-f*A*c-T*u*v+a*A*v+f*u*C-a*p*C)*oe,n[7]=(f*_*c-m*p*c+m*u*v-a*_*v-f*u*M+a*p*M)*oe,n[8]=j*oe,n[9]=(T*y*c-m*E*c-T*o*M+a*E*M+m*o*C-a*y*C)*oe,n[10]=(f*E*c-T*d*c+T*o*v-a*E*v-f*o*C+a*d*C)*oe,n[11]=(m*d*c-f*y*c-m*o*v+a*y*v+f*o*M-a*d*M)*oe,n[12]=q*oe,n[13]=(m*E*u-T*y*u+T*o*_-a*E*_-m*o*A+a*y*A)*oe,n[14]=(T*d*u-f*E*u-T*o*p+a*E*p+f*o*A-a*d*A)*oe,n[15]=(f*y*u-m*d*u+m*o*p-a*y*p-f*o*_+a*d*_)*oe,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,o=e.x,u=e.y,c=e.z,f=a*o,d=a*u;return this.set(f*o+n,f*u-r*c,f*c+r*u,0,f*u+r*c,d*u+n,d*c-r*o,0,f*c-r*u,d*c+r*o,a*c*c+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new ee,t=new ut;return function(r,a,o){var u=this.elements,c=e.set(u[0],u[1],u[2]).length(),f=e.set(u[4],u[5],u[6]).length(),d=e.set(u[8],u[9],u[10]).length(),p=this.determinant();p<0&&(c=-c),r.x=u[12],r.y=u[13],r.z=u[14],t.copy(this);var v=1/c,m=1/f,y=1/d;return t.elements[0]*=v,t.elements[1]*=v,t.elements[2]*=v,t.elements[4]*=m,t.elements[5]*=m,t.elements[6]*=m,t.elements[8]*=y,t.elements[9]*=y,t.elements[10]*=y,a.setFromRotationMatrix(t),o.x=c,o.y=f,o.z=d,this}}(),makePerspective:function(e,t,n,r,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var u=this.elements,c=2*a/(t-e),f=2*a/(n-r),d=(t+e)/(t-e),p=(n+r)/(n-r),v=-(o+a)/(o-a),m=-2*o*a/(o-a);return u[0]=c,u[4]=0,u[8]=d,u[12]=0,u[1]=0,u[5]=f,u[9]=p,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=m,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this},makeOrthographic:function(e,t,n,r,a,o){var u=this.elements,c=1/(t-e),f=1/(n-r),d=1/(o-a),p=(t+e)*c,v=(n+r)*f,m=(o+a)*d;return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-p,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=-2*d,u[14]=-m,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});function Tn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=r!==void 0?r:1}Object.assign(Tn,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,a,o,u){var c=n[r+0],f=n[r+1],d=n[r+2],p=n[r+3],v=a[o+0],m=a[o+1],y=a[o+2],_=a[o+3];if(p!==_||c!==v||f!==m||d!==y){var M=1-u,T=c*v+f*m+d*y+p*_,E=T>=0?1:-1,A=1-T*T;if(A>Number.EPSILON){var C=Math.sqrt(A),L=Math.atan2(C,T*E);M=Math.sin(M*L)/C,u=Math.sin(u*L)/C}var I=u*E;if(c=c*M+v*I,f=f*M+m*I,d=d*M+y*I,p=p*M+_*I,M===1-u){var j=1/Math.sqrt(c*c+f*f+d*d+p*p);c*=j,f*=j,d*=j,p*=j}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=p}});Object.defineProperties(Tn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}});Object.assign(Tn.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,o=e.order,u=Math.cos,c=Math.sin,f=u(n/2),d=u(r/2),p=u(a/2),v=c(n/2),m=c(r/2),y=c(a/2);return o==="XYZ"?(this._x=v*d*p+f*m*y,this._y=f*m*p-v*d*y,this._z=f*d*y+v*m*p,this._w=f*d*p-v*m*y):o==="YXZ"?(this._x=v*d*p+f*m*y,this._y=f*m*p-v*d*y,this._z=f*d*y-v*m*p,this._w=f*d*p+v*m*y):o==="ZXY"?(this._x=v*d*p-f*m*y,this._y=f*m*p+v*d*y,this._z=f*d*y+v*m*p,this._w=f*d*p-v*m*y):o==="ZYX"?(this._x=v*d*p-f*m*y,this._y=f*m*p+v*d*y,this._z=f*d*y-v*m*p,this._w=f*d*p+v*m*y):o==="YZX"?(this._x=v*d*p+f*m*y,this._y=f*m*p+v*d*y,this._z=f*d*y-v*m*p,this._w=f*d*p-v*m*y):o==="XZY"&&(this._x=v*d*p-f*m*y,this._y=f*m*p-v*d*y,this._z=f*d*y+v*m*p,this._w=f*d*p+v*m*y),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],o=t[1],u=t[5],c=t[9],f=t[2],d=t[6],p=t[10],v=n+u+p,m;return v>0?(m=.5/Math.sqrt(v+1),this._w=.25/m,this._x=(d-c)*m,this._y=(a-f)*m,this._z=(o-r)*m):n>u&&n>p?(m=2*Math.sqrt(1+n-u-p),this._w=(d-c)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(a+f)/m):u>p?(m=2*Math.sqrt(1+u-n-p),this._w=(a-f)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(c+d)/m):(m=2*Math.sqrt(1+p-n-u),this._w=(o-r)/m,this._x=(a+f)/m,this._y=(c+d)/m,this._z=.25*m),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new ee,t,n=1e-6;return function(a,o){return e===void 0&&(e=new ee),t=a.dot(o)+1,t<n?(t=0,Math.abs(a.x)>Math.abs(a.z)?e.set(-a.y,a.x,0):e.set(0,-a.z,a.y)):e.crossVectors(a,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,a=e._z,o=e._w,u=t._x,c=t._y,f=t._z,d=t._w;return this._x=n*d+o*u+r*f-a*c,this._y=r*d+o*c+a*u-n*f,this._z=a*d+o*f+n*c-r*u,this._w=o*d-n*u-r*c-a*f,this.onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,a=this._z,o=this._w,u=o*e._w+n*e._x+r*e._y+a*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=o,this._x=n,this._y=r,this._z=a,this;var c=Math.sqrt(1-u*u);if(Math.abs(c)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(a+this._z),this;var f=Math.atan2(c,u),d=Math.sin((1-t)*f)/c,p=Math.sin(t*f)/c;return this._w=o*d+this._w*p,this._x=n*d+this._x*p,this._y=r*d+this._y*p,this._z=a*d+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function ee(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(ee.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Tn;return function(n){return n&&n.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(n))}}(),applyAxisAngle:function(){var e=new Tn;return function(n,r){return this.applyQuaternion(e.setFromAxisAngle(n,r))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,o=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*o,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*o,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,o=e.y,u=e.z,c=e.w,f=c*t+o*r-u*n,d=c*n+u*t-a*r,p=c*r+a*n-o*t,v=-a*t-o*n-u*r;return this.x=f*c+v*-a+d*-u-p*-o,this.y=d*c+v*-o+p*-a-f*-u,this.z=p*c+v*-u+f*-o-d*-a,this},project:function(){var e=new ut;return function(n){return e.multiplyMatrices(n.projectionMatrix,e.getInverse(n.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new ut;return function(n){return e.multiplyMatrices(n.matrixWorld,e.getInverse(n.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new ee,t=new ee;return function(r,a){return e.set(r,r,r),t.set(a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,a=e.z,o=t.x,u=t.y,c=t.z;return this.x=r*c-a*u,this.y=a*o-n*c,this.z=n*u-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new ee;return function(n){return e.copy(this).projectOnVector(n),this.sub(e)}}(),reflect:function(){var e=new ee;return function(n){return this.sub(e.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(pt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});function sr(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(sr.prototype,{isMatrix3:!0,set:function(e,t,n,r,a,o,u,c,f){var d=this.elements;return d[0]=e,d[1]=r,d[2]=u,d[3]=t,d[4]=a,d[5]=c,d[6]=n,d[7]=o,d[8]=f,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new ee;return function(n){for(var r=0,a=n.count;r<a;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix3(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,a=this.elements,o=n[0],u=n[3],c=n[6],f=n[1],d=n[4],p=n[7],v=n[2],m=n[5],y=n[8],_=r[0],M=r[3],T=r[6],E=r[1],A=r[4],C=r[7],L=r[2],I=r[5],j=r[8];return a[0]=o*_+u*E+c*L,a[3]=o*M+u*A+c*I,a[6]=o*T+u*C+c*j,a[1]=f*_+d*E+p*L,a[4]=f*M+d*A+p*I,a[7]=f*T+d*C+p*j,a[2]=v*_+m*E+y*L,a[5]=v*M+m*A+y*I,a[8]=v*T+m*C+y*j,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],u=e[5],c=e[6],f=e[7],d=e[8];return t*o*d-t*u*f-n*a*d+n*u*c+r*a*f-r*o*c},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,a=n[0],o=n[1],u=n[2],c=n[3],f=n[4],d=n[5],p=n[6],v=n[7],m=n[8],y=m*f-d*v,_=d*p-m*c,M=v*c-f*p,T=a*y+o*_+u*M;if(T===0){var E="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(E);return console.warn(E),this.identity()}var A=1/T;return r[0]=y*A,r[1]=(u*v-m*o)*A,r[2]=(d*o-u*f)*A,r[3]=_*A,r[4]=(m*a-u*p)*A,r[5]=(u*c-d*a)*A,r[6]=M*A,r[7]=(o*p-v*a)*A,r[8]=(f*a-o*c)*A,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,a,o,u){var c=Math.cos(a),f=Math.sin(a);this.set(n*c,n*f,-n*(c*o+f*u)+o+e,-r*f,r*c,-r*(-f*o+c*u)+u+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],o=r[3],u=r[6],c=r[1],f=r[4],d=r[7];return r[0]=t*a+n*c,r[3]=t*o+n*f,r[6]=t*u+n*d,r[1]=-n*a+t*c,r[4]=-n*o+t*f,r[7]=-n*u+t*d,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var l2=0;function sn(e,t,n,r,a,o,u,c,f,d){Object.defineProperty(this,"id",{value:l2++}),this.uuid=pt.generateUUID(),this.name="",this.image=e!==void 0?e:sn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:sn.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:xr,this.wrapT=r!==void 0?r:xr,this.magFilter=a!==void 0?a:ar,this.minFilter=o!==void 0?o:Cc,this.anisotropy=f!==void 0?f:1,this.format=u!==void 0?u:ui,this.type=c!==void 0?c:jh,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d!==void 0?d:Cu,this.version=0,this.onUpdate=null}sn.DEFAULT_IMAGE=void 0;sn.DEFAULT_MAPPING=Fh;sn.prototype=Object.assign(Object.create(Xi.prototype),{constructor:sn,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];function n(o){var u;if(o instanceof HTMLCanvasElement)u=o;else{u=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),u.width=o.width,u.height=o.height;var c=u.getContext("2d");o instanceof ImageData?c.putImageData(o,0,0):c.drawImage(o,0,0,o.width,o.height)}return u.width>2048||u.height>2048?u.toDataURL("image/jpeg",.6):u.toDataURL("image/png")}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==void 0){var a=this.image;a.uuid===void 0&&(a.uuid=pt.generateUUID()),!t&&e.images[a.uuid]===void 0&&(e.images[a.uuid]={uuid:a.uuid,url:n(a)}),r.image=a.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===Fh){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bi:e.x=e.x-Math.floor(e.x);break;case xr:e.x=e.x<0?0:1;break;case rs:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Bi:e.y=e.y-Math.floor(e.y);break;case xr:e.y=e.y<0?0:1;break;case rs:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}this.flipY&&(e.y=1-e.y)}}});Object.defineProperty(sn.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function Zt(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==void 0?r:1}Object.assign(Zt.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*a,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*a,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*a,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*a,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,a,o=.01,u=.1,c=e.elements,f=c[0],d=c[4],p=c[8],v=c[1],m=c[5],y=c[9],_=c[2],M=c[6],T=c[10];if(Math.abs(d-v)<o&&Math.abs(p-_)<o&&Math.abs(y-M)<o){if(Math.abs(d+v)<u&&Math.abs(p+_)<u&&Math.abs(y+M)<u&&Math.abs(f+m+T-3)<u)return this.set(1,0,0,0),this;t=Math.PI;var E=(f+1)/2,A=(m+1)/2,C=(T+1)/2,L=(d+v)/4,I=(p+_)/4,j=(y+M)/4;return E>A&&E>C?E<o?(n=0,r=.707106781,a=.707106781):(n=Math.sqrt(E),r=L/n,a=I/n):A>C?A<o?(n=.707106781,r=0,a=.707106781):(r=Math.sqrt(A),n=L/r,a=j/r):C<o?(n=.707106781,r=.707106781,a=0):(a=Math.sqrt(C),n=I/a,r=j/a),this.set(n,r,a,t),this}var q=Math.sqrt((M-y)*(M-y)+(p-_)*(p-_)+(v-d)*(v-d));return Math.abs(q)<.001&&(q=1),this.x=(M-y)/q,this.y=(p-_)/q,this.z=(v-d)/q,this.w=Math.acos((f+m+T-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,a){return e===void 0&&(e=new Zt,t=new Zt),e.set(r,r,r,r),t.set(a,a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}});function as(e,t,n){this.uuid=pt.generateUUID(),this.width=e,this.height=t,this.scissor=new Zt(0,0,e,t),this.scissorTest=!1,this.viewport=new Zt(0,0,e,t),n=n||{},n.minFilter===void 0&&(n.minFilter=ar),this.texture=new sn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}as.prototype=Object.assign(Object.create(Xi.prototype),{constructor:as,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function To(e,t,n){as.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}To.prototype=Object.create(as.prototype);To.prototype.constructor=To;To.prototype.isWebGLRenderTargetCube=!0;function ss(e,t,n,r,a,o,u,c,f,d,p,v){sn.call(this,null,o,u,c,f,d,r,a,p,v),this.image={data:e,width:t,height:n},this.magFilter=f!==void 0?f:_r,this.minFilter=d!==void 0?d:_r,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}ss.prototype=Object.create(sn.prototype);ss.prototype.constructor=ss;ss.prototype.isDataTexture=!0;function Ma(e,t,n,r,a,o,u,c,f,d){e=e!==void 0?e:[],t=t!==void 0?t:Ih,sn.call(this,e,t,n,r,a,o,u,c,f,d),this.flipY=!1}Ma.prototype=Object.create(sn.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isCubeTexture=!0;Object.defineProperty(Ma.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var A1=new sn,R1=new Ma;function C1(){this.seq=[],this.map={}}var K_=[],J_=[],$_=new Float32Array(16),ew=new Float32Array(9);function fl(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,o=K_[a];if(o===void 0&&(o=new Float32Array(a),K_[a]=o),t!==0){r.toArray(o,0);for(var u=1,c=0;u!==t;++u)c+=n,e[u].toArray(o,c)}return o}function L1(e,t){var n=J_[t];n===void 0&&(n=new Int32Array(t),J_[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function u2(e,t){e.uniform1f(this.addr,t)}function c2(e,t){e.uniform1i(this.addr,t)}function f2(e,t){t.x===void 0?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function h2(e,t){t.x!==void 0?e.uniform3f(this.addr,t.x,t.y,t.z):t.r!==void 0?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function d2(e,t){t.x===void 0?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function p2(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function v2(e,t){t.elements===void 0?e.uniformMatrix3fv(this.addr,!1,t):(ew.set(t.elements),e.uniformMatrix3fv(this.addr,!1,ew))}function m2(e,t){t.elements===void 0?e.uniformMatrix4fv(this.addr,!1,t):($_.set(t.elements),e.uniformMatrix4fv(this.addr,!1,$_))}function g2(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||A1,r)}function y2(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||R1,r)}function O1(e,t){e.uniform2iv(this.addr,t)}function N1(e,t){e.uniform3iv(this.addr,t)}function D1(e,t){e.uniform4iv(this.addr,t)}function b2(e){switch(e){case 5126:return u2;case 35664:return f2;case 35665:return h2;case 35666:return d2;case 35674:return p2;case 35675:return v2;case 35676:return m2;case 35678:case 36198:return g2;case 35680:return y2;case 5124:case 35670:return c2;case 35667:case 35671:return O1;case 35668:case 35672:return N1;case 35669:case 35673:return D1}}function x2(e,t){e.uniform1fv(this.addr,t)}function _2(e,t){e.uniform1iv(this.addr,t)}function w2(e,t){e.uniform2fv(this.addr,fl(t,this.size,2))}function E2(e,t){e.uniform3fv(this.addr,fl(t,this.size,3))}function M2(e,t){e.uniform4fv(this.addr,fl(t,this.size,4))}function T2(e,t){e.uniformMatrix2fv(this.addr,!1,fl(t,this.size,4))}function S2(e,t){e.uniformMatrix3fv(this.addr,!1,fl(t,this.size,9))}function A2(e,t){e.uniformMatrix4fv(this.addr,!1,fl(t,this.size,16))}function R2(e,t,n){var r=t.length,a=L1(n,r);e.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||A1,a[o])}function C2(e,t,n){var r=t.length,a=L1(n,r);e.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||R1,a[o])}function L2(e){switch(e){case 5126:return x2;case 35664:return w2;case 35665:return E2;case 35666:return M2;case 35674:return T2;case 35675:return S2;case 35676:return A2;case 35678:return R2;case 35680:return C2;case 5124:case 35670:return _2;case 35667:case 35671:return O1;case 35668:case 35672:return N1;case 35669:case 35673:return D1}}function O2(e,t,n){this.id=e,this.addr=n,this.setValue=b2(t.type)}function N2(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=L2(t.type)}function U1(e){this.id=e,C1.call(this)}U1.prototype.setValue=function(e,t){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var o=n[r];o.setValue(e,t[o.id])}};var nm=/([\w\d_]+)(\])?(\[|\.)?/g;function tw(e,t){e.seq.push(t),e.map[t.id]=t}function D2(e,t,n){var r=e.name,a=r.length;for(nm.lastIndex=0;;){var o=nm.exec(r),u=nm.lastIndex,c=o[1],f=o[2]==="]",d=o[3];if(f&&(c=c|0),d===void 0||d==="["&&u+2===a){tw(n,d===void 0?new O2(c,e,t):new N2(c,e,t));break}else{var p=n.map,v=p[c];v===void 0&&(v=new U1(c),tw(n,v)),n=v}}}function os(e,t,n){C1.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<r;++a){var o=e.getActiveUniform(t,a),u=o.name,c=e.getUniformLocation(t,u);D2(o,c,this)}}os.prototype.setValue=function(e,t,n){var r=this.map[t];r!==void 0&&r.setValue(e,n,this.renderer)};os.prototype.setOptional=function(e,t,n){var r=t[n];r!==void 0&&this.setValue(e,n,r)};os.upload=function(e,t,n,r){for(var a=0,o=t.length;a!==o;++a){var u=t[a],c=n[u.id];c.needsUpdate!==!1&&u.setValue(e,c.value,r)}};os.seqWithValue=function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var o=e[r];o.id in t&&n.push(o)}return n};var U2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qe(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}Object.assign(qe.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*6*(2/3-r):t}return function(n,r,a){if(n=pt.euclideanModulo(n,1),r=pt.clamp(r,0,1),a=pt.clamp(a,0,1),r===0)this.r=this.g=this.b=a;else{var o=a<=.5?a*(1+r):a+r-a*r,u=2*a-o;this.r=e(u,o,n+1/3),this.g=e(u,o,n),this.b=e(u,o,n-1/3)}return this}}(),setStyle:function(e){function t(v){v!==void 0&&parseFloat(v)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var u=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,f=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(u,c,f)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var d=n[1],p=d.length;if(p===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(p===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}if(e&&e.length>0){var d=U2[e];d!==void 0?this.setHex(d):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,r=this.g,a=this.b,o=Math.max(n,r,a),u=Math.min(n,r,a),c,f,d=(u+o)/2;if(u===o)c=0,f=0;else{var p=o-u;switch(f=d<=.5?p/(o+u):p/(2-o-u),o){case n:c=(r-a)/p+(r<a?6:0);break;case r:c=(a-n)/p+2;break;case a:c=(n-r)/p+4;break}c/=6}return t.h=c,t.s=f,t.l=d,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Ye={common:{diffuse:{value:new qe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new sr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new qe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new sr}}},ir={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var a in r)t[a]=r[a]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture)?t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}}return t}},B2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,P2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,z2=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,F2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,I2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,G2=`
vec3 transformed = vec3( position );
`,k2=`
vec3 objectNormal = vec3( normal );
`,H2=`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		return distanceFalloff * maxDistanceCutoffFactor;
#else
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
	}
	return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;
	float b = 3.45068 + (4.18814 + y) * y;
	float v = a / b;
	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );
	return result;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,V2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,j2=`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,W2=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,q2=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,X2=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,Y2=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,Z2=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,Q2=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,K2=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,J2=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
`,$2=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,eL=`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
`,tL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,nL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,rL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,iL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,aL=`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,sL=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,oL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,lL=`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,uL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,cL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,fL=`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,hL=`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,dL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,pL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,vL=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,mL=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,gL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yL=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,bL=`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,xL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,_L=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,wL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,EL=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,ML=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,TL=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,SL=`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,AL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,RL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
		gl_Position.z *= gl_Position.w;
	#endif
#endif
`,CL=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,LL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,OL=`#ifdef USE_MAP
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,NL=`#ifdef USE_MAP
	uniform mat3 uvTransform;
	uniform sampler2D map;
#endif
`,DL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif
`,UL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,BL=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,PL=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,zL=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,FL=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,IL=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,GL=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,kL=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,HL=`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;
`,VL=`#if defined( DITHERING )
  gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif
`,jL=`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif
`,WL=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif
`,qL=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,XL=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,YL=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,ZL=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,QL=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,KL=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JL=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,$L=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif
`,eO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,tO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,rO=`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,iO=`#ifndef saturate
	#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,aO=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,sO=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
`,oO=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,lO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,cO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,fO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif
`,hO=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,dO=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}
`,pO=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,vO=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,mO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}
`,gO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}
`,yO=`uniform sampler2D tEquirect;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,bO=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,xO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,_O=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,wO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,EO=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,MO=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,TO=`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,SO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,AO=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,RO=`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,CO=`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,LO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,OO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,NO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,DO=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,UO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <fog_fragment>
}
`,BO=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,It={alphamap_fragment:B2,alphamap_pars_fragment:P2,alphatest_fragment:z2,aomap_fragment:F2,aomap_pars_fragment:I2,begin_vertex:G2,beginnormal_vertex:k2,bsdfs:H2,bumpmap_pars_fragment:V2,clipping_planes_fragment:j2,clipping_planes_pars_fragment:W2,clipping_planes_pars_vertex:q2,clipping_planes_vertex:X2,color_fragment:Y2,color_pars_fragment:Z2,color_pars_vertex:Q2,color_vertex:K2,common:J2,cube_uv_reflection_fragment:$2,defaultnormal_vertex:eL,displacementmap_pars_vertex:tL,displacementmap_vertex:nL,emissivemap_fragment:rL,emissivemap_pars_fragment:iL,encodings_fragment:aL,encodings_pars_fragment:sL,envmap_fragment:oL,envmap_pars_fragment:lL,envmap_pars_vertex:uL,envmap_vertex:cL,fog_vertex:fL,fog_pars_vertex:hL,fog_fragment:dL,fog_pars_fragment:pL,gradientmap_pars_fragment:vL,lightmap_fragment:mL,lightmap_pars_fragment:gL,lights_lambert_vertex:yL,lights_pars:bL,lights_phong_fragment:xL,lights_phong_pars_fragment:_L,lights_physical_fragment:wL,lights_physical_pars_fragment:EL,lights_template:ML,logdepthbuf_fragment:TL,logdepthbuf_pars_fragment:SL,logdepthbuf_pars_vertex:AL,logdepthbuf_vertex:RL,map_fragment:CL,map_pars_fragment:LL,map_particle_fragment:OL,map_particle_pars_fragment:NL,metalnessmap_fragment:DL,metalnessmap_pars_fragment:UL,morphnormal_vertex:BL,morphtarget_pars_vertex:PL,morphtarget_vertex:zL,normal_fragment:FL,normalmap_pars_fragment:IL,packing:GL,premultiplied_alpha_fragment:kL,project_vertex:HL,dithering_fragment:VL,dithering_pars_fragment:jL,roughnessmap_fragment:WL,roughnessmap_pars_fragment:qL,shadowmap_pars_fragment:XL,shadowmap_pars_vertex:YL,shadowmap_vertex:ZL,shadowmask_pars_fragment:QL,skinbase_vertex:KL,skinning_pars_vertex:JL,skinning_vertex:$L,skinnormal_vertex:eO,specularmap_fragment:tO,specularmap_pars_fragment:nO,tonemapping_fragment:rO,tonemapping_pars_fragment:iO,uv_pars_fragment:aO,uv_pars_vertex:sO,uv_vertex:oO,uv2_pars_fragment:lO,uv2_pars_vertex:uO,uv2_vertex:cO,worldpos_vertex:fO,cube_frag:hO,cube_vert:dO,depth_frag:pO,depth_vert:vO,distanceRGBA_frag:mO,distanceRGBA_vert:gO,equirect_frag:yO,equirect_vert:bO,linedashed_frag:xO,linedashed_vert:_O,meshbasic_frag:wO,meshbasic_vert:EO,meshlambert_frag:MO,meshlambert_vert:TO,meshphong_frag:SO,meshphong_vert:AO,meshphysical_frag:RO,meshphysical_vert:CO,normal_frag:LO,normal_vert:OO,points_frag:NO,points_vert:DO,shadow_frag:UO,shadow_vert:BO},ts={basic:{uniforms:ir.merge([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.fog]),vertexShader:It.meshbasic_vert,fragmentShader:It.meshbasic_frag},lambert:{uniforms:ir.merge([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.fog,Ye.lights,{emissive:{value:new qe(0)}}]),vertexShader:It.meshlambert_vert,fragmentShader:It.meshlambert_frag},phong:{uniforms:ir.merge([Ye.common,Ye.specularmap,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.gradientmap,Ye.fog,Ye.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:It.meshphong_vert,fragmentShader:It.meshphong_frag},standard:{uniforms:ir.merge([Ye.common,Ye.envmap,Ye.aomap,Ye.lightmap,Ye.emissivemap,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,Ye.roughnessmap,Ye.metalnessmap,Ye.fog,Ye.lights,{emissive:{value:new qe(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag},points:{uniforms:ir.merge([Ye.points,Ye.fog]),vertexShader:It.points_vert,fragmentShader:It.points_frag},dashed:{uniforms:ir.merge([Ye.common,Ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:It.linedashed_vert,fragmentShader:It.linedashed_frag},depth:{uniforms:ir.merge([Ye.common,Ye.displacementmap]),vertexShader:It.depth_vert,fragmentShader:It.depth_frag},normal:{uniforms:ir.merge([Ye.common,Ye.bumpmap,Ye.normalmap,Ye.displacementmap,{opacity:{value:1}}]),vertexShader:It.normal_vert,fragmentShader:It.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:It.cube_vert,fragmentShader:It.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:It.equirect_vert,fragmentShader:It.equirect_frag},distanceRGBA:{uniforms:ir.merge([Ye.common,Ye.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:It.distanceRGBA_vert,fragmentShader:It.distanceRGBA_frag},shadow:{uniforms:ir.merge([Ye.lights,Ye.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:It.shadow_vert,fragmentShader:It.shadow_frag}};ts.physical={uniforms:ir.merge([ts.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:It.meshphysical_vert,fragmentShader:It.meshphysical_frag};function qh(e,t){this.min=e!==void 0?e:new Ce(1/0,1/0),this.max=t!==void 0?t:new Ce(-1/0,-1/0)}Object.assign(qh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Ce;return function(n,r){var a=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Ce;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Ce;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new Ce;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var n=t||new Ce;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Ce;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function PO(e,t,n,r,a){var o,u,c,f,d,p,v,m;function y(){var M=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),T=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),u=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,M,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),t.bufferData(t.ELEMENT_ARRAY_BUFFER,T,t.STATIC_DRAW),v=t.createTexture(),m=t.createTexture(),n.bindTexture(t.TEXTURE_2D,v),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,m),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),c={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","	vUV = uv;","	vec2 pos = position;","	if ( renderType == 2 ) {","		vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","		vVisibility =        visibility.r / 9.0;","		vVisibility *= 1.0 - visibility.g / 9.0;","		vVisibility *=       visibility.b / 9.0;","		vVisibility *= 1.0 - visibility.a / 9.0;","		pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","		pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","	}","	gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","	if ( renderType == 0 ) {","		gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","	} else if ( renderType == 1 ) {","		gl_FragColor = texture2D( map, vUV );","	} else {","		vec4 texture = texture2D( map, vUV );","		texture.a *= opacity * vVisibility;","		gl_FragColor = texture;","		gl_FragColor.rgb *= color;","	}","}"].join(`
`)},f=_(c),d={vertex:t.getAttribLocation(f,"position"),uv:t.getAttribLocation(f,"uv")},p={renderType:t.getUniformLocation(f,"renderType"),map:t.getUniformLocation(f,"map"),occlusionMap:t.getUniformLocation(f,"occlusionMap"),opacity:t.getUniformLocation(f,"opacity"),color:t.getUniformLocation(f,"color"),scale:t.getUniformLocation(f,"scale"),rotation:t.getUniformLocation(f,"rotation"),screenPosition:t.getUniformLocation(f,"screenPosition")}}this.render=function(M,T,E,A){if(M.length!==0){var C=new ee,L=A.w/A.z,I=A.z*.5,j=A.w*.5,q=16/A.w,ne=new Ce(q*L,q),W=new ee(1,1,0),oe=new Ce(1,1),ae=new qh;ae.min.set(A.x,A.y),ae.max.set(A.x+(A.z-16),A.y+(A.w-16)),f===void 0&&y(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.vertex),n.enableAttribute(d.uv),n.disableUnusedAttributes(),t.uniform1i(p.occlusionMap,0),t.uniform1i(p.map,1),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(d.vertex,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(d.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var he=0,fe=M.length;he<fe;he++){q=16/A.w,ne.set(q*L,q);var se=M[he];if(C.set(se.matrixWorld.elements[12],se.matrixWorld.elements[13],se.matrixWorld.elements[14]),C.applyMatrix4(E.matrixWorldInverse),C.applyMatrix4(E.projectionMatrix),W.copy(C),oe.x=A.x+W.x*I+I-8,oe.y=A.y+W.y*j+j-8,ae.containsPoint(oe)===!0){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,v),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,oe.x,oe.y,16,16,0),t.uniform1i(p.renderType,0),t.uniform2f(p.scale,ne.x,ne.y),t.uniform3f(p.screenPosition,W.x,W.y,W.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,m),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,oe.x,oe.y,16,16,0),t.uniform1i(p.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,v),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),se.positionScreen.copy(W),se.customUpdateCallback?se.customUpdateCallback(se):se.updateLensFlares(),t.uniform1i(p.renderType,2),n.enable(t.BLEND);for(var z=0,N=se.lensFlares.length;z<N;z++){var $=se.lensFlares[z];$.opacity>.001&&$.scale>.001&&(W.x=$.x,W.y=$.y,W.z=$.z,q=$.size*$.scale/A.w,ne.x=q*L,ne.y=q,t.uniform3f(p.screenPosition,W.x,W.y,W.z),t.uniform2f(p.scale,ne.x,ne.y),t.uniform1f(p.rotation,$.rotation),t.uniform1f(p.opacity,$.opacity),t.uniform3f(p.color,$.color.r,$.color.g,$.color.b),n.setBlending($.blending,$.blendEquation,$.blendSrc,$.blendDst),r.setTexture2D($.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}};function _(M){var T=t.createProgram(),E=t.createShader(t.FRAGMENT_SHADER),A=t.createShader(t.VERTEX_SHADER),C="precision "+a.precision+` float;
`;return t.shaderSource(E,C+M.fragmentShader),t.shaderSource(A,C+M.vertexShader),t.compileShader(E),t.compileShader(A),t.attachShader(T,E),t.attachShader(T,A),t.linkProgram(T),T}}function Lu(e,t,n,r,a,o,u,c,f){sn.call(this,e,t,n,r,a,o,u,c,f),this.needsUpdate=!0}Lu.prototype=Object.create(sn.prototype);Lu.prototype.constructor=Lu;function zO(e,t,n,r,a){var o,u,c,f,d,p,v=new ee,m=new Tn,y=new ee;function _(){var E=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),A=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),u=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,E,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),t.bufferData(t.ELEMENT_ARRAY_BUFFER,A,t.STATIC_DRAW),c=M(),f={position:t.getAttribLocation(c,"position"),uv:t.getAttribLocation(c,"uv")},d={uvOffset:t.getUniformLocation(c,"uvOffset"),uvScale:t.getUniformLocation(c,"uvScale"),rotation:t.getUniformLocation(c,"rotation"),scale:t.getUniformLocation(c,"scale"),color:t.getUniformLocation(c,"color"),map:t.getUniformLocation(c,"map"),opacity:t.getUniformLocation(c,"opacity"),modelViewMatrix:t.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(c,"projectionMatrix"),fogType:t.getUniformLocation(c,"fogType"),fogDensity:t.getUniformLocation(c,"fogDensity"),fogNear:t.getUniformLocation(c,"fogNear"),fogFar:t.getUniformLocation(c,"fogFar"),fogColor:t.getUniformLocation(c,"fogColor"),fogDepth:t.getUniformLocation(c,"fogDepth"),alphaTest:t.getUniformLocation(c,"alphaTest")};var C=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");C.width=8,C.height=8;var L=C.getContext("2d");L.fillStyle="white",L.fillRect(0,0,8,8),p=new Lu(C)}this.render=function(E,A,C){if(E.length!==0){c===void 0&&_(),n.useProgram(c),n.initAttributes(),n.enableAttribute(f.position),n.enableAttribute(f.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(f.position,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(f.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),t.uniformMatrix4fv(d.projectionMatrix,!1,C.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(d.map,0);var L=0,I=0,j=A.fog;j?(t.uniform3f(d.fogColor,j.color.r,j.color.g,j.color.b),j.isFog?(t.uniform1f(d.fogNear,j.near),t.uniform1f(d.fogFar,j.far),t.uniform1i(d.fogType,1),L=1,I=1):j.isFogExp2&&(t.uniform1f(d.fogDensity,j.density),t.uniform1i(d.fogType,2),L=2,I=2)):(t.uniform1i(d.fogType,0),L=0,I=0);for(var q=0,ne=E.length;q<ne;q++){var W=E[q];W.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,W.matrixWorld),W.z=-W.modelViewMatrix.elements[14]}E.sort(T);for(var oe=[],q=0,ne=E.length;q<ne;q++){var W=E[q],ae=W.material;if(ae.visible!==!1){W.onBeforeRender(e,A,C,void 0,ae,void 0),t.uniform1f(d.alphaTest,ae.alphaTest),t.uniformMatrix4fv(d.modelViewMatrix,!1,W.modelViewMatrix.elements),W.matrixWorld.decompose(v,m,y),oe[0]=y.x,oe[1]=y.y;var he=0;A.fog&&ae.fog&&(he=I),L!==he&&(t.uniform1i(d.fogType,he),L=he),ae.map!==null?(t.uniform2f(d.uvOffset,ae.map.offset.x,ae.map.offset.y),t.uniform2f(d.uvScale,ae.map.repeat.x,ae.map.repeat.y)):(t.uniform2f(d.uvOffset,0,0),t.uniform2f(d.uvScale,1,1)),t.uniform1f(d.opacity,ae.opacity),t.uniform3f(d.color,ae.color.r,ae.color.g,ae.color.b),t.uniform1f(d.rotation,ae.rotation),t.uniform2fv(d.scale,oe),n.setBlending(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),n.buffers.depth.setTest(ae.depthTest),n.buffers.depth.setMask(ae.depthWrite),n.buffers.color.setMask(ae.colorWrite),r.setTexture2D(ae.map||p,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),W.onAfterRender(e,A,C,void 0,ae,void 0)}}n.enable(t.CULL_FACE),n.reset()}};function M(){var E=t.createProgram(),A=t.createShader(t.VERTEX_SHADER),C=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(A,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","	vUV = uvOffset + uv * uvScale;","	vec2 alignedPosition = position * scale;","	vec2 rotatedPosition;","	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","	vec4 mvPosition;","	mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","	mvPosition.xy += rotatedPosition;","	gl_Position = projectionMatrix * mvPosition;","	fogDepth = - mvPosition.z;","}"].join(`
`)),t.shaderSource(C,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","	vec4 texture = texture2D( map, vUV );","	gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","	if ( gl_FragColor.a < alphaTest ) discard;","	if ( fogType > 0 ) {","		float fogFactor = 0.0;","		if ( fogType == 1 ) {","			fogFactor = smoothstep( fogNear, fogFar, fogDepth );","		} else {","			const float LOG2 = 1.442695;","			fogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","			fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","		}","		gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","	}","}"].join(`
`)),t.compileShader(A),t.compileShader(C),t.attachShader(E,A),t.attachShader(E,C),t.linkProgram(E),E}function T(E,A){return E.renderOrder!==A.renderOrder?E.renderOrder-A.renderOrder:E.z!==A.z?A.z-E.z:A.id-E.id}}var FO=0;function xt(){Object.defineProperty(this,"id",{value:FO++}),this.uuid=pt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=cl,this.side=bo,this.flatShading=!1,this.vertexColors=zh,this.opacity=1,this.transparent=!1,this.blendSrc=Lg,this.blendDst=Og,this.blendEquation=Cg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=nh,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}xt.prototype=Object.assign(Object.create(Xi.prototype),{constructor:xt,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var t in e){var n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Eg;continue}var r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):t==="overdraw"?this[t]=Number(n):this[t]=n}},toJSON:function(e){var t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearCoat!==void 0&&(n.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==cl&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==bo&&(n.side=this.side),this.vertexColors!==zh&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.rotation!==0&&(n.rotation=this.rotation),this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(u){var c=[];for(var f in u){var d=u[f];delete d.metadata,c.push(d)}return c}if(t){var a=r(e.textures),o=r(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(t!==null){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ta(e){xt.call(this),this.type="MeshDepthMaterial",this.depthPacking=T1,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}Ta.prototype=Object.create(xt.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isMeshDepthMaterial=!0;Ta.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function Sa(e){xt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new ee,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}Sa.prototype=Object.create(xt.prototype);Sa.prototype.constructor=Sa;Sa.prototype.isMeshDistanceMaterial=!0;Sa.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Vi(e,t){this.min=e!==void 0?e:new ee(1/0,1/0,1/0),this.max=t!==void 0?t:new ee(-1/0,-1/0,-1/0)}Object.assign(Vi.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,o=-1/0,u=-1/0,c=0,f=e.length;c<f;c+=3){var d=e[c],p=e[c+1],v=e[c+2];d<t&&(t=d),p<n&&(n=p),v<r&&(r=v),d>a&&(a=d),p>o&&(o=p),v>u&&(u=v)}return this.min.set(t,n,r),this.max.set(a,o,u),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,o=-1/0,u=-1/0,c=0,f=e.count;c<f;c++){var d=e.getX(c),p=e.getY(c),v=e.getZ(c);d<t&&(t=d),p<n&&(n=p),v<r&&(r=v),d>a&&(a=d),p>o&&(o=p),v>u&&(u=v)}return this.min.set(t,n,r),this.max.set(a,o,u),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new ee;return function(n,r){var a=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new ee;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new ee;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new ee;function a(o){var u=o.geometry;if(u!==void 0){if(u.isGeometry){var c=u.vertices;for(t=0,n=c.length;t<n;t++)r.copy(c[t]),r.applyMatrix4(o.matrixWorld),e.expandByPoint(r)}else if(u.isBufferGeometry){var f=u.attributes.position;if(f!==void 0)for(t=0,n=f.count;t<n;t++)r.fromBufferAttribute(f,t).applyMatrix4(o.matrixWorld),e.expandByPoint(r)}}}return function(u){return e=this,u.updateMatrixWorld(!0),u.traverse(a),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new ee;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new ee;return function(n){return this.clampPoint(n.center,e),e.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new ee;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new ee;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),getBoundingSphere:function(){var e=new ee;return function(n){var r=n||new Xr;return this.getCenter(r.center),r.radius=this.getSize(e).length()*.5,r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee];return function(n){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Xr(e,t){this.center=e!==void 0?e:new ee,this.radius=t!==void 0?t:0}Object.assign(Xr.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Vi;return function(n,r){var a=this.center;r!==void 0?a.copy(r):e.setFromPoints(n).getCenter(a);for(var o=0,u=0,c=n.length;u<c;u++)o=Math.max(o,a.distanceToSquared(n[u]));return this.radius=Math.sqrt(o),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new ee;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Vi;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function zr(e,t){this.normal=e!==void 0?e:new ee(1,0,0),this.constant=t!==void 0?t:0}Object.assign(zr.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new ee,t=new ee;return function(r,a,o){var u=e.subVectors(o,a).cross(t.subVectors(r,a)).normalize();return this.setFromNormalAndCoplanarPoint(u,r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new ee;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new ee;return function(n,r){var a=r||new ee,o=n.delta(e),u=this.normal.dot(o);if(u===0)return this.distanceToPoint(n.start)===0?a.copy(n.start):void 0;var c=-(n.start.dot(this.normal)+this.constant)/u;if(!(c<0||c>1))return a.copy(o).multiplyScalar(c).add(n.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new ee;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new ee,t=new sr;return function(r,a){var o=a||t.getNormalMatrix(r),u=this.coplanarPoint(e).applyMatrix4(r),c=this.normal.applyMatrix3(o).normalize();return this.constant=-u.dot(c),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Xh(e,t,n,r,a,o){this.planes=[e!==void 0?e:new zr,t!==void 0?t:new zr,n!==void 0?n:new zr,r!==void 0?r:new zr,a!==void 0?a:new zr,o!==void 0?o:new zr]}Object.assign(Xh.prototype,{set:function(e,t,n,r,a,o){var u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(n),u[3].copy(r),u[4].copy(a),u[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],o=n[2],u=n[3],c=n[4],f=n[5],d=n[6],p=n[7],v=n[8],m=n[9],y=n[10],_=n[11],M=n[12],T=n[13],E=n[14],A=n[15];return t[0].setComponents(u-r,p-c,_-v,A-M).normalize(),t[1].setComponents(u+r,p+c,_+v,A+M).normalize(),t[2].setComponents(u+a,p+f,_+m,A+T).normalize(),t[3].setComponents(u-a,p-f,_-m,A-T).normalize(),t[4].setComponents(u-o,p-d,_-y,A-E).normalize(),t[5].setComponents(u+o,p+d,_+y,A+E).normalize(),this},intersectsObject:function(){var e=new Xr;return function(n){var r=n.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Xr;return function(n){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++){var o=t[a].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var e=new ee,t=new ee;return function(r){for(var a=this.planes,o=0;o<6;o++){var u=a[o];e.x=u.normal.x>0?r.min.x:r.max.x,t.x=u.normal.x>0?r.max.x:r.min.x,e.y=u.normal.y>0?r.min.y:r.max.y,t.y=u.normal.y>0?r.max.y:r.min.y,e.z=u.normal.z>0?r.min.z:r.max.z,t.z=u.normal.z>0?r.max.z:r.min.z;var c=u.distanceToPoint(e),f=u.distanceToPoint(t);if(c<0&&f<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});function B1(e,t,n){for(var r=new Xh,a=new ut,o=new Ce,u=new Ce(n,n),c=new ee,f=new ee,d=1,p=2,v=(d|p)+1,m=new Array(v),y=new Array(v),_={},M=[new ee(1,0,0),new ee(-1,0,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,1,0),new ee(0,-1,0)],T=[new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,0,1),new ee(0,0,-1)],E=[new Zt,new Zt,new Zt,new Zt,new Zt,new Zt],A=0;A!==v;++A){var C=(A&d)!==0,L=(A&p)!==0,I=new Ta({depthPacking:S1,morphTargets:C,skinning:L});m[A]=I;var j=new Sa({morphTargets:C,skinning:L});y[A]=j}var q=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wg,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(oe,ae,he){if(q.enabled!==!1&&!(q.autoUpdate===!1&&q.needsUpdate===!1)&&oe.length!==0){var fe=e.context,se=e.state;se.disable(fe.BLEND),se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);for(var z,N=0,$=oe.length;N<$;N++){var x=oe[N],S=x.shadow,w=x&&x.isPointLight;if(S===void 0){console.warn("THREE.WebGLShadowMap:",x,"has no shadow.");continue}var R=S.camera;if(o.copy(S.mapSize),o.min(u),w){var D=o.x,B=o.y;E[0].set(D*2,B,D,B),E[1].set(0,B,D,B),E[2].set(D*3,B,D,B),E[3].set(D,B,D,B),E[4].set(D*3,0,D,B),E[5].set(D,0,D,B),o.x*=4,o.y*=2}if(S.map===null){var H={minFilter:_r,magFilter:_r,format:ui};S.map=new as(o.x,o.y,H),S.map.texture.name=x.name+".shadowMap",R.updateProjectionMatrix()}S.isSpotLightShadow&&S.update(x);var Q=S.map,P=S.matrix;f.setFromMatrixPosition(x.matrixWorld),R.position.copy(f),w?(z=6,P.makeTranslation(-f.x,-f.y,-f.z)):(z=1,c.setFromMatrixPosition(x.target.matrixWorld),R.lookAt(c),R.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(R.projectionMatrix),P.multiply(R.matrixWorldInverse)),e.setRenderTarget(Q),e.clear();for(var X=0;X<z;X++){if(w){c.copy(R.position),c.add(M[X]),R.up.copy(T[X]),R.lookAt(c),R.updateMatrixWorld();var le=E[X];se.viewport(le)}a.multiplyMatrices(R.projectionMatrix,R.matrixWorldInverse),r.setFromMatrix(a),W(ae,he,R,w)}}q.needsUpdate=!1}};function ne(oe,ae,he,fe,se,z){var N=oe.geometry,$=null,x=m,S=oe.customDepthMaterial;if(he&&(x=y,S=oe.customDistanceMaterial),S)$=S;else{var w=!1;ae.morphTargets&&(N&&N.isBufferGeometry?w=N.morphAttributes&&N.morphAttributes.position&&N.morphAttributes.position.length>0:N&&N.isGeometry&&(w=N.morphTargets&&N.morphTargets.length>0)),oe.isSkinnedMesh&&ae.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",oe);var R=oe.isSkinnedMesh&&ae.skinning,D=0;w&&(D|=d),R&&(D|=p),$=x[D]}if(e.localClippingEnabled&&ae.clipShadows===!0&&ae.clippingPlanes.length!==0){var B=$.uuid,H=ae.uuid,Q=_[B];Q===void 0&&(Q={},_[B]=Q);var P=Q[H];P===void 0&&(P=$.clone(),Q[H]=P),$=P}$.visible=ae.visible,$.wireframe=ae.wireframe;var X=ae.side;return q.renderSingleSided&&X==ul&&(X=bo),q.renderReverseSided&&(X===bo?X=Ea:X===Ea&&(X=bo)),$.side=X,$.clipShadows=ae.clipShadows,$.clippingPlanes=ae.clippingPlanes,$.clipIntersection=ae.clipIntersection,$.wireframeLinewidth=ae.wireframeLinewidth,$.linewidth=ae.linewidth,he&&$.isMeshDistanceMaterial&&($.referencePosition.copy(fe),$.nearDistance=se,$.farDistance=z),$}function W(oe,ae,he,fe){if(oe.visible!==!1){var se=oe.layers.test(ae.layers);if(se&&(oe.isMesh||oe.isLine||oe.isPoints)&&oe.castShadow&&(!oe.frustumCulled||r.intersectsObject(oe))){oe.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,oe.matrixWorld);var z=t.update(oe),N=oe.material;if(Array.isArray(N))for(var $=z.groups,x=0,S=$.length;x<S;x++){var w=$[x],R=N[w.materialIndex];if(R&&R.visible){var D=ne(oe,R,fe,f,he.near,he.far);e.renderBufferDirect(he,null,z,D,oe,w)}}else if(N.visible){var D=ne(oe,N,fe,f,he.near,he.far);e.renderBufferDirect(he,null,z,D,oe,null)}}for(var B=oe.children,H=0,Q=B.length;H<Q;H++)W(B[H],ae,he,fe)}}}function IO(e){var t={};function n(c,f){var d=c.array,p=c.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,v=e.createBuffer();e.bindBuffer(f,v),e.bufferData(f,d,p),c.onUploadCallback();var m=e.FLOAT;return d instanceof Float32Array?m=e.FLOAT:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?m=e.UNSIGNED_SHORT:d instanceof Int16Array?m=e.SHORT:d instanceof Uint32Array?m=e.UNSIGNED_INT:d instanceof Int32Array?m=e.INT:d instanceof Int8Array?m=e.BYTE:d instanceof Uint8Array&&(m=e.UNSIGNED_BYTE),{buffer:v,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function r(c,f,d){var p=f.array,v=f.updateRange;e.bindBuffer(d,c),f.dynamic===!1?e.bufferData(d,p,e.STATIC_DRAW):v.count===-1?e.bufferSubData(d,0,p):v.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(d,v.offset*p.BYTES_PER_ELEMENT,p.subarray(v.offset,v.offset+v.count)),v.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),t[c.uuid]}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);var f=t[c.uuid];f&&(e.deleteBuffer(f.buffer),delete t[c.uuid])}function u(c,f){c.isInterleavedBufferAttribute&&(c=c.data);var d=t[c.uuid];d===void 0?t[c.uuid]=n(c,f):d.version<c.version&&(r(d.buffer,c,f),d.version=c.version)}return{get:a,remove:o,update:u}}function Ca(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Ca.DefaultOrder}Ca.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Ca.DefaultOrder="XYZ";Object.defineProperties(Ca.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}});Object.assign(Ca.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=pt.clamp,a=e.elements,o=a[0],u=a[4],c=a[8],f=a[1],d=a[5],p=a[9],v=a[2],m=a[6],y=a[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(m,d),this._z=0)):t==="YXZ"?(this._x=Math.asin(-r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(c,y),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-v,o),this._z=0)):t==="ZXY"?(this._x=Math.asin(r(m,-1,1)),Math.abs(m)<.99999?(this._y=Math.atan2(-v,y),this._z=Math.atan2(-u,d)):(this._y=0,this._z=Math.atan2(f,o))):t==="ZYX"?(this._y=Math.asin(-r(v,-1,1)),Math.abs(v)<.99999?(this._x=Math.atan2(m,y),this._z=Math.atan2(f,o)):(this._x=0,this._z=Math.atan2(-u,d))):t==="YZX"?(this._z=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(c,y))):t==="XZY"?(this._z=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(m,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-p,y),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new ut;return function(n,r,a){return e.makeRotationFromQuaternion(n),this.setFromRotationMatrix(e,r,a)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Tn;return function(n){return e.setFromEuler(this),this.setFromQuaternion(e,n)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new ee(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function Ig(){this.mask=1}Object.assign(Ig.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var GO=0;function Ue(){Object.defineProperty(this,"id",{value:GO++}),this.uuid=pt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ue.DefaultUp.clone();var e=new ee,t=new Ca,n=new Tn,r=new ee(1,1,1);function a(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t.onChange(a),n.onChange(o),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new ut},normalMatrix:{value:new sr}}),this.matrix=new ut,this.matrixWorld=new ut,this.matrixAutoUpdate=Ue.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ig,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Ue.DefaultUp=new ee(0,1,0);Ue.DefaultMatrixAutoUpdate=!0;Ue.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ue,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Tn;return function(n,r){return e.setFromAxisAngle(n,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new Tn;return function(n,r){return e.setFromAxisAngle(n,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new ee(1,0,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateY:function(){var e=new ee(0,1,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateZ:function(){var e=new ee(0,0,1);return function(n){return this.rotateOnAxis(e,n)}}(),translateOnAxis:function(){var e=new ee;return function(n,r){return e.copy(n).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new ee(1,0,0);return function(n){return this.translateOnAxis(e,n)}}(),translateY:function(){var e=new ee(0,1,0);return function(n){return this.translateOnAxis(e,n)}}(),translateZ:function(){var e=new ee(0,0,1);return function(n){return this.translateOnAxis(e,n)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new ut;return function(n){return n.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new ut,t=new ee;return function(r,a,o){r.isVector3?t.copy(r):t.set(r,a,o),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){var t=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(t[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){var t=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.remove(t[n]);return this}var r=this.children.indexOf(e);return r!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n],o=a.getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){var t=e||new ee;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new ee,t=new ee;return function(r){var a=r||new Tn;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,a,t),a}}(),getWorldRotation:function(){var e=new Tn;return function(n){var r=n||new Ca;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new ee,t=new Tn;return function(r){var a=r||new ee;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,a),a}}(),getWorldDirection:function(){var e=new Tn;return function(n){var r=n||new ee;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.matrix=this.matrix.toArray();function a(T,E){return T[E.uuid]===void 0&&(T[E.uuid]=E.toJSON(e)),E.uuid}if(this.geometry!==void 0){r.geometry=a(e.geometries,this.geometry);var o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){var u=o.shapes;if(Array.isArray(u))for(var c=0,f=u.length;c<f;c++){var d=u[c];a(e.shapes,d)}else a(e.shapes,u)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var p=[],c=0,f=this.material.length;c<f;c++)p.push(a(e.materials,this.material[c]));r.material=p}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(t){var v=M(e.geometries),m=M(e.materials),y=M(e.textures),_=M(e.images),u=M(e.shapes);v.length>0&&(n.geometries=v),m.length>0&&(n.materials=m),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),u.length>0&&(n.shapes=u)}return n.object=r,n;function M(T){var E=[];for(var A in T){var C=T[A];delete C.metadata,E.push(C)}return E}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});function ci(){Ue.call(this),this.type="Camera",this.matrixWorldInverse=new ut,this.projectionMatrix=new ut}ci.prototype=Object.assign(Object.create(Ue.prototype),{constructor:ci,isCamera:!0,copy:function(e,t){return Ue.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Tn;return function(n){var r=n||new ee;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Ue.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function So(e,t,n,r,a,o){ci.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=a!==void 0?a:.1,this.far=o!==void 0?o:2e3,this.updateProjectionMatrix()}So.prototype=Object.assign(Object.create(ci.prototype),{constructor:So,isOrthographicCamera:!0,copy:function(e,t){return ci.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,o=n+e,u=r+t,c=r-t;if(this.view!==null&&this.view.enabled){var f=this.zoom/(this.view.width/this.view.fullWidth),d=this.zoom/(this.view.height/this.view.fullHeight),p=(this.right-this.left)/this.view.width,v=(this.top-this.bottom)/this.view.height;a+=p*(this.view.offsetX/f),o=a+p*(this.view.width/f),u-=v*(this.view.offsetY/d),c=u-v*(this.view.height/d)}this.projectionMatrix.makeOrthographic(a,o,u,c,this.near,this.far)},toJSON:function(e){var t=Ue.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function Gi(e,t,n,r,a,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new ee,this.vertexNormals=Array.isArray(r)?r:[],this.color=a&&a.isColor?a:new qe,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o!==void 0?o:0}Object.assign(Gi.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var kO=0;function ot(){Object.defineProperty(this,"id",{value:kO+=2}),this.uuid=pt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}ot.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ot,isGeometry:!0,applyMatrix:function(e){for(var t=new sr().getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var a=this.vertices[n];a.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(t).normalize();for(var u=0,c=o.vertexNormals.length;u<c;u++)o.vertexNormals[u].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new ut;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ut;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ut;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new ut;return function(n,r,a){return e.makeTranslation(n,r,a),this.applyMatrix(e),this}}(),scale:function(){var e=new ut;return function(n,r,a){return e.makeScale(n,r,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Ue;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=e.index!==null?e.index.array:void 0,r=e.attributes,a=r.position.array,o=r.normal!==void 0?r.normal.array:void 0,u=r.color!==void 0?r.color.array:void 0,c=r.uv!==void 0?r.uv.array:void 0,f=r.uv2!==void 0?r.uv2.array:void 0;f!==void 0&&(this.faceVertexUvs[1]=[]);for(var d=[],p=[],v=[],m=0,y=0;m<a.length;m+=3,y+=2)t.vertices.push(new ee(a[m],a[m+1],a[m+2])),o!==void 0&&d.push(new ee(o[m],o[m+1],o[m+2])),u!==void 0&&t.colors.push(new qe(u[m],u[m+1],u[m+2])),c!==void 0&&p.push(new Ce(c[y],c[y+1])),f!==void 0&&v.push(new Ce(f[y],f[y+1]));function _(L,I,j,q){var ne=o!==void 0?[d[L].clone(),d[I].clone(),d[j].clone()]:[],W=u!==void 0?[t.colors[L].clone(),t.colors[I].clone(),t.colors[j].clone()]:[],oe=new Gi(L,I,j,ne,W,q);t.faces.push(oe),c!==void 0&&t.faceVertexUvs[0].push([p[L].clone(),p[I].clone(),p[j].clone()]),f!==void 0&&t.faceVertexUvs[1].push([v[L].clone(),v[I].clone(),v[j].clone()])}var M=e.groups;if(M.length>0)for(var m=0;m<M.length;m++)for(var T=M[m],E=T.start,A=T.count,y=E,C=E+A;y<C;y+=3)n!==void 0?_(n[y],n[y+1],n[y+2],T.materialIndex):_(y,y+1,y+2,T.materialIndex);else if(n!==void 0)for(var m=0;m<n.length;m+=3)_(n[m],n[m+1],n[m+2]);else for(var m=0;m<a.length/3;m+=3)_(m,m+1,m+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new ut;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new ee,t=new ee,n=0,r=this.faces.length;n<r;n++){var a=this.faces[n],o=this.vertices[a.a],u=this.vertices[a.b],c=this.vertices[a.c];e.subVectors(c,u),t.subVectors(o,u),e.cross(t),e.normalize(),a.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,n,r,a,o,u;for(u=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)u[t]=new ee;if(e){var c,f,d,p=new ee,v=new ee;for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],c=this.vertices[o.a],f=this.vertices[o.b],d=this.vertices[o.c],p.subVectors(d,f),v.subVectors(c,f),p.cross(v),u[o.a].add(p),u[o.b].add(p),u[o.c].add(p)}else for(this.computeFaceNormals(),r=0,a=this.faces.length;r<a;r++)o=this.faces[r],u[o.a].add(o.normal),u[o.b].add(o.normal),u[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)u[t].normalize();for(r=0,a=this.faces.length;r<a;r++){o=this.faces[r];var m=o.vertexNormals;m.length===3?(m[0].copy(u[o.a]),m[1].copy(u[o.b]),m[2].copy(u[o.c])):(m[0]=u[o.a].clone(),m[1]=u[o.b].clone(),m[2]=u[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,a;for(n=0,r=this.faces.length;n<r;n++)for(a=this.faces[n],a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]),e=0,t=a.vertexNormals.length;e<t;e++)a.__originalVertexNormals[e]?a.__originalVertexNormals[e].copy(a.vertexNormals[e]):a.__originalVertexNormals[e]=a.vertexNormals[e].clone();var o=new ot;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var u=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals,d,p;for(n=0,r=this.faces.length;n<r;n++)d=new ee,p={a:new ee,b:new ee,c:new ee},u.push(d),c.push(p)}var f=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var d,p;for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],d=f.faceNormals[n],p=f.vertexNormals[n],d.copy(a.normal),p.a.copy(a.vertexNormals[0]),p.b.copy(a.vertexNormals[1]),p.c.copy(a.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Vi),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Xr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,a=this.vertices.length,o=this.vertices,u=e.vertices,c=this.faces,f=e.faces,d=this.faceVertexUvs[0],p=e.faceVertexUvs[0],v=this.colors,m=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new sr().getNormalMatrix(t));for(var y=0,_=u.length;y<_;y++){var M=u[y],T=M.clone();t!==void 0&&T.applyMatrix4(t),o.push(T)}for(var y=0,_=m.length;y<_;y++)v.push(m[y].clone());for(y=0,_=f.length;y<_;y++){var E=f[y],A,C,L,I=E.vertexNormals,j=E.vertexColors;A=new Gi(E.a+a,E.b+a,E.c+a),A.normal.copy(E.normal),r!==void 0&&A.normal.applyMatrix3(r).normalize();for(var q=0,ne=I.length;q<ne;q++)C=I[q].clone(),r!==void 0&&C.applyMatrix3(r).normalize(),A.vertexNormals.push(C);A.color.copy(E.color);for(var q=0,ne=j.length;q<ne;q++)L=j[q],A.vertexColors.push(L.clone());A.materialIndex=E.materialIndex+n,c.push(A)}for(y=0,_=p.length;y<_;y++){var W=p[y],oe=[];if(W!==void 0){for(var q=0,ne=W.length;q<ne;q++)oe.push(W[q].clone());d.push(oe)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],n=[],r,a,o=4,u=Math.pow(10,o),c,f,d,p,v,m;for(c=0,f=this.vertices.length;c<f;c++)r=this.vertices[c],a=Math.round(r.x*u)+"_"+Math.round(r.y*u)+"_"+Math.round(r.z*u),e[a]===void 0?(e[a]=c,t.push(this.vertices[c]),n[c]=t.length-1):n[c]=n[e[a]];var y=[];for(c=0,f=this.faces.length;c<f;c++){d=this.faces[c],d.a=n[d.a],d.b=n[d.b],d.c=n[d.c],p=[d.a,d.b,d.c];for(var _=0;_<3;_++)if(p[_]===p[(_+1)%3]){y.push(c);break}}for(c=y.length-1;c>=0;c--){var M=y[c];for(this.faces.splice(M,1),v=0,m=this.faceVertexUvs.length;v<m;v++)this.faceVertexUvs[v].splice(M,1)}var T=this.vertices.length-t.length;return this.vertices=t,T},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new ee(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;function r(d,p){return d.materialIndex-p.materialIndex}e.sort(r);var a=this.faceVertexUvs[0],o=this.faceVertexUvs[1],u,c;a&&a.length===t&&(u=[]),o&&o.length===t&&(c=[]);for(var n=0;n<t;n++){var f=e[n]._id;u&&u.push(a[f]),c&&c.push(o[f])}u&&(this.faceVertexUvs[0]=u),c&&(this.faceVertexUvs[1]=c)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}for(var r=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];r.push(o.x,o.y,o.z)}for(var u=[],c=[],f={},d=[],p={},v=[],m={},a=0;a<this.faces.length;a++){var y=this.faces[a],_=!0,M=!1,T=this.faceVertexUvs[0][a]!==void 0,E=y.normal.length()>0,A=y.vertexNormals.length>0,C=y.color.r!==1||y.color.g!==1||y.color.b!==1,L=y.vertexColors.length>0,I=0;if(I=W(I,0,0),I=W(I,1,_),I=W(I,2,M),I=W(I,3,T),I=W(I,4,E),I=W(I,5,A),I=W(I,6,C),I=W(I,7,L),u.push(I),u.push(y.a,y.b,y.c),u.push(y.materialIndex),T){var j=this.faceVertexUvs[0][a];u.push(he(j[0]),he(j[1]),he(j[2]))}if(E&&u.push(oe(y.normal)),A){var q=y.vertexNormals;u.push(oe(q[0]),oe(q[1]),oe(q[2]))}if(C&&u.push(ae(y.color)),L){var ne=y.vertexColors;u.push(ae(ne[0]),ae(ne[1]),ae(ne[2]))}}function W(fe,se,z){return z?fe|1<<se:fe&~(1<<se)}function oe(fe){var se=fe.x.toString()+fe.y.toString()+fe.z.toString();return f[se]!==void 0||(f[se]=c.length/3,c.push(fe.x,fe.y,fe.z)),f[se]}function ae(fe){var se=fe.r.toString()+fe.g.toString()+fe.b.toString();return p[se]!==void 0||(p[se]=d.length,d.push(fe.getHex())),p[se]}function he(fe){var se=fe.x.toString()+fe.y.toString();return m[se]!==void 0||(m[se]=v.length/2,v.push(fe.x,fe.y)),m[se]}return e.data={},e.data.vertices=r,e.data.normals=c,d.length>0&&(e.data.colors=d),v.length>0&&(e.data.uvs=[v]),e.data.faces=u,e},clone:function(){return new ot().copy(this)},copy:function(e){var t,n,r,a,o,u;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var c=e.vertices;for(t=0,n=c.length;t<n;t++)this.vertices.push(c[t].clone());var f=e.colors;for(t=0,n=f.length;t<n;t++)this.colors.push(f[t].clone());var d=e.faces;for(t=0,n=d.length;t<n;t++)this.faces.push(d[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var p=e.faceVertexUvs[t];for(this.faceVertexUvs[t]===void 0&&(this.faceVertexUvs[t]=[]),r=0,a=p.length;r<a;r++){var v=p[r],m=[];for(o=0,u=v.length;o<u;o++){var y=v[o];m.push(y.clone())}this.faceVertexUvs[t].push(m)}}var _=e.morphTargets;for(t=0,n=_.length;t<n;t++){var M={};if(M.name=_[t].name,_[t].vertices!==void 0)for(M.vertices=[],r=0,a=_[t].vertices.length;r<a;r++)M.vertices.push(_[t].vertices[r].clone());if(_[t].normals!==void 0)for(M.normals=[],r=0,a=_[t].normals.length;r<a;r++)M.normals.push(_[t].normals[r].clone());this.morphTargets.push(M)}var T=e.morphNormals;for(t=0,n=T.length;t<n;t++){var E={};if(T[t].vertexNormals!==void 0)for(E.vertexNormals=[],r=0,a=T[t].vertexNormals.length;r<a;r++){var A=T[t].vertexNormals[r],C={};C.a=A.a.clone(),C.b=A.b.clone(),C.c=A.c.clone(),E.vertexNormals.push(C)}if(T[t].faceNormals!==void 0)for(E.faceNormals=[],r=0,a=T[t].faceNormals.length;r<a;r++)E.faceNormals.push(T[t].faceNormals[r].clone());this.morphNormals.push(E)}var L=e.skinWeights;for(t=0,n=L.length;t<n;t++)this.skinWeights.push(L[t].clone());var I=e.skinIndices;for(t=0,n=I.length;t<n;t++)this.skinIndices.push(I[t].clone());var j=e.lineDistances;for(t=0,n=j.length;t<n;t++)this.lineDistances.push(j[t]);var q=e.boundingBox;q!==null&&(this.boundingBox=q.clone());var ne=e.boundingSphere;return ne!==null&&(this.boundingSphere=ne.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function gt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=pt.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(gt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(gt.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new qe),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Ce),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new ee),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Zt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function Ou(e,t,n){gt.call(this,new Int8Array(e),t,n)}Ou.prototype=Object.create(gt.prototype);Ou.prototype.constructor=Ou;function Nu(e,t,n){gt.call(this,new Uint8Array(e),t,n)}Nu.prototype=Object.create(gt.prototype);Nu.prototype.constructor=Nu;function Du(e,t,n){gt.call(this,new Uint8ClampedArray(e),t,n)}Du.prototype=Object.create(gt.prototype);Du.prototype.constructor=Du;function Uu(e,t,n){gt.call(this,new Int16Array(e),t,n)}Uu.prototype=Object.create(gt.prototype);Uu.prototype.constructor=Uu;function ls(e,t,n){gt.call(this,new Uint16Array(e),t,n)}ls.prototype=Object.create(gt.prototype);ls.prototype.constructor=ls;function Bu(e,t,n){gt.call(this,new Int32Array(e),t,n)}Bu.prototype=Object.create(gt.prototype);Bu.prototype.constructor=Bu;function us(e,t,n){gt.call(this,new Uint32Array(e),t,n)}us.prototype=Object.create(gt.prototype);us.prototype.constructor=us;function De(e,t,n){gt.call(this,new Float32Array(e),t,n)}De.prototype=Object.create(gt.prototype);De.prototype.constructor=De;function Pu(e,t,n){gt.call(this,new Float64Array(e),t,n)}Pu.prototype=Object.create(gt.prototype);Pu.prototype.constructor=Pu;function P1(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(P1.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,a=e.faces,o=0;o<a.length;o++){var u=a[o];u.materialIndex!==r&&(r=u.materialIndex,t!==void 0&&(t.count=o*3-t.start,n.push(t)),t={start:o*3,materialIndex:r})}t!==void 0&&(t.count=o*3-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,u=e.morphTargets,c=u.length,f;if(c>0){f=[];for(var d=0;d<c;d++)f[d]=[];this.morphTargets.position=f}var p=e.morphNormals,v=p.length,m;if(v>0){m=[];for(var d=0;d<v;d++)m[d]=[];this.morphTargets.normal=m}for(var y=e.skinIndices,_=e.skinWeights,M=y.length===n.length,T=_.length===n.length,d=0;d<t.length;d++){var E=t[d];this.vertices.push(n[E.a],n[E.b],n[E.c]);var A=E.vertexNormals;if(A.length===3)this.normals.push(A[0],A[1],A[2]);else{var C=E.normal;this.normals.push(C,C,C)}var L=E.vertexColors;if(L.length===3)this.colors.push(L[0],L[1],L[2]);else{var I=E.color;this.colors.push(I,I,I)}if(a===!0){var j=r[0][d];j!==void 0?this.uvs.push(j[0],j[1],j[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",d),this.uvs.push(new Ce,new Ce,new Ce))}if(o===!0){var j=r[1][d];j!==void 0?this.uvs2.push(j[0],j[1],j[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",d),this.uvs2.push(new Ce,new Ce,new Ce))}for(var q=0;q<c;q++){var ne=u[q].vertices;f[q].push(ne[E.a],ne[E.b],ne[E.c])}for(var q=0;q<v;q++){var W=p[q].vertexNormals[d];m[q].push(W.a,W.b,W.c)}M&&this.skinIndices.push(y[E.a],y[E.b],y[E.c]),T&&this.skinWeights.push(_[E.a],_[E.b],_[E.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function Im(e){if(e.length===0)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var HO=1;function ke(){Object.defineProperty(this,"id",{value:HO+=2}),this.uuid=pt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}ke.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ke,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Im(e)>65535?us:ls)(e,1):this.index=e},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new gt(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);return}return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var r=new sr().getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var e=new ut;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new ut;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new ut;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new ut;return function(n,r,a){return e.makeTranslation(n,r,a),this.applyMatrix(e),this}}(),scale:function(){var e=new ut;return function(n,r,a){return e.makeScale(n,r,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Ue;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new De(t.vertices.length*3,3),r=new De(t.colors.length*3,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var a=new De(t.lineDistances.length,1);this.addAttribute("lineDistance",a.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.addAttribute("position",new De(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,r!==void 0&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,r!==void 0&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,r!==void 0&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,r!==void 0&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,r!==void 0&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new P1().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);if(this.addAttribute("position",new gt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(e.normals.length*3);this.addAttribute("normal",new gt(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new gt(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var a=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new gt(a,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new gt(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var u=Im(e.indices)>65535?Uint32Array:Uint16Array,c=new u(e.indices.length*3);this.setIndex(new gt(c,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var f in e.morphTargets){for(var d=[],p=e.morphTargets[f],v=0,m=p.length;v<m;v++){var y=p[v],_=new De(y.length*3,3);d.push(_.copyVector3sArray(y))}this.morphAttributes[f]=d}if(e.skinIndices.length>0){var M=new De(e.skinIndices.length*4,4);this.addAttribute("skinIndex",M.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var T=new De(e.skinWeights.length*4,4);this.addAttribute("skinWeight",T.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Vi);var e=this.attributes.position;e!==void 0?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Vi,t=new ee;return function(){this.boundingSphere===null&&(this.boundingSphere=new Xr);var r=this.attributes.position;if(r){var a=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(a);for(var o=0,u=0,c=r.count;u<c;u++)t.x=r.getX(u),t.y=r.getY(u),t.z=r.getZ(u),o=Math.max(o,a.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new gt(new Float32Array(r.length),3));else for(var a=t.normal.array,o=0,u=a.length;o<u;o++)a[o]=0;var c=t.normal.array,f,d,p,v=new ee,m=new ee,y=new ee,_=new ee,M=new ee;if(e){var T=e.array;n.length===0&&this.addGroup(0,T.length);for(var E=0,A=n.length;E<A;++E)for(var C=n[E],L=C.start,I=C.count,o=L,u=L+I;o<u;o+=3)f=T[o+0]*3,d=T[o+1]*3,p=T[o+2]*3,v.fromArray(r,f),m.fromArray(r,d),y.fromArray(r,p),_.subVectors(y,m),M.subVectors(v,m),_.cross(M),c[f]+=_.x,c[f+1]+=_.y,c[f+2]+=_.z,c[d]+=_.x,c[d+1]+=_.y,c[d+2]+=_.z,c[p]+=_.x,c[p+1]+=_.y,c[p+2]+=_.z}else for(var o=0,u=r.length;o<u;o+=9)v.fromArray(r,o),m.fromArray(r,o+3),y.fromArray(r,o+6),_.subVectors(y,m),M.subVectors(v,m),_.cross(M),c[o]=_.x,c[o+1]=_.y,c[o+2]=_.z,c[o+3]=_.x,c[o+4]=_.y,c[o+5]=_.z,c[o+6]=_.x,c[o+7]=_.y,c[o+8]=_.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0);var n=this.attributes;for(var r in n)if(e.attributes[r]!==void 0)for(var a=n[r],o=a.array,u=e.attributes[r],c=u.array,f=u.itemSize,d=0,p=f*t;d<c.length;d++,p++)o[p]=c[d];return this},normalizeNormals:function(){var e=new ee;return function(){for(var n=this.attributes.normal,r=0,a=n.count;r<a;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.normalize(),n.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ke,t=this.index.array,n=this.attributes;for(var r in n){for(var a=n[r],o=a.array,u=a.itemSize,c=new o.constructor(t.length*u),f=0,d=0,p=0,v=t.length;p<v;p++){f=t[p]*u;for(var m=0;m<u;m++)c[d++]=o[f++]}e.addAttribute(r,new gt(c,u))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(r!==null){var a=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:a}}var o=this.attributes;for(var n in o){var u=o[n],a=Array.prototype.slice.call(u.array);e.data.attributes[n]={itemSize:u.itemSize,type:u.array.constructor.name,array:a,normalized:u.normalized}}var c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));var f=this.boundingSphere;return f!==null&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return new ke().copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.index;a!==null&&this.setIndex(a.clone());var o=e.attributes;for(t in o){var u=o[t];this.addAttribute(t,u.clone())}var c=e.morphAttributes;for(t in c){var f=[],d=c[t];for(n=0,r=d.length;n<r;n++)f.push(d[n].clone());this.morphAttributes[t]=f}var p=e.groups;for(n=0,r=p.length;n<r;n++){var v=p[n];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;m!==null&&(this.boundingBox=m.clone());var y=e.boundingSphere;return y!==null&&(this.boundingSphere=y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ao(e,t,n,r,a,o){ot.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new cs(e,t,n,r,a,o)),this.mergeVertices()}Ao.prototype=Object.create(ot.prototype);Ao.prototype.constructor=Ao;function cs(e,t,n,r,a,o){ke.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:o};var u=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var c=[],f=[],d=[],p=[],v=0,m=0;y("z","y","x",-1,-1,n,t,e,o,a,0),y("z","y","x",1,-1,n,t,-e,o,a,1),y("x","z","y",1,1,e,n,t,r,o,2),y("x","z","y",1,-1,e,n,-t,r,o,3),y("x","y","z",1,-1,e,t,n,r,a,4),y("x","y","z",-1,-1,e,t,-n,r,a,5),this.setIndex(c),this.addAttribute("position",new De(f,3)),this.addAttribute("normal",new De(d,3)),this.addAttribute("uv",new De(p,2));function y(_,M,T,E,A,C,L,I,j,q,ne){var W=C/j,oe=L/q,ae=C/2,he=L/2,fe=I/2,se=j+1,z=q+1,N=0,$=0,x,S,w=new ee;for(S=0;S<z;S++){var R=S*oe-he;for(x=0;x<se;x++){var D=x*W-ae;w[_]=D*E,w[M]=R*A,w[T]=fe,f.push(w.x,w.y,w.z),w[_]=0,w[M]=0,w[T]=I>0?1:-1,d.push(w.x,w.y,w.z),p.push(x/j),p.push(1-S/q),N+=1}}for(S=0;S<q;S++)for(x=0;x<j;x++){var B=v+x+se*S,H=v+x+se*(S+1),Q=v+(x+1)+se*(S+1),P=v+(x+1)+se*S;c.push(B,H,P),c.push(H,Q,P),$+=6}u.addGroup(m,$,ne),m+=$,v+=N}}cs.prototype=Object.create(ke.prototype);cs.prototype.constructor=cs;function zu(e,t,n,r){ot.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new fs(e,t,n,r)),this.mergeVertices()}zu.prototype=Object.create(ot.prototype);zu.prototype.constructor=zu;function fs(e,t,n,r){ke.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var a=e/2,o=t/2,u=Math.floor(n)||1,c=Math.floor(r)||1,f=u+1,d=c+1,p=e/u,v=t/c,m,y,_=[],M=[],T=[],E=[];for(y=0;y<d;y++){var A=y*v-o;for(m=0;m<f;m++){var C=m*p-a;M.push(C,-A,0),T.push(0,0,1),E.push(m/u),E.push(1-y/c)}}for(y=0;y<c;y++)for(m=0;m<u;m++){var L=m+f*y,I=m+f*(y+1),j=m+1+f*(y+1),q=m+1+f*y;_.push(L,I,q),_.push(I,j,q)}this.setIndex(_),this.addAttribute("position",new De(M,3)),this.addAttribute("normal",new De(T,3)),this.addAttribute("uv",new De(E,2))}fs.prototype=Object.create(ke.prototype);fs.prototype.constructor=fs;function Er(e){xt.call(this),this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}Er.prototype=Object.create(xt.prototype);Er.prototype.constructor=Er;Er.prototype.isMeshBasicMaterial=!0;Er.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};function Ir(e){xt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}Ir.prototype=Object.create(xt.prototype);Ir.prototype.constructor=Ir;Ir.prototype.isShaderMaterial=!0;Ir.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ir.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this};Ir.prototype.toJSON=function(e){var t=xt.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t};function Ns(e,t){this.origin=e!==void 0?e:new ee,this.direction=t!==void 0?t:new ee}Object.assign(Ns.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new ee;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new ee;return function(n){return this.origin.copy(this.at(n,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new ee;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new ee;return function(n){var r=e.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(n))}}(),distanceSqToSegment:function(){var e=new ee,t=new ee,n=new ee;return function(a,o,u,c){e.copy(a).add(o).multiplyScalar(.5),t.copy(o).sub(a).normalize(),n.copy(this.origin).sub(e);var f=a.distanceTo(o)*.5,d=-this.direction.dot(t),p=n.dot(this.direction),v=-n.dot(t),m=n.lengthSq(),y=Math.abs(1-d*d),_,M,T,E;if(y>0)if(_=d*v-p,M=d*p-v,E=f*y,_>=0)if(M>=-E)if(M<=E){var A=1/y;_*=A,M*=A,T=_*(_+d*M+2*p)+M*(d*_+M+2*v)+m}else M=f,_=Math.max(0,-(d*M+p)),T=-_*_+M*(M+2*v)+m;else M=-f,_=Math.max(0,-(d*M+p)),T=-_*_+M*(M+2*v)+m;else M<=-E?(_=Math.max(0,-(-d*f+p)),M=_>0?-f:Math.min(Math.max(-f,-v),f),T=-_*_+M*(M+2*v)+m):M<=E?(_=0,M=Math.min(Math.max(-f,-v),f),T=M*(M+2*v)+m):(_=Math.max(0,-(d*f+p)),M=_>0?f:Math.min(Math.max(-f,-v),f),T=-_*_+M*(M+2*v)+m);else M=d>0?-f:f,_=Math.max(0,-(d*M+p)),T=-_*_+M*(M+2*v)+m;return u&&u.copy(this.direction).multiplyScalar(_).add(this.origin),c&&c.copy(t).multiplyScalar(M).add(e),T}}(),intersectSphere:function(){var e=new ee;return function(n,r){e.subVectors(n.center,this.origin);var a=e.dot(this.direction),o=e.dot(e)-a*a,u=n.radius*n.radius;if(o>u)return null;var c=Math.sqrt(u-o),f=a-c,d=a+c;return f<0&&d<0?null:f<0?this.at(d,r):this.at(f,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,a,o,u,c,f=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,v=this.origin;return f>=0?(n=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(n=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),d>=0?(a=(e.min.y-v.y)*d,o=(e.max.y-v.y)*d):(a=(e.max.y-v.y)*d,o=(e.min.y-v.y)*d),n>o||a>r||((a>n||n!==n)&&(n=a),(o<r||r!==r)&&(r=o),p>=0?(u=(e.min.z-v.z)*p,c=(e.max.z-v.z)*p):(u=(e.max.z-v.z)*p,c=(e.min.z-v.z)*p),n>c||u>r)||((u>n||n!==n)&&(n=u),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(){var e=new ee;return function(n){return this.intersectBox(n,e)!==null}}(),intersectTriangle:function(){var e=new ee,t=new ee,n=new ee,r=new ee;return function(o,u,c,f,d){t.subVectors(u,o),n.subVectors(c,o),r.crossVectors(t,n);var p=this.direction.dot(r),v;if(p>0){if(f)return null;v=1}else if(p<0)v=-1,p=-p;else return null;e.subVectors(this.origin,o);var m=v*this.direction.dot(n.crossVectors(e,n));if(m<0)return null;var y=v*this.direction.dot(t.cross(e));if(y<0||m+y>p)return null;var _=-v*e.dot(r);return _<0?null:this.at(_/p,d)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function xo(e,t){this.start=e!==void 0?e:new ee,this.end=t!==void 0?t:new ee}Object.assign(xo.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new ee;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new ee;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new ee;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new ee,t=new ee;return function(r,a){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var o=t.dot(t),u=t.dot(e),c=u/o;return a&&(c=pt.clamp(c,0,1)),c}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),a=n||new ee;return this.delta(a).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function Pi(e,t,n){this.a=e!==void 0?e:new ee,this.b=t!==void 0?t:new ee,this.c=n!==void 0?n:new ee}Object.assign(Pi,{normal:function(){var e=new ee;return function(n,r,a,o){var u=o||new ee;u.subVectors(a,r),e.subVectors(n,r),u.cross(e);var c=u.lengthSq();return c>0?u.multiplyScalar(1/Math.sqrt(c)):u.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new ee,t=new ee,n=new ee;return function(a,o,u,c,f){e.subVectors(c,o),t.subVectors(u,o),n.subVectors(a,o);var d=e.dot(e),p=e.dot(t),v=e.dot(n),m=t.dot(t),y=t.dot(n),_=d*m-p*p,M=f||new ee;if(_===0)return M.set(-2,-1,-1);var T=1/_,E=(m*v-p*y)*T,A=(d*y-p*v)*T;return M.set(1-E-A,A,E)}}(),containsPoint:function(){var e=new ee;return function(n,r,a,o){var u=Pi.barycoordFromPoint(n,r,a,o,e);return u.x>=0&&u.y>=0&&u.x+u.y<=1}}()});Object.assign(Pi.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new ee,t=new ee;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new ee;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Pi.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new zr;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Pi.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Pi.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new zr,t=[new xo,new xo,new xo],n=new ee,r=new ee;return function(o,u){var c=u||new ee,f=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(o,n),this.containsPoint(n)===!0)c.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var d=0;d<t.length;d++){t[d].closestPointToPoint(n,!0,r);var p=n.distanceToSquared(r);p<f&&(f=p,c.copy(r))}}return c}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function Qn(e,t){Ue.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new ke,this.material=t!==void 0?t:new Er({color:Math.random()*16777215}),this.drawMode=zg,this.updateMorphTargets()}Qn.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Qn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Ue.prototype.copy.call(this,e),this.drawMode=e.drawMode,e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var a=e.morphAttributes,o=Object.keys(a);if(o.length>0){var u=a[o[0]];if(u!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=u.length;t<n;t++)r=u[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var c=e.morphTargets;if(c!==void 0&&c.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=c.length;t<n;t++)r=c[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}},raycast:function(){var e=new ut,t=new Ns,n=new Xr,r=new ee,a=new ee,o=new ee,u=new ee,c=new ee,f=new ee,d=new Ce,p=new Ce,v=new Ce,m=new ee,y=new ee,_=new ee;function M(A,C,L,I,j,q,ne){return Pi.barycoordFromPoint(A,C,L,I,m),j.multiplyScalar(m.x),q.multiplyScalar(m.y),ne.multiplyScalar(m.z),j.add(q).add(ne),j.clone()}function T(A,C,L,I,j,q,ne,W){var oe;if(C.side===Ea?oe=I.intersectTriangle(ne,q,j,!0,W):oe=I.intersectTriangle(j,q,ne,C.side!==ul,W),oe===null)return null;_.copy(W),_.applyMatrix4(A.matrixWorld);var ae=L.ray.origin.distanceTo(_);return ae<L.near||ae>L.far?null:{distance:ae,point:_.clone(),object:A}}function E(A,C,L,I,j,q,ne,W){r.fromBufferAttribute(I,q),a.fromBufferAttribute(I,ne),o.fromBufferAttribute(I,W);var oe=T(A,A.material,C,L,r,a,o,y);return oe&&(j&&(d.fromBufferAttribute(j,q),p.fromBufferAttribute(j,ne),v.fromBufferAttribute(j,W),oe.uv=M(y,r,a,o,d,p,v)),oe.face=new Gi(q,ne,W,Pi.normal(r,a,o)),oe.faceIndex=q),oe}return function(C,L){var I=this.geometry,j=this.material,q=this.matrixWorld;if(j!==void 0&&(I.boundingSphere===null&&I.computeBoundingSphere(),n.copy(I.boundingSphere),n.applyMatrix4(q),C.ray.intersectsSphere(n)!==!1&&(e.getInverse(q),t.copy(C.ray).applyMatrix4(e),!(I.boundingBox!==null&&t.intersectsBox(I.boundingBox)===!1)))){var ne;if(I.isBufferGeometry){var W,oe,ae,he=I.index,fe=I.attributes.position,se=I.attributes.uv,z,N;if(he!==null)for(z=0,N=he.count;z<N;z+=3)W=he.getX(z),oe=he.getX(z+1),ae=he.getX(z+2),ne=E(this,C,t,fe,se,W,oe,ae),ne&&(ne.faceIndex=Math.floor(z/3),L.push(ne));else if(fe!==void 0)for(z=0,N=fe.count;z<N;z+=3)W=z,oe=z+1,ae=z+2,ne=E(this,C,t,fe,se,W,oe,ae),ne&&(ne.index=W,L.push(ne))}else if(I.isGeometry){var $,x,S,w=Array.isArray(j),R=I.vertices,D=I.faces,B,H=I.faceVertexUvs[0];H.length>0&&(B=H);for(var Q=0,P=D.length;Q<P;Q++){var X=D[Q],le=w?j[X.materialIndex]:j;if(le!==void 0){if($=R[X.a],x=R[X.b],S=R[X.c],le.morphTargets===!0){var Te=I.morphTargets,xe=this.morphTargetInfluences;r.set(0,0,0),a.set(0,0,0),o.set(0,0,0);for(var Ae=0,Oe=Te.length;Ae<Oe;Ae++){var Ie=xe[Ae];if(Ie!==0){var ht=Te[Ae].vertices;r.addScaledVector(u.subVectors(ht[X.a],$),Ie),a.addScaledVector(c.subVectors(ht[X.b],x),Ie),o.addScaledVector(f.subVectors(ht[X.c],S),Ie)}}r.add($),a.add(x),o.add(S),$=r,x=a,S=o}if(ne=T(this,le,C,t,$,x,S,y),ne){if(B&&B[Q]){var Qe=B[Q];d.copy(Qe[0]),p.copy(Qe[1]),v.copy(Qe[2]),ne.uv=M(y,$,x,S,d,p,v)}ne.face=X,ne.faceIndex=Q,L.push(ne)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function VO(e,t,n,r){var a=new qe(0),o=0,u,c,f;function d(v,m,y,_){var M=m.background;M===null?p(a,o):M&&M.isColor&&(p(M,1),_=!0),(e.autoClear||_)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),M&&M.isCubeTexture?(f===void 0&&(f=new Qn(new cs(1,1,1),new Ir({uniforms:ts.cube.uniforms,vertexShader:ts.cube.vertexShader,fragmentShader:ts.cube.fragmentShader,side:Ea,depthTest:!0,depthWrite:!1,fog:!1})),f.geometry.removeAttribute("normal"),f.geometry.removeAttribute("uv"),f.onBeforeRender=function(T,E,A){this.matrixWorld.copyPosition(A.matrixWorld)},n.update(f.geometry)),f.material.uniforms.tCube.value=M,v.push(f,f.geometry,f.material,0,null)):M&&M.isTexture&&(u===void 0&&(u=new So(-1,1,1,-1,0,1),c=new Qn(new fs(2,2),new Er({depthTest:!1,depthWrite:!1,fog:!1})),n.update(c.geometry)),c.material.map=M,e.renderBufferDirect(u,null,c.geometry,c.material,c,null))}function p(v,m){t.buffers.color.setClear(v.r,v.g,v.b,m,r)}return{getClearColor:function(){return a},setClearColor:function(v,m){a.set(v),o=m!==void 0?m:1,p(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(v){o=v,p(a,o)},render:d}}function jO(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function WO(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function qO(){var e=[],t=0,n=[],r=[];function a(){t=0,n.length=0,r.length=0}function o(c,f,d,p,v){var m=e[t];m===void 0?(m={id:c.id,object:c,geometry:f,material:d,program:d.program,renderOrder:c.renderOrder,z:p,group:v},e[t]=m):(m.id=c.id,m.object=c,m.geometry=f,m.material=d,m.program=d.program,m.renderOrder=c.renderOrder,m.z=p,m.group=v),(d.transparent===!0?r:n).push(m),t++}function u(){n.length>1&&n.sort(jO),r.length>1&&r.sort(WO)}return{opaque:n,transparent:r,init:a,push:o,sort:u}}function XO(){var e={};function t(r,a){var o=r.id+","+a.id,u=e[o];return u===void 0&&(u=new qO,e[o]=u),u}function n(){e={}}return{get:t,dispose:n}}function YO(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ZO(e){var t={},n=new Float32Array(8);function r(a,o,u,c){var f=a.morphTargetInfluences,d=f.length,p=t[o.id];if(p===void 0){p=[];for(var v=0;v<d;v++)p[v]=[v,0];t[o.id]=p}for(var m=u.morphTargets&&o.morphAttributes.position,y=u.morphNormals&&o.morphAttributes.normal,v=0;v<d;v++){var _=p[v];_[1]!==0&&(m&&o.removeAttribute("morphTarget"+v),y&&o.removeAttribute("morphNormal"+v))}for(var v=0;v<d;v++){var _=p[v];_[0]=v,_[1]=f[v]}p.sort(YO);for(var v=0;v<8;v++){var _=p[v];if(_){var M=_[0],T=_[1];if(T){m&&o.addAttribute("morphTarget"+v,m[M]),y&&o.addAttribute("morphNormal"+v,y[M]),n[v]=T;continue}}n[v]=0}c.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function QO(e,t,n){var r;function a(p){r=p}var o,u;function c(p){o=p.type,u=p.bytesPerElement}function f(p,v){e.drawElements(r,v,o,p*u),n.calls++,n.vertices+=v,r===e.TRIANGLES?n.faces+=v/3:r===e.POINTS&&(n.points+=v)}function d(p,v,m){var y=t.get("ANGLE_instanced_arrays");if(y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y.drawElementsInstancedANGLE(r,m,o,v*u,p.maxInstancedCount),n.calls++,n.vertices+=m*p.maxInstancedCount,r===e.TRIANGLES?n.faces+=p.maxInstancedCount*m/3:r===e.POINTS&&(n.points+=p.maxInstancedCount*m)}this.setMode=a,this.setIndex=c,this.render=f,this.renderInstances=d}function KO(e,t,n){var r;function a(c){r=c}function o(c,f){e.drawArrays(r,c,f),n.calls++,n.vertices+=f,r===e.TRIANGLES?n.faces+=f/3:r===e.POINTS&&(n.points+=f)}function u(c,f,d){var p=t.get("ANGLE_instanced_arrays");if(p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var v=c.attributes.position;v.isInterleavedBufferAttribute?(d=v.data.count,p.drawArraysInstancedANGLE(r,0,d,c.maxInstancedCount)):p.drawArraysInstancedANGLE(r,f,d,c.maxInstancedCount),n.calls++,n.vertices+=d*c.maxInstancedCount,r===e.TRIANGLES?n.faces+=c.maxInstancedCount*d/3:r===e.POINTS&&(n.points+=c.maxInstancedCount*d)}this.setMode=a,this.render=o,this.renderInstances=u}function JO(e,t,n){var r={},a={};function o(d){var p=d.target,v=r[p.id];v.index!==null&&t.remove(v.index);for(var m in v.attributes)t.remove(v.attributes[m]);p.removeEventListener("dispose",o),delete r[p.id];var y=a[p.id];y&&(t.remove(y),delete a[p.id]),y=a[v.id],y&&(t.remove(y),delete a[v.id]),n.geometries--}function u(d,p){var v=r[p.id];return v||(p.addEventListener("dispose",o),p.isBufferGeometry?v=p:p.isGeometry&&(p._bufferGeometry===void 0&&(p._bufferGeometry=new ke().setFromObject(d)),v=p._bufferGeometry),r[p.id]=v,n.geometries++,v)}function c(d){var p=d.index,v=d.attributes;p!==null&&t.update(p,e.ELEMENT_ARRAY_BUFFER);for(var m in v)t.update(v[m],e.ARRAY_BUFFER);var y=d.morphAttributes;for(var m in y)for(var _=y[m],M=0,T=_.length;M<T;M++)t.update(_[M],e.ARRAY_BUFFER)}function f(d){var p=a[d.id];if(p)return p;var v=[],m=d.index,y=d.attributes;if(m!==null)for(var _=m.array,M=0,T=_.length;M<T;M+=3){var E=_[M+0],A=_[M+1],C=_[M+2];v.push(E,A,A,C,C,E)}else for(var _=y.position.array,M=0,T=_.length/3-1;M<T;M+=3){var E=M+0,A=M+1,C=M+2;v.push(E,A,A,C,C,E)}return p=new(Im(v)>65535?us:ls)(v,1),t.update(p,e.ELEMENT_ARRAY_BUFFER),a[d.id]=p,p}return{get:u,update:c,getWireframeAttribute:f}}function $O(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new ee,color:new qe,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":n={position:new ee,direction:new ee,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":n={position:new ee,color:new qe,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new ee,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":n={color:new qe,position:new ee,halfWidth:new ee,halfHeight:new ee};break}return e[t.id]=n,n}}}function e3(){var e=new $O,t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new ee,r=new ut,a=new ut;function o(u,c,f){for(var d=0,p=0,v=0,m=0,y=0,_=0,M=0,T=0,E=f.matrixWorldInverse,A=0,C=u.length;A<C;A++){var L=u[A],I=L.color,j=L.intensity,q=L.distance,ne=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=I.r*j,p+=I.g*j,v+=I.b*j;else if(L.isDirectionalLight){var W=e.get(L);if(W.color.copy(L.color).multiplyScalar(L.intensity),W.direction.setFromMatrixPosition(L.matrixWorld),n.setFromMatrixPosition(L.target.matrixWorld),W.direction.sub(n),W.direction.transformDirection(E),W.shadow=L.castShadow,L.castShadow){var oe=L.shadow;W.shadowBias=oe.bias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize}t.directionalShadowMap[m]=ne,t.directionalShadowMatrix[m]=L.shadow.matrix,t.directional[m]=W,m++}else if(L.isSpotLight){var W=e.get(L);if(W.position.setFromMatrixPosition(L.matrixWorld),W.position.applyMatrix4(E),W.color.copy(I).multiplyScalar(j),W.distance=q,W.direction.setFromMatrixPosition(L.matrixWorld),n.setFromMatrixPosition(L.target.matrixWorld),W.direction.sub(n),W.direction.transformDirection(E),W.coneCos=Math.cos(L.angle),W.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),W.decay=L.distance===0?0:L.decay,W.shadow=L.castShadow,L.castShadow){var oe=L.shadow;W.shadowBias=oe.bias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize}t.spotShadowMap[_]=ne,t.spotShadowMatrix[_]=L.shadow.matrix,t.spot[_]=W,_++}else if(L.isRectAreaLight){var W=e.get(L);W.color.copy(I).multiplyScalar(j/(L.width*L.height)),W.position.setFromMatrixPosition(L.matrixWorld),W.position.applyMatrix4(E),a.identity(),r.copy(L.matrixWorld),r.premultiply(E),a.extractRotation(r),W.halfWidth.set(L.width*.5,0,0),W.halfHeight.set(0,L.height*.5,0),W.halfWidth.applyMatrix4(a),W.halfHeight.applyMatrix4(a),t.rectArea[M]=W,M++}else if(L.isPointLight){var W=e.get(L);if(W.position.setFromMatrixPosition(L.matrixWorld),W.position.applyMatrix4(E),W.color.copy(L.color).multiplyScalar(L.intensity),W.distance=L.distance,W.decay=L.distance===0?0:L.decay,W.shadow=L.castShadow,L.castShadow){var oe=L.shadow;W.shadowBias=oe.bias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize,W.shadowCameraNear=oe.camera.near,W.shadowCameraFar=oe.camera.far}t.pointShadowMap[y]=ne,t.pointShadowMatrix[y]=L.shadow.matrix,t.point[y]=W,y++}else if(L.isHemisphereLight){var W=e.get(L);W.direction.setFromMatrixPosition(L.matrixWorld),W.direction.transformDirection(E),W.direction.normalize(),W.skyColor.copy(L.color).multiplyScalar(j),W.groundColor.copy(L.groundColor).multiplyScalar(j),t.hemi[T]=W,T++}}t.ambient[0]=d,t.ambient[1]=p,t.ambient[2]=v,t.directional.length=m,t.spot.length=_,t.rectArea.length=M,t.point.length=y,t.hemi.length=T,t.hash=m+","+y+","+_+","+M+","+T+","+c.length}return{setup:o,state:t}}function t3(e,t){var n={};function r(o){var u=t.frame,c=o.geometry,f=e.get(o,c);return n[f.id]!==u&&(c.isGeometry&&f.updateFromObject(o),e.update(f),n[f.id]=u),f}function a(){n={}}return{update:r,clear:a}}function n3(e){for(var t=e.split(`
`),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function nw(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),e.getShaderInfoLog(r)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),n3(n)),r}var r3=0;function z1(e){switch(e){case Cu:return["Linear","( value )"];case x1:return["sRGB","( value )"];case _1:return["RGBE","( value )"];case w1:return["RGBM","( value, 7.0 )"];case E1:return["RGBM","( value, 16.0 )"];case M1:return["RGBD","( value, 256.0 )"];case Fg:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function rm(e,t){var n=z1(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function i3(e,t){var n=z1(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function a3(e,t){var n;switch(t){case Ng:n="Linear";break;case n1:n="Reinhard";break;case r1:n="Uncharted2";break;case i1:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function s3(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(gu).join(`
`)}function o3(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function l3(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var o=e.getActiveAttrib(t,a),u=o.name;n[u]=e.getAttribLocation(t,u)}return n}function gu(e){return e!==""}function rw(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Gm(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function n(r,a){var o=It[a];if(o===void 0)throw new Error("Can not resolve #include <"+a+">");return Gm(o)}return e.replace(t,n)}function iw(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(r,a,o,u){for(var c="",f=parseInt(a);f<parseInt(o);f++)c+=u.replace(/\[ i \]/g,"[ "+f+" ]");return c}return e.replace(t,n)}function u3(e,t,n,r,a,o){var u=e.context,c=r.defines,f=a.vertexShader,d=a.fragmentShader,p="SHADOWMAP_TYPE_BASIC";o.shadowMapType===wg?p="SHADOWMAP_TYPE_PCF":o.shadowMapType===BE&&(p="SHADOWMAP_TYPE_PCF_SOFT");var v="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",y="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case Ih:case rh:v="ENVMAP_TYPE_CUBE";break;case Gh:case kh:v="ENVMAP_TYPE_CUBE_UV";break;case Dg:case ih:v="ENVMAP_TYPE_EQUIREC";break;case Ug:v="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case rh:case ih:m="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case Rc:y="ENVMAP_BLENDING_MULTIPLY";break;case e1:y="ENVMAP_BLENDING_MIX";break;case t1:y="ENVMAP_BLENDING_ADD";break}}var _=e.gammaFactor>0?e.gammaFactor:1,M=s3(r.extensions,o,t),T=o3(c),E=u.createProgram(),A,C;r.isRawShaderMaterial?(A=[T].filter(gu).join(`
`),A.length>0&&(A+=`
`),C=[M,T].filter(gu).join(`
`),C.length>0&&(C+=`
`)):(A=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+a.name,T,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gu).join(`
`),C=[M,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+a.name,T,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+_,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+v:"",o.envMap?"#define "+m:"",o.envMap?"#define "+y:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+p:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Zf?"#define TONE_MAPPING":"",o.toneMapping!==Zf?It.tonemapping_pars_fragment:"",o.toneMapping!==Zf?a3("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?It.encodings_pars_fragment:"",o.mapEncoding?rm("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?rm("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?rm("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?i3("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(gu).join(`
`)),f=Gm(f),f=rw(f,o),d=Gm(d),d=rw(d,o),r.isShaderMaterial||(f=iw(f),d=iw(d));var L=A+f,I=C+d,j=nw(u,u.VERTEX_SHADER,L),q=nw(u,u.FRAGMENT_SHADER,I);u.attachShader(E,j),u.attachShader(E,q),r.index0AttributeName!==void 0?u.bindAttribLocation(E,0,r.index0AttributeName):o.morphTargets===!0&&u.bindAttribLocation(E,0,"position"),u.linkProgram(E);var ne=u.getProgramInfoLog(E),W=u.getShaderInfoLog(j),oe=u.getShaderInfoLog(q),ae=!0,he=!0;u.getProgramParameter(E,u.LINK_STATUS)===!1?(ae=!1,console.error("THREE.WebGLProgram: shader error: ",u.getError(),"gl.VALIDATE_STATUS",u.getProgramParameter(E,u.VALIDATE_STATUS),"gl.getProgramInfoLog",ne,W,oe)):ne!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",ne):(W===""||oe==="")&&(he=!1),he&&(this.diagnostics={runnable:ae,material:r,programLog:ne,vertexShader:{log:W,prefix:A},fragmentShader:{log:oe,prefix:C}}),u.deleteShader(j),u.deleteShader(q);var fe;this.getUniforms=function(){return fe===void 0&&(fe=new os(u,E,e)),fe};var se;return this.getAttributes=function(){return se===void 0&&(se=l3(u,E)),se},this.destroy=function(){u.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=r3++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=j,this.fragmentShader=q,this}function c3(e,t,n){var r=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function u(f){var d=f.skeleton,p=d.bones;if(n.floatVertexTextures)return 1024;var v=n.maxVertexUniforms,m=Math.floor((v-20)/4),y=Math.min(m,p.length);return y<p.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+p.length+" bones. This GPU supports "+y+"."),0):y}function c(f,d){var p;return f?f.isTexture?p=f.encoding:f.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),p=f.texture.encoding):p=Cu,p===Cu&&d&&(p=Fg),p}this.getParameters=function(f,d,p,v,m,y,_){var M=a[f.type],T=_.isSkinnedMesh?u(_):0,E=n.precision;f.precision!==null&&(E=n.getMaxPrecision(f.precision),E!==f.precision&&console.warn("THREE.WebGLProgram.getParameters:",f.precision,"not supported, using",E,"instead."));var A=e.getRenderTarget(),C={shaderID:M,precision:E,supportsVertexTextures:n.vertexTextures,outputEncoding:c(A?A.texture:null,e.gammaOutput),map:!!f.map,mapEncoding:c(f.map,e.gammaInput),envMap:!!f.envMap,envMapMode:f.envMap&&f.envMap.mapping,envMapEncoding:c(f.envMap,e.gammaInput),envMapCubeUV:!!f.envMap&&(f.envMap.mapping===Gh||f.envMap.mapping===kh),lightMap:!!f.lightMap,aoMap:!!f.aoMap,emissiveMap:!!f.emissiveMap,emissiveMapEncoding:c(f.emissiveMap,e.gammaInput),bumpMap:!!f.bumpMap,normalMap:!!f.normalMap,displacementMap:!!f.displacementMap,roughnessMap:!!f.roughnessMap,metalnessMap:!!f.metalnessMap,specularMap:!!f.specularMap,alphaMap:!!f.alphaMap,gradientMap:!!f.gradientMap,combine:f.combine,vertexColors:f.vertexColors,fog:!!v,useFog:f.fog,fogExp:v&&v.isFogExp2,flatShading:f.flatShading,sizeAttenuation:f.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:f.skinning&&T>0,maxBones:T,useVertexTexture:n.floatVertexTextures,morphTargets:f.morphTargets,morphNormals:f.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:d.directional.length,numPointLights:d.point.length,numSpotLights:d.spot.length,numRectAreaLights:d.rectArea.length,numHemiLights:d.hemi.length,numClippingPlanes:m,numClipIntersection:y,dithering:f.dithering,shadowMapEnabled:e.shadowMap.enabled&&_.receiveShadow&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:f.premultipliedAlpha,alphaTest:f.alphaTest,doubleSided:f.side===ul,flipSided:f.side===Ea,depthPacking:f.depthPacking!==void 0?f.depthPacking:!1};return C},this.getProgramCode=function(f,d){var p=[];if(d.shaderID?p.push(d.shaderID):(p.push(f.fragmentShader),p.push(f.vertexShader)),f.defines!==void 0)for(var v in f.defines)p.push(v),p.push(f.defines[v]);for(var m=0;m<o.length;m++)p.push(d[o[m]]);return p.push(f.onBeforeCompile.toString()),p.push(e.gammaOutput),p.join()},this.acquireProgram=function(f,d,p,v){for(var m,y=0,_=r.length;y<_;y++){var M=r[y];if(M.code===v){m=M,++m.usedTimes;break}}return m===void 0&&(m=new u3(e,t,v,f,d,p),r.push(m)),m},this.releaseProgram=function(f){if(--f.usedTimes===0){var d=r.indexOf(f);r[d]=r[r.length-1],r.pop(),f.destroy()}},this.programs=r}function f3(e,t,n,r,a,o,u){var c=typeof WebGL2RenderingContext<"u"&&e instanceof window.WebGL2RenderingContext,f={};function d(z,N){if(z.width>N||z.height>N){var $=N/Math.max(z.width,z.height),x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");x.width=Math.floor(z.width*$),x.height=Math.floor(z.height*$);var S=x.getContext("2d");return S.drawImage(z,0,0,z.width,z.height,0,0,x.width,x.height),console.warn("THREE.WebGLRenderer: image is too big ("+z.width+"x"+z.height+"). Resized to "+x.width+"x"+x.height,z),x}return z}function p(z){return pt.isPowerOfTwo(z.width)&&pt.isPowerOfTwo(z.height)}function v(z){if(z instanceof HTMLImageElement||z instanceof HTMLCanvasElement||z instanceof ImageBitmap){var N=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");N.width=pt.floorPowerOfTwo(z.width),N.height=pt.floorPowerOfTwo(z.height);var $=N.getContext("2d");return $.drawImage(z,0,0,N.width,N.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+z.width+"x"+z.height+"). Resized to "+N.width+"x"+N.height,z),N}return z}function m(z){return z.wrapS!==xr||z.wrapT!==xr||z.minFilter!==_r&&z.minFilter!==ar}function y(z,N){return z.generateMipmaps&&N&&z.minFilter!==_r&&z.minFilter!==ar}function _(z){return z===_r||z===Hh||z===Vh?e.NEAREST:e.LINEAR}function M(z){var N=z.target;N.removeEventListener("dispose",M),E(N),N.isVideoTexture&&delete f[N.id],u.textures--}function T(z){var N=z.target;N.removeEventListener("dispose",T),A(N),u.textures--}function E(z){var N=r.get(z);if(z.image&&N.__image__webglTextureCube)e.deleteTexture(N.__image__webglTextureCube);else{if(N.__webglInit===void 0)return;e.deleteTexture(N.__webglTexture)}r.remove(z)}function A(z){var N=r.get(z),$=r.get(z.texture);if(z){if($.__webglTexture!==void 0&&e.deleteTexture($.__webglTexture),z.depthTexture&&z.depthTexture.dispose(),z.isWebGLRenderTargetCube)for(var x=0;x<6;x++)e.deleteFramebuffer(N.__webglFramebuffer[x]),N.__webglDepthbuffer&&e.deleteRenderbuffer(N.__webglDepthbuffer[x]);else e.deleteFramebuffer(N.__webglFramebuffer),N.__webglDepthbuffer&&e.deleteRenderbuffer(N.__webglDepthbuffer);r.remove(z.texture),r.remove(z)}}function C(z,N){var $=r.get(z);if(z.version>0&&$.__version!==z.version){var x=z.image;if(x===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",z);else if(x.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",z);else{q($,z,N);return}}n.activeTexture(e.TEXTURE0+N),n.bindTexture(e.TEXTURE_2D,$.__webglTexture)}function L(z,N){var $=r.get(z);if(z.image.length===6)if(z.version>0&&$.__version!==z.version){$.__image__webglTextureCube||(z.addEventListener("dispose",M),$.__image__webglTextureCube=e.createTexture(),u.textures++),n.activeTexture(e.TEXTURE0+N),n.bindTexture(e.TEXTURE_CUBE_MAP,$.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,z.flipY);for(var x=z&&z.isCompressedTexture,S=z.image[0]&&z.image[0].isDataTexture,w=[],R=0;R<6;R++)!x&&!S?w[R]=d(z.image[R],a.maxCubemapSize):w[R]=S?z.image[R].image:z.image[R];var D=w[0],B=p(D),H=o.convert(z.format),Q=o.convert(z.type);j(e.TEXTURE_CUBE_MAP,z,B);for(var R=0;R<6;R++)if(!x)S?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,0,H,w[R].width,w[R].height,0,H,Q,w[R].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,0,H,H,Q,w[R]);else for(var P,X=w[R].mipmaps,le=0,Te=X.length;le<Te;le++)P=X[le],z.format!==ui&&z.format!==Eo?n.getCompressedTextureFormats().indexOf(H)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,le,H,P.width,P.height,0,P.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+R,le,H,P.width,P.height,0,H,Q,P.data);y(z,B)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),$.__version=z.version,z.onUpdate&&z.onUpdate(z)}else n.activeTexture(e.TEXTURE0+N),n.bindTexture(e.TEXTURE_CUBE_MAP,$.__image__webglTextureCube)}function I(z,N){n.activeTexture(e.TEXTURE0+N),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(z).__webglTexture)}function j(z,N,$){var x;if($?(e.texParameteri(z,e.TEXTURE_WRAP_S,o.convert(N.wrapS)),e.texParameteri(z,e.TEXTURE_WRAP_T,o.convert(N.wrapT)),e.texParameteri(z,e.TEXTURE_MAG_FILTER,o.convert(N.magFilter)),e.texParameteri(z,e.TEXTURE_MIN_FILTER,o.convert(N.minFilter))):(e.texParameteri(z,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(z,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(N.wrapS!==xr||N.wrapT!==xr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",N),e.texParameteri(z,e.TEXTURE_MAG_FILTER,_(N.magFilter)),e.texParameteri(z,e.TEXTURE_MIN_FILTER,_(N.minFilter)),N.minFilter!==_r&&N.minFilter!==ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",N)),x=t.get("EXT_texture_filter_anisotropic"),x){if(N.type===wo&&t.get("OES_texture_float_linear")===null||N.type===Wh&&t.get("OES_texture_half_float_linear")===null)return;(N.anisotropy>1||r.get(N).__currentAnisotropy)&&(e.texParameterf(z,x.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,a.getMaxAnisotropy())),r.get(N).__currentAnisotropy=N.anisotropy)}}function q(z,N,$){z.__webglInit===void 0&&(z.__webglInit=!0,N.addEventListener("dispose",M),z.__webglTexture=e.createTexture(),N.isVideoTexture&&(f[N.id]=N),u.textures++),n.activeTexture(e.TEXTURE0+$),n.bindTexture(e.TEXTURE_2D,z.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,N.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,N.unpackAlignment);var x=d(N.image,a.maxTextureSize);m(N)&&p(x)===!1&&(x=v(x));var S=p(x),w=o.convert(N.format),R=o.convert(N.type);j(e.TEXTURE_2D,N,S);var D,B=N.mipmaps;if(N.isDepthTexture){var H=e.DEPTH_COMPONENT;if(N.type===wo){if(!c)throw new Error("Float Depth Texture only supported in WebGL2.0");H=e.DEPTH_COMPONENT32F}else c&&(H=e.DEPTH_COMPONENT16);N.format===es&&H===e.DEPTH_COMPONENT&&N.type!==Tu&&N.type!==Pg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),N.type=Tu,R=o.convert(N.type)),N.format===Mo&&(H=e.DEPTH_STENCIL,N.type!==Su&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),N.type=Su,R=o.convert(N.type))),n.texImage2D(e.TEXTURE_2D,0,H,x.width,x.height,0,w,R,null)}else if(N.isDataTexture)if(B.length>0&&S){for(var Q=0,P=B.length;Q<P;Q++)D=B[Q],n.texImage2D(e.TEXTURE_2D,Q,w,D.width,D.height,0,w,R,D.data);N.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,w,x.width,x.height,0,w,R,x.data);else if(N.isCompressedTexture)for(var Q=0,P=B.length;Q<P;Q++)D=B[Q],N.format!==ui&&N.format!==Eo?n.getCompressedTextureFormats().indexOf(w)>-1?n.compressedTexImage2D(e.TEXTURE_2D,Q,w,D.width,D.height,0,D.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,Q,w,D.width,D.height,0,w,R,D.data);else if(B.length>0&&S){for(var Q=0,P=B.length;Q<P;Q++)D=B[Q],n.texImage2D(e.TEXTURE_2D,Q,w,w,R,D);N.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,w,w,R,x);y(N,S)&&e.generateMipmap(e.TEXTURE_2D),z.__version=N.version,N.onUpdate&&N.onUpdate(N)}function ne(z,N,$,x){var S=o.convert(N.texture.format),w=o.convert(N.texture.type);n.texImage2D(x,0,S,N.width,N.height,0,S,w,null),e.bindFramebuffer(e.FRAMEBUFFER,z),e.framebufferTexture2D(e.FRAMEBUFFER,$,x,r.get(N.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function W(z,N){e.bindRenderbuffer(e.RENDERBUFFER,z),N.depthBuffer&&!N.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,N.width,N.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,z)):N.depthBuffer&&N.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,N.width,N.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,z)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,N.width,N.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function oe(z,N){var $=N&&N.isWebGLRenderTargetCube;if($)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,z),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),C(N.depthTexture,0);var x=r.get(N.depthTexture).__webglTexture;if(N.depthTexture.format===es)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,x,0);else if(N.depthTexture.format===Mo)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,x,0);else throw new Error("Unknown depthTexture format")}function ae(z){var N=r.get(z),$=z.isWebGLRenderTargetCube===!0;if(z.depthTexture){if($)throw new Error("target.depthTexture not supported in Cube render targets");oe(N.__webglFramebuffer,z)}else if($){N.__webglDepthbuffer=[];for(var x=0;x<6;x++)e.bindFramebuffer(e.FRAMEBUFFER,N.__webglFramebuffer[x]),N.__webglDepthbuffer[x]=e.createRenderbuffer(),W(N.__webglDepthbuffer[x],z)}else e.bindFramebuffer(e.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=e.createRenderbuffer(),W(N.__webglDepthbuffer,z);e.bindFramebuffer(e.FRAMEBUFFER,null)}function he(z){var N=r.get(z),$=r.get(z.texture);z.addEventListener("dispose",T),$.__webglTexture=e.createTexture(),u.textures++;var x=z.isWebGLRenderTargetCube===!0,S=p(z);if(x){N.__webglFramebuffer=[];for(var w=0;w<6;w++)N.__webglFramebuffer[w]=e.createFramebuffer()}else N.__webglFramebuffer=e.createFramebuffer();if(x){n.bindTexture(e.TEXTURE_CUBE_MAP,$.__webglTexture),j(e.TEXTURE_CUBE_MAP,z.texture,S);for(var w=0;w<6;w++)ne(N.__webglFramebuffer[w],z,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+w);y(z.texture,S)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,$.__webglTexture),j(e.TEXTURE_2D,z.texture,S),ne(N.__webglFramebuffer,z,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),y(z.texture,S)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);z.depthBuffer&&ae(z)}function fe(z){var N=z.texture,$=p(z);if(y(N,$)){var x=z.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,S=r.get(N).__webglTexture;n.bindTexture(x,S),e.generateMipmap(x),n.bindTexture(x,null)}}function se(){for(var z in f)f[z].update()}this.setTexture2D=C,this.setTextureCube=L,this.setTextureCubeDynamic=I,this.setupRenderTarget=he,this.updateRenderTargetMipmap=fe,this.updateVideoTextures=se}function h3(){var e={};function t(a){var o=a.uuid,u=e[o];return u===void 0&&(u={},e[o]=u),u}function n(a){delete e[a.uuid]}function r(){e={}}return{get:t,remove:n,clear:r}}function d3(e,t,n){function r(){var pe=!1,Ne=new Zt,Pe=null,Fe=new Zt(0,0,0,0);return{setMask:function(Be){Pe!==Be&&!pe&&(e.colorMask(Be,Be,Be,Be),Pe=Be)},setLocked:function(Be){pe=Be},setClear:function(Be,$e,Dt,Lt,gn){gn===!0&&(Be*=Lt,$e*=Lt,Dt*=Lt),Ne.set(Be,$e,Dt,Lt),Fe.equals(Ne)===!1&&(e.clearColor(Be,$e,Dt,Lt),Fe.copy(Ne))},reset:function(){pe=!1,Pe=null,Fe.set(-1,0,0,0)}}}function a(){var pe=!1,Ne=null,Pe=null,Fe=null;return{setTest:function(Be){Be?P(e.DEPTH_TEST):X(e.DEPTH_TEST)},setMask:function(Be){Ne!==Be&&!pe&&(e.depthMask(Be),Ne=Be)},setFunc:function(Be){if(Pe!==Be){if(Be)switch(Be){case XE:e.depthFunc(e.NEVER);break;case YE:e.depthFunc(e.ALWAYS);break;case ZE:e.depthFunc(e.LESS);break;case nh:e.depthFunc(e.LEQUAL);break;case QE:e.depthFunc(e.EQUAL);break;case KE:e.depthFunc(e.GEQUAL);break;case JE:e.depthFunc(e.GREATER);break;case $E:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);Pe=Be}},setLocked:function(Be){pe=Be},setClear:function(Be){Fe!==Be&&(e.clearDepth(Be),Fe=Be)},reset:function(){pe=!1,Ne=null,Pe=null,Fe=null}}}function o(){var pe=!1,Ne=null,Pe=null,Fe=null,Be=null,$e=null,Dt=null,Lt=null,gn=null;return{setTest:function(Rt){Rt?P(e.STENCIL_TEST):X(e.STENCIL_TEST)},setMask:function(Rt){Ne!==Rt&&!pe&&(e.stencilMask(Rt),Ne=Rt)},setFunc:function(Rt,wn,rn){(Pe!==Rt||Fe!==wn||Be!==rn)&&(e.stencilFunc(Rt,wn,rn),Pe=Rt,Fe=wn,Be=rn)},setOp:function(Rt,wn,rn){($e!==Rt||Dt!==wn||Lt!==rn)&&(e.stencilOp(Rt,wn,rn),$e=Rt,Dt=wn,Lt=rn)},setLocked:function(Rt){pe=Rt},setClear:function(Rt){gn!==Rt&&(e.clearStencil(Rt),gn=Rt)},reset:function(){pe=!1,Ne=null,Pe=null,Fe=null,Be=null,$e=null,Dt=null,Lt=null,gn=null}}}var u=new r,c=new a,f=new o,d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=new Uint8Array(d),v=new Uint8Array(d),m=new Uint8Array(d),y={},_=null,M=null,T=null,E=null,A=null,C=null,L=null,I=null,j=null,q=!1,ne=null,W=null,oe=null,ae=null,he=null,fe=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),se=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),z=parseFloat(se)>=1,N=null,$={},x=new Zt,S=new Zt;function w(pe,Ne,Pe){var Fe=new Uint8Array(4),Be=e.createTexture();e.bindTexture(pe,Be),e.texParameteri(pe,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(pe,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var $e=0;$e<Pe;$e++)e.texImage2D(Ne+$e,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Fe);return Be}var R={};R[e.TEXTURE_2D]=w(e.TEXTURE_2D,e.TEXTURE_2D,1),R[e.TEXTURE_CUBE_MAP]=w(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),u.setClear(0,0,0,1),c.setClear(1),f.setClear(0),P(e.DEPTH_TEST),c.setFunc(nh),Oe(!1),Ie(Mu),P(e.CULL_FACE),P(e.BLEND),xe(cl);function D(){for(var pe=0,Ne=p.length;pe<Ne;pe++)p[pe]=0}function B(pe){if(p[pe]=1,v[pe]===0&&(e.enableVertexAttribArray(pe),v[pe]=1),m[pe]!==0){var Ne=t.get("ANGLE_instanced_arrays");Ne.vertexAttribDivisorANGLE(pe,0),m[pe]=0}}function H(pe,Ne){if(p[pe]=1,v[pe]===0&&(e.enableVertexAttribArray(pe),v[pe]=1),m[pe]!==Ne){var Pe=t.get("ANGLE_instanced_arrays");Pe.vertexAttribDivisorANGLE(pe,Ne),m[pe]=Ne}}function Q(){for(var pe=0,Ne=v.length;pe!==Ne;++pe)v[pe]!==p[pe]&&(e.disableVertexAttribArray(pe),v[pe]=0)}function P(pe){y[pe]!==!0&&(e.enable(pe),y[pe]=!0)}function X(pe){y[pe]!==!1&&(e.disable(pe),y[pe]=!1)}function le(){if(_===null&&(_=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var pe=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),Ne=0;Ne<pe.length;Ne++)_.push(pe[Ne]);return _}function Te(pe){return M!==pe?(e.useProgram(pe),M=pe,!0):!1}function xe(pe,Ne,Pe,Fe,Be,$e,Dt,Lt){if(pe!==th?P(e.BLEND):X(e.BLEND),pe!==Rg){if(pe!==T||Lt!==q)switch(pe){case Tg:Lt?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case Sg:Lt?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case Ag:Lt?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:Lt?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}E=null,A=null,C=null,L=null,I=null,j=null}else Be=Be||Ne,$e=$e||Pe,Dt=Dt||Fe,(Ne!==E||Be!==L)&&(e.blendEquationSeparate(n.convert(Ne),n.convert(Be)),E=Ne,L=Be),(Pe!==A||Fe!==C||$e!==I||Dt!==j)&&(e.blendFuncSeparate(n.convert(Pe),n.convert(Fe),n.convert($e),n.convert(Dt)),A=Pe,C=Fe,I=$e,j=Dt);T=pe,q=Lt}function Ae(pe,Ne){pe.side===ul?X(e.CULL_FACE):P(e.CULL_FACE);var Pe=pe.side===Ea;Ne&&(Pe=!Pe),Oe(Pe),pe.transparent===!0?xe(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.premultipliedAlpha):xe(th),c.setFunc(pe.depthFunc),c.setTest(pe.depthTest),c.setMask(pe.depthWrite),u.setMask(pe.colorWrite),Qe(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits)}function Oe(pe){ne!==pe&&(pe?e.frontFace(e.CW):e.frontFace(e.CCW),ne=pe)}function Ie(pe){pe!==DE?(P(e.CULL_FACE),pe!==W&&(pe===Mu?e.cullFace(e.BACK):pe===_g?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):X(e.CULL_FACE),W=pe}function ht(pe){pe!==oe&&(z&&e.lineWidth(pe),oe=pe)}function Qe(pe,Ne,Pe){pe?(P(e.POLYGON_OFFSET_FILL),(ae!==Ne||he!==Pe)&&(e.polygonOffset(Ne,Pe),ae=Ne,he=Pe)):X(e.POLYGON_OFFSET_FILL)}function dt(pe){pe?P(e.SCISSOR_TEST):X(e.SCISSOR_TEST)}function _t(pe){pe===void 0&&(pe=e.TEXTURE0+fe-1),N!==pe&&(e.activeTexture(pe),N=pe)}function mt(pe,Ne){N===null&&_t();var Pe=$[N];Pe===void 0&&(Pe={type:void 0,texture:void 0},$[N]=Pe),(Pe.type!==pe||Pe.texture!==Ne)&&(e.bindTexture(pe,Ne||R[pe]),Pe.type=pe,Pe.texture=Ne)}function Ke(){try{e.compressedTexImage2D.apply(e,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Kn(){try{e.texImage2D.apply(e,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function on(pe){x.equals(pe)===!1&&(e.scissor(pe.x,pe.y,pe.z,pe.w),x.copy(pe))}function hn(pe){S.equals(pe)===!1&&(e.viewport(pe.x,pe.y,pe.z,pe.w),S.copy(pe))}function vt(){for(var pe=0;pe<v.length;pe++)v[pe]===1&&(e.disableVertexAttribArray(pe),v[pe]=0);y={},_=null,N=null,$={},M=null,T=null,ne=null,W=null,u.reset(),c.reset(),f.reset()}return{buffers:{color:u,depth:c,stencil:f},initAttributes:D,enableAttribute:B,enableAttributeAndDivisor:H,disableUnusedAttributes:Q,enable:P,disable:X,getCompressedTextureFormats:le,useProgram:Te,setBlending:xe,setMaterial:Ae,setFlipSided:Oe,setCullFace:Ie,setLineWidth:ht,setPolygonOffset:Qe,setScissorTest:dt,activeTexture:_t,bindTexture:mt,compressedTexImage2D:Ke,texImage2D:Kn,scissor:on,viewport:hn,reset:vt}}function p3(e,t,n){var r;function a(){if(r!==void 0)return r;var L=t.get("EXT_texture_filter_anisotropic");return L!==null?r=e.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function o(L){if(L==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var u=n.precision!==void 0?n.precision:"highp",c=o(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);var f=n.logarithmicDepthBuffer===!0,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=e.getParameter(e.MAX_TEXTURE_SIZE),m=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),y=e.getParameter(e.MAX_VERTEX_ATTRIBS),_=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),M=e.getParameter(e.MAX_VARYING_VECTORS),T=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),E=p>0,A=!!t.get("OES_texture_float"),C=E&&A;return{getMaxAnisotropy:a,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:m,maxAttributes:y,maxVertexUniforms:_,maxVaryings:M,maxFragmentUniforms:T,vertexTextures:E,floatFragmentTextures:A,floatVertexTextures:C}}function Nn(e,t,n,r){ci.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Nn.prototype=Object.assign(Object.create(ci.prototype),{constructor:Nn,isPerspectiveCamera:!0,copy:function(e,t){return ci.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=pt.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(pt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return pt.RAD2DEG*2*Math.atan(Math.tan(pt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(pt.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){var u=o.fullWidth,c=o.fullHeight;a+=o.offsetX*r/u,t-=o.offsetY*n/c,r*=o.width/u,n*=o.height/c}var f=this.filmOffset;f!==0&&(a+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far)},toJSON:function(e){var t=Ue.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function ah(e){Nn.call(this),this.cameras=e||[]}ah.prototype=Object.assign(Object.create(Nn.prototype),{constructor:ah,isArrayCamera:!0});function Gg(e){var t=this,n=null,r=null,a=null;typeof window<"u"&&"VRFrameData"in window&&(r=new window.VRFrameData);var o=new ut,u=new Nn;u.bounds=new Zt(0,0,.5,1),u.layers.enable(1);var c=new Nn;c.bounds=new Zt(.5,0,.5,1),c.layers.enable(2);var f=new ah([u,c]);f.layers.enable(1),f.layers.enable(2);var d,p;function v(){if(n!==null&&n.isPresenting){var m=n.getEyeParameters("left"),y=m.renderWidth,_=m.renderHeight;p=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(y*2,_,1)}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,p)}typeof window<"u"&&window.addEventListener("vrdisplaypresentchange",v,!1),this.enabled=!1,this.getDevice=function(){return n},this.setDevice=function(m){m!==void 0&&(n=m)},this.setPoseTarget=function(m){m!==void 0&&(a=m)},this.getCamera=function(m){if(n===null)return m;n.depthNear=m.near,n.depthFar=m.far,n.getFrameData(r);var y=r.pose,_=a!==null?a:m;if(y.position!==null?_.position.fromArray(y.position):_.position.set(0,0,0),y.orientation!==null&&_.quaternion.fromArray(y.orientation),_.updateMatrixWorld(),n.isPresenting===!1)return m;u.near=m.near,c.near=m.near,u.far=m.far,c.far=m.far,f.matrixWorld.copy(m.matrixWorld),f.matrixWorldInverse.copy(m.matrixWorldInverse),u.matrixWorldInverse.fromArray(r.leftViewMatrix),c.matrixWorldInverse.fromArray(r.rightViewMatrix);var M=_.parent;M!==null&&(o.getInverse(M.matrixWorld),u.matrixWorldInverse.multiply(o),c.matrixWorldInverse.multiply(o)),u.matrixWorld.getInverse(u.matrixWorldInverse),c.matrixWorld.getInverse(c.matrixWorldInverse),u.projectionMatrix.fromArray(r.leftProjectionMatrix),c.projectionMatrix.fromArray(r.rightProjectionMatrix),f.projectionMatrix.copy(u.projectionMatrix);var T=n.getLayers();if(T.length){var E=T[0];E.leftBounds!==null&&E.leftBounds.length===4&&u.bounds.fromArray(E.leftBounds),E.rightBounds!==null&&E.rightBounds.length===4&&c.bounds.fromArray(E.rightBounds)}return f},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",v)}}function v3(e){var t={};return{get:function(n){if(t[n]!==void 0)return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function m3(){var e=this,t=null,n=0,r=!1,a=!1,o=new zr,u=new sr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,v,m){var y=p.length!==0||v||n!==0||r;return r=v,t=d(p,m,0),n=p.length,y},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1,f()},this.setState=function(p,v,m,y,_,M){if(!r||p===null||p.length===0||a&&!m)a?d(null):f();else{var T=a?0:n,E=T*4,A=_.clippingState||null;c.value=A,A=d(p,y,E,M);for(var C=0;C!==E;++C)A[C]=t[C];_.clippingState=A,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=T}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(p,v,m,y){var _=p!==null?p.length:0,M=null;if(_!==0){if(M=c.value,y!==!0||M===null){var T=m+_*4,E=v.matrixWorldInverse;u.getNormalMatrix(E),(M===null||M.length<T)&&(M=new Float32Array(T));for(var A=0,C=m;A!==_;++A,C+=4)o.copy(p[A]).applyMatrix4(E,u),o.normal.toArray(M,C),M[C+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=_,M}}function F1(e,t){function n(r){var a;if(r===Bi)return e.REPEAT;if(r===xr)return e.CLAMP_TO_EDGE;if(r===rs)return e.MIRRORED_REPEAT;if(r===_r)return e.NEAREST;if(r===Hh)return e.NEAREST_MIPMAP_NEAREST;if(r===Vh)return e.NEAREST_MIPMAP_LINEAR;if(r===ar)return e.LINEAR;if(r===Bg)return e.LINEAR_MIPMAP_NEAREST;if(r===Cc)return e.LINEAR_MIPMAP_LINEAR;if(r===jh)return e.UNSIGNED_BYTE;if(r===l1)return e.UNSIGNED_SHORT_4_4_4_4;if(r===u1)return e.UNSIGNED_SHORT_5_5_5_1;if(r===c1)return e.UNSIGNED_SHORT_5_6_5;if(r===a1)return e.BYTE;if(r===s1)return e.SHORT;if(r===Tu)return e.UNSIGNED_SHORT;if(r===o1)return e.INT;if(r===Pg)return e.UNSIGNED_INT;if(r===wo)return e.FLOAT;if(r===Wh&&(a=t.get("OES_texture_half_float"),a!==null))return a.HALF_FLOAT_OES;if(r===f1)return e.ALPHA;if(r===Eo)return e.RGB;if(r===ui)return e.RGBA;if(r===h1)return e.LUMINANCE;if(r===d1)return e.LUMINANCE_ALPHA;if(r===es)return e.DEPTH_COMPONENT;if(r===Mo)return e.DEPTH_STENCIL;if(r===Cg)return e.FUNC_ADD;if(r===PE)return e.FUNC_SUBTRACT;if(r===zE)return e.FUNC_REVERSE_SUBTRACT;if(r===FE)return e.ZERO;if(r===IE)return e.ONE;if(r===GE)return e.SRC_COLOR;if(r===kE)return e.ONE_MINUS_SRC_COLOR;if(r===Lg)return e.SRC_ALPHA;if(r===Og)return e.ONE_MINUS_SRC_ALPHA;if(r===HE)return e.DST_ALPHA;if(r===VE)return e.ONE_MINUS_DST_ALPHA;if(r===jE)return e.DST_COLOR;if(r===WE)return e.ONE_MINUS_DST_COLOR;if(r===qE)return e.SRC_ALPHA_SATURATE;if((r===Om||r===Nm||r===Dm||r===Um)&&(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null)){if(r===Om)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Nm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Dm)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Um)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Bm||r===Pm||r===zm||r===Fm)&&(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null)){if(r===Bm)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Pm)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===zm)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Fm)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===p1&&(a=t.get("WEBGL_compressed_texture_etc1"),a!==null))return a.COMPRESSED_RGB_ETC1_WEBGL;if((r===Cm||r===Lm)&&(a=t.get("EXT_blend_minmax"),a!==null)){if(r===Cm)return a.MIN_EXT;if(r===Lm)return a.MAX_EXT}return r===Su&&(a=t.get("WEBGL_depth_texture"),a!==null)?a.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function kg(e){console.log("THREE.WebGLRenderer",NE),e=e||{};var t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,a=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,u=e.antialias!==void 0?e.antialias:!1,c=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,f=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,d=e.powerPreference!==void 0?e.powerPreference:"default",p=[],v=[],m=null,y=[],_=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Ng,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var M=this,T=!1,E=null,A=null,C=-1,L="",I=null,j=null,q=new Zt,ne=new Zt,W=null,oe=0,ae=t.width,he=t.height,fe=1,se=new Zt(0,0,ae,he),z=new Zt(0,0,ae,he),N=!1,$=new Xh,x=new m3,S=!1,w=!1,R=new ut,D=new ee,B={geometries:0,textures:0},H={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:H,memory:B,programs:null};function Q(){return E===null?fe:1}var P;try{var X={alpha:r,depth:a,stencil:o,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:d};if(t.addEventListener("webglcontextlost",$e,!1),t.addEventListener("webglcontextrestored",Dt,!1),P=n||t.getContext("webgl",X)||t.getContext("experimental-webgl",X),P===null)throw t.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");P.getShaderPrecisionFormat===void 0&&(P.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(V){console.error("THREE.WebGLRenderer: "+V.message)}var le,Te,xe,Ae,Oe,Ie,ht,Qe,dt,_t,mt,Ke,Kn,on,hn,vt,pe,Ne;function Pe(){le=new v3(P),le.get("WEBGL_depth_texture"),le.get("OES_texture_float"),le.get("OES_texture_float_linear"),le.get("OES_texture_half_float"),le.get("OES_texture_half_float_linear"),le.get("OES_standard_derivatives"),le.get("OES_element_index_uint"),le.get("ANGLE_instanced_arrays"),Ne=new F1(P,le),Te=new p3(P,le,e),xe=new d3(P,le,Ne),xe.scissor(ne.copy(z).multiplyScalar(fe)),xe.viewport(q.copy(se).multiplyScalar(fe)),Ae=new h3,Oe=new f3(P,le,xe,Ae,Te,Ne,B),Ie=new IO(P),ht=new JO(P,Ie,B),Qe=new t3(ht,H),Kn=new ZO(P),_t=new c3(M,le,Te),dt=new e3,mt=new XO,Ke=new VO(M,xe,ht,c),on=new KO(P,le,H),hn=new QO(P,le,H),vt=new PO(M,P,xe,Oe,Te),pe=new zO(M,P,xe,Oe,Te),M.info.programs=_t.programs,M.context=P,M.capabilities=Te,M.extensions=le,M.properties=Ae,M.renderLists=mt,M.state=xe}Pe();var Fe=new Gg(M);this.vr=Fe;var Be=new B1(M,Qe,Te.maxTextureSize);this.shadowMap=Be,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){var V=le.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){var V=le.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(V){V!==void 0&&(fe=V,this.setSize(ae,he,!1))},this.getSize=function(){return{width:ae,height:he}},this.setSize=function(V,re,ue){var Se=Fe.getDevice();if(Se&&Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=V,he=re,t.width=V*fe,t.height=re*fe,ue!==!1&&(t.style.width=V+"px",t.style.height=re+"px"),this.setViewport(0,0,V,re)},this.getDrawingBufferSize=function(){return{width:ae*fe,height:he*fe}},this.setDrawingBufferSize=function(V,re,ue){ae=V,he=re,fe=ue,t.width=V*ue,t.height=re*ue,this.setViewport(0,0,V,re)},this.setViewport=function(V,re,ue,Se){se.set(V,he-re-Se,ue,Se),xe.viewport(q.copy(se).multiplyScalar(fe))},this.setScissor=function(V,re,ue,Se){z.set(V,he-re-Se,ue,Se),xe.scissor(ne.copy(z).multiplyScalar(fe))},this.setScissorTest=function(V){xe.setScissorTest(N=V)},this.getClearColor=function(){return Ke.getClearColor()},this.setClearColor=function(){Ke.setClearColor.apply(Ke,arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha.apply(Ke,arguments)},this.clear=function(V,re,ue){var Se=0;(V===void 0||V)&&(Se|=P.COLOR_BUFFER_BIT),(re===void 0||re)&&(Se|=P.DEPTH_BUFFER_BIT),(ue===void 0||ue)&&(Se|=P.STENCIL_BUFFER_BIT),P.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(V,re,ue,Se){this.setRenderTarget(V),this.clear(re,ue,Se)},this.dispose=function(){t.removeEventListener("webglcontextlost",$e,!1),t.removeEventListener("webglcontextrestored",Dt,!1),mt.dispose(),Fe.dispose()};function $e(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Dt(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1,Pe()}function Lt(V){var re=V.target;re.removeEventListener("dispose",Lt),gn(re)}function gn(V){Rt(V),Ae.remove(V)}function Rt(V){var re=Ae.get(V).program;V.program=void 0,re!==void 0&&_t.releaseProgram(re)}function wn(V,re,ue){V.render(function(Se){M.renderBufferImmediate(Se,re,ue)})}this.renderBufferImmediate=function(V,re,ue){xe.initAttributes();var Se=Ae.get(V);V.hasPositions&&!Se.position&&(Se.position=P.createBuffer()),V.hasNormals&&!Se.normal&&(Se.normal=P.createBuffer()),V.hasUvs&&!Se.uv&&(Se.uv=P.createBuffer()),V.hasColors&&!Se.color&&(Se.color=P.createBuffer());var Re=re.getAttributes();if(V.hasPositions&&(P.bindBuffer(P.ARRAY_BUFFER,Se.position),P.bufferData(P.ARRAY_BUFFER,V.positionArray,P.DYNAMIC_DRAW),xe.enableAttribute(Re.position),P.vertexAttribPointer(Re.position,3,P.FLOAT,!1,0,0)),V.hasNormals){if(P.bindBuffer(P.ARRAY_BUFFER,Se.normal),!ue.isMeshPhongMaterial&&!ue.isMeshStandardMaterial&&!ue.isMeshNormalMaterial&&ue.flatShading===!0)for(var He=0,yt=V.count*3;He<yt;He+=9){var Ve=V.normalArray,it=(Ve[He+0]+Ve[He+3]+Ve[He+6])/3,wt=(Ve[He+1]+Ve[He+4]+Ve[He+7])/3,Xe=(Ve[He+2]+Ve[He+5]+Ve[He+8])/3;Ve[He+0]=it,Ve[He+1]=wt,Ve[He+2]=Xe,Ve[He+3]=it,Ve[He+4]=wt,Ve[He+5]=Xe,Ve[He+6]=it,Ve[He+7]=wt,Ve[He+8]=Xe}P.bufferData(P.ARRAY_BUFFER,V.normalArray,P.DYNAMIC_DRAW),xe.enableAttribute(Re.normal),P.vertexAttribPointer(Re.normal,3,P.FLOAT,!1,0,0)}V.hasUvs&&ue.map&&(P.bindBuffer(P.ARRAY_BUFFER,Se.uv),P.bufferData(P.ARRAY_BUFFER,V.uvArray,P.DYNAMIC_DRAW),xe.enableAttribute(Re.uv),P.vertexAttribPointer(Re.uv,2,P.FLOAT,!1,0,0)),V.hasColors&&ue.vertexColors!==zh&&(P.bindBuffer(P.ARRAY_BUFFER,Se.color),P.bufferData(P.ARRAY_BUFFER,V.colorArray,P.DYNAMIC_DRAW),xe.enableAttribute(Re.color),P.vertexAttribPointer(Re.color,3,P.FLOAT,!1,0,0)),xe.disableUnusedAttributes(),P.drawArrays(P.TRIANGLES,0,V.count),V.count=0},this.renderBufferDirect=function(V,re,ue,Se,Re,He){var yt=Re.isMesh&&Re.matrixWorld.determinant()<0;xe.setMaterial(Se,yt);var Ve=La(V,re,Se,Re),it=ue.id+"_"+Ve.id+"_"+(Se.wireframe===!0),wt=!1;it!==L&&(L=it,wt=!0),Re.morphTargetInfluences&&(Kn.update(Re,ue,Se,Ve),wt=!0);var Xe=ue.index,je=ue.attributes.position,ln=1;Se.wireframe===!0&&(Xe=ht.getWireframeAttribute(ue),ln=2);var Ht,Vt=on;Xe!==null&&(Ht=Ie.get(Xe),Vt=hn,Vt.setIndex(Ht)),wt&&(rn(Se,Ve,ue),Xe!==null&&P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,Ht.buffer));var et=0;Xe!==null?et=Xe.count:je!==void 0&&(et=je.count);var bn=ue.drawRange.start*ln,fr=ue.drawRange.count*ln,Hn=He!==null?He.start*ln:0,Bn=He!==null?He.count*ln:1/0,ri=Math.max(bn,Hn),ml=Math.min(et,bn+fr,Hn+Bn)-1,tt=Math.max(0,ml-ri+1);if(tt!==0){if(Re.isMesh)if(Se.wireframe===!0)xe.setLineWidth(Se.wireframeLinewidth*Q()),Vt.setMode(P.LINES);else switch(Re.drawMode){case zg:Vt.setMode(P.TRIANGLES);break;case y1:Vt.setMode(P.TRIANGLE_STRIP);break;case b1:Vt.setMode(P.TRIANGLE_FAN);break}else if(Re.isLine){var An=Se.linewidth;An===void 0&&(An=1),xe.setLineWidth(An*Q()),Re.isLineSegments?Vt.setMode(P.LINES):Re.isLineLoop?Vt.setMode(P.LINE_LOOP):Vt.setMode(P.LINE_STRIP)}else Re.isPoints&&Vt.setMode(P.POINTS);ue&&ue.isInstancedBufferGeometry?ue.maxInstancedCount>0&&Vt.renderInstances(ue,ri,tt):Vt.render(ri,tt)}};function rn(V,re,ue,Se){if(ue&&ue.isInstancedBufferGeometry&&le.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Se===void 0&&(Se=0),xe.initAttributes();var Re=ue.attributes,He=re.getAttributes(),yt=V.defaultAttributeValues;for(var Ve in He){var it=He[Ve];if(it>=0){var wt=Re[Ve];if(wt!==void 0){var Xe=wt.normalized,je=wt.itemSize,ln=Ie.get(wt);if(ln===void 0)continue;var Ht=ln.buffer,Vt=ln.type,et=ln.bytesPerElement;if(wt.isInterleavedBufferAttribute){var bn=wt.data,fr=bn.stride,Hn=wt.offset;bn&&bn.isInstancedInterleavedBuffer?(xe.enableAttributeAndDivisor(it,bn.meshPerAttribute),ue.maxInstancedCount===void 0&&(ue.maxInstancedCount=bn.meshPerAttribute*bn.count)):xe.enableAttribute(it),P.bindBuffer(P.ARRAY_BUFFER,Ht),P.vertexAttribPointer(it,je,Vt,Xe,fr*et,(Se*fr+Hn)*et)}else wt.isInstancedBufferAttribute?(xe.enableAttributeAndDivisor(it,wt.meshPerAttribute),ue.maxInstancedCount===void 0&&(ue.maxInstancedCount=wt.meshPerAttribute*wt.count)):xe.enableAttribute(it),P.bindBuffer(P.ARRAY_BUFFER,Ht),P.vertexAttribPointer(it,je,Vt,Xe,0,Se*je*et)}else if(yt!==void 0){var Bn=yt[Ve];if(Bn!==void 0)switch(Bn.length){case 2:P.vertexAttrib2fv(it,Bn);break;case 3:P.vertexAttrib3fv(it,Bn);break;case 4:P.vertexAttrib4fv(it,Bn);break;default:P.vertexAttrib1fv(it,Bn)}}}}xe.disableUnusedAttributes()}this.compile=function(V,re){p.length=0,v.length=0,V.traverse(function(ue){ue.isLight&&(p.push(ue),ue.castShadow&&v.push(ue))}),dt.setup(p,v,re),V.traverse(function(ue){if(ue.material)if(Array.isArray(ue.material))for(var Se=0;Se<ue.material.length;Se++)Ar(ue.material[Se],V.fog,ue);else Ar(ue.material,V.fog,ue)})};var Tr=!1,Jn=null;function Yi(){if(!Tr){var V=Fe.getDevice();V&&V.isPresenting?V.requestAnimationFrame(Sr):window.requestAnimationFrame(Sr),Tr=!0}}function Sr(V){Jn!==null&&Jn(V);var re=Fe.getDevice();re&&re.isPresenting?re.requestAnimationFrame(Sr):window.requestAnimationFrame(Sr)}this.animate=function(V){Jn=V,Yi()},this.render=function(V,re,ue,Se){if(!(re&&re.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!T){L="",C=-1,I=null,V.autoUpdate===!0&&V.updateMatrixWorld(),re.parent===null&&re.updateMatrixWorld(),Fe.enabled&&(re=Fe.getCamera(re)),R.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),$.setFromMatrix(R),p.length=0,v.length=0,y.length=0,_.length=0,w=this.localClippingEnabled,S=x.init(this.clippingPlanes,w,re),m=mt.get(V,re),m.init(),vi(V,re,M.sortObjects),M.sortObjects===!0&&m.sort(),Oe.updateVideoTextures(),S&&x.beginShadows(),Be.render(v,V,re),dt.setup(p,v,re),S&&x.endShadows(),H.frame++,H.calls=0,H.vertices=0,H.faces=0,H.points=0,ue===void 0&&(ue=null),this.setRenderTarget(ue),Ke.render(m,V,re,Se);var Re=m.opaque,He=m.transparent;if(V.overrideMaterial){var yt=V.overrideMaterial;Re.length&&yn(Re,V,re,yt),He.length&&yn(He,V,re,yt)}else Re.length&&yn(Re,V,re),He.length&&yn(He,V,re);pe.render(y,V,re),vt.render(_,V,re,q),ue&&Oe.updateRenderTargetMipmap(ue),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1),Fe.enabled&&Fe.submitFrame()}};function vi(V,re,ue){if(V.visible!==!1){var Se=V.layers.test(re.layers);if(Se){if(V.isLight)p.push(V),V.castShadow&&v.push(V);else if(V.isSprite)(!V.frustumCulled||$.intersectsSprite(V))&&y.push(V);else if(V.isLensFlare)_.push(V);else if(V.isImmediateRenderObject)ue&&D.setFromMatrixPosition(V.matrixWorld).applyMatrix4(R),m.push(V,null,V.material,D.z,null);else if((V.isMesh||V.isLine||V.isPoints)&&(V.isSkinnedMesh&&V.skeleton.update(),!V.frustumCulled||$.intersectsObject(V))){ue&&D.setFromMatrixPosition(V.matrixWorld).applyMatrix4(R);var Re=Qe.update(V),He=V.material;if(Array.isArray(He))for(var yt=Re.groups,Ve=0,it=yt.length;Ve<it;Ve++){var wt=yt[Ve],Xe=He[wt.materialIndex];Xe&&Xe.visible&&m.push(V,Re,Xe,D.z,wt)}else He.visible&&m.push(V,Re,He,D.z,null)}}for(var je=V.children,Ve=0,it=je.length;Ve<it;Ve++)vi(je[Ve],re,ue)}}function yn(V,re,ue,Se){for(var Re=0,He=V.length;Re<He;Re++){var yt=V[Re],Ve=yt.object,it=yt.geometry,wt=Se===void 0?yt.material:Se,Xe=yt.group;if(ue.isArrayCamera){j=ue;for(var je=ue.cameras,ln=0,Ht=je.length;ln<Ht;ln++){var Vt=je[ln];if(Ve.layers.test(Vt.layers)){var et=Vt.bounds,bn=et.x*ae,fr=et.y*he,Hn=et.z*ae,Bn=et.w*he;xe.viewport(q.set(bn,fr,Hn,Bn).multiplyScalar(fe)),$n(Ve,re,Vt,it,wt,Xe)}}}else j=null,$n(Ve,re,ue,it,wt,Xe)}}function $n(V,re,ue,Se,Re,He){if(V.onBeforeRender(M,re,ue,Se,Re,He),V.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),V.isImmediateRenderObject){var yt=V.isMesh&&V.matrixWorld.determinant()<0;xe.setMaterial(Re,yt);var Ve=La(ue,re.fog,Re,V);L="",wn(V,Ve,Re)}else M.renderBufferDirect(ue,re.fog,Se,Re,V,He);V.onAfterRender(M,re,ue,Se,Re,He)}function Ar(V,re,ue){var Se=Ae.get(V),Re=_t.getParameters(V,dt.state,v,re,x.numPlanes,x.numIntersection,ue),He=_t.getProgramCode(V,Re),yt=Se.program,Ve=!0;if(yt===void 0)V.addEventListener("dispose",Lt);else if(yt.code!==He)Rt(V);else{if(Re.shaderID!==void 0)return;Ve=!1}if(Ve){if(Re.shaderID){var it=ts[Re.shaderID];Se.shader={name:V.type,uniforms:ir.clone(it.uniforms),vertexShader:it.vertexShader,fragmentShader:it.fragmentShader}}else Se.shader={name:V.type,uniforms:V.uniforms,vertexShader:V.vertexShader,fragmentShader:V.fragmentShader};V.onBeforeCompile(Se.shader),yt=_t.acquireProgram(V,Se.shader,Re,He),Se.program=yt,V.program=yt}var wt=yt.getAttributes();if(V.morphTargets){V.numSupportedMorphTargets=0;for(var Xe=0;Xe<M.maxMorphTargets;Xe++)wt["morphTarget"+Xe]>=0&&V.numSupportedMorphTargets++}if(V.morphNormals){V.numSupportedMorphNormals=0;for(var Xe=0;Xe<M.maxMorphNormals;Xe++)wt["morphNormal"+Xe]>=0&&V.numSupportedMorphNormals++}var je=Se.shader.uniforms;(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Se.numClippingPlanes=x.numPlanes,Se.numIntersection=x.numIntersection,je.clippingPlanes=x.uniform),Se.fog=re,Se.lightsHash=dt.state.hash,V.lights&&(je.ambientLightColor.value=dt.state.ambient,je.directionalLights.value=dt.state.directional,je.spotLights.value=dt.state.spot,je.rectAreaLights.value=dt.state.rectArea,je.pointLights.value=dt.state.point,je.hemisphereLights.value=dt.state.hemi,je.directionalShadowMap.value=dt.state.directionalShadowMap,je.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,je.spotShadowMap.value=dt.state.spotShadowMap,je.spotShadowMatrix.value=dt.state.spotShadowMatrix,je.pointShadowMap.value=dt.state.pointShadowMap,je.pointShadowMatrix.value=dt.state.pointShadowMatrix);var ln=Se.program.getUniforms(),Ht=os.seqWithValue(ln.seq,je);Se.uniformsList=Ht}function La(V,re,ue,Se){oe=0;var Re=Ae.get(ue);if(S&&(w||V!==I)){var He=V===I&&ue.id===C;x.setState(ue.clippingPlanes,ue.clipIntersection,ue.clipShadows,V,Re,He)}ue.needsUpdate===!1&&(Re.program===void 0||ue.fog&&Re.fog!==re||ue.lights&&Re.lightsHash!==dt.state.hash||Re.numClippingPlanes!==void 0&&(Re.numClippingPlanes!==x.numPlanes||Re.numIntersection!==x.numIntersection))&&(ue.needsUpdate=!0),ue.needsUpdate&&(Ar(ue,re,Se),ue.needsUpdate=!1);var yt=!1,Ve=!1,it=!1,wt=Re.program,Xe=wt.getUniforms(),je=Re.shader.uniforms;if(xe.useProgram(wt.program)&&(yt=!0,Ve=!0,it=!0),ue.id!==C&&(C=ue.id,Ve=!0),yt||V!==I){if(Xe.setValue(P,"projectionMatrix",V.projectionMatrix),Te.logarithmicDepthBuffer&&Xe.setValue(P,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),I!==(j||V)&&(I=j||V,Ve=!0,it=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.envMap){var ln=Xe.map.cameraPosition;ln!==void 0&&ln.setValue(P,D.setFromMatrixPosition(V.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.skinning)&&Xe.setValue(P,"viewMatrix",V.matrixWorldInverse)}if(ue.skinning){Xe.setOptional(P,Se,"bindMatrix"),Xe.setOptional(P,Se,"bindMatrixInverse");var Ht=Se.skeleton;if(Ht){var Vt=Ht.bones;if(Te.floatVertexTextures){if(Ht.boneTexture===void 0){var et=Math.sqrt(Vt.length*4);et=pt.ceilPowerOfTwo(et),et=Math.max(et,4);var bn=new Float32Array(et*et*4);bn.set(Ht.boneMatrices);var fr=new ss(bn,et,et,ui,wo);Ht.boneMatrices=bn,Ht.boneTexture=fr,Ht.boneTextureSize=et}Xe.setValue(P,"boneTexture",Ht.boneTexture),Xe.setValue(P,"boneTextureSize",Ht.boneTextureSize)}else Xe.setOptional(P,Ht,"boneMatrices")}}return Ve&&(Xe.setValue(P,"toneMappingExposure",M.toneMappingExposure),Xe.setValue(P,"toneMappingWhitePoint",M.toneMappingWhitePoint),ue.lights&&mi(je,it),re&&ue.fog&&Ps(je,re),ue.isMeshBasicMaterial?Rr(je,ue):ue.isMeshLambertMaterial?(Rr(je,ue),Cr(je,ue)):ue.isMeshPhongMaterial?(Rr(je,ue),ue.isMeshToonMaterial?Un(je,ue):dn(je,ue)):ue.isMeshStandardMaterial?(Rr(je,ue),ue.isMeshPhysicalMaterial?Da(je,ue):Gr(je,ue)):ue.isMeshDepthMaterial?(Rr(je,ue),pl(je,ue)):ue.isMeshDistanceMaterial?(Rr(je,ue),vl(je,ue)):ue.isMeshNormalMaterial?(Rr(je,ue),zs(je,ue)):ue.isLineBasicMaterial?(Oa(je,ue),ue.isLineDashedMaterial&&Na(je,ue)):ue.isPointsMaterial?Bs(je,ue):ue.isShadowMaterial&&(je.color.value=ue.color,je.opacity.value=ue.opacity),je.ltcMat!==void 0&&(je.ltcMat.value=Ye.LTC_MAT_TEXTURE),je.ltcMag!==void 0&&(je.ltcMag.value=Ye.LTC_MAG_TEXTURE),os.upload(P,Re.uniformsList,je,M)),Xe.setValue(P,"modelViewMatrix",Se.modelViewMatrix),Xe.setValue(P,"normalMatrix",Se.normalMatrix),Xe.setValue(P,"modelMatrix",Se.matrixWorld),wt}function Rr(V,re){V.opacity.value=re.opacity,re.color&&(V.diffuse.value=re.color),re.emissive&&V.emissive.value.copy(re.emissive).multiplyScalar(re.emissiveIntensity),re.map&&(V.map.value=re.map),re.alphaMap&&(V.alphaMap.value=re.alphaMap),re.specularMap&&(V.specularMap.value=re.specularMap),re.envMap&&(V.envMap.value=re.envMap,V.flipEnvMap.value=re.envMap&&re.envMap.isCubeTexture?-1:1,V.reflectivity.value=re.reflectivity,V.refractionRatio.value=re.refractionRatio),re.lightMap&&(V.lightMap.value=re.lightMap,V.lightMapIntensity.value=re.lightMapIntensity),re.aoMap&&(V.aoMap.value=re.aoMap,V.aoMapIntensity.value=re.aoMapIntensity);var ue;if(re.map?ue=re.map:re.specularMap?ue=re.specularMap:re.displacementMap?ue=re.displacementMap:re.normalMap?ue=re.normalMap:re.bumpMap?ue=re.bumpMap:re.roughnessMap?ue=re.roughnessMap:re.metalnessMap?ue=re.metalnessMap:re.alphaMap?ue=re.alphaMap:re.emissiveMap&&(ue=re.emissiveMap),ue!==void 0){if(ue.isWebGLRenderTarget&&(ue=ue.texture),ue.matrixAutoUpdate===!0){var Se=ue.offset,Re=ue.repeat,He=ue.rotation,yt=ue.center;ue.matrix.setUvTransform(Se.x,Se.y,Re.x,Re.y,He,yt.x,yt.y)}V.uvTransform.value.copy(ue.matrix)}}function Oa(V,re){V.diffuse.value=re.color,V.opacity.value=re.opacity}function Na(V,re){V.dashSize.value=re.dashSize,V.totalSize.value=re.dashSize+re.gapSize,V.scale.value=re.scale}function Bs(V,re){if(V.diffuse.value=re.color,V.opacity.value=re.opacity,V.size.value=re.size*fe,V.scale.value=he*.5,V.map.value=re.map,re.map!==null){if(re.map.matrixAutoUpdate===!0){var ue=re.map.offset,Se=re.map.repeat,Re=re.map.rotation,He=re.map.center;re.map.matrix.setUvTransform(ue.x,ue.y,Se.x,Se.y,Re,He.x,He.y)}V.uvTransform.value.copy(re.map.matrix)}}function Ps(V,re){V.fogColor.value=re.color,re.isFog?(V.fogNear.value=re.near,V.fogFar.value=re.far):re.isFogExp2&&(V.fogDensity.value=re.density)}function Cr(V,re){re.emissiveMap&&(V.emissiveMap.value=re.emissiveMap)}function dn(V,re){V.specular.value=re.specular,V.shininess.value=Math.max(re.shininess,1e-4),re.emissiveMap&&(V.emissiveMap.value=re.emissiveMap),re.bumpMap&&(V.bumpMap.value=re.bumpMap,V.bumpScale.value=re.bumpScale),re.normalMap&&(V.normalMap.value=re.normalMap,V.normalScale.value.copy(re.normalScale)),re.displacementMap&&(V.displacementMap.value=re.displacementMap,V.displacementScale.value=re.displacementScale,V.displacementBias.value=re.displacementBias)}function Un(V,re){dn(V,re),re.gradientMap&&(V.gradientMap.value=re.gradientMap)}function Gr(V,re){V.roughness.value=re.roughness,V.metalness.value=re.metalness,re.roughnessMap&&(V.roughnessMap.value=re.roughnessMap),re.metalnessMap&&(V.metalnessMap.value=re.metalnessMap),re.emissiveMap&&(V.emissiveMap.value=re.emissiveMap),re.bumpMap&&(V.bumpMap.value=re.bumpMap,V.bumpScale.value=re.bumpScale),re.normalMap&&(V.normalMap.value=re.normalMap,V.normalScale.value.copy(re.normalScale)),re.displacementMap&&(V.displacementMap.value=re.displacementMap,V.displacementScale.value=re.displacementScale,V.displacementBias.value=re.displacementBias),re.envMap&&(V.envMapIntensity.value=re.envMapIntensity)}function Da(V,re){V.clearCoat.value=re.clearCoat,V.clearCoatRoughness.value=re.clearCoatRoughness,Gr(V,re)}function pl(V,re){re.displacementMap&&(V.displacementMap.value=re.displacementMap,V.displacementScale.value=re.displacementScale,V.displacementBias.value=re.displacementBias)}function vl(V,re){re.displacementMap&&(V.displacementMap.value=re.displacementMap,V.displacementScale.value=re.displacementScale,V.displacementBias.value=re.displacementBias),V.referencePosition.value.copy(re.referencePosition),V.nearDistance.value=re.nearDistance,V.farDistance.value=re.farDistance}function zs(V,re){re.bumpMap&&(V.bumpMap.value=re.bumpMap,V.bumpScale.value=re.bumpScale),re.normalMap&&(V.normalMap.value=re.normalMap,V.normalScale.value.copy(re.normalScale)),re.displacementMap&&(V.displacementMap.value=re.displacementMap,V.displacementScale.value=re.displacementScale,V.displacementBias.value=re.displacementBias)}function mi(V,re){V.ambientLightColor.needsUpdate=re,V.directionalLights.needsUpdate=re,V.pointLights.needsUpdate=re,V.spotLights.needsUpdate=re,V.rectAreaLights.needsUpdate=re,V.hemisphereLights.needsUpdate=re}this.setFaceCulling=function(V,re){xe.setCullFace(V),xe.setFlipSided(re===UE)};function Sn(){var V=oe;return V>=Te.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+V+" texture units while this GPU supports only "+Te.maxTextures),oe+=1,V}this.allocTextureUnit=Sn,this.setTexture2D=function(){var V=!1;return function(ue,Se){ue&&ue.isWebGLRenderTarget&&(V||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),V=!0),ue=ue.texture),Oe.setTexture2D(ue,Se)}}(),this.setTexture=function(){var V=!1;return function(ue,Se){V||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),V=!0),Oe.setTexture2D(ue,Se)}}(),this.setTextureCube=function(){var V=!1;return function(ue,Se){ue&&ue.isWebGLRenderTargetCube&&(V||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),V=!0),ue=ue.texture),ue&&ue.isCubeTexture||Array.isArray(ue.image)&&ue.image.length===6?Oe.setTextureCube(ue,Se):Oe.setTextureCubeDynamic(ue,Se)}}(),this.getRenderTarget=function(){return E},this.setRenderTarget=function(V){E=V,V&&Ae.get(V).__webglFramebuffer===void 0&&Oe.setupRenderTarget(V);var re=null,ue=!1;if(V){var Se=Ae.get(V).__webglFramebuffer;V.isWebGLRenderTargetCube?(re=Se[V.activeCubeFace],ue=!0):re=Se,q.copy(V.viewport),ne.copy(V.scissor),W=V.scissorTest}else q.copy(se).multiplyScalar(fe),ne.copy(z).multiplyScalar(fe),W=N;if(A!==re&&(P.bindFramebuffer(P.FRAMEBUFFER,re),A=re),xe.viewport(q),xe.scissor(ne),xe.setScissorTest(W),ue){var Re=Ae.get(V.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+V.activeCubeFace,Re.__webglTexture,V.activeMipMapLevel)}},this.readRenderTargetPixels=function(V,re,ue,Se,Re,He){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var yt=Ae.get(V).__webglFramebuffer;if(yt){var Ve=!1;yt!==A&&(P.bindFramebuffer(P.FRAMEBUFFER,yt),Ve=!0);try{var it=V.texture,wt=it.format,Xe=it.type;if(wt!==ui&&Ne.convert(wt)!==P.getParameter(P.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Xe!==jh&&Ne.convert(Xe)!==P.getParameter(P.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Xe===wo&&(le.get("OES_texture_float")||le.get("WEBGL_color_buffer_float")))&&!(Xe===Wh&&le.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}P.checkFramebufferStatus(P.FRAMEBUFFER)===P.FRAMEBUFFER_COMPLETE?re>=0&&re<=V.width-Se&&ue>=0&&ue<=V.height-Re&&P.readPixels(re,ue,Se,Re,Ne.convert(wt),Ne.convert(Xe),He):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Ve&&P.bindFramebuffer(P.FRAMEBUFFER,A)}}}}function Ro(e,t){this.name="",this.color=new qe(e),this.density=t!==void 0?t:25e-5}Ro.prototype.isFogExp2=!0;Ro.prototype.clone=function(){return new Ro(this.color.getHex(),this.density)};Ro.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Co(e,t,n){this.name="",this.color=new qe(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Co.prototype.isFog=!0;Co.prototype.clone=function(){return new Co(this.color.getHex(),this.near,this.far)};Co.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function sh(){Ue.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}sh.prototype=Object.assign(Object.create(Ue.prototype),{constructor:sh,copy:function(e,t){return Ue.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Ue.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}});function km(e,t,n,r,a){Ue.call(this),this.lensFlares=[],this.positionScreen=new ee,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,n,r,a)}km.prototype=Object.assign(Object.create(Ue.prototype),{constructor:km,isLensFlare:!0,copy:function(e){Ue.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,a,o){t===void 0&&(t=-1),n===void 0&&(n=0),o===void 0&&(o=1),a===void 0&&(a=new qe(16777215)),r===void 0&&(r=cl),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:a,blending:r})},updateLensFlares:function(){var e,t=this.lensFlares.length,n,r=-this.positionScreen.x*2,a=-this.positionScreen.y*2;for(e=0;e<t;e++)n=this.lensFlares[e],n.x=this.positionScreen.x+r*n.distance,n.y=this.positionScreen.y+a*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=(n.wantedRotation-n.rotation)*.25}});function Aa(e){xt.call(this),this.type="SpriteMaterial",this.color=new qe(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}Aa.prototype=Object.create(xt.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isSpriteMaterial=!0;Aa.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this};function Fu(e){Ue.call(this),this.type="Sprite",this.material=e!==void 0?e:new Aa}Fu.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Fu,isSprite:!0,raycast:function(){var e=new ee,t=new ee,n=new ee;return function(a,o){t.setFromMatrixPosition(this.matrixWorld),a.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var u=n.x*n.y/4;if(!(t.distanceToSquared(e)>u)){var c=a.ray.origin.distanceTo(e);c<a.near||c>a.far||o.push({distance:c,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function Iu(){Ue.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}Iu.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Iu,copy:function(e){Ue.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var a=t[n];this.addLevel(a.object.clone(),a.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new ee;return function(n,r){e.setFromMatrixPosition(this.matrixWorld);var a=n.ray.origin.distanceTo(e);this.getObjectForDistance(a).raycast(n,r)}}(),update:function(){var e=new ee,t=new ee;return function(r){var a=this.levels;if(a.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var o=e.distanceTo(t);a[0].object.visible=!0;for(var u=1,c=a.length;u<c&&o>=a[u].distance;u++)a[u-1].object.visible=!1,a[u].object.visible=!0;for(;u<c;u++)a[u].object.visible=!1}}}(),toJSON:function(e){var t=Ue.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,a=n.length;r<a;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}});function Gu(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ut)}}Object.assign(Gu.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new ut;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new ut,t=new ut;return function(){for(var r=this.bones,a=this.boneInverses,o=this.boneMatrices,u=this.boneTexture,c=0,f=r.length;c<f;c++){var d=r[c]?r[c].matrixWorld:t;e.multiplyMatrices(d,a[c]),e.toArray(o,c*16)}u!==void 0&&(u.needsUpdate=!0)}}(),clone:function(){return new Gu(this.bones,this.boneInverses)}});function oh(){Ue.call(this),this.type="Bone"}oh.prototype=Object.assign(Object.create(Ue.prototype),{constructor:oh,isBone:!0});function lh(e,t){Qn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ut,this.bindMatrixInverse=new ut;var n=this.initBones(),r=new Gu(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}lh.prototype=Object.assign(Object.create(Qn.prototype),{constructor:lh,isSkinnedMesh:!0,initBones:function(){var e=[],t,n,r,a;if(this.geometry&&this.geometry.bones!==void 0){for(r=0,a=this.geometry.bones.length;r<a;r++)n=this.geometry.bones[r],t=new oh,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),n.scl!==void 0&&t.scale.fromArray(n.scl);for(r=0,a=this.geometry.bones.length;r<a;r++)n=this.geometry.bones[r],n.parent!==-1&&n.parent!==null&&e[n.parent]!==void 0?e[n.parent].add(e[r]):this.add(e[r])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Zt,a=this.geometry.attributes.skinWeight;for(t=0;t<a.count;t++)r.x=a.getX(t),r.y=a.getY(t),r.z=a.getZ(t),r.w=a.getW(t),e=1/r.manhattanLength(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),a.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Qn.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Qt(e){xt.call(this),this.type="LineBasicMaterial",this.color=new qe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}Qt.prototype=Object.create(xt.prototype);Qt.prototype.constructor=Qt;Qt.prototype.isLineBasicMaterial=!0;Qt.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};function or(e,t,n){if(n===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new $t(e,t);Ue.call(this),this.type="Line",this.geometry=e!==void 0?e:new ke,this.material=t!==void 0?t:new Qt({color:Math.random()*16777215})}or.prototype=Object.assign(Object.create(Ue.prototype),{constructor:or,isLine:!0,raycast:function(){var e=new ut,t=new Ns,n=new Xr;return function(a,o){var u=a.linePrecision,c=u*u,f=this.geometry,d=this.matrixWorld;if(f.boundingSphere===null&&f.computeBoundingSphere(),n.copy(f.boundingSphere),n.applyMatrix4(d),a.ray.intersectsSphere(n)!==!1){e.getInverse(d),t.copy(a.ray).applyMatrix4(e);var p=new ee,v=new ee,m=new ee,y=new ee,_=this&&this.isLineSegments?2:1;if(f.isBufferGeometry){var M=f.index,T=f.attributes,E=T.position.array;if(M!==null)for(var A=M.array,C=0,L=A.length-1;C<L;C+=_){var I=A[C],j=A[C+1];p.fromArray(E,I*3),v.fromArray(E,j*3);var q=t.distanceSqToSegment(p,v,y,m);if(!(q>c)){y.applyMatrix4(this.matrixWorld);var ne=a.ray.origin.distanceTo(y);ne<a.near||ne>a.far||o.push({distance:ne,point:m.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else for(var C=0,L=E.length/3-1;C<L;C+=_){p.fromArray(E,3*C),v.fromArray(E,3*C+3);var q=t.distanceSqToSegment(p,v,y,m);if(!(q>c)){y.applyMatrix4(this.matrixWorld);var ne=a.ray.origin.distanceTo(y);ne<a.near||ne>a.far||o.push({distance:ne,point:m.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}else if(f.isGeometry)for(var W=f.vertices,oe=W.length,C=0;C<oe-1;C+=_){var q=t.distanceSqToSegment(W[C],W[C+1],y,m);if(!(q>c)){y.applyMatrix4(this.matrixWorld);var ne=a.ray.origin.distanceTo(y);ne<a.near||ne>a.far||o.push({distance:ne,point:m.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function $t(e,t){or.call(this,e,t),this.type="LineSegments"}$t.prototype=Object.assign(Object.create(or.prototype),{constructor:$t,isLineSegments:!0});function uh(e,t){or.call(this,e,t),this.type="LineLoop"}uh.prototype=Object.assign(Object.create(or.prototype),{constructor:uh,isLineLoop:!0});function Yr(e){xt.call(this),this.type="PointsMaterial",this.color=new qe(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}Yr.prototype=Object.create(xt.prototype);Yr.prototype.constructor=Yr;Yr.prototype.isPointsMaterial=!0;Yr.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this};function Lo(e,t){Ue.call(this),this.type="Points",this.geometry=e!==void 0?e:new ke,this.material=t!==void 0?t:new Yr({color:Math.random()*16777215})}Lo.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Lo,isPoints:!0,raycast:function(){var e=new ut,t=new Ns,n=new Xr;return function(a,o){var u=this,c=this.geometry,f=this.matrixWorld,d=a.params.Points.threshold;if(c.boundingSphere===null&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(f),n.radius+=d,a.ray.intersectsSphere(n)===!1)return;e.getInverse(f),t.copy(a.ray).applyMatrix4(e);var p=d/((this.scale.x+this.scale.y+this.scale.z)/3),v=p*p,m=new ee;function y(q,ne){var W=t.distanceSqToPoint(q);if(W<v){var oe=t.closestPointToPoint(q);oe.applyMatrix4(f);var ae=a.ray.origin.distanceTo(oe);if(ae<a.near||ae>a.far)return;o.push({distance:ae,distanceToRay:Math.sqrt(W),point:oe.clone(),index:ne,face:null,object:u})}}if(c.isBufferGeometry){var _=c.index,M=c.attributes,T=M.position.array;if(_!==null)for(var E=_.array,A=0,C=E.length;A<C;A++){var L=E[A];m.fromArray(T,L*3),y(m,L)}else for(var A=0,I=T.length/3;A<I;A++)m.fromArray(T,A*3),y(m,A)}else for(var j=c.vertices,A=0,I=j.length;A<I;A++)y(j[A],A)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ku(){Ue.call(this),this.type="Group"}ku.prototype=Object.assign(Object.create(Ue.prototype),{constructor:ku,isGroup:!0});function Hm(e,t,n,r,a,o,u,c,f){sn.call(this,e,t,n,r,a,o,u,c,f),this.generateMipmaps=!1;var d=this;function p(){e.removeEventListener("loadeddata",p,!1),d.needsUpdate=!0}e.addEventListener("loadeddata",p,!1)}Hm.prototype=Object.assign(Object.create(sn.prototype),{constructor:Hm,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Oo(e,t,n,r,a,o,u,c,f,d,p,v){sn.call(this,null,o,u,c,f,d,r,a,p,v),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Oo.prototype=Object.create(sn.prototype);Oo.prototype.constructor=Oo;Oo.prototype.isCompressedTexture=!0;function Hu(e,t,n,r,a,o,u,c,f,d){if(d=d!==void 0?d:es,d!==es&&d!==Mo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&d===es&&(n=Tu),n===void 0&&d===Mo&&(n=Su),sn.call(this,null,r,a,o,u,c,d,n,f),this.image={width:e,height:t},this.magFilter=u!==void 0?u:_r,this.minFilter=c!==void 0?c:_r,this.flipY=!1,this.generateMipmaps=!1}Hu.prototype=Object.create(sn.prototype);Hu.prototype.constructor=Hu;Hu.prototype.isDepthTexture=!0;function No(e){ke.call(this),this.type="WireframeGeometry";var t=[],n,r,a,o,u,c=[0,0],f={},d,p,v,m,y=["a","b","c"],_;if(e&&e.isGeometry){var M=e.faces;for(n=0,a=M.length;n<a;n++){var T=M[n];for(r=0;r<3;r++)p=T[y[r]],v=T[y[(r+1)%3]],c[0]=Math.min(p,v),c[1]=Math.max(p,v),m=c[0]+","+c[1],f[m]===void 0&&(f[m]={index1:c[0],index2:c[1]})}for(m in f)d=f[m],_=e.vertices[d.index1],t.push(_.x,_.y,_.z),_=e.vertices[d.index2],t.push(_.x,_.y,_.z)}else if(e&&e.isBufferGeometry){var E,A,C,L,I,j,q,ne;if(_=new ee,e.index!==null){for(E=e.attributes.position,A=e.index,C=e.groups,C.length===0&&(C=[{start:0,count:A.count,materialIndex:0}]),o=0,u=C.length;o<u;++o)for(L=C[o],I=L.start,j=L.count,n=I,a=I+j;n<a;n+=3)for(r=0;r<3;r++)p=A.getX(n+r),v=A.getX(n+(r+1)%3),c[0]=Math.min(p,v),c[1]=Math.max(p,v),m=c[0]+","+c[1],f[m]===void 0&&(f[m]={index1:c[0],index2:c[1]});for(m in f)d=f[m],_.fromBufferAttribute(E,d.index1),t.push(_.x,_.y,_.z),_.fromBufferAttribute(E,d.index2),t.push(_.x,_.y,_.z)}else for(E=e.attributes.position,n=0,a=E.count/3;n<a;n++)for(r=0;r<3;r++)q=3*n+r,_.fromBufferAttribute(E,q),t.push(_.x,_.y,_.z),ne=3*n+(r+1)%3,_.fromBufferAttribute(E,ne),t.push(_.x,_.y,_.z)}this.addAttribute("position",new De(t,3))}No.prototype=Object.create(ke.prototype);No.prototype.constructor=No;function Vu(e,t,n){ot.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Do(e,t,n)),this.mergeVertices()}Vu.prototype=Object.create(ot.prototype);Vu.prototype.constructor=Vu;function Do(e,t,n){ke.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],a=[],o=[],u=[],c=1e-5,f=new ee,d=new ee,p=new ee,v=new ee,m=new ee,y,_,M=t+1;for(y=0;y<=n;y++){var T=y/n;for(_=0;_<=t;_++){var E=_/t;d=e(E,T,d),a.push(d.x,d.y,d.z),E-c>=0?(p=e(E-c,T,p),v.subVectors(d,p)):(p=e(E+c,T,p),v.subVectors(p,d)),T-c>=0?(p=e(E,T-c,p),m.subVectors(d,p)):(p=e(E,T+c,p),m.subVectors(p,d)),f.crossVectors(v,m).normalize(),o.push(f.x,f.y,f.z),u.push(E,T)}}for(y=0;y<n;y++)for(_=0;_<t;_++){var A=y*M+_,C=y*M+_+1,L=(y+1)*M+_+1,I=(y+1)*M+_;r.push(A,C,I),r.push(C,L,I)}this.setIndex(r),this.addAttribute("position",new De(a,3)),this.addAttribute("normal",new De(o,3)),this.addAttribute("uv",new De(u,2))}Do.prototype=Object.create(ke.prototype);Do.prototype.constructor=Do;function ju(e,t,n,r){ot.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new lr(e,t,n,r)),this.mergeVertices()}ju.prototype=Object.create(ot.prototype);ju.prototype.constructor=ju;function lr(e,t,n,r){ke.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var a=[],o=[];u(r),f(n),d(),this.addAttribute("position",new De(a,3)),this.addAttribute("normal",new De(a.slice(),3)),this.addAttribute("uv",new De(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function u(E){for(var A=new ee,C=new ee,L=new ee,I=0;I<t.length;I+=3)m(t[I+0],A),m(t[I+1],C),m(t[I+2],L),c(A,C,L,E)}function c(E,A,C,L){var I=Math.pow(2,L),j=[],q,ne;for(q=0;q<=I;q++){j[q]=[];var W=E.clone().lerp(C,q/I),oe=A.clone().lerp(C,q/I),ae=I-q;for(ne=0;ne<=ae;ne++)ne===0&&q===I?j[q][ne]=W:j[q][ne]=W.clone().lerp(oe,ne/ae)}for(q=0;q<I;q++)for(ne=0;ne<2*(I-q)-1;ne++){var he=Math.floor(ne/2);ne%2===0?(v(j[q][he+1]),v(j[q+1][he]),v(j[q][he])):(v(j[q][he+1]),v(j[q+1][he+1]),v(j[q+1][he]))}}function f(E){for(var A=new ee,C=0;C<a.length;C+=3)A.x=a[C+0],A.y=a[C+1],A.z=a[C+2],A.normalize().multiplyScalar(E),a[C+0]=A.x,a[C+1]=A.y,a[C+2]=A.z}function d(){for(var E=new ee,A=0;A<a.length;A+=3){E.x=a[A+0],E.y=a[A+1],E.z=a[A+2];var C=M(E)/2/Math.PI+.5,L=T(E)/Math.PI+.5;o.push(C,1-L)}y(),p()}function p(){for(var E=0;E<o.length;E+=6){var A=o[E+0],C=o[E+2],L=o[E+4],I=Math.max(A,C,L),j=Math.min(A,C,L);I>.9&&j<.1&&(A<.2&&(o[E+0]+=1),C<.2&&(o[E+2]+=1),L<.2&&(o[E+4]+=1))}}function v(E){a.push(E.x,E.y,E.z)}function m(E,A){var C=E*3;A.x=e[C+0],A.y=e[C+1],A.z=e[C+2]}function y(){for(var E=new ee,A=new ee,C=new ee,L=new ee,I=new Ce,j=new Ce,q=new Ce,ne=0,W=0;ne<a.length;ne+=9,W+=6){E.set(a[ne+0],a[ne+1],a[ne+2]),A.set(a[ne+3],a[ne+4],a[ne+5]),C.set(a[ne+6],a[ne+7],a[ne+8]),I.set(o[W+0],o[W+1]),j.set(o[W+2],o[W+3]),q.set(o[W+4],o[W+5]),L.copy(E).add(A).add(C).divideScalar(3);var oe=M(L);_(I,W+0,E,oe),_(j,W+2,A,oe),_(q,W+4,C,oe)}}function _(E,A,C,L){L<0&&E.x===1&&(o[A]=E.x-1),C.x===0&&C.z===0&&(o[A]=L/2/Math.PI+.5)}function M(E){return Math.atan2(E.z,-E.x)}function T(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}lr.prototype=Object.create(ke.prototype);lr.prototype.constructor=lr;function Wu(e,t){ot.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Uo(e,t)),this.mergeVertices()}Wu.prototype=Object.create(ot.prototype);Wu.prototype.constructor=Wu;function Uo(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];lr.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}Uo.prototype=Object.create(lr.prototype);Uo.prototype.constructor=Uo;function qu(e,t){ot.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hs(e,t)),this.mergeVertices()}qu.prototype=Object.create(ot.prototype);qu.prototype.constructor=qu;function hs(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];lr.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}hs.prototype=Object.create(lr.prototype);hs.prototype.constructor=hs;function Xu(e,t){ot.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bo(e,t)),this.mergeVertices()}Xu.prototype=Object.create(ot.prototype);Xu.prototype.constructor=Xu;function Bo(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];lr.call(this,r,a,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}Bo.prototype=Object.create(lr.prototype);Bo.prototype.constructor=Bo;function Yu(e,t){ot.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Po(e,t)),this.mergeVertices()}Yu.prototype=Object.create(ot.prototype);Yu.prototype.constructor=Yu;function Po(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];lr.call(this,a,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}Po.prototype=Object.create(lr.prototype);Po.prototype.constructor=Po;function Zu(e,t,n,r,a,o){ot.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var u=new zo(e,t,n,r,a);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals,this.fromBufferGeometry(u),this.mergeVertices()}Zu.prototype=Object.create(ot.prototype);Zu.prototype.constructor=Zu;function zo(e,t,n,r,a){ke.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},t=t||64,n=n||1,r=r||8,a=a||!1;var o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var u=new ee,c=new ee,f=new Ce,d=new ee,p,v,m=[],y=[],_=[],M=[];T(),this.setIndex(M),this.addAttribute("position",new De(m,3)),this.addAttribute("normal",new De(y,3)),this.addAttribute("uv",new De(_,2));function T(){for(p=0;p<t;p++)E(p);E(a===!1?t:0),C(),A()}function E(L){d=e.getPointAt(L/t,d);var I=o.normals[L],j=o.binormals[L];for(v=0;v<=r;v++){var q=v/r*Math.PI*2,ne=Math.sin(q),W=-Math.cos(q);c.x=W*I.x+ne*j.x,c.y=W*I.y+ne*j.y,c.z=W*I.z+ne*j.z,c.normalize(),y.push(c.x,c.y,c.z),u.x=d.x+n*c.x,u.y=d.y+n*c.y,u.z=d.z+n*c.z,m.push(u.x,u.y,u.z)}}function A(){for(v=1;v<=t;v++)for(p=1;p<=r;p++){var L=(r+1)*(v-1)+(p-1),I=(r+1)*v+(p-1),j=(r+1)*v+p,q=(r+1)*(v-1)+p;M.push(L,I,q),M.push(I,j,q)}}function C(){for(p=0;p<=t;p++)for(v=0;v<=r;v++)f.x=p/t,f.y=v/r,_.push(f.x,f.y)}}zo.prototype=Object.create(ke.prototype);zo.prototype.constructor=zo;function Qu(e,t,n,r,a,o,u){ot.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:a,q:o},u!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Fo(e,t,n,r,a,o)),this.mergeVertices()}Qu.prototype=Object.create(ot.prototype);Qu.prototype.constructor=Qu;function Fo(e,t,n,r,a,o){ke.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:a,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,a=a||2,o=o||3;var u=[],c=[],f=[],d=[],p,v,m=new ee,y=new ee,_=new ee,M=new ee,T=new ee,E=new ee,A=new ee;for(p=0;p<=n;++p){var C=p/n*a*Math.PI*2;for(ae(C,a,o,e,_),ae(C+.01,a,o,e,M),E.subVectors(M,_),A.addVectors(M,_),T.crossVectors(E,A),A.crossVectors(T,E),T.normalize(),A.normalize(),v=0;v<=r;++v){var L=v/r*Math.PI*2,I=-t*Math.cos(L),j=t*Math.sin(L);m.x=_.x+(I*A.x+j*T.x),m.y=_.y+(I*A.y+j*T.y),m.z=_.z+(I*A.z+j*T.z),c.push(m.x,m.y,m.z),y.subVectors(m,_).normalize(),f.push(y.x,y.y,y.z),d.push(p/n),d.push(v/r)}}for(v=1;v<=n;v++)for(p=1;p<=r;p++){var q=(r+1)*(v-1)+(p-1),ne=(r+1)*v+(p-1),W=(r+1)*v+p,oe=(r+1)*(v-1)+p;u.push(q,ne,oe),u.push(ne,W,oe)}this.setIndex(u),this.addAttribute("position",new De(c,3)),this.addAttribute("normal",new De(f,3)),this.addAttribute("uv",new De(d,2));function ae(he,fe,se,z,N){var $=Math.cos(he),x=Math.sin(he),S=se/fe*he,w=Math.cos(S);N.x=z*(2+w)*.5*$,N.y=z*(2+w)*x*.5,N.z=z*Math.sin(S)*.5}}Fo.prototype=Object.create(ke.prototype);Fo.prototype.constructor=Fo;function Ku(e,t,n,r,a){ot.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:a},this.fromBufferGeometry(new Io(e,t,n,r,a)),this.mergeVertices()}Ku.prototype=Object.create(ot.prototype);Ku.prototype.constructor=Ku;function Io(e,t,n,r,a){ke.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:a},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,a=a||Math.PI*2;var o=[],u=[],c=[],f=[],d=new ee,p=new ee,v=new ee,m,y;for(m=0;m<=n;m++)for(y=0;y<=r;y++){var _=y/r*a,M=m/n*Math.PI*2;p.x=(e+t*Math.cos(M))*Math.cos(_),p.y=(e+t*Math.cos(M))*Math.sin(_),p.z=t*Math.sin(M),u.push(p.x,p.y,p.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),v.subVectors(p,d).normalize(),c.push(v.x,v.y,v.z),f.push(y/r),f.push(m/n)}for(m=1;m<=n;m++)for(y=1;y<=r;y++){var T=(r+1)*m+y-1,E=(r+1)*(m-1)+y-1,A=(r+1)*(m-1)+y,C=(r+1)*m+y;o.push(T,E,C),o.push(E,A,C)}this.setIndex(o),this.addAttribute("position",new De(u,3)),this.addAttribute("normal",new De(c,3)),this.addAttribute("uv",new De(f,2))}Io.prototype=Object.create(ke.prototype);Io.prototype.constructor=Io;var g3={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,a=r?t[0]*n:e.length,o=I1(e,0,a,n,!0),u=[];if(!o)return u;var c,f,d,p,v,m,y;if(r&&(o=w3(e,t,o,n)),e.length>80*n){c=d=e[0],f=p=e[1];for(var _=n;_<a;_+=n)v=e[_],m=e[_+1],v<c&&(c=v),m<f&&(f=m),v>d&&(d=v),m>p&&(p=m);y=Math.max(d-c,p-f),y=y!==0?1/y:0}return $u(o,u,n,c,f,y),u}};function I1(e,t,n,r,a){var o,u;if(a===N3(e,t,n,r)>0)for(o=t;o<n;o+=r)u=aw(o,e[o],e[o+1],u);else for(o=n-r;o>=t;o-=r)u=aw(o,e[o],e[o+1],u);return u&&$a(u,u.next)&&(tc(u),u=u.next),u}function Ju(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&($a(n,n.next)||Zn(n.prev,n,n.next)===0)){if(tc(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function $u(e,t,n,r,a,o,u){if(e){!u&&o&&S3(e,r,a,o);for(var c=e,f,d;e.prev!==e.next;){if(f=e.prev,d=e.next,o?b3(e,r,a,o):y3(e)){t.push(f.i/n),t.push(e.i/n),t.push(d.i/n),tc(e),e=d.next,c=d.next;continue}if(e=d,e===c){u?u===1?(e=x3(e,t,n),$u(e,t,n,r,a,o,2)):u===2&&_3(e,t,n,r,a,o):$u(Ju(e),t,n,r,a,o,1);break}}}}function y3(e){var t=e.prev,n=e,r=e.next;if(Zn(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(ch(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&Zn(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function b3(e,t,n,r){var a=e.prev,o=e,u=e.next;if(Zn(a,o,u)>=0)return!1;for(var c=a.x<o.x?a.x<u.x?a.x:u.x:o.x<u.x?o.x:u.x,f=a.y<o.y?a.y<u.y?a.y:u.y:o.y<u.y?o.y:u.y,d=a.x>o.x?a.x>u.x?a.x:u.x:o.x>u.x?o.x:u.x,p=a.y>o.y?a.y>u.y?a.y:u.y:o.y>u.y?o.y:u.y,v=Vm(c,f,t,n,r),m=Vm(d,p,t,n,r),y=e.nextZ;y&&y.z<=m;){if(y!==e.prev&&y!==e.next&&ch(a.x,a.y,o.x,o.y,u.x,u.y,y.x,y.y)&&Zn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(y=e.prevZ;y&&y.z>=v;){if(y!==e.prev&&y!==e.next&&ch(a.x,a.y,o.x,o.y,u.x,u.y,y.x,y.y)&&Zn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}return!0}function x3(e,t,n){var r=e;do{var a=r.prev,o=r.next.next;!$a(a,o)&&G1(a,r,r.next,o)&&ec(a,o)&&ec(o,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(o.i/n),tc(r),tc(r.next),r=e=o),r=r.next}while(r!==e);return r}function _3(e,t,n,r,a,o){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&C3(u,c)){var f=k1(u,c);u=Ju(u,u.next),f=Ju(f,f.next),$u(u,t,n,r,a,o),$u(f,t,n,r,a,o);return}c=c.next}u=u.next}while(u!==e)}function w3(e,t,n,r){var a=[],o,u,c,f,d;for(o=0,u=t.length;o<u;o++)c=t[o]*r,f=o<u-1?t[o+1]*r:e.length,d=I1(e,c,f,r,!1),d===d.next&&(d.steiner=!0),a.push(R3(d));for(a.sort(E3),o=0;o<a.length;o++)M3(a[o],n),n=Ju(n,n.next);return n}function E3(e,t){return e.x-t.x}function M3(e,t){if(t=T3(e,t),t){var n=k1(t,e);Ju(n,n.next)}}function T3(e,t){var n=t,r=e.x,a=e.y,o=-1/0,u;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var c=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=r&&c>o){if(o=c,c===r){if(a===n.y)return n;if(a===n.next.y)return n.next}u=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!u)return null;if(r===o)return u.prev;var f=u,d=u.x,p=u.y,v=1/0,m;for(n=u.next;n!==f;)r>=n.x&&n.x>=d&&r!==n.x&&ch(a<p?r:o,a,d,p,a<p?o:r,a,n.x,n.y)&&(m=Math.abs(a-n.y)/(r-n.x),(m<v||m===v&&n.x>u.x)&&ec(n,e)&&(u=n,v=m)),n=n.next;return u}function S3(e,t,n,r){var a=e;do a.z===null&&(a.z=Vm(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,A3(a)}function A3(e){var t,n,r,a,o,u,c,f,d=1;do{for(n=e,e=null,o=null,u=0;n;){for(u++,r=n,c=0,t=0;t<d&&(c++,r=r.nextZ,!!r);t++);for(f=d;c>0||f>0&&r;)c!==0&&(f===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,c--):(a=r,r=r.nextZ,f--),o?o.nextZ=a:e=a,a.prevZ=o,o=a;n=r}o.nextZ=null,d*=2}while(u>1);return e}function Vm(e,t,n,r,a){return e=32767*(e-n)*a,t=32767*(t-r)*a,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function R3(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function ch(e,t,n,r,a,o,u,c){return(a-u)*(t-c)-(e-u)*(o-c)>=0&&(e-u)*(r-c)-(n-u)*(t-c)>=0&&(n-u)*(o-c)-(a-u)*(r-c)>=0}function C3(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!L3(e,t)&&ec(e,t)&&ec(t,e)&&O3(e,t)}function Zn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function $a(e,t){return e.x===t.x&&e.y===t.y}function G1(e,t,n,r){return $a(e,t)&&$a(n,r)||$a(e,r)&&$a(n,t)?!0:Zn(e,t,n)>0!=Zn(e,t,r)>0&&Zn(n,r,e)>0!=Zn(n,r,t)>0}function L3(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&G1(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function ec(e,t){return Zn(e.prev,e,e.next)<0?Zn(e,t,e.next)>=0&&Zn(e,e.prev,t)>=0:Zn(e,t,e.prev)<0||Zn(e,e.next,t)<0}function O3(e,t){var n=e,r=!1,a=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function k1(e,t){var n=new jm(e.i,e.x,e.y),r=new jm(t.i,t.x,t.y),a=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function aw(e,t,n,r){var a=new jm(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function tc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jm(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N3(e,t,n,r){for(var a=0,o=t,u=n-r;o<n;o+=r)a+=(e[u]-e[o])*(e[o+1]+e[u+1]),u=o;return a}var ki={area:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return n*.5},isClockWise:function(e){return ki.area(e)<0},triangulateShape:function(e,t){function n(p){var v=p.length;v>2&&p[v-1].equals(p[0])&&p.pop()}function r(p,v){for(var m=0;m<v.length;m++)p.push(v[m].x),p.push(v[m].y)}var a=[],o=[],u=[];n(e),r(a,e);var c=e.length;for(t.forEach(n),d=0;d<t.length;d++)o.push(c),c+=t[d].length,r(a,t[d]);for(var f=g3.triangulate(a,o),d=0;d<f.length;d+=3)u.push(f.slice(d,d+3));return u}};function Ra(e,t){ot.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Zr(e,t)),this.mergeVertices()}Ra.prototype=Object.create(ot.prototype);Ra.prototype.constructor=Ra;function Zr(e,t){typeof e>"u"||(ke.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}Zr.prototype=Object.create(ke.prototype);Zr.prototype.constructor=Zr;Zr.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),r=n?Array.prototype.slice.call(n.array):[],a=this.index,o=a?Array.prototype.slice.call(a.array):[];return{position:t,uv:r,index:o}};Zr.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var r=0;r<n;r++){var a=e[r];this.addShape(a,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new De(t.arrays.position,3)),this.addAttribute("uv",new De(t.arrays.uv,2))};Zr.prototype.addShape=function(e,t){var n=t.arrays?t.arrays:this.getArrays(),r=n.position,a=n.index,o=n.uv,u=[],c=t.amount!==void 0?t.amount:100,f=t.bevelThickness!==void 0?t.bevelThickness:6,d=t.bevelSize!==void 0?t.bevelSize:f-2,p=t.bevelSegments!==void 0?t.bevelSegments:3,v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.curveSegments!==void 0?t.curveSegments:12,y=t.steps!==void 0?t.steps:1,_=t.extrudePath,M,T=!1,E=t.UVGenerator!==void 0?t.UVGenerator:Ra.WorldUVGenerator,A,C,L,I;_&&(M=_.getSpacedPoints(y),T=!0,v=!1,A=t.frames!==void 0?t.frames:_.computeFrenetFrames(y,!1),C=new ee,L=new ee,I=new ee),v||(p=0,f=0,d=0);var j,q,ne,W=this,oe=e.extractPoints(m),ae=oe.shape,he=oe.holes,fe=!ki.isClockWise(ae);if(fe)for(ae=ae.reverse(),q=0,ne=he.length;q<ne;q++)j=he[q],ki.isClockWise(j)&&(he[q]=j.reverse());var se=ki.triangulateShape(ae,he),z=ae;for(q=0,ne=he.length;q<ne;q++)j=he[q],ae=ae.concat(j);function N(vt,pe,Ne){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Ne).add(vt)}var $,x,S,w,R,D=ae.length,B,H=se.length;function Q(vt,pe,Ne){var Pe,Fe,Be,$e=vt.x-pe.x,Dt=vt.y-pe.y,Lt=Ne.x-vt.x,gn=Ne.y-vt.y,Rt=$e*$e+Dt*Dt,wn=$e*gn-Dt*Lt;if(Math.abs(wn)>Number.EPSILON){var rn=Math.sqrt(Rt),Tr=Math.sqrt(Lt*Lt+gn*gn),Jn=pe.x-Dt/rn,Yi=pe.y+$e/rn,Sr=Ne.x-gn/Tr,vi=Ne.y+Lt/Tr,yn=((Sr-Jn)*gn-(vi-Yi)*Lt)/($e*gn-Dt*Lt);Pe=Jn+$e*yn-vt.x,Fe=Yi+Dt*yn-vt.y;var $n=Pe*Pe+Fe*Fe;if($n<=2)return new Ce(Pe,Fe);Be=Math.sqrt($n/2)}else{var Ar=!1;$e>Number.EPSILON?Lt>Number.EPSILON&&(Ar=!0):$e<-Number.EPSILON?Lt<-Number.EPSILON&&(Ar=!0):Math.sign(Dt)===Math.sign(gn)&&(Ar=!0),Ar?(Pe=-Dt,Fe=$e,Be=Math.sqrt(Rt)):(Pe=$e,Fe=Dt,Be=Math.sqrt(Rt/2))}return new Ce(Pe/Be,Fe/Be)}for(var P=[],X=0,le=z.length,Te=le-1,xe=X+1;X<le;X++,Te++,xe++)Te===le&&(Te=0),xe===le&&(xe=0),P[X]=Q(z[X],z[Te],z[xe]);var Ae=[],Oe,Ie=P.concat();for(q=0,ne=he.length;q<ne;q++){for(j=he[q],Oe=[],X=0,le=j.length,Te=le-1,xe=X+1;X<le;X++,Te++,xe++)Te===le&&(Te=0),xe===le&&(xe=0),Oe[X]=Q(j[X],j[Te],j[xe]);Ae.push(Oe),Ie=Ie.concat(Oe)}for($=0;$<p;$++){for(S=$/p,w=f*Math.cos(S*Math.PI/2),x=d*Math.sin(S*Math.PI/2),X=0,le=z.length;X<le;X++)R=N(z[X],P[X],x),mt(R.x,R.y,-w);for(q=0,ne=he.length;q<ne;q++)for(j=he[q],Oe=Ae[q],X=0,le=j.length;X<le;X++)R=N(j[X],Oe[X],x),mt(R.x,R.y,-w)}for(x=d,X=0;X<D;X++)R=v?N(ae[X],Ie[X],x):ae[X],T?(L.copy(A.normals[0]).multiplyScalar(R.x),C.copy(A.binormals[0]).multiplyScalar(R.y),I.copy(M[0]).add(L).add(C),mt(I.x,I.y,I.z)):mt(R.x,R.y,0);var ht;for(ht=1;ht<=y;ht++)for(X=0;X<D;X++)R=v?N(ae[X],Ie[X],x):ae[X],T?(L.copy(A.normals[ht]).multiplyScalar(R.x),C.copy(A.binormals[ht]).multiplyScalar(R.y),I.copy(M[ht]).add(L).add(C),mt(I.x,I.y,I.z)):mt(R.x,R.y,c/y*ht);for($=p-1;$>=0;$--){for(S=$/p,w=f*Math.cos(S*Math.PI/2),x=d*Math.sin(S*Math.PI/2),X=0,le=z.length;X<le;X++)R=N(z[X],P[X],x),mt(R.x,R.y,c+w);for(q=0,ne=he.length;q<ne;q++)for(j=he[q],Oe=Ae[q],X=0,le=j.length;X<le;X++)R=N(j[X],Oe[X],x),T?mt(R.x,R.y+M[y-1].y,M[y-1].x+w):mt(R.x,R.y,c+w)}Qe(),dt();function Qe(){var vt=r.length/3;if(v){var pe=0,Ne=D*pe;for(X=0;X<H;X++)B=se[X],Ke(B[2]+Ne,B[1]+Ne,B[0]+Ne);for(pe=y+p*2,Ne=D*pe,X=0;X<H;X++)B=se[X],Ke(B[0]+Ne,B[1]+Ne,B[2]+Ne)}else{for(X=0;X<H;X++)B=se[X],Ke(B[2],B[1],B[0]);for(X=0;X<H;X++)B=se[X],Ke(B[0]+D*y,B[1]+D*y,B[2]+D*y)}W.addGroup(vt,r.length/3-vt,t.material!==void 0?t.material:0)}function dt(){var vt=r.length/3,pe=0;for(_t(z,pe),pe+=z.length,q=0,ne=he.length;q<ne;q++)j=he[q],_t(j,pe),pe+=j.length;W.addGroup(vt,r.length/3-vt,t.extrudeMaterial!==void 0?t.extrudeMaterial:1)}function _t(vt,pe){var Ne,Pe;for(X=vt.length;--X>=0;){Ne=X,Pe=X-1,Pe<0&&(Pe=vt.length-1);var Fe=0,Be=y+p*2;for(Fe=0;Fe<Be;Fe++){var $e=D*Fe,Dt=D*(Fe+1),Lt=pe+Ne+$e,gn=pe+Pe+$e,Rt=pe+Pe+Dt,wn=pe+Ne+Dt;Kn(Lt,gn,Rt,wn)}}}function mt(vt,pe,Ne){u.push(vt),u.push(pe),u.push(Ne)}function Ke(vt,pe,Ne){on(vt),on(pe),on(Ne);var Pe=r.length/3,Fe=E.generateTopUV(W,r,Pe-3,Pe-2,Pe-1);hn(Fe[0]),hn(Fe[1]),hn(Fe[2])}function Kn(vt,pe,Ne,Pe){on(vt),on(pe),on(Pe),on(pe),on(Ne),on(Pe);var Fe=r.length/3,Be=E.generateSideWallUV(W,r,Fe-6,Fe-3,Fe-2,Fe-1);hn(Be[0]),hn(Be[1]),hn(Be[3]),hn(Be[1]),hn(Be[2]),hn(Be[3])}function on(vt){a.push(r.length/3),r.push(u[vt*3+0]),r.push(u[vt*3+1]),r.push(u[vt*3+2])}function hn(vt){o.push(vt.x),o.push(vt.y)}t.arrays||(this.setIndex(a),this.addAttribute("position",new De(r,3)),this.addAttribute("uv",new De(o,2)))};Ra.WorldUVGenerator={generateTopUV:function(e,t,n,r,a){var o=t[n*3],u=t[n*3+1],c=t[r*3],f=t[r*3+1],d=t[a*3],p=t[a*3+1];return[new Ce(o,u),new Ce(c,f),new Ce(d,p)]},generateSideWallUV:function(e,t,n,r,a,o){var u=t[n*3],c=t[n*3+1],f=t[n*3+2],d=t[r*3],p=t[r*3+1],v=t[r*3+2],m=t[a*3],y=t[a*3+1],_=t[a*3+2],M=t[o*3],T=t[o*3+1],E=t[o*3+2];return Math.abs(c-p)<.01?[new Ce(u,1-f),new Ce(d,1-v),new Ce(m,1-_),new Ce(M,1-E)]:[new Ce(c,1-f),new Ce(p,1-v),new Ce(y,1-_),new Ce(T,1-E)]}};function nc(e,t){ot.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Go(e,t)),this.mergeVertices()}nc.prototype=Object.create(ot.prototype);nc.prototype.constructor=nc;function Go(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ot;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),Zr.call(this,r,t),this.type="TextBufferGeometry"}Go.prototype=Object.create(Zr.prototype);Go.prototype.constructor=Go;function rc(e,t,n,r,a,o,u){ot.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:u},this.fromBufferGeometry(new ds(e,t,n,r,a,o,u)),this.mergeVertices()}rc.prototype=Object.create(ot.prototype);rc.prototype.constructor=rc;function ds(e,t,n,r,a,o,u){ke.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:u},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,a=a!==void 0?a:Math.PI*2,o=o!==void 0?o:0,u=u!==void 0?u:Math.PI;var c=o+u,f,d,p=0,v=[],m=new ee,y=new ee,_=[],M=[],T=[],E=[];for(d=0;d<=n;d++){var A=[],C=d/n;for(f=0;f<=t;f++){var L=f/t;m.x=-e*Math.cos(r+L*a)*Math.sin(o+C*u),m.y=e*Math.cos(o+C*u),m.z=e*Math.sin(r+L*a)*Math.sin(o+C*u),M.push(m.x,m.y,m.z),y.set(m.x,m.y,m.z).normalize(),T.push(y.x,y.y,y.z),E.push(L,1-C),A.push(p++)}v.push(A)}for(d=0;d<n;d++)for(f=0;f<t;f++){var I=v[d][f+1],j=v[d][f],q=v[d+1][f],ne=v[d+1][f+1];(d!==0||o>0)&&_.push(I,j,ne),(d!==n-1||c<Math.PI)&&_.push(j,q,ne)}this.setIndex(_),this.addAttribute("position",new De(M,3)),this.addAttribute("normal",new De(T,3)),this.addAttribute("uv",new De(E,2))}ds.prototype=Object.create(ke.prototype);ds.prototype.constructor=ds;function ic(e,t,n,r,a,o){ot.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ko(e,t,n,r,a,o)),this.mergeVertices()}ic.prototype=Object.create(ot.prototype);ic.prototype.constructor=ic;function ko(e,t,n,r,a,o){ke.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},e=e||.5,t=t||1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;var u=[],c=[],f=[],d=[],p,v=e,m=(t-e)/r,y=new ee,_=new Ce,M,T;for(M=0;M<=r;M++){for(T=0;T<=n;T++)p=a+T/n*o,y.x=v*Math.cos(p),y.y=v*Math.sin(p),c.push(y.x,y.y,y.z),f.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,d.push(_.x,_.y);v+=m}for(M=0;M<r;M++){var E=M*(n+1);for(T=0;T<n;T++){p=T+E;var A=p,C=p+n+1,L=p+n+2,I=p+1;u.push(A,C,I),u.push(C,L,I)}}this.setIndex(u),this.addAttribute("position",new De(c,3)),this.addAttribute("normal",new De(f,3)),this.addAttribute("uv",new De(d,2))}ko.prototype=Object.create(ke.prototype);ko.prototype.constructor=ko;function ac(e,t,n,r){ot.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ho(e,t,n,r)),this.mergeVertices()}ac.prototype=Object.create(ot.prototype);ac.prototype.constructor=ac;function Ho(e,t,n,r){ke.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=pt.clamp(r,0,Math.PI*2);var a=[],o=[],u=[],c,f=1/t,d=new ee,p=new Ce,v,m;for(v=0;v<=t;v++){var y=n+v*f*r,_=Math.sin(y),M=Math.cos(y);for(m=0;m<=e.length-1;m++)d.x=e[m].x*_,d.y=e[m].y,d.z=e[m].x*M,o.push(d.x,d.y,d.z),p.x=v/t,p.y=m/(e.length-1),u.push(p.x,p.y)}for(v=0;v<t;v++)for(m=0;m<e.length-1;m++){c=m+v*e.length;var T=c,E=c+e.length,A=c+e.length+1,C=c+1;a.push(T,E,C),a.push(E,A,C)}if(this.setIndex(a),this.addAttribute("position",new De(o,3)),this.addAttribute("uv",new De(u,2)),this.computeVertexNormals(),r===Math.PI*2){var L=this.attributes.normal.array,I=new ee,j=new ee,q=new ee;for(c=t*e.length*3,v=0,m=0;v<e.length;v++,m+=3)I.x=L[m+0],I.y=L[m+1],I.z=L[m+2],j.x=L[c+m+0],j.y=L[c+m+1],j.z=L[c+m+2],q.addVectors(I,j).normalize(),L[m+0]=L[c+m+0]=q.x,L[m+1]=L[c+m+1]=q.y,L[m+2]=L[c+m+2]=q.z}}Ho.prototype=Object.create(ke.prototype);Ho.prototype.constructor=Ho;function ps(e,t){ot.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new vs(e,t)),this.mergeVertices()}ps.prototype=Object.create(ot.prototype);ps.prototype.constructor=ps;ps.prototype.toJSON=function(){var e=ot.prototype.toJSON.call(this),t=this.parameters.shapes;return H1(t,e)};function vs(e,t){ke.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],a=[],o=[],u=0,c=0;if(Array.isArray(e)===!1)d(e);else for(var f=0;f<e.length;f++)d(e[f]),this.addGroup(u,c,f),u+=c,c=0;this.setIndex(n),this.addAttribute("position",new De(r,3)),this.addAttribute("normal",new De(a,3)),this.addAttribute("uv",new De(o,2));function d(p){var v,m,y,_=r.length/3,M=p.extractPoints(t),T=M.shape,E=M.holes;if(ki.isClockWise(T)===!1)for(T=T.reverse(),v=0,m=E.length;v<m;v++)y=E[v],ki.isClockWise(y)===!0&&(E[v]=y.reverse());var A=ki.triangulateShape(T,E);for(v=0,m=E.length;v<m;v++)y=E[v],T=T.concat(y);for(v=0,m=T.length;v<m;v++){var C=T[v];r.push(C.x,C.y,0),a.push(0,0,1),o.push(C.x,C.y)}for(v=0,m=A.length;v<m;v++){var L=A[v],I=L[0]+_,j=L[1]+_,q=L[2]+_;n.push(I,j,q),c+=3}}}vs.prototype=Object.create(ke.prototype);vs.prototype.constructor=vs;vs.prototype.toJSON=function(){var e=ke.prototype.toJSON.call(this),t=this.parameters.shapes;return H1(t,e)};function H1(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}function Vo(e,t){ke.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;var n=[],r=Math.cos(pt.DEG2RAD*t),a=[0,0],o={},u,c,f,d=["a","b","c"],p;e.isBufferGeometry?(p=new ot,p.fromBufferGeometry(e)):p=e.clone(),p.mergeVertices(),p.computeFaceNormals();for(var v=p.vertices,m=p.faces,y=0,_=m.length;y<_;y++)for(var M=m[y],T=0;T<3;T++)u=M[d[T]],c=M[d[(T+1)%3]],a[0]=Math.min(u,c),a[1]=Math.max(u,c),f=a[0]+","+a[1],o[f]===void 0?o[f]={index1:a[0],index2:a[1],face1:y,face2:void 0}:o[f].face2=y;for(f in o){var E=o[f];if(E.face2===void 0||m[E.face1].normal.dot(m[E.face2].normal)<=r){var A=v[E.index1];n.push(A.x,A.y,A.z),A=v[E.index2],n.push(A.x,A.y,A.z)}}this.addAttribute("position",new De(n,3))}Vo.prototype=Object.create(ke.prototype);Vo.prototype.constructor=Vo;function ms(e,t,n,r,a,o,u,c){ot.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:c},this.fromBufferGeometry(new ji(e,t,n,r,a,o,u,c)),this.mergeVertices()}ms.prototype=Object.create(ot.prototype);ms.prototype.constructor=ms;function ji(e,t,n,r,a,o,u,c){ke.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:c};var f=this;e=e!==void 0?e:1,t=t!==void 0?t:1,n=n||1,r=Math.floor(r)||8,a=Math.floor(a)||1,o=o!==void 0?o:!1,u=u!==void 0?u:0,c=c!==void 0?c:Math.PI*2;var d=[],p=[],v=[],m=[],y=0,_=[],M=n/2,T=0;E(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(d),this.addAttribute("position",new De(p,3)),this.addAttribute("normal",new De(v,3)),this.addAttribute("uv",new De(m,2));function E(){var C,L,I=new ee,j=new ee,q=0,ne=(t-e)/n;for(L=0;L<=a;L++){var W=[],oe=L/a,ae=oe*(t-e)+e;for(C=0;C<=r;C++){var he=C/r,fe=he*c+u,se=Math.sin(fe),z=Math.cos(fe);j.x=ae*se,j.y=-oe*n+M,j.z=ae*z,p.push(j.x,j.y,j.z),I.set(se,ne,z).normalize(),v.push(I.x,I.y,I.z),m.push(he,1-oe),W.push(y++)}_.push(W)}for(C=0;C<r;C++)for(L=0;L<a;L++){var N=_[L][C],$=_[L+1][C],x=_[L+1][C+1],S=_[L][C+1];d.push(N,$,S),d.push($,x,S),q+=6}f.addGroup(T,q,0),T+=q}function A(C){var L,I,j,q=new Ce,ne=new ee,W=0,oe=C===!0?e:t,ae=C===!0?1:-1;for(I=y,L=1;L<=r;L++)p.push(0,M*ae,0),v.push(0,ae,0),m.push(.5,.5),y++;for(j=y,L=0;L<=r;L++){var he=L/r,fe=he*c+u,se=Math.cos(fe),z=Math.sin(fe);ne.x=oe*z,ne.y=M*ae,ne.z=oe*se,p.push(ne.x,ne.y,ne.z),v.push(0,ae,0),q.x=se*.5+.5,q.y=z*.5*ae+.5,m.push(q.x,q.y),y++}for(L=0;L<r;L++){var N=I+L,$=j+L;C===!0?d.push($,$+1,N):d.push($+1,$,N),W+=3}f.addGroup(T,W,C===!0?1:2),T+=W}}ji.prototype=Object.create(ke.prototype);ji.prototype.constructor=ji;function sc(e,t,n,r,a,o,u){ms.call(this,0,e,t,n,r,a,o,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:u}}sc.prototype=Object.create(ms.prototype);sc.prototype.constructor=sc;function oc(e,t,n,r,a,o,u){ji.call(this,0,e,t,n,r,a,o,u),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:u}}oc.prototype=Object.create(ji.prototype);oc.prototype.constructor=oc;function lc(e,t,n,r){ot.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new jo(e,t,n,r)),this.mergeVertices()}lc.prototype=Object.create(ot.prototype);lc.prototype.constructor=lc;function jo(e,t,n,r){ke.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;var a=[],o=[],u=[],c=[],f,d,p=new ee,v=new Ce;for(o.push(0,0,0),u.push(0,0,1),c.push(.5,.5),d=0,f=3;d<=t;d++,f+=3){var m=n+d/t*r;p.x=e*Math.cos(m),p.y=e*Math.sin(m),o.push(p.x,p.y,p.z),u.push(0,0,1),v.x=(o[f]/e+1)/2,v.y=(o[f+1]/e+1)/2,c.push(v.x,v.y)}for(f=1;f<=t;f++)a.push(f,f+1,0);this.setIndex(a),this.addAttribute("position",new De(o,3)),this.addAttribute("normal",new De(u,3)),this.addAttribute("uv",new De(c,2))}jo.prototype=Object.create(ke.prototype);jo.prototype.constructor=jo;var br=Object.freeze({WireframeGeometry:No,ParametricGeometry:Vu,ParametricBufferGeometry:Do,TetrahedronGeometry:Wu,TetrahedronBufferGeometry:Uo,OctahedronGeometry:qu,OctahedronBufferGeometry:hs,IcosahedronGeometry:Xu,IcosahedronBufferGeometry:Bo,DodecahedronGeometry:Yu,DodecahedronBufferGeometry:Po,PolyhedronGeometry:ju,PolyhedronBufferGeometry:lr,TubeGeometry:Zu,TubeBufferGeometry:zo,TorusKnotGeometry:Qu,TorusKnotBufferGeometry:Fo,TorusGeometry:Ku,TorusBufferGeometry:Io,TextGeometry:nc,TextBufferGeometry:Go,SphereGeometry:rc,SphereBufferGeometry:ds,RingGeometry:ic,RingBufferGeometry:ko,PlaneGeometry:zu,PlaneBufferGeometry:fs,LatheGeometry:ac,LatheBufferGeometry:Ho,ShapeGeometry:ps,ShapeBufferGeometry:vs,ExtrudeGeometry:Ra,ExtrudeBufferGeometry:Zr,EdgesGeometry:Vo,ConeGeometry:sc,ConeBufferGeometry:oc,CylinderGeometry:ms,CylinderBufferGeometry:ji,CircleGeometry:lc,CircleBufferGeometry:jo,BoxGeometry:Ao,BoxBufferGeometry:cs});function Wo(e){xt.call(this),this.type="ShadowMaterial",this.color=new qe(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}Wo.prototype=Object.create(xt.prototype);Wo.prototype.constructor=Wo;Wo.prototype.isShadowMaterial=!0;function qo(e){Ir.call(this,e),this.type="RawShaderMaterial"}qo.prototype=Object.create(Ir.prototype);qo.prototype.constructor=qo;qo.prototype.isRawShaderMaterial=!0;function fi(e){xt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qe(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}fi.prototype=Object.create(xt.prototype);fi.prototype.constructor=fi;fi.prototype.isMeshStandardMaterial=!0;fi.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function gs(e){fi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}gs.prototype=Object.create(fi.prototype);gs.prototype.constructor=gs;gs.prototype.isMeshPhysicalMaterial=!0;gs.prototype.copy=function(e){return fi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this};function Qr(e){xt.call(this),this.type="MeshPhongMaterial",this.color=new qe(16777215),this.specular=new qe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Qr.prototype=Object.create(xt.prototype);Qr.prototype.constructor=Qr;Qr.prototype.isMeshPhongMaterial=!0;Qr.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ys(e){Qr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}ys.prototype=Object.create(Qr.prototype);ys.prototype.constructor=ys;ys.prototype.isMeshToonMaterial=!0;ys.prototype.copy=function(e){return Qr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};function bs(e){xt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}bs.prototype=Object.create(xt.prototype);bs.prototype.constructor=bs;bs.prototype.isMeshNormalMaterial=!0;bs.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function xs(e){xt.call(this),this.type="MeshLambertMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}xs.prototype=Object.create(xt.prototype);xs.prototype.constructor=xs;xs.prototype.isMeshLambertMaterial=!0;xs.prototype.copy=function(e){return xt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function _s(e){Qt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}_s.prototype=Object.create(Qt.prototype);_s.prototype.constructor=_s;_s.prototype.isLineDashedMaterial=!0;_s.prototype.copy=function(e){return Qt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var D3=Object.freeze({ShadowMaterial:Wo,SpriteMaterial:Aa,RawShaderMaterial:qo,ShaderMaterial:Ir,PointsMaterial:Yr,MeshPhysicalMaterial:gs,MeshStandardMaterial:fi,MeshPhongMaterial:Qr,MeshToonMaterial:ys,MeshNormalMaterial:bs,MeshLambertMaterial:xs,MeshDepthMaterial:Ta,MeshDistanceMaterial:Sa,MeshBasicMaterial:Er,LineDashedMaterial:_s,LineBasicMaterial:Qt,Material:xt}),ws={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Hg(e,t,n){var r=this,a=!1,o=0,u=0,c=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){u++,a===!1&&r.onStart!==void 0&&r.onStart(f,o,u),a=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,u),o===u&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this}}var cr=new Hg,Oi={};function ni(e){this.manager=e!==void 0?e:cr}Object.assign(ni.prototype,{load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,o=ws.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;if(Oi[e]!==void 0){Oi[e].push({onLoad:t,onProgress:n,onError:r});return}var u=/^data:(.*?)(;base64)?,(.*)$/,c=e.match(u);if(c){var f=c[1],d=!!c[2],p=c[3];p=window.decodeURIComponent(p),d&&(p=window.atob(p));try{var v,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":for(var y=new Uint8Array(p.length),_=0;_<p.length;_++)y[_]=p.charCodeAt(_);m==="blob"?v=new Blob([y.buffer],{type:f}):v=y.buffer;break;case"document":var M=new DOMParser;v=M.parseFromString(p,f);break;case"json":v=JSON.parse(p);break;default:v=p;break}window.setTimeout(function(){t&&t(v),a.manager.itemEnd(e)},0)}catch(A){window.setTimeout(function(){r&&r(A),a.manager.itemEnd(e),a.manager.itemError(e)},0)}}else{Oi[e]=[],Oi[e].push({onLoad:t,onProgress:n,onError:r});var T=new XMLHttpRequest;T.open("GET",e,!0),T.addEventListener("load",function(A){var C=this.response;ws.add(e,C);var L=Oi[e];if(delete Oi[e],this.status===200){for(var I=0,j=L.length;I<j;I++){var q=L[I];q.onLoad&&q.onLoad(C)}a.manager.itemEnd(e)}else if(this.status===0){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var I=0,j=L.length;I<j;I++){var q=L[I];q.onLoad&&q.onLoad(C)}a.manager.itemEnd(e)}else{for(var I=0,j=L.length;I<j;I++){var q=L[I];q.onError&&q.onError(A)}a.manager.itemEnd(e),a.manager.itemError(e)}},!1),T.addEventListener("progress",function(A){for(var C=Oi[e],L=0,I=C.length;L<I;L++){var j=C[L];j.onProgress&&j.onProgress(A)}},!1),T.addEventListener("error",function(A){var C=Oi[e];delete Oi[e];for(var L=0,I=C.length;L<I;L++){var j=C[L];j.onError&&j.onError(A)}a.manager.itemEnd(e),a.manager.itemError(e)},!1),this.responseType!==void 0&&(T.responseType=this.responseType),this.withCredentials!==void 0&&(T.withCredentials=this.withCredentials),T.overrideMimeType&&T.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var E in this.requestHeader)T.setRequestHeader(E,this.requestHeader[E]);T.send(null)}return a.manager.itemStart(e),T},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});function V1(e){this.manager=e!==void 0?e:cr,this._parser=null}Object.assign(V1.prototype,{load:function(e,t,n,r){var a=this,o=[],u=new Oo;u.image=o;var c=new ni(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer");function f(m){c.load(e[m],function(y){var _=a._parser(y,!0);o[m]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},d+=1,d===6&&(_.mipmapCount===1&&(u.minFilter=ar),u.format=_.format,u.needsUpdate=!0,t&&t(u))},n,r)}if(Array.isArray(e))for(var d=0,p=0,v=e.length;p<v;++p)f(p);else c.load(e,function(m){var y=a._parser(m,!0);if(y.isCubemap)for(var _=y.mipmaps.length/y.mipmapCount,M=0;M<_;M++){o[M]={mipmaps:[]};for(var T=0;T<y.mipmapCount;T++)o[M].mipmaps.push(y.mipmaps[M*y.mipmapCount+T]),o[M].format=y.format,o[M].width=y.width,o[M].height=y.height}else u.image.width=y.width,u.image.height=y.height,u.mipmaps=y.mipmaps;y.mipmapCount===1&&(u.minFilter=ar),u.format=y.format,u.needsUpdate=!0,t&&t(u)},n,r);return u},setPath:function(e){return this.path=e,this}});function Vg(e){this.manager=e!==void 0?e:cr,this._parser=null}Object.assign(Vg.prototype,{load:function(e,t,n,r){var a=this,o=new ss,u=new ni(this.manager);return u.setResponseType("arraybuffer"),u.load(e,function(c){var f=a._parser(c);f&&(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:xr,o.wrapT=f.wrapT!==void 0?f.wrapT:xr,o.magFilter=f.magFilter!==void 0?f.magFilter:ar,o.minFilter=f.minFilter!==void 0?f.minFilter:Cc,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps),f.mipmapCount===1&&(o.minFilter=ar),o.needsUpdate=!0,t&&t(o,f))},n,r),o}});function Lc(e){this.manager=e!==void 0?e:cr}Object.assign(Lc.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,o=ws.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",function(){ws.add(e,this),t&&t(this),a.manager.itemEnd(e)},!1),u.addEventListener("error",function(c){r&&r(c),a.manager.itemEnd(e),a.manager.itemError(e)},!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),a.manager.itemStart(e),u.src=e,u},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function jg(e){this.manager=e!==void 0?e:cr}Object.assign(jg.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var a=new Ma,o=new Lc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var u=0;function c(d){o.load(e[d],function(p){a.images[d]=p,u++,u===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(var f=0;f<e.length;++f)c(f);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function Yh(e){this.manager=e!==void 0?e:cr}Object.assign(Yh.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var a=new sn,o=new Lc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(u){a.image=u;var c=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;a.format=c?Eo:ui,a.needsUpdate=!0,t!==void 0&&t(a)},n,r),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function Ze(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ze.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),a,o=0;for(t.push(0),a=1;a<=e;a++)n=this.getPoint(a/e),o+=n.distanceTo(r),t.push(o),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,a=n.length,o;t?o=t:o=e*n[a-1];for(var u=0,c=a-1,f;u<=c;)if(r=Math.floor(u+(c-u)/2),f=n[r]-o,f<0)u=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,n[r]===o)return r/(a-1);var d=n[r],p=n[r+1],v=p-d,m=(o-d)/v,y=(r+m)/(a-1);return y},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var a=this.getPoint(n),o=this.getPoint(r),u=o.clone().sub(a);return u.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n=new ee,r=[],a=[],o=[],u=new ee,c=new ut,f,d,p;for(f=0;f<=e;f++)d=f/e,r[f]=this.getTangentAt(d),r[f].normalize();a[0]=new ee,o[0]=new ee;var v=Number.MAX_VALUE,m=Math.abs(r[0].x),y=Math.abs(r[0].y),_=Math.abs(r[0].z);for(m<=v&&(v=m,n.set(1,0,0)),y<=v&&(v=y,n.set(0,1,0)),_<=v&&n.set(0,0,1),u.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],u),o[0].crossVectors(r[0],a[0]),f=1;f<=e;f++)a[f]=a[f-1].clone(),o[f]=o[f-1].clone(),u.crossVectors(r[f-1],r[f]),u.length()>Number.EPSILON&&(u.normalize(),p=Math.acos(pt.clamp(r[f-1].dot(r[f]),-1,1)),a[f].applyMatrix4(c.makeRotationAxis(u,p))),o[f].crossVectors(r[f],a[f]);if(t===!0)for(p=Math.acos(pt.clamp(a[0].dot(a[e]),-1,1)),p/=e,r[0].dot(u.crossVectors(a[0],a[e]))>0&&(p=-p),f=1;f<=e;f++)a[f].applyMatrix4(c.makeRotationAxis(r[f],p*f)),o[f].crossVectors(r[f],a[f]);return{tangents:r,normals:a,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function Mr(e,t,n,r,a,o,u,c){Ze.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=a||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=u||!1,this.aRotation=c||0}Mr.prototype=Object.create(Ze.prototype);Mr.prototype.constructor=Mr;Mr.prototype.isEllipseCurve=!0;Mr.prototype.getPoint=function(e,t){for(var n=t||new Ce,r=Math.PI*2,a=this.aEndAngle-this.aStartAngle,o=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(o?a=0:a=r),this.aClockwise===!0&&!o&&(a===r?a=-r:a=a-r);var u=this.aStartAngle+e*a,c=this.aX+this.xRadius*Math.cos(u),f=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){var d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),v=c-this.aX,m=f-this.aY;c=v*d-m*p+this.aX,f=v*p+m*d+this.aY}return n.set(c,f)};Mr.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};Mr.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};Mr.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function Xo(e,t,n,r,a,o){Mr.call(this,e,t,n,n,r,a,o),this.type="ArcCurve"}Xo.prototype=Object.create(Mr.prototype);Xo.prototype.constructor=Xo;Xo.prototype.isArcCurve=!0;function Wg(){var e=0,t=0,n=0,r=0;function a(o,u,c,f){e=o,t=c,n=-3*o+3*u-2*c-f,r=2*o-2*u+c+f}return{initCatmullRom:function(o,u,c,f,d){a(u,c,d*(c-o),d*(f-u))},initNonuniformCatmullRom:function(o,u,c,f,d,p,v){var m=(u-o)/d-(c-o)/(d+p)+(c-u)/p,y=(c-u)/p-(f-u)/(p+v)+(f-c)/v;m*=p,y*=p,a(u,c,m,y)},calc:function(o){var u=o*o,c=u*o;return e+t*o+n*u+r*c}}}var Hf=new ee,im=new Wg,am=new Wg,sm=new Wg;function Xn(e,t,n,r){Ze.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}Xn.prototype=Object.create(Ze.prototype);Xn.prototype.constructor=Xn;Xn.prototype.isCatmullRomCurve3=!0;Xn.prototype.getPoint=function(e,t){var n=t||new ee,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e,u=Math.floor(o),c=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/r.length)+1)*r.length:c===0&&u===a-1&&(u=a-2,c=1);var f,d,p,v;if(this.closed||u>0?f=r[(u-1)%a]:(Hf.subVectors(r[0],r[1]).add(r[0]),f=Hf),d=r[u%a],p=r[(u+1)%a],this.closed||u+2<a?v=r[(u+2)%a]:(Hf.subVectors(r[a-1],r[a-2]).add(r[a-1]),v=Hf),this.curveType==="centripetal"||this.curveType==="chordal"){var m=this.curveType==="chordal"?.5:.25,y=Math.pow(f.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(p),m),M=Math.pow(p.distanceToSquared(v),m);_<1e-4&&(_=1),y<1e-4&&(y=_),M<1e-4&&(M=_),im.initNonuniformCatmullRom(f.x,d.x,p.x,v.x,y,_,M),am.initNonuniformCatmullRom(f.y,d.y,p.y,v.y,y,_,M),sm.initNonuniformCatmullRom(f.z,d.z,p.z,v.z,y,_,M)}else this.curveType==="catmullrom"&&(im.initCatmullRom(f.x,d.x,p.x,v.x,this.tension),am.initCatmullRom(f.y,d.y,p.y,v.y,this.tension),sm.initCatmullRom(f.z,d.z,p.z,v.z,this.tension));return n.set(im.calc(c),am.calc(c),sm.calc(c)),n};Xn.prototype.copy=function(e){Ze.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};Xn.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};Xn.prototype.fromJSON=function(e){Ze.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new ee().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function sw(e,t,n,r,a){var o=(r-t)*.5,u=(a-n)*.5,c=e*e,f=e*c;return(2*n-2*r+o+u)*f+(-3*n+3*r-2*o-u)*c+o*e+n}function U3(e,t){var n=1-e;return n*n*t}function B3(e,t){return 2*(1-e)*e*t}function P3(e,t){return e*e*t}function xu(e,t,n,r){return U3(e,t)+B3(e,n)+P3(e,r)}function z3(e,t){var n=1-e;return n*n*n*t}function F3(e,t){var n=1-e;return 3*n*n*e*t}function I3(e,t){return 3*(1-e)*e*e*t}function G3(e,t){return e*e*e*t}function _u(e,t,n,r,a){return z3(e,t)+F3(e,n)+I3(e,r)+G3(e,a)}function Kr(e,t,n,r){Ze.call(this),this.type="CubicBezierCurve",this.v0=e||new Ce,this.v1=t||new Ce,this.v2=n||new Ce,this.v3=r||new Ce}Kr.prototype=Object.create(Ze.prototype);Kr.prototype.constructor=Kr;Kr.prototype.isCubicBezierCurve=!0;Kr.prototype.getPoint=function(e,t){var n=t||new Ce,r=this.v0,a=this.v1,o=this.v2,u=this.v3;return n.set(_u(e,r.x,a.x,o.x,u.x),_u(e,r.y,a.y,o.y,u.y)),n};Kr.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Kr.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Kr.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function hi(e,t,n,r){Ze.call(this),this.type="CubicBezierCurve3",this.v0=e||new ee,this.v1=t||new ee,this.v2=n||new ee,this.v3=r||new ee}hi.prototype=Object.create(Ze.prototype);hi.prototype.constructor=hi;hi.prototype.isCubicBezierCurve3=!0;hi.prototype.getPoint=function(e,t){var n=t||new ee,r=this.v0,a=this.v1,o=this.v2,u=this.v3;return n.set(_u(e,r.x,a.x,o.x,u.x),_u(e,r.y,a.y,o.y,u.y),_u(e,r.z,a.z,o.z,u.z)),n};hi.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};hi.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};hi.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function ur(e,t){Ze.call(this),this.type="LineCurve",this.v1=e||new Ce,this.v2=t||new Ce}ur.prototype=Object.create(Ze.prototype);ur.prototype.constructor=ur;ur.prototype.isLineCurve=!0;ur.prototype.getPoint=function(e,t){var n=t||new Ce;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};ur.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};ur.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};ur.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};ur.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};ur.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Jr(e,t){Ze.call(this),this.type="LineCurve3",this.v1=e||new ee,this.v2=t||new ee}Jr.prototype=Object.create(Ze.prototype);Jr.prototype.constructor=Jr;Jr.prototype.isLineCurve3=!0;Jr.prototype.getPoint=function(e,t){var n=t||new ee;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Jr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Jr.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Jr.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Jr.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function $r(e,t,n){Ze.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ce,this.v1=t||new Ce,this.v2=n||new Ce}$r.prototype=Object.create(Ze.prototype);$r.prototype.constructor=$r;$r.prototype.isQuadraticBezierCurve=!0;$r.prototype.getPoint=function(e,t){var n=t||new Ce,r=this.v0,a=this.v1,o=this.v2;return n.set(xu(e,r.x,a.x,o.x),xu(e,r.y,a.y,o.y)),n};$r.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};$r.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};$r.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function di(e,t,n){Ze.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new ee,this.v1=t||new ee,this.v2=n||new ee}di.prototype=Object.create(Ze.prototype);di.prototype.constructor=di;di.prototype.isQuadraticBezierCurve3=!0;di.prototype.getPoint=function(e,t){var n=t||new ee,r=this.v0,a=this.v1,o=this.v2;return n.set(xu(e,r.x,a.x,o.x),xu(e,r.y,a.y,o.y),xu(e,r.z,a.z,o.z)),n};di.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};di.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};di.prototype.fromJSON=function(e){return Ze.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function ei(e){Ze.call(this),this.type="SplineCurve",this.points=e||[]}ei.prototype=Object.create(Ze.prototype);ei.prototype.constructor=ei;ei.prototype.isSplineCurve=!0;ei.prototype.getPoint=function(e,t){var n=t||new Ce,r=this.points,a=(r.length-1)*e,o=Math.floor(a),u=a-o,c=r[o===0?o:o-1],f=r[o],d=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return n.set(sw(u,c.x,f.x,d.x,p.x),sw(u,c.y,f.y,d.y,p.y)),n};ei.prototype.copy=function(e){Ze.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this};ei.prototype.toJSON=function(){var e=Ze.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e};ei.prototype.fromJSON=function(e){Ze.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new Ce().fromArray(r))}return this};var k3=Object.freeze({ArcCurve:Xo,CatmullRomCurve3:Xn,CubicBezierCurve:Kr,CubicBezierCurve3:hi,EllipseCurve:Mr,LineCurve:ur,LineCurve3:Jr,QuadraticBezierCurve:$r,QuadraticBezierCurve3:di,SplineCurve:ei});function zi(){Ze.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}zi.prototype=Object.assign(Object.create(Ze.prototype),{constructor:zi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ur(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var a=n[r]-t,o=this.curves[r],u=o.getLength(),c=u===0?0:1-a/u;return o.getPointAt(c)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n,r=0,a=this.curves;r<a.length;r++)for(var o=a[r],u=o&&o.isEllipseCurve?e*2:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,c=o.getPoints(u),f=0;f<c.length;f++){var d=c[f];n&&n.equals(d)||(t.push(d),n=d)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Ze.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Ze.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Ze.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(new k3[r.type]().fromJSON(r))}return this}});function Wr(e){zi.call(this),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}Wr.prototype=Object.assign(Object.create(zi.prototype),{constructor:Wr,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ur(this.currentPoint.clone(),new Ce(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var a=new $r(this.currentPoint.clone(),new Ce(e,t),new Ce(n,r));this.curves.push(a),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,a,o){var u=new Kr(this.currentPoint.clone(),new Ce(e,t),new Ce(n,r),new Ce(a,o));this.curves.push(u),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new ei(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,a,o){var u=this.currentPoint.x,c=this.currentPoint.y;this.absarc(e+u,t+c,n,r,a,o)},absarc:function(e,t,n,r,a,o){this.absellipse(e,t,n,n,r,a,o)},ellipse:function(e,t,n,r,a,o,u,c){var f=this.currentPoint.x,d=this.currentPoint.y;this.absellipse(e+f,t+d,n,r,a,o,u,c)},absellipse:function(e,t,n,r,a,o,u,c){var f=new Mr(e,t,n,r,a,o,u,c);if(this.curves.length>0){var d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);var p=f.getPoint(1);this.currentPoint.copy(p)},copy:function(e){return zi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=zi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return zi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function _a(e){Wr.call(this,e),this.uuid=pt.generateUUID(),this.type="Shape",this.holes=[]}_a.prototype=Object.assign(Object.create(Wr.prototype),{constructor:_a,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Wr.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Wr.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Wr.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(new Wr().fromJSON(r))}return this}});function mn(e,t){Ue.call(this),this.type="Light",this.color=new qe(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}mn.prototype=Object.assign(Object.create(Ue.prototype),{constructor:mn,isLight:!0,copy:function(e){return Ue.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Ue.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function fh(e,t,n){mn.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Ue.DefaultUp),this.updateMatrix(),this.groundColor=new qe(t)}fh.prototype=Object.assign(Object.create(mn.prototype),{constructor:fh,isHemisphereLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Ds(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Ce(512,512),this.map=null,this.matrix=new ut}Object.assign(Ds.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function hh(){Ds.call(this,new Nn(50,1,.5,500))}hh.prototype=Object.assign(Object.create(Ds.prototype),{constructor:hh,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=pt.RAD2DEG*2*e.angle,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=r,t.far=a,t.updateProjectionMatrix())}});function dh(e,t,n,r,a,o){mn.call(this,e,t),this.type="SpotLight",this.position.copy(Ue.DefaultUp),this.updateMatrix(),this.target=new Ue,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(u){this.intensity=u/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=a!==void 0?a:0,this.decay=o!==void 0?o:1,this.shadow=new hh}dh.prototype=Object.assign(Object.create(mn.prototype),{constructor:dh,isSpotLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function ph(e,t,n,r){mn.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new Ds(new Nn(90,1,.5,500))}ph.prototype=Object.assign(Object.create(mn.prototype),{constructor:ph,isPointLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function vh(){Ds.call(this,new So(-5,5,5,-5,.5,500))}vh.prototype=Object.assign(Object.create(Ds.prototype),{constructor:vh});function mh(e,t){mn.call(this,e,t),this.type="DirectionalLight",this.position.copy(Ue.DefaultUp),this.updateMatrix(),this.target=new Ue,this.shadow=new vh}mh.prototype=Object.assign(Object.create(mn.prototype),{constructor:mh,isDirectionalLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function gh(e,t){mn.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}gh.prototype=Object.assign(Object.create(mn.prototype),{constructor:gh,isAmbientLight:!0});function yh(e,t,n,r){mn.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}yh.prototype=Object.assign(Object.create(mn.prototype),{constructor:yh,isRectAreaLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});function bh(e,t,n,r){Dn.call(this,e,t,n,r)}bh.prototype=Object.assign(Object.create(Dn.prototype),{constructor:bh,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Au,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function xh(e,t,n){Dn.call(this,e,t,n)}xh.prototype=Object.assign(Object.create(Dn.prototype),{constructor:xh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Au,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function wr(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(wr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var u=n+2;;){if(r===void 0){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===u)break;if(a=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=a)){var c=t[1];e<c&&(n=2,a=c);for(var u=n-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=a,a=t[--n-1],e>=a)break t}o=n,n=0;break n}break e}for(;n<o;){var f=n+o>>>1;e<t[f]?o=f:n=f+1}if(r=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,o=0;o!==r;++o)t[o]=n[a+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(wr.prototype,{beforeStart_:wr.prototype.copySampleValue_,afterEnd_:wr.prototype.copySampleValue_});function _h(e,t,n,r){wr.call(this,e,t,n,r)}_h.prototype=Object.assign(Object.create(wr.prototype),{constructor:_h,interpolate_:function(e,t,n,r){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=e*u,f=(n-t)/(r-t),d=c+u;c!==d;c+=4)Tn.slerpFlat(a,0,o,c-u,o,c,f);return a}});function uc(e,t,n,r){Dn.call(this,e,t,n,r)}uc.prototype=Object.assign(Object.create(Dn.prototype),{constructor:uc,ValueTypeName:"quaternion",DefaultInterpolation:bu,InterpolantFactoryMethodLinear:function(e){return new _h(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function wh(e,t,n,r){Dn.call(this,e,t,n,r)}wh.prototype=Object.assign(Object.create(Dn.prototype),{constructor:wh,ValueTypeName:"color"});function Yo(e,t,n,r){Dn.call(this,e,t,n,r)}Yo.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Yo,ValueTypeName:"number"});function Eh(e,t,n,r){wr.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Eh.prototype=Object.assign(Object.create(wr.prototype),{constructor:Eh,DefaultSettings_:{endingStart:is,endingEnd:is},intervalChanged_:function(e,t,n){var r=this.parameterPositions,a=e-2,o=e+1,u=r[a],c=r[o];if(u===void 0)switch(this.getSettings_().endingStart){case Ja:a=e,u=2*t-n;break;case Ru:a=r.length-2,u=t+r[a]-r[a+1];break;default:a=e,u=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Ja:o=e,c=2*n-t;break;case Ru:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}var f=(n-t)*.5,d=this.valueSize;this._weightPrev=f/(t-u),this._weightNext=f/(c-n),this._offsetPrev=a*d,this._offsetNext=o*d},interpolate_:function(e,t,n,r){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=e*u,f=c-u,d=this._offsetPrev,p=this._offsetNext,v=this._weightPrev,m=this._weightNext,y=(n-t)/(r-t),_=y*y,M=_*y,T=-v*M+2*v*_-v*y,E=(1+v)*M+(-1.5-2*v)*_+(-.5+v)*y+1,A=(-1-m)*M+(1.5+m)*_+.5*y,C=m*M-m*_,L=0;L!==u;++L)a[L]=T*o[d+L]+E*o[f+L]+A*o[c+L]+C*o[p+L];return a}});function cc(e,t,n,r){wr.call(this,e,t,n,r)}cc.prototype=Object.assign(Object.create(wr.prototype),{constructor:cc,interpolate_:function(e,t,n,r){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=e*u,f=c-u,d=(n-t)/(r-t),p=1-d,v=0;v!==u;++v)a[v]=o[f+v]*p+o[c+v]*d;return a}});function Mh(e,t,n,r){wr.call(this,e,t,n,r)}Mh.prototype=Object.assign(Object.create(wr.prototype),{constructor:Mh,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Wn={arraySlice:function(e,t,n){return Wn.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(o,u){return e[o]-e[u]}for(var n=e.length,r=new Array(n),a=0;a!==n;++a)r[a]=a;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),o=0,u=0;u!==r;++o)for(var c=n[o]*t,f=0;f!==t;++f)a[u++]=e[c+f];return a},flattenJSON:function(e,t,n,r){for(var a=1,o=e[0];o!==void 0&&o[r]===void 0;)o=e[a++];if(o!==void 0){var u=o[r];if(u!==void 0)if(Array.isArray(u))do u=o[r],u!==void 0&&(t.push(o.time),n.push.apply(n,u)),o=e[a++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[r],u!==void 0&&(t.push(o.time),u.toArray(n,n.length)),o=e[a++];while(o!==void 0);else do u=o[r],u!==void 0&&(t.push(o.time),n.push(u)),o=e[a++];while(o!==void 0)}}};function Dn(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wn.convertArray(t,this.TimeBufferType),this.values=Wn.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}Object.assign(Dn,{parse:function(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Dn._getTrackTypeForValueTypeName(e.type);if(e.times===void 0){var n=[],r=[];Wn.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor,n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:Wn.convertArray(e.times,Array),values:Wn.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yo;case"vector":case"vector2":case"vector3":case"vector4":return Zo;case"color":return wh;case"quaternion":return uc;case"bool":case"boolean":return xh;case"string":return bh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}});Object.assign(Dn.prototype,{constructor:Dn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bu,InterpolantFactoryMethodDiscrete:function(e){return new Mh(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new cc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Eh(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Au:t=this.InterpolantFactoryMethodDiscrete;break;case bu:t=this.InterpolantFactoryMethodLinear;break;case Qf:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);console.warn("THREE.KeyframeTrack:",n);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Au;case this.InterpolantFactoryMethodLinear:return bu;case this.InterpolantFactoryMethodSmooth:return Qf}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,a=0,o=r-1;a!==r&&n[a]<e;)++a;for(;o!==-1&&n[o]>t;)--o;if(++o,a!==0||o!==r){a>=o&&(o=Math.max(o,1),a=o-1);var u=this.getValueSize();this.times=Wn.arraySlice(n,a,o),this.values=Wn.arraySlice(this.values,a*u,o*u)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,u=0;u!==a;u++){var c=n[u];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,c,o),e=!1;break}o=c}if(r!==void 0&&Wn.isTypedArray(r))for(var u=0,f=r.length;u!==f;++u){var d=r[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Qf,a=1,o=e.length-1,u=1;u<o;++u){var c=!1,f=e[u],d=e[u+1];if(f!==d&&(u!==1||f!==f[0]))if(r)c=!0;else for(var p=u*n,v=p-n,m=p+n,y=0;y!==n;++y){var _=t[p+y];if(_!==t[v+y]||_!==t[m+y]){c=!0;break}}if(c){if(u!==a){e[a]=e[u];for(var M=u*n,T=a*n,y=0;y!==n;++y)t[T+y]=t[M+y]}++a}}if(o>0){e[a]=e[o];for(var M=o*n,T=a*n,y=0;y!==n;++y)t[T+y]=t[M+y];++a}return a!==e.length&&(this.times=Wn.arraySlice(e,0,a),this.values=Wn.arraySlice(t,0,a*n)),this}});function Zo(e,t,n,r){Dn.call(this,e,t,n,r)}Zo.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Zo,ValueTypeName:"vector"});function Fr(e,t,n){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.uuid=pt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}Object.assign(Fr,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,o=n.length;a!==o;++a)t.push(Dn.parse(n[a]).scale(r));return new Fr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},a=0,o=n.length;a!==o;++a)t.push(Dn.toJSON(n[a]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var a=t.length,o=[],u=0;u<a;u++){var c=[],f=[];c.push((u+a-1)%a,u,(u+1)%a),f.push(0,1,0);var d=Wn.getKeyframeOrder(c);c=Wn.sortedArray(c,1,d),f=Wn.sortedArray(f,1,d),!r&&c[0]===0&&(c.push(a),f.push(f[0])),o.push(new Yo(".morphTargetInfluences["+t[u].name+"]",c,f).scale(1/n))}return new Fr(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,o=0,u=e.length;o<u;o++){var c=e[o],f=c.name.match(a);if(f&&f.length>1){var d=f[1],p=r[d];p||(r[d]=p=[]),p.push(c)}}var v=[];for(var d in r)v.push(Fr.CreateFromMorphTargetSequence(d,r[d],t,n));return v},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(C,L,I,j,q){if(I.length!==0){var ne=[],W=[];Wn.flattenJSON(I,ne,W,j),ne.length!==0&&q.push(new C(L,ne,W))}},r=[],a=e.name||"default",o=e.length||-1,u=e.fps||30,c=e.hierarchy||[],f=0;f<c.length;f++){var d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){for(var p={},v=0;v<d.length;v++)if(d[v].morphTargets)for(var m=0;m<d[v].morphTargets.length;m++)p[d[v].morphTargets[m]]=-1;for(var y in p){for(var _=[],M=[],m=0;m!==d[v].morphTargets.length;++m){var T=d[v];_.push(T.time),M.push(T.morphTarget===y?1:0)}r.push(new Yo(".morphTargetInfluence["+y+"]",_,M))}o=p.length*u}else{var E=".bones["+t[f].name+"]";n(Zo,E+".position",d,"pos",r),n(uc,E+".quaternion",d,"rot",r),n(Zo,E+".scale",d,"scl",r)}}if(r.length===0)return null;var A=new Fr(a,o,r);return A}});Object.assign(Fr.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});function Zh(e){this.manager=e!==void 0?e:cr,this.textures={}}Object.assign(Zh.prototype,{load:function(e,t,n,r){var a=this,o=new ni(a.manager);o.load(e,function(u){t(a.parse(JSON.parse(u)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}var r=new D3[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearCoat!==void 0&&(r.clearCoat=e.clearCoat),e.clearCoatRoughness!==void 0&&(r.clearCoatRoughness=e.clearCoatRoughness),e.uniforms!==void 0&&(r.uniforms=e.uniforms),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.vertexColors!==void 0&&(r.vertexColors=e.vertexColors),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.dithering!==void 0&&(r.dithering=e.dithering),e.visible!==void 0&&(r.visible=e.visible),e.userData!==void 0&&(r.userData=e.userData),e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalScale!==void 0){var a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Ce().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),r}});function qg(e){this.manager=e!==void 0?e:cr}Object.assign(qg.prototype,{load:function(e,t,n,r){var a=this,o=new ni(a.manager);o.load(e,function(u){t(a.parse(JSON.parse(u)))},n,r)},parse:function(e){var t=new ke,n=e.data.index;if(n!==void 0){var r=new ow[n.type](n.array);t.setIndex(new gt(r,1))}var a=e.data.attributes;for(var o in a){var u=a[o],r=new ow[u.type](u.array);t.addAttribute(o,new gt(r,u.itemSize,u.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(var f=0,d=c.length;f!==d;++f){var p=c[f];t.addGroup(p.start,p.count,p.materialIndex)}var v=e.data.boundingSphere;if(v!==void 0){var m=new ee;v.center!==void 0&&m.fromArray(v.center),t.boundingSphere=new Xr(m,v.radius)}return t}});var ow={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qo(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}Qo.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var a=t[n],o=t[n+1];if(a.test(e))return o}return null}};Object.assign(Qo.prototype,{crossOrigin:void 0,initMaterials:function(e,t,n){for(var r=[],a=0;a<e.length;++a)r[a]=this.createMaterial(e[a],t,n);return r},createMaterial:function(){var e={NoBlending:th,NormalBlending:cl,AdditiveBlending:Tg,SubtractiveBlending:Sg,MultiplyBlending:Ag,CustomBlending:Rg},t=new qe,n=new Yh,r=new Zh;return function(o,u,c){var f={};function d(y,_,M,T,E){var A=u+y,C=Qo.Handlers.get(A),L;C!==null?L=C.load(A):(n.setCrossOrigin(c),L=n.load(A)),_!==void 0&&(L.repeat.fromArray(_),_[0]!==1&&(L.wrapS=Bi),_[1]!==1&&(L.wrapT=Bi)),M!==void 0&&L.offset.fromArray(M),T!==void 0&&(T[0]==="repeat"&&(L.wrapS=Bi),T[0]==="mirror"&&(L.wrapS=rs),T[1]==="repeat"&&(L.wrapT=Bi),T[1]==="mirror"&&(L.wrapT=rs)),E!==void 0&&(L.anisotropy=E);var I=pt.generateUUID();return f[I]=L,I}var p={uuid:pt.generateUUID(),type:"MeshLambertMaterial"};for(var v in o){var m=o[v];switch(v){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":p.name=m;break;case"blending":p.blending=e[m];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",v,"is no longer supported.");break;case"colorDiffuse":p.color=t.fromArray(m).getHex();break;case"colorSpecular":p.specular=t.fromArray(m).getHex();break;case"colorEmissive":p.emissive=t.fromArray(m).getHex();break;case"specularCoef":p.shininess=m;break;case"shading":m.toLowerCase()==="basic"&&(p.type="MeshBasicMaterial"),m.toLowerCase()==="phong"&&(p.type="MeshPhongMaterial"),m.toLowerCase()==="standard"&&(p.type="MeshStandardMaterial");break;case"mapDiffuse":p.map=d(m,o.mapDiffuseRepeat,o.mapDiffuseOffset,o.mapDiffuseWrap,o.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":p.emissiveMap=d(m,o.mapEmissiveRepeat,o.mapEmissiveOffset,o.mapEmissiveWrap,o.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":p.lightMap=d(m,o.mapLightRepeat,o.mapLightOffset,o.mapLightWrap,o.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":p.aoMap=d(m,o.mapAORepeat,o.mapAOOffset,o.mapAOWrap,o.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":p.bumpMap=d(m,o.mapBumpRepeat,o.mapBumpOffset,o.mapBumpWrap,o.mapBumpAnisotropy);break;case"mapBumpScale":p.bumpScale=m;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":p.normalMap=d(m,o.mapNormalRepeat,o.mapNormalOffset,o.mapNormalWrap,o.mapNormalAnisotropy);break;case"mapNormalFactor":p.normalScale=[m,m];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":p.specularMap=d(m,o.mapSpecularRepeat,o.mapSpecularOffset,o.mapSpecularWrap,o.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":p.metalnessMap=d(m,o.mapMetalnessRepeat,o.mapMetalnessOffset,o.mapMetalnessWrap,o.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":p.roughnessMap=d(m,o.mapRoughnessRepeat,o.mapRoughnessOffset,o.mapRoughnessWrap,o.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":p.alphaMap=d(m,o.mapAlphaRepeat,o.mapAlphaOffset,o.mapAlphaWrap,o.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":p.side=Ea;break;case"doubleSided":p.side=ul;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),p.opacity=m;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":p[v]=m;break;case"vertexColors":m===!0&&(p.vertexColors=Os),m==="face"&&(p.vertexColors=Mg);break;default:console.error("THREE.Loader.createMaterial: Unsupported",v,m);break}}return p.type==="MeshBasicMaterial"&&delete p.emissive,p.type!=="MeshPhongMaterial"&&delete p.specular,p.opacity<1&&(p.transparent=!0),r.setTextures(f),r.parse(p)}}()});var Xg={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return t},extractUrlBase:function(e){var t=e.split("/");return t.length===1?"./":(t.pop(),t.join("/")+"/")}};function Yg(e){typeof e=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=e!==void 0?e:cr,this.withCredentials=!1}Object.assign(Yg.prototype,{load:function(e,t,n,r){var a=this,o=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:Xg.extractUrlBase(e),u=new ni(this.manager);u.setWithCredentials(this.withCredentials),u.load(e,function(c){var f=JSON.parse(c),d=f.metadata;if(d!==void 0){var p=d.type;if(p!==void 0){if(p.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(p.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var v=a.parse(f,o);t(v.geometry,v.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(a,o){function u(H,Q){return H&1<<Q}var c,f,d,p,v,m,y,_,M,T,E,A,C,L,I,j,q,ne,W,oe,ae,he,fe,se,z,N,$,x=a.faces,S=a.vertices,w=a.normals,R=a.colors,D=a.scale,B=0;if(a.uvs!==void 0){for(c=0;c<a.uvs.length;c++)a.uvs[c].length&&B++;for(c=0;c<B;c++)o.faceVertexUvs[c]=[]}for(p=0,v=S.length;p<v;)ne=new ee,ne.x=S[p++]*D,ne.y=S[p++]*D,ne.z=S[p++]*D,o.vertices.push(ne);for(p=0,v=x.length;p<v;)if(T=x[p++],E=u(T,0),A=u(T,1),C=u(T,3),L=u(T,4),I=u(T,5),j=u(T,6),q=u(T,7),E){if(oe=new Gi,oe.a=x[p],oe.b=x[p+1],oe.c=x[p+3],ae=new Gi,ae.a=x[p+1],ae.b=x[p+2],ae.c=x[p+3],p+=4,A&&(M=x[p++],oe.materialIndex=M,ae.materialIndex=M),d=o.faces.length,C)for(c=0;c<B;c++)for(se=a.uvs[c],o.faceVertexUvs[c][d]=[],o.faceVertexUvs[c][d+1]=[],f=0;f<4;f++)_=x[p++],N=se[_*2],$=se[_*2+1],z=new Ce(N,$),f!==2&&o.faceVertexUvs[c][d].push(z),f!==0&&o.faceVertexUvs[c][d+1].push(z);if(L&&(y=x[p++]*3,oe.normal.set(w[y++],w[y++],w[y]),ae.normal.copy(oe.normal)),I)for(c=0;c<4;c++)y=x[p++]*3,fe=new ee(w[y++],w[y++],w[y]),c!==2&&oe.vertexNormals.push(fe),c!==0&&ae.vertexNormals.push(fe);if(j&&(m=x[p++],he=R[m],oe.color.setHex(he),ae.color.setHex(he)),q)for(c=0;c<4;c++)m=x[p++],he=R[m],c!==2&&oe.vertexColors.push(new qe(he)),c!==0&&ae.vertexColors.push(new qe(he));o.faces.push(oe),o.faces.push(ae)}else{if(W=new Gi,W.a=x[p++],W.b=x[p++],W.c=x[p++],A&&(M=x[p++],W.materialIndex=M),d=o.faces.length,C)for(c=0;c<B;c++)for(se=a.uvs[c],o.faceVertexUvs[c][d]=[],f=0;f<3;f++)_=x[p++],N=se[_*2],$=se[_*2+1],z=new Ce(N,$),o.faceVertexUvs[c][d].push(z);if(L&&(y=x[p++]*3,W.normal.set(w[y++],w[y++],w[y])),I)for(c=0;c<3;c++)y=x[p++]*3,fe=new ee(w[y++],w[y++],w[y]),W.vertexNormals.push(fe);if(j&&(m=x[p++],W.color.setHex(R[m])),q)for(c=0;c<3;c++)m=x[p++],W.vertexColors.push(new qe(R[m]));o.faces.push(W)}}function t(a,o){var u=a.influencesPerVertex!==void 0?a.influencesPerVertex:2;if(a.skinWeights)for(var c=0,f=a.skinWeights.length;c<f;c+=u){var d=a.skinWeights[c],p=u>1?a.skinWeights[c+1]:0,v=u>2?a.skinWeights[c+2]:0,m=u>3?a.skinWeights[c+3]:0;o.skinWeights.push(new Zt(d,p,v,m))}if(a.skinIndices)for(var c=0,f=a.skinIndices.length;c<f;c+=u){var y=a.skinIndices[c],_=u>1?a.skinIndices[c+1]:0,M=u>2?a.skinIndices[c+2]:0,T=u>3?a.skinIndices[c+3]:0;o.skinIndices.push(new Zt(y,_,M,T))}o.bones=a.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match.")}function n(a,o){var u=a.scale;if(a.morphTargets!==void 0)for(var c=0,f=a.morphTargets.length;c<f;c++){o.morphTargets[c]={},o.morphTargets[c].name=a.morphTargets[c].name,o.morphTargets[c].vertices=[];for(var d=o.morphTargets[c].vertices,p=a.morphTargets[c].vertices,v=0,m=p.length;v<m;v+=3){var y=new ee;y.x=p[v]*u,y.y=p[v+1]*u,y.z=p[v+2]*u,d.push(y)}}if(a.morphColors!==void 0&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var _=o.faces,M=a.morphColors[0].colors,c=0,f=_.length;c<f;c++)_[c].color.fromArray(M,c*3)}}function r(a,o){var u=[],c=[];a.animation!==void 0&&c.push(a.animation),a.animations!==void 0&&(a.animations.length?c=c.concat(a.animations):c.push(a.animations));for(var f=0;f<c.length;f++){var d=Fr.parseAnimation(c[f],o.bones);d&&u.push(d)}if(o.morphTargets){var p=Fr.CreateClipsFromMorphTargetSequences(o.morphTargets,10);u=u.concat(p)}u.length>0&&(o.animations=u)}return function(a,o){a.data!==void 0&&(a=a.data),a.scale!==void 0?a.scale=1/a.scale:a.scale=1;var u=new ot;if(e(a,u),t(a,u),n(a,u),r(a,u),u.computeFaceNormals(),u.computeBoundingSphere(),a.materials===void 0||a.materials.length===0)return{geometry:u};var c=Qo.prototype.initMaterials(a.materials,o,this.crossOrigin);return{geometry:u,materials:c}}}()});function j1(e){this.manager=e!==void 0?e:cr,this.texturePath=""}Object.assign(j1.prototype,{load:function(e,t,n,r){this.texturePath===""&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var a=this,o=new ni(a.manager);o.load(e,function(u){var c=null;try{c=JSON.parse(u)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}var f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}a.parse(c,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,u);return e.animations&&(c.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(c),c},parseShape:function(e){var t={};if(e!==void 0)for(var n=0,r=e.length;n<r;n++){var a=new _a().fromJSON(e[n]);t[a.uuid]=a}return t},parseGeometries:function(e,t){var n={};if(e!==void 0)for(var r=new Yg,a=new qg,o=0,u=e.length;o<u;o++){var c,f=e[o];switch(f.type){case"PlaneGeometry":case"PlaneBufferGeometry":c=new br[f.type](f.width,f.height,f.widthSegments,f.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":c=new br[f.type](f.width,f.height,f.depth,f.widthSegments,f.heightSegments,f.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":c=new br[f.type](f.radius,f.segments,f.thetaStart,f.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":c=new br[f.type](f.radiusTop,f.radiusBottom,f.height,f.radialSegments,f.heightSegments,f.openEnded,f.thetaStart,f.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":c=new br[f.type](f.radius,f.height,f.radialSegments,f.heightSegments,f.openEnded,f.thetaStart,f.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":c=new br[f.type](f.radius,f.widthSegments,f.heightSegments,f.phiStart,f.phiLength,f.thetaStart,f.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":c=new br[f.type](f.radius,f.detail);break;case"RingGeometry":case"RingBufferGeometry":c=new br[f.type](f.innerRadius,f.outerRadius,f.thetaSegments,f.phiSegments,f.thetaStart,f.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":c=new br[f.type](f.radius,f.tube,f.radialSegments,f.tubularSegments,f.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":c=new br[f.type](f.radius,f.tube,f.tubularSegments,f.radialSegments,f.p,f.q);break;case"LatheGeometry":case"LatheBufferGeometry":c=new br[f.type](f.points,f.segments,f.phiStart,f.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":c=new br[f.type](f.vertices,f.indices,f.radius,f.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var d=[],o=0,u=f.shapes.length;o<u;o++){var p=t[f.shapes[o]];d.push(p)}c=new br[f.type](d,f.curveSegments);break;case"BufferGeometry":c=a.parse(f);break;case"Geometry":c=r.parse(f,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+f.type+'"');continue}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),n[f.uuid]=c}return n},parseMaterials:function(e,t){var n={};if(e!==void 0){var r=new Zh;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var u=e[a];if(u.type==="MultiMaterial"){for(var c=[],f=0;f<u.materials.length;f++)c.push(r.parse(u.materials[f]));n[u.uuid]=c}else n[u.uuid]=r.parse(u)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Fr.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function a(v){return n.manager.itemStart(v),u.load(v,function(){n.manager.itemEnd(v)},void 0,function(){n.manager.itemEnd(v),n.manager.itemError(v)})}if(e!==void 0&&e.length>0){var o=new Hg(t),u=new Lc(o);u.setCrossOrigin(this.crossOrigin);for(var c=0,f=e.length;c<f;c++){var d=e[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d.url)?d.url:n.texturePath+d.url;r[d.uuid]=a(p)}}return r},parseTextures:function(e,t){function n(f,d){return typeof f=="number"?f:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",f),d[f])}var r={};if(e!==void 0)for(var a=0,o=e.length;a<o;a++){var u=e[a];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);var c=new sn(t[u.image]);c.needsUpdate=!0,c.uuid=u.uuid,u.name!==void 0&&(c.name=u.name),u.mapping!==void 0&&(c.mapping=n(u.mapping,H3)),u.offset!==void 0&&c.offset.fromArray(u.offset),u.repeat!==void 0&&c.repeat.fromArray(u.repeat),u.center!==void 0&&c.center.fromArray(u.center),u.rotation!==void 0&&(c.rotation=u.rotation),u.wrap!==void 0&&(c.wrapS=n(u.wrap[0],lw),c.wrapT=n(u.wrap[1],lw)),u.minFilter!==void 0&&(c.minFilter=n(u.minFilter,uw)),u.magFilter!==void 0&&(c.magFilter=n(u.magFilter,uw)),u.anisotropy!==void 0&&(c.anisotropy=u.anisotropy),u.flipY!==void 0&&(c.flipY=u.flipY),r[u.uuid]=c}return r},parseObject:function(){var e=new ut;return function(n,r,a){var o;function u(T){return r[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",T),r[T]}function c(T){if(T!==void 0){if(Array.isArray(T)){for(var E=[],A=0,C=T.length;A<C;A++){var L=T[A];a[L]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",L),E.push(a[L])}return E}return a[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),a[T]}}switch(n.type){case"Scene":o=new sh,n.background!==void 0&&Number.isInteger(n.background)&&(o.background=new qe(n.background)),n.fog!==void 0&&(n.fog.type==="Fog"?o.fog=new Co(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(o.fog=new Ro(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":o=new Nn(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(o.focus=n.focus),n.zoom!==void 0&&(o.zoom=n.zoom),n.filmGauge!==void 0&&(o.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(o.filmOffset=n.filmOffset),n.view!==void 0&&(o.view=Object.assign({},n.view));break;case"OrthographicCamera":o=new So(n.left,n.right,n.top,n.bottom,n.near,n.far);break;case"AmbientLight":o=new gh(n.color,n.intensity);break;case"DirectionalLight":o=new mh(n.color,n.intensity);break;case"PointLight":o=new ph(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":o=new yh(n.color,n.intensity,n.width,n.height);break;case"SpotLight":o=new dh(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":o=new fh(n.color,n.groundColor,n.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var f=u(n.geometry),d=c(n.material);f.bones&&f.bones.length>0?o=new lh(f,d):o=new Qn(f,d);break;case"LOD":o=new Iu;break;case"Line":o=new or(u(n.geometry),c(n.material),n.mode);break;case"LineLoop":o=new uh(u(n.geometry),c(n.material));break;case"LineSegments":o=new $t(u(n.geometry),c(n.material));break;case"PointCloud":case"Points":o=new Lo(u(n.geometry),c(n.material));break;case"Sprite":o=new Fu(c(n.material));break;case"Group":o=new ku;break;default:o=new Ue}if(o.uuid=n.uuid,n.name!==void 0&&(o.name=n.name),n.matrix!==void 0?(e.fromArray(n.matrix),e.decompose(o.position,o.quaternion,o.scale)):(n.position!==void 0&&o.position.fromArray(n.position),n.rotation!==void 0&&o.rotation.fromArray(n.rotation),n.quaternion!==void 0&&o.quaternion.fromArray(n.quaternion),n.scale!==void 0&&o.scale.fromArray(n.scale)),n.castShadow!==void 0&&(o.castShadow=n.castShadow),n.receiveShadow!==void 0&&(o.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(o.shadow.bias=n.shadow.bias),n.shadow.radius!==void 0&&(o.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(o.visible=n.visible),n.userData!==void 0&&(o.userData=n.userData),n.children!==void 0)for(var p=n.children,v=0;v<p.length;v++)o.add(this.parseObject(p[v],r,a));if(n.type==="LOD")for(var m=n.levels,y=0;y<m.length;y++){var _=m[y],M=o.getObjectByProperty("uuid",_.object);M!==void 0&&o.addLevel(M,_.distance)}return o}}()});var H3={UVMapping:Fh,CubeReflectionMapping:Ih,CubeRefractionMapping:rh,EquirectangularReflectionMapping:Dg,EquirectangularRefractionMapping:ih,SphericalReflectionMapping:Ug,CubeUVReflectionMapping:Gh,CubeUVRefractionMapping:kh},lw={RepeatWrapping:Bi,ClampToEdgeWrapping:xr,MirroredRepeatWrapping:rs},uw={NearestFilter:_r,NearestMipMapNearestFilter:Hh,NearestMipMapLinearFilter:Vh,LinearFilter:ar,LinearMipMapNearestFilter:Bg,LinearMipMapLinearFilter:Cc};function Wm(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=e!==void 0?e:cr,this.options=void 0}Wm.prototype={constructor:Wm,setOptions:function(t){return this.options=t,this},load:function(t,n,r,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t);var o=this,u=ws.get(t);if(u!==void 0)return o.manager.itemStart(t),setTimeout(function(){n&&n(u),o.manager.itemEnd(t)},0),u;fetch(t).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,o.options)}).then(function(c){ws.add(t,c),n&&n(c),o.manager.itemEnd(t)}).catch(function(c){a&&a(c),o.manager.itemEnd(t),o.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}};function Zg(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}Object.assign(Zg.prototype,{moveTo:function(e,t){this.currentPath=new Wr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,a,o){this.currentPath.bezierCurveTo(e,t,n,r,a,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(z){for(var N=[],$=0,x=z.length;$<x;$++){var S=z[$],w=new _a;w.curves=S.curves,N.push(w)}return N}function r(z,N){for(var $=N.length,x=!1,S=$-1,w=0;w<$;S=w++){var R=N[S],D=N[w],B=D.x-R.x,H=D.y-R.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(R=N[w],B=-B,D=N[S],H=-H),z.y<R.y||z.y>D.y)continue;if(z.y===R.y){if(z.x===R.x)return!0}else{var Q=H*(z.x-R.x)-B*(z.y-R.y);if(Q===0)return!0;if(Q<0)continue;x=!x}}else{if(z.y!==R.y)continue;if(D.x<=z.x&&z.x<=R.x||R.x<=z.x&&z.x<=D.x)return!0}}return x}var a=ki.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return n(o);var u,c,f,d=[];if(o.length===1)return c=o[0],f=new _a,f.curves=c.curves,d.push(f),d;var p=!a(o[0].getPoints());p=e?!p:p;var v=[],m=[],y=[],_=0,M;m[_]=void 0,y[_]=[];for(var T=0,E=o.length;T<E;T++)c=o[T],M=c.getPoints(),u=a(M),u=e?!u:u,u?(!p&&m[_]&&_++,m[_]={s:new _a,p:M},m[_].s.curves=c.curves,p&&_++,y[_]=[]):y[_].push({h:c,p:M[0]});if(!m[0])return n(o);if(m.length>1){for(var A=!1,C=[],L=0,I=m.length;L<I;L++)v[L]=[];for(var L=0,I=m.length;L<I;L++)for(var j=y[L],q=0;q<j.length;q++){for(var ne=j[q],W=!0,oe=0;oe<m.length;oe++)r(ne.p,m[oe].p)&&(L!==oe&&C.push({froms:L,tos:oe,hole:q}),W?(W=!1,v[oe].push(ne)):A=!0);W&&v[L].push(ne)}C.length>0&&(A||(y=v))}for(var ae,T=0,he=m.length;T<he;T++){f=m[T].s,d.push(f),ae=y[T];for(var fe=0,se=ae.length;fe<se;fe++)f.holes.push(ae[fe].h)}return d}});function Qg(e){this.type="Font",this.data=e}Object.assign(Qg.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(p){for(var v=String(p).split(""),m=t/o.resolution,y=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*m,_=0,M=0,T=[],E=0;E<v.length;E++){var A=v[E];if(A===`
`)_=0,M-=y;else{var C=a(A,m,_,M);_+=C.offsetX,T.push(C.path)}}return T}function a(p,v,m,y){var _=o.glyphs[p]||o.glyphs["?"];if(_){var M=new Zg,T,E,A,C,L,I,j,q;if(_.o)for(var ne=_._cachedOutline||(_._cachedOutline=_.o.split(" ")),W=0,oe=ne.length;W<oe;){var ae=ne[W++];switch(ae){case"m":T=ne[W++]*v+m,E=ne[W++]*v+y,M.moveTo(T,E);break;case"l":T=ne[W++]*v+m,E=ne[W++]*v+y,M.lineTo(T,E);break;case"q":A=ne[W++]*v+m,C=ne[W++]*v+y,L=ne[W++]*v+m,I=ne[W++]*v+y,M.quadraticCurveTo(L,I,A,C);break;case"b":A=ne[W++]*v+m,C=ne[W++]*v+y,L=ne[W++]*v+m,I=ne[W++]*v+y,j=ne[W++]*v+m,q=ne[W++]*v+y,M.bezierCurveTo(L,I,j,q,A,C);break}}return{offsetX:_.ha*v,path:M}}}t===void 0&&(t=100);for(var o=this.data,u=r(e),c=[],f=0,d=u.length;f<d;f++)Array.prototype.push.apply(c,u[f].toShapes());return c}});function W1(e){this.manager=e!==void 0?e:cr}Object.assign(W1.prototype,{load:function(e,t,n,r){var a=this,o=new ni(this.manager);o.setPath(this.path),o.load(e,function(u){var c;try{c=JSON.parse(u)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(u.substring(65,u.length-2))}var f=a.parse(c);t&&t(f)},n,r)},parse:function(e){return new Qg(e)},setPath:function(e){return this.path=e,this}});var Vf,Kg={getContext:function(){return Vf===void 0&&(Vf=new(window.AudioContext||window.webkitAudioContext)),Vf},setContext:function(e){Vf=e}};function Jg(e){this.manager=e!==void 0?e:cr}Object.assign(Jg.prototype,{load:function(e,t,n,r){var a=new ni(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(o){var u=Kg.getContext();u.decodeAudioData(o,function(c){t(c)})},n,r)}});function q1(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(q1.prototype,{update:function(){var e,t,n,r,a,o,u,c,f=new ut,d=new ut;return function(v){var m=e!==this||t!==v.focus||n!==v.fov||r!==v.aspect*this.aspect||a!==v.near||o!==v.far||u!==v.zoom||c!==this.eyeSep;if(m){e=this,t=v.focus,n=v.fov,r=v.aspect*this.aspect,a=v.near,o=v.far,u=v.zoom;var y=v.projectionMatrix.clone();c=this.eyeSep/2;var _=c*a/t,M=a*Math.tan(pt.DEG2RAD*n*.5)/u,T,E;d.elements[12]=-c,f.elements[12]=c,T=-M*r+_,E=M*r+_,y.elements[0]=2*a/(E-T),y.elements[8]=(E+T)/(E-T),this.cameraL.projectionMatrix.copy(y),T=-M*r-_,E=M*r-_,y.elements[0]=2*a/(E-T),y.elements[8]=(E+T)/(E-T),this.cameraR.projectionMatrix.copy(y)}this.cameraL.matrixWorld.copy(v.matrixWorld).multiply(d),this.cameraR.matrixWorld.copy(v.matrixWorld).multiply(f)}}()});function fc(e,t,n){Ue.call(this),this.type="CubeCamera";var r=90,a=1,o=new Nn(r,a,e,t);o.up.set(0,-1,0),o.lookAt(new ee(1,0,0)),this.add(o);var u=new Nn(r,a,e,t);u.up.set(0,-1,0),u.lookAt(new ee(-1,0,0)),this.add(u);var c=new Nn(r,a,e,t);c.up.set(0,0,1),c.lookAt(new ee(0,1,0)),this.add(c);var f=new Nn(r,a,e,t);f.up.set(0,0,-1),f.lookAt(new ee(0,-1,0)),this.add(f);var d=new Nn(r,a,e,t);d.up.set(0,-1,0),d.lookAt(new ee(0,0,1)),this.add(d);var p=new Nn(r,a,e,t);p.up.set(0,-1,0),p.lookAt(new ee(0,0,-1)),this.add(p);var v={format:Eo,magFilter:ar,minFilter:ar};this.renderTarget=new To(n,n,v),this.renderTarget.texture.name="CubeCamera",this.update=function(m,y){this.parent===null&&this.updateMatrixWorld();var _=this.renderTarget,M=_.texture.generateMipmaps;_.texture.generateMipmaps=!1,_.activeCubeFace=0,m.render(y,o,_),_.activeCubeFace=1,m.render(y,u,_),_.activeCubeFace=2,m.render(y,c,_),_.activeCubeFace=3,m.render(y,f,_),_.activeCubeFace=4,m.render(y,d,_),_.texture.generateMipmaps=M,_.activeCubeFace=5,m.render(y,p,_),m.setRenderTarget(null)},this.clear=function(m,y,_,M){for(var T=this.renderTarget,E=0;E<6;E++)T.activeCubeFace=E,m.setRenderTarget(T),m.clear(y,_,M);m.setRenderTarget(null)}}fc.prototype=Object.create(Ue.prototype);fc.prototype.constructor=fc;function qm(){Ue.call(this),this.type="AudioListener",this.context=Kg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}qm.prototype=Object.assign(Object.create(Ue.prototype),{constructor:qm,getInput:function(){return this.gain},removeFilter:function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new ee,t=new Tn,n=new ee,r=new ee;return function(o){Ue.prototype.updateMatrixWorld.call(this,o);var u=this.context.listener,c=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),u.positionX?(u.positionX.setValueAtTime(e.x,this.context.currentTime),u.positionY.setValueAtTime(e.y,this.context.currentTime),u.positionZ.setValueAtTime(e.z,this.context.currentTime),u.forwardX.setValueAtTime(r.x,this.context.currentTime),u.forwardY.setValueAtTime(r.y,this.context.currentTime),u.forwardZ.setValueAtTime(r.z,this.context.currentTime),u.upX.setValueAtTime(c.x,this.context.currentTime),u.upY.setValueAtTime(c.y,this.context.currentTime),u.upZ.setValueAtTime(c.z,this.context.currentTime)):(u.setPosition(e.x,e.y,e.z),u.setOrientation(r.x,r.y,r.z,c.x,c.y,c.z))}}()});function Ko(e){Ue.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}Ko.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Ko,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}});function Xm(e){Ko.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}Xm.prototype=Object.assign(Object.create(Ko.prototype),{constructor:Xm,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new ee;return function(n){Ue.prototype.updateMatrixWorld.call(this,n),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()});function $g(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign($g.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}});function ey(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,a;switch(t){case"quaternion":a=this._slerp;break;case"string":case"bool":r=Array,a=this._select;break;default:a=this._lerp}this.buffer=new r(n*4),this._mixBufferRegion=a,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(ey.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,o=this.cumulativeWeight;if(o===0){for(var u=0;u!==r;++u)n[a+u]=n[u];o=t}else{o+=t;var c=t/o;this._mixBufferRegion(n,a,0,c,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,a<1){var u=t*3;this._mixBufferRegion(n,r,u,1-a,t)}for(var c=t,f=t+t;c!==f;++c)if(n[c]!==n[c+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*3;e.getValue(t,r);for(var a=n,o=r;a!==o;++a)t[a]=t[r+a%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,a){if(r>=.5)for(var o=0;o!==a;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Tn.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,a){for(var o=1-r,u=0;u!==a;++u){var c=t+u;e[c]=e[c]*o+e[n+u]*r}}});function X1(e,t,n){var r=n||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(X1.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function qn(e,t,n){this.path=t,this.parsedPath=n||qn.parseTrackName(t),this.node=qn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(qn,{Composite:X1,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new qn.Composite(e,t,n):new qn(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,n=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,r=/\.([\w-]+)(?:\[(.+)\])?/,a=new RegExp("^"+e.source+t.source+n.source+r.source+"$"),o=["material","materials","bones"];return function(u){var c=a.exec(u);if(!c)throw new Error("PropertyBinding: Cannot parse trackName: "+u);var f={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},d=f.nodeName&&f.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){var p=f.nodeName.substring(d+1);o.indexOf(p)!==-1&&(f.nodeName=f.nodeName.substring(0,d),f.objectName=p)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+u);return f}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(u){for(var c=0;c<u.bones.length;c++){var f=u.bones[c];if(f.name===t)return f}return null},r=n(e.skeleton);if(r)return r}if(e.children){var a=function(u){for(var c=0;c<u.length;c++){var f=u[c];if(f.name===t||f.uuid===t)return f;var d=a(f.children);if(d)return d}return null},o=a(e.children);if(o)return o}return null}});Object.assign(qn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)t[n++]=r[a]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=t[n++]},function(t,n){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,a=t.propertyIndex;if(e||(e=qn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var u=0;u<e.length;u++)if(e[u].name===o){o=u;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(o!==void 0){if(e[o]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[o]}}var c=e[r];if(c===void 0){var f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}var d=this.Versioning.None;e.needsUpdate!==void 0?(d=this.Versioning.NeedsUpdate,this.targetObject=e):e.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var p=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var u=0;u<this.node.geometry.morphAttributes.position.length;u++)if(e.geometry.morphAttributes.position[u].name===a){a=u;break}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var u=0;u<this.node.geometry.morphTargets.length;u++)if(e.geometry.morphTargets[u].name===a){a=u;break}}}p=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=a}else c.fromArray!==void 0&&c.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(p=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][d]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(qn.prototype,{_getValue_unbound:qn.prototype.getValue,_setValue_unbound:qn.prototype.setValue});function Y1(){var e=arguments;this.uuid=pt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[e[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}Object.assign(Y1.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._paths,u=this._parsedPaths,c=this._bindings,f=c.length,d=0,p=arguments.length;d!==p;++d){var v=e[d],m=v.uuid,y=a[m],_=void 0;if(y===void 0){y=n++,a[m]=y,t.push(v);for(var M=0,T=f;M!==T;++M)c[M].push(new qn(v,o[M],u[M]))}else if(y<r){_=t[y];var E=--r,A=t[E];a[A.uuid]=y,t[y]=A,a[m]=E,t[E]=v;for(var M=0,T=f;M!==T;++M){var C=c[M],L=C[E],I=C[y];C[y]=L,I===void 0&&(I=new qn(v,o[M],u[M])),C[E]=I}}else t[y]!==_&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=arguments,t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,o=a.length,u=0,c=arguments.length;u!==c;++u){var f=e[u],d=f.uuid,p=r[d];if(p!==void 0&&p>=n){var v=n++,m=t[v];r[m.uuid]=p,t[p]=m,r[d]=v,t[v]=f;for(var y=0,_=o;y!==_;++y){var M=a[y],T=M[v],E=M[p];M[p]=T,M[v]=E}}}this.nCachedObjects_=n},uncache:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._bindings,u=o.length,c=0,f=arguments.length;c!==f;++c){var d=e[c],p=d.uuid,v=a[p];if(v!==void 0)if(delete a[p],v<r){var m=--r,y=t[m],_=--n,M=t[_];a[y.uuid]=v,t[v]=y,a[M.uuid]=m,t[m]=M,t.pop();for(var T=0,E=u;T!==E;++T){var A=o[T],C=A[m],L=A[_];A[v]=C,A[m]=L,A.pop()}}else{var _=--n,M=t[_];a[M.uuid]=v,t[v]=M,t.pop();for(var T=0,E=u;T!==E;++T){var A=o[T];A[v]=A[_],A.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],a=this._bindings;if(r!==void 0)return a[r];var o=this._paths,u=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,p=new Array(f);r=a.length,n[e]=r,o.push(e),u.push(t),a.push(p);for(var v=d,m=c.length;v!==m;++v){var y=c[v];p[v]=new qn(y,e,t)}return p},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){var r=this._paths,a=this._parsedPaths,o=this._bindings,u=o.length-1,c=o[u],f=e[u];t[f]=n,o[n]=c,o.pop(),a[n]=a[u],a.pop(),r[n]=r[u],r.pop()}}});function Z1(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,a=r.length,o=new Array(a),u={endingStart:is,endingEnd:is},c=0;c!==a;++c){var f=r[c].createInterpolant(null);o[c]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=m1,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(Z1.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,o=a/r,u=r/a;e.warp(1,o,t),this.warp(u,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,a=r.time,o=this._timeScaleInterpolant,u=this.timeScale;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var c=o.parameterPositions,f=o.sampleValues;return c[0]=a,c[1]=a+n,f[0]=e/u,f[1]=t/u,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}var a=this._startTime;if(a!==null){var o=(e-a)*n;if(o<0||n===0)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var u=this._updateTime(t),c=this._updateWeight(e);if(c>0)for(var f=this._interpolants,d=this._propertyBindings,p=0,v=f.length;p!==v;++p)f[p].evaluate(u),d[p].accumulate(r,c)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var n=this._clip.duration,r=this.loop,a=this._loopCount;if(r===v1){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else if(t<0)t=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===g1;if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),t>=n||t<0){var u=Math.floor(t/n);t-=n*u,a+=Math.abs(u);var c=this.repetitions-a;if(c<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===0){var f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}if(o&&(a&1)===1)return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Ja,r.endingEnd=Ja):(e?r.endingStart=this.zeroSlopeAtStart?Ja:is:r.endingStart=Ru,t?r.endingEnd=this.zeroSlopeAtEnd?Ja:is:r.endingEnd=Ru)},_scheduleFading:function(e,t,n){var r=this._mixer,a=r.time,o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var u=o.parameterPositions,c=o.sampleValues;return u[0]=a,c[0]=t,u[1]=a+e,c[1]=n,this}});function Ym(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Ym.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Ym,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,o=e._propertyBindings,u=e._interpolants,c=n.uuid,f=this._bindingsByRootAndName,d=f[c];d===void 0&&(d={},f[c]=d);for(var p=0;p!==a;++p){var v=r[p],m=v.name,y=d[m];if(y!==void 0)o[p]=y;else{if(y=o[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,c,m));continue}var _=t&&t._propertyBindings[p].binding.parsedPath;y=new ey(qn.create(n,m,_),v.ValueTypeName,v.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,c,m),o[p]=y}u[p].resultBuffer=y.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,o=0,u=a.length;o!==u;++o){var c=a[o];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,a=this._actionsByClip,o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{var u=o.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,o=this._actionsByClip,u=o[a],c=u.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;var p=u.actionByRoot,v=(e._localRoot||this._root).uuid;delete p[v],c.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,a=r[t],o=this._bindings;a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,u=o[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete u[a];e:{for(var d in u)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new cc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,a=typeof e=="string"?Fr.findByName(n,e):e,o=a!==null?a.uuid:e,u=this._actionsByClip[o],c=null;if(u!==void 0){var f=u.actionByRoot[r];if(f!==void 0)return f;c=u.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;var d=new Z1(this,a,t);return this._bindAction(d,c),this._addInactiveAction(d,o,r),d},existingAction:function(e,t){var n=t||this._root,r=n.uuid,a=typeof e=="string"?Fr.findByName(n,e):e,o=a?a.uuid:e,u=this._actionsByClip[o];return u!==void 0&&u.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var a=0;a!==t;++a)e[a].reset();for(var a=0;a!==r;++a)n[a].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1,u=0;u!==n;++u){var c=t[u];c._update(r,e,a,o)}for(var f=this._bindings,d=this._nActiveBindings,u=0;u!==d;++u)f[u].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(a!==void 0){for(var o=a.knownActions,u=0,c=o.length;u!==c;++u){var f=o[u];this._deactivateAction(f);var d=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=d,t[d]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var u=this._bindingsByRootAndName,c=u[t];if(c!==void 0)for(var f in c){var d=c[f];d.restoreOriginalState(),this._removeInactiveBinding(d)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function Th(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}Th.prototype.clone=function(){return new Th(this.value.clone===void 0?this.value:this.value.clone())};function Zm(){ke.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}Zm.prototype=Object.assign(Object.create(ke.prototype),{constructor:Zm,isInstancedBufferGeometry:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}});function ty(e,t,n,r){this.uuid=pt.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(ty.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(ty.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}});function Jo(e,t){this.uuid=pt.generateUUID(),this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(Jo.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Jo.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});function Qm(e,t,n){Jo.call(this,e,t),this.meshPerAttribute=n||1}Qm.prototype=Object.assign(Object.create(Jo.prototype),{constructor:Qm,isInstancedInterleavedBuffer:!0,copy:function(e){return Jo.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function Km(e,t,n){gt.call(this,e,t),this.meshPerAttribute=n||1}Km.prototype=Object.assign(Object.create(gt.prototype),{constructor:Km,isInstancedBufferAttribute:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function Q1(e,t,n,r){this.ray=new Ns(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function cw(e,t){return e.distance-t.distance}function Jm(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var a=e.children,o=0,u=a.length;o<u;o++)Jm(a[o],t,n,!0)}Object.assign(Q1.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Jm(e,this,n,t),n.sort(cw),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,a=e.length;r<a;r++)Jm(e[r],this,n,t);return n.sort(cw),n}});function K1(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(K1.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});function J1(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(J1.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(pt.clamp(e.y/this.radius,-1,1))),this}});function $1(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign($1.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}});function hc(e){Ue.call(this),this.material=e,this.render=function(){}}hc.prototype=Object.create(Ue.prototype);hc.prototype.constructor=hc;hc.prototype.isImmediateRenderObject=!0;function dc(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var a=n!==void 0?n:16711680,o=r!==void 0?r:1,u=0,c=this.object.geometry;c&&c.isGeometry?u=c.faces.length*3:c&&c.isBufferGeometry&&(u=c.attributes.normal.count);var f=new ke,d=new De(u*2*3,3);f.addAttribute("position",d),$t.call(this,f,new Qt({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}dc.prototype=Object.create($t.prototype);dc.prototype.constructor=dc;dc.prototype.update=function(){var e=new ee,t=new ee,n=new sr;return function(){var a=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,u=this.geometry.attributes.position,c=this.object.geometry;if(c&&c.isGeometry)for(var f=c.vertices,d=c.faces,p=0,v=0,m=d.length;v<m;v++)for(var y=d[v],_=0,M=y.vertexNormals.length;_<M;_++){var T=f[y[a[_]]],E=y.vertexNormals[_];e.copy(T).applyMatrix4(o),t.copy(E).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),u.setXYZ(p,e.x,e.y,e.z),p=p+1,u.setXYZ(p,t.x,t.y,t.z),p=p+1}else if(c&&c.isBufferGeometry)for(var A=c.attributes.position,C=c.attributes.normal,p=0,_=0,M=A.count;_<M;_++)e.set(A.getX(_),A.getY(_),A.getZ(_)).applyMatrix4(o),t.set(C.getX(_),C.getY(_),C.getZ(_)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),u.setXYZ(p,e.x,e.y,e.z),p=p+1,u.setXYZ(p,t.x,t.y,t.z),p=p+1;u.needsUpdate=!0}}();function $o(e,t){Ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ke,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],a=0,o=1,u=32;a<u;a++,o++){var c=a/u*Math.PI*2,f=o/u*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}n.addAttribute("position",new De(r,3));var d=new Qt({fog:!1});this.cone=new $t(n,d),this.add(this.cone),this.update()}$o.prototype=Object.create(Ue.prototype);$o.prototype.constructor=$o;$o.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};$o.prototype.update=function(){var e=new ee,t=new ee;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,a=r*Math.tan(this.light.angle);this.cone.scale.set(a,a,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();function eM(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,eM(e.children[n]));return t}function el(e){for(var t=eM(e),n=new ke,r=[],a=[],o=new qe(0,0,1),u=new qe(0,1,0),c=0;c<t.length;c++){var f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(u.r,u.g,u.b))}n.addAttribute("position",new De(r,3)),n.addAttribute("color",new De(a,3));var d=new Qt({vertexColors:Os,depthTest:!1,depthWrite:!1,transparent:!0});$t.call(this,n,d),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}el.prototype=Object.create($t.prototype);el.prototype.constructor=el;el.prototype.updateMatrixWorld=function(){var e=new ee,t=new ut,n=new ut;return function(a){var o=this.bones,u=this.geometry,c=u.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var f=0,d=0;f<o.length;f++){var p=o[f];p.parent&&p.parent.isBone&&(t.multiplyMatrices(n,p.matrixWorld),e.setFromMatrixPosition(t),c.setXYZ(d,e.x,e.y,e.z),t.multiplyMatrices(n,p.parent.matrixWorld),e.setFromMatrixPosition(t),c.setXYZ(d+1,e.x,e.y,e.z),d+=2)}u.getAttribute("position").needsUpdate=!0,Ue.prototype.updateMatrixWorld.call(this,a)}}();function tl(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new ds(t,4,2),a=new Er({wireframe:!0,fog:!1});Qn.call(this,r,a),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}tl.prototype=Object.create(Qn.prototype);tl.prototype.constructor=tl;tl.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};tl.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function nl(e,t){Ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Qt({fog:!1}),r=new ke;r.addAttribute("position",new gt(new Float32Array(5*3),3)),this.line=new or(r,n),this.add(this.line),this.update()}nl.prototype=Object.create(Ue.prototype);nl.prototype.constructor=nl;nl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};nl.prototype.update=function(){var e=this.light.width*.5,t=this.light.height*.5,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,this.color!==void 0?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};function rl(e,t,n){Ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new hs(t);r.rotateY(Math.PI*.5),this.material=new Er({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=Os);var a=r.getAttribute("position"),o=new Float32Array(a.count*3);r.addAttribute("color",new gt(o,3)),this.add(new Qn(r,this.material)),this.update()}rl.prototype=Object.create(Ue.prototype);rl.prototype.constructor=rl;rl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};rl.prototype.update=function(){var e=new ee,t=new qe,n=new qe;return function(){var a=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var o=a.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var u=0,c=o.count;u<c;u++){var f=u<c/2?t:n;o.setXYZ(u,f.r,f.g,f.b)}o.needsUpdate=!0}a.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function pc(e,t,n,r){e=e||10,t=t||10,n=new qe(n!==void 0?n:4473924),r=new qe(r!==void 0?r:8947848);for(var a=t/2,o=e/t,u=e/2,c=[],f=[],d=0,p=0,v=-u;d<=t;d++,v+=o){c.push(-u,0,v,u,0,v),c.push(v,0,-u,v,0,u);var m=d===a?n:r;m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3,m.toArray(f,p),p+=3}var y=new ke;y.addAttribute("position",new De(c,3)),y.addAttribute("color",new De(f,3));var _=new Qt({vertexColors:Os});$t.call(this,y,_)}pc.prototype=Object.create($t.prototype);pc.prototype.constructor=pc;function Sh(e,t,n,r,a,o){e=e||10,t=t||16,n=n||8,r=r||64,a=new qe(a!==void 0?a:4473924),o=new qe(o!==void 0?o:8947848);var u=[],c=[],f,d,p,v,m,y,_;for(v=0;v<=t;v++)p=v/t*(Math.PI*2),f=Math.sin(p)*e,d=Math.cos(p)*e,u.push(0,0,0),u.push(f,0,d),_=v&1?a:o,c.push(_.r,_.g,_.b),c.push(_.r,_.g,_.b);for(v=0;v<=n;v++)for(_=v&1?a:o,y=e-e/n*v,m=0;m<r;m++)p=m/r*(Math.PI*2),f=Math.sin(p)*y,d=Math.cos(p)*y,u.push(f,0,d),c.push(_.r,_.g,_.b),p=(m+1)/r*(Math.PI*2),f=Math.sin(p)*y,d=Math.cos(p)*y,u.push(f,0,d),c.push(_.r,_.g,_.b);var M=new ke;M.addAttribute("position",new De(u,3)),M.addAttribute("color",new De(c,3));var T=new Qt({vertexColors:Os});$t.call(this,M,T)}Sh.prototype=Object.create($t.prototype);Sh.prototype.constructor=Sh;function vc(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var a=n!==void 0?n:16776960,o=r!==void 0?r:1,u=0,c=this.object.geometry;c&&c.isGeometry?u=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var f=new ke,d=new De(u*2*3,3);f.addAttribute("position",d),$t.call(this,f,new Qt({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}vc.prototype=Object.create($t.prototype);vc.prototype.constructor=vc;vc.prototype.update=function(){var e=new ee,t=new ee,n=new sr;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var a=this.object.matrixWorld,o=this.geometry.attributes.position,u=this.object.geometry,c=u.vertices,f=u.faces,d=0,p=0,v=f.length;p<v;p++){var m=f[p],y=m.normal;e.copy(c[m.a]).add(c[m.b]).add(c[m.c]).divideScalar(3).applyMatrix4(a),t.copy(y).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(d,e.x,e.y,e.z),d=d+1,o.setXYZ(d,t.x,t.y,t.z),d=d+1}o.needsUpdate=!0}}();function il(e,t,n){Ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);var r=new ke;r.addAttribute("position",new De([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var a=new Qt({fog:!1});this.lightPlane=new or(r,a),this.add(this.lightPlane),r=new ke,r.addAttribute("position",new De([0,0,0,0,0,1],3)),this.targetLine=new or(r,a),this.add(this.targetLine),this.update()}il.prototype=Object.create(Ue.prototype);il.prototype.constructor=il;il.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};il.prototype.update=function(){var e=new ee,t=new ee,n=new ee;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}();function mc(e){var t=new ke,n=new Qt({color:16777215,vertexColors:Mg}),r=[],a=[],o={},u=new qe(16755200),c=new qe(16711680),f=new qe(43775),d=new qe(16777215),p=new qe(3355443);v("n1","n2",u),v("n2","n4",u),v("n4","n3",u),v("n3","n1",u),v("f1","f2",u),v("f2","f4",u),v("f4","f3",u),v("f3","f1",u),v("n1","f1",u),v("n2","f2",u),v("n3","f3",u),v("n4","f4",u),v("p","n1",c),v("p","n2",c),v("p","n3",c),v("p","n4",c),v("u1","u2",f),v("u2","u3",f),v("u3","u1",f),v("c","t",d),v("p","c",p),v("cn1","cn2",p),v("cn3","cn4",p),v("cf1","cf2",p),v("cf3","cf4",p);function v(y,_,M){m(y,M),m(_,M)}function m(y,_){r.push(0,0,0),a.push(_.r,_.g,_.b),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.addAttribute("position",new De(r,3)),t.addAttribute("color",new De(a,3)),$t.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}mc.prototype=Object.create($t.prototype);mc.prototype.constructor=mc;mc.prototype.update=function(){var e,t,n=new ee,r=new ci;function a(o,u,c,f){n.set(u,c,f).unproject(r);var d=t[o];if(d!==void 0)for(var p=e.getAttribute("position"),v=0,m=d.length;v<m;v++)p.setXYZ(d[v],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;var u=1,c=1;r.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-u,-c,-1),a("n2",u,-c,-1),a("n3",-u,c,-1),a("n4",u,c,-1),a("f1",-u,-c,1),a("f2",u,-c,1),a("f3",-u,c,1),a("f4",u,c,1),a("u1",u*.7,c*1.1,-1),a("u2",-u*.7,c*1.1,-1),a("u3",0,c*2,-1),a("cf1",-u,0,1),a("cf2",u,0,1),a("cf3",0,-c,1),a("cf4",0,c,1),a("cn1",-u,0,-1),a("cn2",u,0,-1),a("cn3",0,-c,-1),a("cn4",0,c,-1),e.getAttribute("position").needsUpdate=!0}}();function Es(e,t){this.object=e,t===void 0&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new ke;a.setIndex(new gt(n,1)),a.addAttribute("position",new gt(r,3)),$t.call(this,a,new Qt({color:t})),this.matrixAutoUpdate=!1,this.update()}Es.prototype=Object.create($t.prototype);Es.prototype.constructor=Es;Es.prototype.update=function(){var e=new Vi;return function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,a=e.max,o=this.geometry.attributes.position,u=o.array;u[0]=a.x,u[1]=a.y,u[2]=a.z,u[3]=r.x,u[4]=a.y,u[5]=a.z,u[6]=r.x,u[7]=r.y,u[8]=a.z,u[9]=a.x,u[10]=r.y,u[11]=a.z,u[12]=a.x,u[13]=a.y,u[14]=r.z,u[15]=r.x,u[16]=a.y,u[17]=r.z,u[18]=r.x,u[19]=r.y,u[20]=r.z,u[21]=a.x,u[22]=r.y,u[23]=r.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();Es.prototype.setFromObject=function(e){return this.object=e,this.update(),this};function gc(e,t){this.type="Box3Helper",this.box=e;var n=t!==void 0?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new ke;o.setIndex(new gt(r,1)),o.addAttribute("position",new De(a,3)),$t.call(this,o,new Qt({color:n})),this.geometry.computeBoundingSphere()}gc.prototype=Object.create($t.prototype);gc.prototype.constructor=gc;gc.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Ue.prototype.updateMatrixWorld.call(this,e))};function yc(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=t===void 0?1:t;var r=n!==void 0?n:16776960,a=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new ke;o.addAttribute("position",new De(a,3)),o.computeBoundingSphere(),or.call(this,o,new Qt({color:r}));var u=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],c=new ke;c.addAttribute("position",new De(u,3)),c.computeBoundingSphere(),this.add(new Qn(c,new Er({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}yc.prototype=Object.create(or.prototype);yc.prototype.constructor=yc;yc.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),Ue.prototype.updateMatrixWorld.call(this,e)};var jf,om;function Ms(e,t,n,r,a,o){Ue.call(this),r===void 0&&(r=16776960),n===void 0&&(n=1),a===void 0&&(a=.2*n),o===void 0&&(o=.2*a),jf===void 0&&(jf=new ke,jf.addAttribute("position",new De([0,0,0,0,1,0],3)),om=new ji(0,.5,1,5,1),om.translate(0,-.5,0)),this.position.copy(t),this.line=new or(jf,new Qt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qn(om,new Er({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,o)}Ms.prototype=Object.create(Ue.prototype);Ms.prototype.constructor=Ms;Ms.prototype.setDirection=function(){var e=new ee,t;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}();Ms.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};Ms.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)};function bc(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ke;r.addAttribute("position",new De(t,3)),r.addAttribute("color",new De(n,3));var a=new Qt({vertexColors:Os});$t.call(this,r,a)}bc.prototype=Object.create($t.prototype);bc.prototype.constructor=bc;var V3={createMultiMaterialObject:function(e,t){for(var n=new ku,r=0,a=t.length;r<a;r++)n.add(new Qn(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){e.applyMatrix(new ut().getInverse(n.matrixWorld)),t.remove(e),n.add(e)}};function j3(e,t,n,r,a,o,u){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Gi(e,t,n,a,o,u)}var W3=0,q3=1;function X3(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Y3(e){return e===void 0&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Z3(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Lo(e,t)}function Q3(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Fu(e)}function K3(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Lo(e,t)}function J3(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Yr(e)}function $3(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Yr(e)}function eN(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Yr(e)}function tN(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new ee(e,t,n)}function nN(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gt(e,t).setDynamic(!0)}function rN(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ou(e,t)}function iN(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Nu(e,t)}function aN(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Du(e,t)}function sN(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Uu(e,t)}function oN(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ls(e,t)}function lN(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Bu(e,t)}function uN(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new us(e,t)}function cN(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new De(e,t)}function fN(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pu(e,t)}Ze.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ze.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(zi.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ot,n=0,r=e.length;n<r;n++){var a=e[n];t.vertices.push(new ee(a.x,a.y,a.z||0))}return t}});Object.assign(Wr.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});function tM(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xn.call(this,e),this.type="catmullrom",this.closed=!0}tM.prototype=Object.create(Xn.prototype);function nM(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xn.call(this,e),this.type="catmullrom"}nM.prototype=Object.create(Xn.prototype);function ny(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Xn.call(this,e),this.type="catmullrom"}ny.prototype=Object.create(Xn.prototype);Object.assign(ny.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function hN(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new bc(e)}function dN(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Es(e,t)}function pN(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new $t(new Vo(e.geometry),new Qt({color:t!==void 0?t:16777215}))}pc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};el.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function vN(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new $t(new No(e.geometry),new Qt({color:t!==void 0?t:16777215}))}Object.assign(Qo.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Xg.extractUrlBase(e)}});function mN(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new ni(e)}function gN(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Vg(e)}Object.assign(qh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Vi.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});xo.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(pt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),pt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),pt.ceilPowerOfTwo(e)}});Object.assign(sr.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(ut.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return e===void 0&&(e=new ee),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,a,o)}});zr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Tn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(Ns.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(_a.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ra(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ps(this,e)}});Object.assign(Ce.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(ee.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Zt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});ot.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(Ue.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}});Object.defineProperties(Ue.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Iu.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Gu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Ze.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});Nn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(mn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(gt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}});Object.assign(ke.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ke.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Th.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(xt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new qe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Eg}}});Object.defineProperties(Qr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ir.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(kg.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(kg.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}});Object.defineProperties(B1.prototype,{cullFace:{get:function(){return this.renderReverseSided?_g:Mu},set:function(e){var t=e!==Mu;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}});Object.defineProperties(as.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.assign(Gg.prototype,{getStandingMatrix:function(){console.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}});Object.defineProperties(Gg.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});Ko.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new Jg;return n.load(e,function(r){t.setBuffer(r)}),this};$g.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};fc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var yN={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},bN={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new Yh;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new jg;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function xN(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function _N(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var wN=Object.freeze({__proto__:null,WebGLRenderTargetCube:To,WebGLRenderTarget:as,WebGLRenderer:kg,ShaderLib:ts,UniformsLib:Ye,UniformsUtils:ir,ShaderChunk:It,FogExp2:Ro,Fog:Co,Scene:sh,LensFlare:km,Sprite:Fu,LOD:Iu,SkinnedMesh:lh,Skeleton:Gu,Bone:oh,Mesh:Qn,LineSegments:$t,LineLoop:uh,Line:or,Points:Lo,Group:ku,VideoTexture:Hm,DataTexture:ss,CompressedTexture:Oo,CubeTexture:Ma,CanvasTexture:Lu,DepthTexture:Hu,Texture:sn,CompressedTextureLoader:V1,DataTextureLoader:Vg,CubeTextureLoader:jg,TextureLoader:Yh,ObjectLoader:j1,MaterialLoader:Zh,BufferGeometryLoader:qg,DefaultLoadingManager:cr,LoadingManager:Hg,JSONLoader:Yg,ImageLoader:Lc,ImageBitmapLoader:Wm,FontLoader:W1,FileLoader:ni,Loader:Qo,LoaderUtils:Xg,Cache:ws,AudioLoader:Jg,SpotLightShadow:hh,SpotLight:dh,PointLight:ph,RectAreaLight:yh,HemisphereLight:fh,DirectionalLightShadow:vh,DirectionalLight:mh,AmbientLight:gh,LightShadow:Ds,Light:mn,StereoCamera:q1,PerspectiveCamera:Nn,OrthographicCamera:So,CubeCamera:fc,ArrayCamera:ah,Camera:ci,AudioListener:qm,PositionalAudio:Xm,AudioContext:Kg,AudioAnalyser:$g,Audio:Ko,VectorKeyframeTrack:Zo,StringKeyframeTrack:bh,QuaternionKeyframeTrack:uc,NumberKeyframeTrack:Yo,ColorKeyframeTrack:wh,BooleanKeyframeTrack:xh,PropertyMixer:ey,PropertyBinding:qn,KeyframeTrack:Dn,AnimationUtils:Wn,AnimationObjectGroup:Y1,AnimationMixer:Ym,AnimationClip:Fr,Uniform:Th,InstancedBufferGeometry:Zm,BufferGeometry:ke,Geometry:ot,InterleavedBufferAttribute:ty,InstancedInterleavedBuffer:Qm,InterleavedBuffer:Jo,InstancedBufferAttribute:Km,Face3:Gi,Object3D:Ue,Raycaster:Q1,Layers:Ig,EventDispatcher:Xi,Clock:K1,QuaternionLinearInterpolant:_h,LinearInterpolant:cc,DiscreteInterpolant:Mh,CubicInterpolant:Eh,Interpolant:wr,Triangle:Pi,Math:pt,Spherical:J1,Cylindrical:$1,Plane:zr,Frustum:Xh,Sphere:Xr,Ray:Ns,Matrix4:ut,Matrix3:sr,Box3:Vi,Box2:qh,Line3:xo,Euler:Ca,Vector4:Zt,Vector3:ee,Vector2:Ce,Quaternion:Tn,Color:qe,ImmediateRenderObject:hc,VertexNormalsHelper:dc,SpotLightHelper:$o,SkeletonHelper:el,PointLightHelper:tl,RectAreaLightHelper:nl,HemisphereLightHelper:rl,GridHelper:pc,PolarGridHelper:Sh,FaceNormalsHelper:vc,DirectionalLightHelper:il,CameraHelper:mc,BoxHelper:Es,Box3Helper:gc,PlaneHelper:yc,ArrowHelper:Ms,AxesHelper:bc,Shape:_a,Path:Wr,ShapePath:Zg,Font:Qg,CurvePath:zi,Curve:Ze,ShapeUtils:ki,SceneUtils:V3,WebGLUtils:F1,WireframeGeometry:No,ParametricGeometry:Vu,ParametricBufferGeometry:Do,TetrahedronGeometry:Wu,TetrahedronBufferGeometry:Uo,OctahedronGeometry:qu,OctahedronBufferGeometry:hs,IcosahedronGeometry:Xu,IcosahedronBufferGeometry:Bo,DodecahedronGeometry:Yu,DodecahedronBufferGeometry:Po,PolyhedronGeometry:ju,PolyhedronBufferGeometry:lr,TubeGeometry:Zu,TubeBufferGeometry:zo,TorusKnotGeometry:Qu,TorusKnotBufferGeometry:Fo,TorusGeometry:Ku,TorusBufferGeometry:Io,TextGeometry:nc,TextBufferGeometry:Go,SphereGeometry:rc,SphereBufferGeometry:ds,RingGeometry:ic,RingBufferGeometry:ko,PlaneGeometry:zu,PlaneBufferGeometry:fs,LatheGeometry:ac,LatheBufferGeometry:Ho,ShapeGeometry:ps,ShapeBufferGeometry:vs,ExtrudeGeometry:Ra,ExtrudeBufferGeometry:Zr,EdgesGeometry:Vo,ConeGeometry:sc,ConeBufferGeometry:oc,CylinderGeometry:ms,CylinderBufferGeometry:ji,CircleGeometry:lc,CircleBufferGeometry:jo,BoxGeometry:Ao,BoxBufferGeometry:cs,ShadowMaterial:Wo,SpriteMaterial:Aa,RawShaderMaterial:qo,ShaderMaterial:Ir,PointsMaterial:Yr,MeshPhysicalMaterial:gs,MeshStandardMaterial:fi,MeshPhongMaterial:Qr,MeshToonMaterial:ys,MeshNormalMaterial:bs,MeshLambertMaterial:xs,MeshDepthMaterial:Ta,MeshDistanceMaterial:Sa,MeshBasicMaterial:Er,LineDashedMaterial:_s,LineBasicMaterial:Qt,Material:xt,Float64BufferAttribute:Pu,Float32BufferAttribute:De,Uint32BufferAttribute:us,Int32BufferAttribute:Bu,Uint16BufferAttribute:ls,Int16BufferAttribute:Uu,Uint8ClampedBufferAttribute:Du,Uint8BufferAttribute:Nu,Int8BufferAttribute:Ou,BufferAttribute:gt,ArcCurve:Xo,CatmullRomCurve3:Xn,CubicBezierCurve:Kr,CubicBezierCurve3:hi,EllipseCurve:Mr,LineCurve:ur,LineCurve3:Jr,QuadraticBezierCurve:$r,QuadraticBezierCurve3:di,SplineCurve:ei,REVISION:NE,MOUSE:t2,CullFaceNone:DE,CullFaceBack:Mu,CullFaceFront:_g,CullFaceFrontBack:n2,FrontFaceDirectionCW:UE,FrontFaceDirectionCCW:r2,BasicShadowMap:i2,PCFShadowMap:wg,PCFSoftShadowMap:BE,FrontSide:bo,BackSide:Ea,DoubleSide:ul,FlatShading:Eg,SmoothShading:a2,NoColors:zh,FaceColors:Mg,VertexColors:Os,NoBlending:th,NormalBlending:cl,AdditiveBlending:Tg,SubtractiveBlending:Sg,MultiplyBlending:Ag,CustomBlending:Rg,AddEquation:Cg,SubtractEquation:PE,ReverseSubtractEquation:zE,MinEquation:Cm,MaxEquation:Lm,ZeroFactor:FE,OneFactor:IE,SrcColorFactor:GE,OneMinusSrcColorFactor:kE,SrcAlphaFactor:Lg,OneMinusSrcAlphaFactor:Og,DstAlphaFactor:HE,OneMinusDstAlphaFactor:VE,DstColorFactor:jE,OneMinusDstColorFactor:WE,SrcAlphaSaturateFactor:qE,NeverDepth:XE,AlwaysDepth:YE,LessDepth:ZE,LessEqualDepth:nh,EqualDepth:QE,GreaterEqualDepth:KE,GreaterDepth:JE,NotEqualDepth:$E,MultiplyOperation:Rc,MixOperation:e1,AddOperation:t1,NoToneMapping:Zf,LinearToneMapping:Ng,ReinhardToneMapping:n1,Uncharted2ToneMapping:r1,CineonToneMapping:i1,UVMapping:Fh,CubeReflectionMapping:Ih,CubeRefractionMapping:rh,EquirectangularReflectionMapping:Dg,EquirectangularRefractionMapping:ih,SphericalReflectionMapping:Ug,CubeUVReflectionMapping:Gh,CubeUVRefractionMapping:kh,RepeatWrapping:Bi,ClampToEdgeWrapping:xr,MirroredRepeatWrapping:rs,NearestFilter:_r,NearestMipMapNearestFilter:Hh,NearestMipMapLinearFilter:Vh,LinearFilter:ar,LinearMipMapNearestFilter:Bg,LinearMipMapLinearFilter:Cc,UnsignedByteType:jh,ByteType:a1,ShortType:s1,UnsignedShortType:Tu,IntType:o1,UnsignedIntType:Pg,FloatType:wo,HalfFloatType:Wh,UnsignedShort4444Type:l1,UnsignedShort5551Type:u1,UnsignedShort565Type:c1,UnsignedInt248Type:Su,AlphaFormat:f1,RGBFormat:Eo,RGBAFormat:ui,LuminanceFormat:h1,LuminanceAlphaFormat:d1,RGBEFormat:s2,DepthFormat:es,DepthStencilFormat:Mo,RGB_S3TC_DXT1_Format:Om,RGBA_S3TC_DXT1_Format:Nm,RGBA_S3TC_DXT3_Format:Dm,RGBA_S3TC_DXT5_Format:Um,RGB_PVRTC_4BPPV1_Format:Bm,RGB_PVRTC_2BPPV1_Format:Pm,RGBA_PVRTC_4BPPV1_Format:zm,RGBA_PVRTC_2BPPV1_Format:Fm,RGB_ETC1_Format:p1,LoopOnce:v1,LoopRepeat:m1,LoopPingPong:g1,InterpolateDiscrete:Au,InterpolateLinear:bu,InterpolateSmooth:Qf,ZeroCurvatureEnding:is,ZeroSlopeEnding:Ja,WrapAroundEnding:Ru,TrianglesDrawMode:zg,TriangleStripDrawMode:y1,TriangleFanDrawMode:b1,LinearEncoding:Cu,sRGBEncoding:x1,GammaEncoding:Fg,RGBEEncoding:_1,LogLuvEncoding:o2,RGBM7Encoding:w1,RGBM16Encoding:E1,RGBDEncoding:M1,BasicDepthPacking:T1,RGBADepthPacking:S1,CubeGeometry:Ao,Face4:j3,LineStrip:W3,LinePieces:q3,MeshFaceMaterial:X3,MultiMaterial:Y3,PointCloud:Z3,Particle:Q3,ParticleSystem:K3,PointCloudMaterial:J3,ParticleBasicMaterial:$3,ParticleSystemMaterial:eN,Vertex:tN,DynamicBufferAttribute:nN,Int8Attribute:rN,Uint8Attribute:iN,Uint8ClampedAttribute:aN,Int16Attribute:sN,Uint16Attribute:oN,Int32Attribute:lN,Uint32Attribute:uN,Float32Attribute:cN,Float64Attribute:fN,ClosedSplineCurve3:tM,SplineCurve3:nM,Spline:ny,AxisHelper:hN,BoundingBoxHelper:dN,EdgesHelper:pN,WireframeHelper:vN,XHRLoader:mN,BinaryTextureLoader:gN,GeometryUtils:yN,ImageUtils:bN,Projector:xN,CanvasRenderer:_N}),U=Object.assign({},wN),lm=0,um=1,cm=2,fm=3,hm=4,dm=5,pm=6,vm=7,mm=8,gm=9,ym=10,bm=11,EN=1,MN=2,TN=3,SN=4,AN=5,RN=0,CN=2,LN=3,ON=4,NN=5,DN=7,UN=9,fw=0,hw=1,dw=2,yo=function(e,t,n,r){var a=new U.Color;return a.setRGB(e,t,n),r<=.99?new U.MeshBasicMaterial({color:a.getHex(),opacity:r+.1,transparent:!0,depthWrite:!0,blendSrc:U.SrcAlphaFactor,blendDst:U.OneMinusSrcAlphaFactor,blendEquation:U.ReverseSubtractEquation,blending:U.NormalBlending}):new U.MeshPhongMaterial({color:a.getHex(),opacity:r,blending:U.NormalBlending})},xm=function(e,t,n){var r=new U.Vector3,a=new U.Vector3;r.subVectors(t,e.origin);var o=e.direction.dot(n);if(!(Math.abs(o)<e.precision)){var u=n.dot(r)/o;return a.addVectors(e.origin,e.direction.clone().multiplyScalar(u)),a}},BN=function(e,t){var n=new U.Vector3;n.subVectors(e.origin,t.origin);var r=t.direction.clone(),a=e.direction.clone(),o=n.dot(r),u=r.dot(a),c=n.dot(a),f=r.dot(r),d=a.dot(a),p=d*f-u*u;if(!(Math.abs(p)<=1e-4)){var v=o*u-c*f,m=v/p;return m}},PN=function(e,t,n){var r=e.origin.clone();r.project(t);var a=e.direction.clone().add(e.origin);a.project(t);var o=a.clone().sub(r),u=new U.Vector2,c=u.subVectors(n,r).dot(o)/o.dot(o),f=new U.Vector2;f.addVectors(r,o.clone().multiplyScalar(c));var d=new U.Vector3(f.x,f.y,.5);d.unproject(t);var p=new U.Ray(t.position,d.sub(t.position).normalize());return BN(e,p)};U.Object3D;var Qh=function(e){function t(n){n=n||{};var r=n.origin||new U.Vector3(0,0,0),a=n.direction||new U.Vector3(1,0,0),o=n.length||1,u=n.headLength||.2,c=n.shaftDiameter||.05,f=n.headDiameter||.1,d=n.material||new U.MeshBasicMaterial,p=o-u,v=new U.CylinderGeometry(c*.5,c*.5,p,12,1),m=new U.Matrix4;m.setPosition(new U.Vector3(0,p*.5,0)),v.applyMatrix(m);var y=new U.CylinderGeometry(0,f*.5,u,12,1);m.setPosition(new U.Vector3(0,p+u*.5,0)),y.applyMatrix(m),v.merge(y),e.call(this,v,d),this.position.copy(r),this.setDirection(a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setDirection=function(r){var a=new U.Vector3;r.x===0&&r.z===0?a.set(1,0,0):a.set(0,1,0).cross(r);var o=Math.acos(new U.Vector3(0,1,0).dot(r.clone().normalize()));this.matrix=new U.Matrix4().makeRotationAxis(a.normalize(),o),this.rotation.setFromRotationMatrix(this.matrix,this.rotation.order)},t.prototype.setLength=function(r){this.scale.set(r,r,r)},t.prototype.setColor=function(r){this.material.color.setHex(r)},t.prototype.dispose=function(){this.geometry!==void 0&&this.geometry.dispose(),this.material!==void 0&&this.material.dispose()},t}(U.Mesh);U.STLLoader=function(e){this.manager=e!==void 0?e:U.DefaultLoadingManager};U.STLLoader.prototype={constructor:U.STLLoader,load:function(e,t,n,r){var a=this,o=new U.FileLoader(a.manager);o.setResponseType("arraybuffer"),o.load(e,function(u){t(a.parse(u))},n,r)},parse:function(e){function t(c){var f,d,p,v;if(v=new DataView(c),d=32/8*3+32/8*3*3+16/8,p=v.getUint32(80,!0),f=80+32/8+p*d,f===v.byteLength)return!0;for(var m=[115,111,108,105,100],y=0;y<5;y++)if(m[y]!=v.getUint8(y,!1))return!0;return!1}function n(c){for(var f=new DataView(c),d=f.getUint32(80,!0),p,v,m,y=!1,_,M,T,E,A,C=0;C<70;C++)f.getUint32(C,!1)==1129270351&&f.getUint8(C+4)==82&&f.getUint8(C+5)==61&&(y=!0,_=[],M=f.getUint8(C+6)/255,T=f.getUint8(C+7)/255,E=f.getUint8(C+8)/255,A=f.getUint8(C+9)/255);for(var L=84,I=12*4+2,j=new U.BufferGeometry,q=[],ne=[],W=0;W<d;W++){var oe=L+W*I,ae=f.getFloat32(oe,!0),he=f.getFloat32(oe+4,!0),fe=f.getFloat32(oe+8,!0);if(y){var se=f.getUint16(oe+48,!0);(se&32768)===0?(p=(se&31)/31,v=(se>>5&31)/31,m=(se>>10&31)/31):(p=M,v=T,m=E)}for(var z=1;z<=3;z++){var N=oe+z*12;q.push(f.getFloat32(N,!0)),q.push(f.getFloat32(N+4,!0)),q.push(f.getFloat32(N+8,!0)),ne.push(ae,he,fe),y&&_.push(p,v,m)}}return j.addAttribute("position",new U.BufferAttribute(new Float32Array(q),3)),j.addAttribute("normal",new U.BufferAttribute(new Float32Array(ne),3)),y&&(j.addAttribute("color",new U.BufferAttribute(new Float32Array(_),3)),j.hasColors=!0,j.alpha=A),j}function r(c){for(var f=new U.BufferGeometry,d=/facet([\s\S]*?)endfacet/g,p=0,v=/[\s]+([+-]?(?:\d+.\d+|\d+.|\d+|.\d+)(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+v+v+v,"g"),y=new RegExp("normal"+v+v+v,"g"),_=[],M=[],T=new U.Vector3,E;(E=d.exec(c))!==null;){for(var A=0,C=0,L=E[0];(E=y.exec(L))!==null;)T.x=parseFloat(E[1]),T.y=parseFloat(E[2]),T.z=parseFloat(E[3]),C++;for(;(E=m.exec(L))!==null;)_.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])),M.push(T.x,T.y,T.z),A++;C!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+p),A!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+p),p++}return f.addAttribute("position",new U.Float32BufferAttribute(_,3)),f.addAttribute("normal",new U.Float32BufferAttribute(M,3)),f}function a(c){if(typeof c!="string"){var f=new Uint8Array(c);if(window.TextDecoder!==void 0)return new TextDecoder().decode(f);for(var d="",p=0,v=c.byteLength;p<v;p++)d+=String.fromCharCode(f[p]);return d}else return c}function o(c){if(typeof c=="string"){for(var f=new Uint8Array(c.length),d=0;d<c.length;d++)f[d]=c.charCodeAt(d)&255;return f.buffer||f}else return c}var u=o(e);return t(u)?n(u):r(a(e))}};var zN=/^[og]\s*(.+)?/,FN=/^mtllib /,IN=/^usemtl /;function GN(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=t,this.object.fromDeclaration=n!==!1;return}var r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(o,u){var c=this._finalize(!1);c&&(c.inherited||c.groupCount<=0)&&this.materials.splice(c.index,1);var f={index:this.materials.length,name:o||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:c!==void 0?c.smooth:this.smooth,groupStart:c!==void 0?c.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(d){var p={index:typeof d=="number"?d:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return p.clone=this.clone.bind(p),p}};return this.materials.push(f),f},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(o){var u=this.currentMaterial();if(u&&u.groupEnd===-1&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),o&&this.materials.length>1)for(var c=this.materials.length-1;c>=0;c--)this.materials[c].groupCount<=0&&this.materials.splice(c,1);return o&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),u}},r&&r.name&&typeof r.clone=="function"){var a=r.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(t,n){var r=parseInt(t,10);return(r>=0?r-1:r+n/3)*3},parseNormalIndex:function(t,n){var r=parseInt(t,10);return(r>=0?r-1:r+n/3)*3},parseUVIndex:function(t,n){var r=parseInt(t,10);return(r>=0?r-1:r+n/2)*2},addVertex:function(t,n,r){var a=this.vertices,o=this.object.geometry.vertices;o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2]),o.push(a[r+0],a[r+1],a[r+2])},addVertexPoint:function(t){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0],n[t+1],n[t+2])},addVertexLine:function(t){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0],n[t+1],n[t+2])},addNormal:function(t,n,r){var a=this.normals,o=this.object.geometry.normals;o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2]),o.push(a[r+0],a[r+1],a[r+2])},addColor:function(t,n,r){var a=this.colors,o=this.object.geometry.colors;o.push(a[t+0],a[t+1],a[t+2]),o.push(a[n+0],a[n+1],a[n+2]),o.push(a[r+0],a[r+1],a[r+2])},addUV:function(t,n,r){var a=this.uvs,o=this.object.geometry.uvs;o.push(a[t+0],a[t+1]),o.push(a[n+0],a[n+1]),o.push(a[r+0],a[r+1])},addUVLine:function(t){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[t+0],n[t+1])},addFace:function(t,n,r,a,o,u,c,f,d){var p=this.vertices.length,v=this.parseVertexIndex(t,p),m=this.parseVertexIndex(n,p),y=this.parseVertexIndex(r,p);if(this.addVertex(v,m,y),a!==void 0&&a!==""){var _=this.uvs.length;v=this.parseUVIndex(a,_),m=this.parseUVIndex(o,_),y=this.parseUVIndex(u,_),this.addUV(v,m,y)}if(c!==void 0&&c!==""){var M=this.normals.length;v=this.parseNormalIndex(c,M),m=c===f?v:this.parseNormalIndex(f,M),y=c===d?v:this.parseNormalIndex(d,M),this.addNormal(v,m,y)}this.colors.length>0&&this.addColor(v,m,y)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var n=this.vertices.length,r=0,a=t.length;r<a;r++)this.addVertexPoint(this.parseVertexIndex(t[r],n))},addLineGeometry:function(t,n){this.object.geometry.type="Line";for(var r=this.vertices.length,a=this.uvs.length,o=0,u=t.length;o<u;o++)this.addVertexLine(this.parseVertexIndex(t[o],r));for(var c=0,u=n.length;c<u;c++)this.addUVLine(this.parseUVIndex(n[c],a))}};return e.startObject("",!1),e}U.OBJLoader=function(e){this.manager=e!==void 0?e:U.DefaultLoadingManager,this.materials=null};U.OBJLoader.prototype={constructor:U.OBJLoader,load:function(e,t,n,r){var a=this,o=new U.FileLoader(a.manager);o.setPath(this.path),o.load(e,function(u){t(a.parse(u))},n,r)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(e){console.time("OBJLoader");var t=new GN;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));for(var n=e.split(`
`),r="",a="",o=0,u=[],c=typeof"".trimLeft=="function",f=0,d=n.length;f<d;f++)if(r=n[f],r=c?r.trimLeft():r.trim(),o=r.length,o!==0&&(a=r.charAt(0),a!=="#"))if(a==="v"){var p=r.split(/\s+/);switch(p[0]){case"v":t.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),p.length===8&&t.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":t.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":t.uvs.push(parseFloat(p[1]),parseFloat(p[2]));break}}else if(a==="f"){for(var v=r.substr(1).trim(),m=v.split(/\s+/),y=[],_=0,M=m.length;_<M;_++){var T=m[_];if(T.length>0){var E=T.split("/");y.push(E)}}for(var A=y[0],_=1,M=y.length-1;_<M;_++){var C=y[_],L=y[_+1];t.addFace(A[0],C[0],L[0],A[1],C[1],L[1],A[2],C[2],L[2])}}else if(a==="l"){var I=r.substring(1).trim().split(" "),j=[],q=[];if(r.indexOf("/")===-1)j=I;else for(var ne=0,W=I.length;ne<W;ne++){var oe=I[ne].split("/");oe[0]!==""&&j.push(oe[0]),oe[1]!==""&&q.push(oe[1])}t.addLineGeometry(j,q)}else if(a==="p"){var v=r.substr(1).trim(),ae=v.split(" ");t.addPointGeometry(ae)}else if((u=zN.exec(r))!==null){var he=(" "+u[0].substr(1).trim()).substr(1);t.startObject(he)}else if(IN.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(FN.test(r))t.materialLibraries.push(r.substring(7).trim());else if(a==="s"){if(u=r.split(" "),u.length>1){var fe=u[1].trim().toLowerCase();t.object.smooth=fe!=="0"&&fe!=="off"}else t.object.smooth=!0;var se=t.object.currentMaterial();se&&(se.smooth=t.object.smooth)}else{if(r==="\0")continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+r+'"')}t.finalize();var z=new U.Object3D;z.materialLibraries=[].concat(t.materialLibraries);for(var f=0,d=t.objects.length;f<d;f++){var N=t.objects[f],$=N.geometry,x=N.materials,S=$.type==="Line",w=$.type==="Points",R=!1;if($.vertices.length!==0){var D=new U.BufferGeometry;D.addAttribute("position",new U.Float32BufferAttribute($.vertices,3)),$.normals.length>0?D.addAttribute("normal",new U.Float32BufferAttribute($.normals,3)):D.computeVertexNormals(),$.colors.length>0&&(R=!0,D.addAttribute("color",new U.Float32BufferAttribute($.colors,3))),$.uvs.length>0&&D.addAttribute("uv",new U.Float32BufferAttribute($.uvs,2));for(var B=[],H=0,Q=x.length;H<Q;H++){var P=x[H],se=void 0;if(this.materials!==null){if(se=this.materials.create(P.name),S&&se&&!(se instanceof U.LineBasicMaterial)){var X=new U.LineBasicMaterial;U.Material.prototype.copy.call(X,se),X.color.copy(se.color),X.lights=!1,se=X}else if(w&&se&&!(se instanceof U.PointsMaterial)){var le=new U.PointsMaterial({size:10,sizeAttenuation:!1});U.Material.prototype.copy.call(le,se),le.color.copy(se.color),le.map=se.map,le.lights=!1,se=le}}se||(S?se=new U.LineBasicMaterial:w?se=new U.PointsMaterial({size:1,sizeAttenuation:!1}):se=new U.MeshPhongMaterial,se.name=P.name),se.flatShading=!P.smooth,se.vertexColors=R?U.VertexColors:U.NoColors,B.push(se)}var Te;if(B.length>1){for(var H=0,Q=x.length;H<Q;H++){var P=x[H];D.addGroup(P.groupStart,P.groupCount,H)}S?Te=new U.LineSegments(D,B):w?Te=new U.Points(D,B):Te=new U.Mesh(D,B)}else S?Te=new U.LineSegments(D,B[0]):w?Te=new U.Points(D,B[0]):Te=new U.Mesh(D,B[0]);Te.name=N.name,z.add(Te)}}return console.timeEnd("OBJLoader"),z}};U.MTLLoader=function(e){this.manager=e!==void 0?e:U.DefaultLoadingManager};U.MTLLoader.prototype={constructor:U.MTLLoader,crossOrigin:"anonymous",load:function(e,t,n,r){var a=this,o=this.path===void 0?U.LoaderUtils.extractUrlBase(e):this.path,u=new U.FileLoader(this.manager);u.setPath(this.path),u.load(e,function(c){t(a.parse(c,o))},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setTexturePath:function(e){return console.warn("THREE.MTLLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var n=e.split(`
`),r={},a=/\s+/,o={},u=0;u<n.length;u++){var c=n[u];if(c=c.trim(),!(c.length===0||c.charAt(0)==="#")){var f=c.indexOf(" "),d=f>=0?c.substring(0,f):c;d=d.toLowerCase();var p=f>=0?c.substring(f+1):"";if(p=p.trim(),d==="newmtl")r={name:p},o[p]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){var v=p.split(a,3);r[d]=[parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])]}else r[d]=p}}var m=new U.MTLLoader.MaterialCreator(this.resourcePath||t,this.materialOptions);return m.setCrossOrigin(this.crossOrigin),m.setManager(this.manager),m.setMaterials(o),m}};U.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:U.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:U.RepeatWrapping};U.MTLLoader.MaterialCreator.prototype={constructor:U.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],a={};t[n]=a;for(var o in r){var u=!0,c=r[o],f=o.toLowerCase();switch(f){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(c=[c[0]/255,c[1]/255,c[2]/255]),this.options&&this.options.ignoreZeroRGBs&&c[0]===0&&c[1]===0&&c[2]===0&&(u=!1);break}u&&(a[f]=c)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function a(d,p){return typeof p!="string"||p===""?"":/^https?:\/\//i.test(p)?p:d+p}function o(d,p){if(!r[d]){var v=t.getTextureParams(p,r),m=t.loadTexture(a(t.baseUrl,v.url));m.repeat.copy(v.scale),m.offset.copy(v.offset),m.wrapS=t.wrap,m.wrapT=t.wrap,r[d]=m}}for(var u in n){var c=n[u],f;if(c!=="")switch(u.toLowerCase()){case"kd":r.color=new U.Color().fromArray(c);break;case"ks":r.specular=new U.Color().fromArray(c);break;case"ke":r.emissive=new U.Color().fromArray(c);break;case"map_kd":o("map",c);break;case"map_ks":o("specularMap",c);break;case"map_ke":o("emissiveMap",c);break;case"norm":o("normalMap",c);break;case"map_bump":case"bump":o("bumpMap",c);break;case"map_d":o("alphaMap",c),r.transparent=!0;break;case"ns":r.shininess=parseFloat(c);break;case"d":f=parseFloat(c),f<1&&(r.opacity=f,r.transparent=!0);break;case"tr":f=parseFloat(c),this.options&&this.options.invertTrProperty&&(f=1-f),f>0&&(r.opacity=1-f,r.transparent=!0);break}}return this.materials[e]=new U.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var n={scale:new U.Vector2(1,1),offset:new U.Vector2(0,0)},r=e.split(/\s+/),a;return a=r.indexOf("-bm"),a>=0&&(t.bumpScale=parseFloat(r[a+1]),r.splice(a,2)),a=r.indexOf("-s"),a>=0&&(n.scale.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),a=r.indexOf("-o"),a>=0&&(n.offset.set(parseFloat(r[a+1]),parseFloat(r[a+2])),r.splice(a,4)),n.url=r.join(" ").trim(),n},loadTexture:function(e,t,n,r,a){var o,u=U.Loader.Handlers.get(e),c=this.manager!==void 0?this.manager:U.DefaultLoadingManager;return u===null&&(u=new U.TextureLoader(c)),u.setCrossOrigin&&u.setCrossOrigin(this.crossOrigin),o=u.load(e,n,r,a),t!==void 0&&(o.mapping=t),o}};U.ColladaLoader=function(e){this.manager=e!==void 0?e:U.DefaultLoadingManager};U.ColladaLoader.prototype={constructor:U.ColladaLoader,crossOrigin:"Anonymous",load:function(e,t,n,r){var a=this,o=U.Loader.prototype.extractUrlBase(e),u=new U.FileLoader(a.manager);u.load(e,function(c){t(a.parse(c,o))},n,r)},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){function n(F,G){for(var Y=[],Z=F.childNodes,K=0,be=Z.length;K<be;K++){var Ee=Z[K];Ee.nodeName===G&&Y.push(Ee)}return Y}function r(F){if(F.length===0)return[];for(var G=F.trim().split(/\s+/),Y=new Array(G.length),Z=0,K=G.length;Z<K;Z++)Y[Z]=G[Z];return Y}function a(F){if(F.length===0)return[];for(var G=F.trim().split(/\s+/),Y=new Array(G.length),Z=0,K=G.length;Z<K;Z++)Y[Z]=parseFloat(G[Z]);return Y}function o(F){if(F.length===0)return[];for(var G=F.trim().split(/\s+/),Y=new Array(G.length),Z=0,K=G.length;Z<K;Z++)Y[Z]=parseInt(G[Z]);return Y}function u(F){return F.substring(1)}function c(){return"three_default_"+ml++}function f(F){return Object.keys(F).length===0}function d(F){return{unit:p(n(F,"unit")[0]),upAxis:v(n(F,"up_axis")[0])}}function p(F){return F!==void 0?parseFloat(F.getAttribute("meter")):1}function v(F){return F!==void 0?F.textContent:"Y_UP"}function m(F,G,Y,Z){var K=n(F,G)[0];if(K!==void 0)for(var be=n(K,Y),Ee=0;Ee<be.length;Ee++)Z(be[Ee])}function y(F,G){for(var Y in F){var Z=F[Y];Z.build=G(F[Y])}}function _(F,G){return F.build!==void 0||(F.build=G(F)),F.build}function M(F){for(var G={sources:{},samplers:{},channels:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1){var be;switch(K.nodeName){case"source":be=K.getAttribute("id"),G.sources[be]=rn(K);break;case"sampler":be=K.getAttribute("id"),G.samplers[be]=T(K);break;case"channel":be=K.getAttribute("target"),G.channels[be]=E(K);break;default:console.log(K)}}}tt.animations[F.getAttribute("id")]=G}function T(F){for(var G={inputs:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"input":var be=u(K.getAttribute("source")),Ee=K.getAttribute("semantic");G.inputs[Ee]=be;break}}return G}function E(F){var G={},Y=F.getAttribute("target"),Z=Y.split("/"),K=Z.shift(),be=Z.shift(),Ee=be.indexOf("(")!==-1,Le=be.indexOf(".")!==-1;if(Le)Z=be.split("."),be=Z.shift(),G.member=Z.shift();else if(Ee){var Je=be.split("(");be=Je.shift();for(var ft=0;ft<Je.length;ft++)Je[ft]=parseInt(Je[ft].replace(/\)/,""));G.indices=Je}return G.id=K,G.sid=be,G.arraySyntax=Ee,G.memberSyntax=Le,G.sampler=u(F.getAttribute("source")),G}function A(F){var G=[],Y=F.channels,Z=F.samplers,K=F.sources;for(var be in Y)if(Y.hasOwnProperty(be)){var Ee=Y[be],Le=Z[Ee.sampler],Je=Le.inputs.INPUT,ft=Le.inputs.OUTPUT,ze=K[Je],at=K[ft],Tt=L(Ee,ze,at);W(Tt,G)}return G}function C(F){return _(tt.animations[F],A)}function L(F,G,Y){var Z=tt.nodes[F.id],K=it(Z.id),be=Z.transforms[F.sid],Ee=Z.matrix.clone().transpose(),Le,Je,ft,ze,at,Tt,ct={};switch(be){case"matrix":for(ft=0,ze=G.array.length;ft<ze;ft++)if(Le=G.array[ft],Je=ft*Y.stride,ct[Le]===void 0&&(ct[Le]={}),F.arraySyntax===!0){var Ft=Y.array[Je],st=F.indices[0]+4*F.indices[1];ct[Le][st]=Ft}else for(at=0,Tt=Y.stride;at<Tt;at++)ct[Le][at]=Y.array[Je+at];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',be);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',be);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',be);break}var Ct=I(ct,Ee),en={name:K.uuid,keyframes:Ct};return en}function I(F,G){var Y=[];for(var Z in F)Y.push({time:parseFloat(Z),value:F[Z]});Y.sort(be);for(var K=0;K<16;K++)oe(Y,K,G.elements[K]);return Y;function be(Ee,Le){return Ee.time-Le.time}}var j=new U.Vector3,q=new U.Vector3,ne=new U.Quaternion;function W(F,G){for(var Y=F.keyframes,Z=F.name,K=[],be=[],Ee=[],Le=[],Je=0,ft=Y.length;Je<ft;Je++){var ze=Y[Je],at=ze.time,Tt=ze.value;Sn.fromArray(Tt).transpose(),Sn.decompose(j,ne,q),K.push(at),be.push(j.x,j.y,j.z),Ee.push(ne.x,ne.y,ne.z,ne.w),Le.push(q.x,q.y,q.z)}return be.length>0&&G.push(new U.VectorKeyframeTrack(Z+".position",K,be)),Ee.length>0&&G.push(new U.QuaternionKeyframeTrack(Z+".quaternion",K,Ee)),Le.length>0&&G.push(new U.VectorKeyframeTrack(Z+".scale",K,Le)),G}function oe(F,G,Y){var Z,K=!0,be,Ee;for(be=0,Ee=F.length;be<Ee;be++)Z=F[be],Z.value[G]===void 0?Z.value[G]=null:K=!1;if(K===!0)for(be=0,Ee=F.length;be<Ee;be++)Z=F[be],Z.value[G]=Y;else ae(F,G)}function ae(F,G){for(var Y,Z,K=0,be=F.length;K<be;K++){var Ee=F[K];if(Ee.value[G]===null){if(Y=he(F,K,G),Z=fe(F,K,G),Y===null){Ee.value[G]=Z.value[G];continue}if(Z===null){Ee.value[G]=Y.value[G];continue}se(Ee,Y,Z,G)}}}function he(F,G,Y){for(;G>=0;){var Z=F[G];if(Z.value[Y]!==null)return Z;G--}return null}function fe(F,G,Y){for(;G<F.length;){var Z=F[G];if(Z.value[Y]!==null)return Z;G++}return null}function se(F,G,Y,Z){if(Y.time-G.time===0){F.value[Z]=G.value[Z];return}F.value[Z]=(F.time-G.time)*(Y.value[Z]-G.value[Z])/(Y.time-G.time)+G.value[Z]}function z(F){for(var G={name:F.getAttribute("id")||"default",start:parseFloat(F.getAttribute("start")||0),end:parseFloat(F.getAttribute("end")||0),animations:[]},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"instance_animation":G.animations.push(u(K.getAttribute("url")));break}}tt.clips[F.getAttribute("id")]=G}function N(F){for(var G=[],Y=F.name,Z=F.end-F.start||-1,K=F.animations,be=0,Ee=K.length;be<Ee;be++)for(var Le=C(K[be]),Je=0,ft=Le.length;Je<ft;Je++)G.push(Le[Je]);return new U.AnimationClip(Y,Z,G)}function $(F){return _(tt.clips[F],N)}function x(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"skin":G.id=u(K.getAttribute("source")),G.skin=S(K);break;case"morph":G.id=u(K.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}tt.controllers[F.getAttribute("id")]=G}function S(F){for(var G={sources:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"bind_shape_matrix":G.bindShapeMatrix=a(K.textContent);break;case"source":var be=K.getAttribute("id");G.sources[be]=rn(K);break;case"joints":G.joints=w(K);break;case"vertex_weights":G.vertexWeights=R(K);break}}return G}function w(F){for(var G={inputs:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"input":var be=K.getAttribute("semantic"),Ee=u(K.getAttribute("source"));G.inputs[be]=Ee;break}}return G}function R(F){for(var G={inputs:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"input":var be=K.getAttribute("semantic"),Ee=u(K.getAttribute("source")),Le=parseInt(K.getAttribute("offset"));G.inputs[be]={id:Ee,offset:Le};break;case"vcount":G.vcount=o(K.textContent);break;case"v":G.v=o(K.textContent);break}}return G}function D(F){var G={id:F.id},Y=tt.geometries[G.id];return F.skin!==void 0&&(G.skin=B(F.skin),Y.sources.skinIndices=G.skin.indices,Y.sources.skinWeights=G.skin.weights),G}function B(F){var G=4,Y={joints:[],indices:{array:[],stride:G},weights:{array:[],stride:G}},Z=F.sources,K=F.vertexWeights,be=K.vcount,Ee=K.v,Le=K.inputs.JOINT.offset,Je=K.inputs.WEIGHT.offset,ft=F.sources[F.joints.inputs.JOINT],ze=F.sources[F.joints.inputs.INV_BIND_MATRIX],at=Z[K.inputs.WEIGHT.id].array,Tt=0,ct,Ft,st;for(ct=0,st=be.length;ct<st;ct++){var Ct=be[ct],en=[];for(Ft=0;Ft<Ct;Ft++){var un=Ee[Tt+Le],Ut=Ee[Tt+Je],jt=at[Ut];en.push({index:un,weight:jt}),Tt+=2}for(en.sort(Zi),Ft=0;Ft<G;Ft++){var tn=en[Ft];tn!==void 0?(Y.indices.array.push(tn.index),Y.weights.array.push(tn.weight)):(Y.indices.array.push(0),Y.weights.array.push(0))}}for(Y.bindMatrix=new U.Matrix4().fromArray(F.bindShapeMatrix).transpose(),ct=0,st=ft.array.length;ct<st;ct++){var nn=ft.array[ct],Rn=new U.Matrix4().fromArray(ze.array,ct*ze.stride).transpose();Y.joints.push({name:nn,boneInverse:Rn})}return Y;function Zi(Oc,gl){return gl.weight-Oc.weight}}function H(F){return _(tt.controllers[F],D)}function Q(F){var G={init_from:n(F,"init_from")[0].textContent};tt.images[F.getAttribute("id")]=G}function P(F){return F.build!==void 0?F.build:F.init_from}function X(F){return _(tt.images[F],P)}function le(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"profile_COMMON":G.profile=Te(K);break}}tt.effects[F.getAttribute("id")]=G}function Te(F){for(var G={surfaces:{},samplers:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"newparam":xe(K,G);break;case"technique":G.technique=Ie(K);break}}return G}function xe(F,G){for(var Y=F.getAttribute("sid"),Z=0,K=F.childNodes.length;Z<K;Z++){var be=F.childNodes[Z];if(be.nodeType===1)switch(be.nodeName){case"surface":G.surfaces[Y]=Ae(be);break;case"sampler2D":G.samplers[Y]=Oe(be);break}}}function Ae(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"init_from":G.init_from=K.textContent;break}}return G}function Oe(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"source":G.source=K.textContent;break}}return G}function Ie(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"constant":case"lambert":case"blinn":case"phong":G.type=K.nodeName,G.parameters=ht(K);break}}return G}function ht(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparent":case"transparency":G[K.nodeName]=Qe(K);break}}return G}function Qe(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"color":G[K.nodeName]=a(K.textContent);break;case"float":G[K.nodeName]=parseFloat(K.textContent);break;case"texture":G[K.nodeName]={id:K.getAttribute("texture"),extra:dt(K)};break}}return G}function dt(F){for(var G={technique:{}},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"extra":_t(K,G);break}}return G}function _t(F,G){for(var Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"technique":mt(K,G);break}}}function mt(F,G){for(var Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":G.technique[K.nodeName]=parseFloat(K.textContent);break;case"wrapU":case"wrapV":K.textContent.toUpperCase()==="TRUE"?G.technique[K.nodeName]=1:K.textContent.toUpperCase()==="FALSE"?G.technique[K.nodeName]=0:G.technique[K.nodeName]=parseInt(K.textContent);break}}}function Ke(F){return F}function Kn(F){return _(tt.effects[F],Ke)}function on(F){for(var G={name:F.getAttribute("name")},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"instance_effect":G.url=u(K.getAttribute("url"));break}}tt.materials[F.getAttribute("id")]=G}function hn(F){var G=Kn(F.url),Y=G.profile.technique,Z;switch(Y.type){case"phong":case"blinn":Z=new U.MeshPhongMaterial;break;case"lambert":Z=new U.MeshLambertMaterial;break;default:Z=new U.MeshBasicMaterial;break}Z.name=F.name;function K(Je){var ft=G.profile.samplers[Je.id];if(ft!==void 0){var ze=G.profile.surfaces[ft.source],at=Hn.load(X(ze.init_from)),Tt=Je.extra;if(Tt!==void 0&&Tt.technique!==void 0&&f(Tt.technique)===!1){var ct=Tt.technique;at.wrapS=ct.wrapU?U.RepeatWrapping:U.ClampToEdgeWrapping,at.wrapT=ct.wrapV?U.RepeatWrapping:U.ClampToEdgeWrapping,at.offset.set(ct.offsetU||0,ct.offsetV||0),at.repeat.set(ct.repeatU||1,ct.repeatV||1)}else at.wrapS=U.RepeatWrapping,at.wrapT=U.RepeatWrapping;return at}return console.error("THREE.ColladaLoader: Undefined sampler",Je.id),null}var be=Y.parameters;for(var Ee in be){var Le=be[Ee];switch(Ee){case"diffuse":Le.color&&Z.color.fromArray(Le.color),Le.texture&&(Z.map=K(Le.texture));break;case"specular":Le.color&&Z.specular&&Z.specular.fromArray(Le.color),Le.texture&&(Z.specularMap=K(Le.texture));break;case"shininess":Le.float&&Z.shininess&&(Z.shininess=Le.float);break;case"emission":Le.color&&Z.emissive&&Z.emissive.fromArray(Le.color);break;case"transparent":Z.transparent=!0;break;case"transparency":Le.float!==void 0&&(Z.opacity=Le.float),Z.transparent=!0;break}}return Z}function vt(F){return _(tt.materials[F],hn)}function pe(F){for(var G={name:F.getAttribute("name")},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"optics":G.optics=Ne(K);break}}tt.cameras[F.getAttribute("id")]=G}function Ne(F){for(var G=0;G<F.childNodes.length;G++){var Y=F.childNodes[G];switch(Y.nodeName){case"technique_common":return Pe(Y)}}return{}}function Pe(F){for(var G={},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];switch(Z.nodeName){case"perspective":case"orthographic":G.technique=Z.nodeName,G.parameters=Fe(Z);break}}return G}function Fe(F){for(var G={},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];switch(Z.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":G[Z.nodeName]=parseFloat(Z.textContent);break}}return G}function Be(F){var G;switch(F.optics.technique){case"perspective":G=new U.PerspectiveCamera(F.optics.parameters.yfov,F.optics.parameters.aspect_ratio,F.optics.parameters.znear,F.optics.parameters.zfar);break;case"orthographic":var Y=F.optics.parameters.ymag,Z=F.optics.parameters.xmag,K=F.optics.parameters.aspect_ratio;Z=Z===void 0?Y*K:Z,Y=Y===void 0?Z/K:Y,Z*=.5,Y*=.5,G=new U.OrthographicCamera(-Z,Z,Y,-Y,F.optics.parameters.znear,F.optics.parameters.zfar);break;default:G=new U.PerspectiveCamera;break}return G.name=F.name,G}function $e(F){var G=tt.cameras[F];return G!==void 0?_(G,Be):null}function Dt(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"technique_common":G=Lt(K);break}}tt.lights[F.getAttribute("id")]=G}function Lt(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"directional":case"point":case"spot":case"ambient":G.technique=K.nodeName,G.parameters=gn(K)}}return G}function gn(F){for(var G={},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"color":var be=a(K.textContent);G.color=new U.Color().fromArray(be);break;case"falloff_angle":G.falloffAngle=parseFloat(K.textContent);break;case"quadratic_attenuation":var Ee=parseFloat(K.textContent);G.distance=Ee?Math.sqrt(1/Ee):0;break}}return G}function Rt(F){var G;switch(F.technique){case"directional":G=new U.DirectionalLight;break;case"point":G=new U.PointLight;break;case"spot":G=new U.SpotLight;break;case"ambient":G=new U.AmbientLight;break}return F.parameters.color&&G.color.copy(F.parameters.color),F.parameters.distance&&(G.distance=F.parameters.distance),G}function wn(F){for(var G={name:F.getAttribute("name"),sources:{},vertices:{},primitives:[]},Y=n(F,"mesh")[0],Z=0;Z<Y.childNodes.length;Z++){var K=Y.childNodes[Z];if(K.nodeType===1){var be=K.getAttribute("id");switch(K.nodeName){case"source":G.sources[be]=rn(K);break;case"vertices":G.vertices=Tr(K);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",K.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":G.primitives.push(Jn(K));break;default:console.log(K)}}}tt.geometries[F.getAttribute("id")]=G}function rn(F){for(var G={array:[],stride:3},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"float_array":G.array=a(Z.textContent);break;case"Name_array":G.array=r(Z.textContent);break;case"technique_common":var K=n(Z,"accessor")[0];K!==void 0&&(G.stride=parseInt(K.getAttribute("stride")));break}}return G}function Tr(F){for(var G={},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];Z.nodeType===1&&(G[Z.getAttribute("semantic")]=u(Z.getAttribute("source")))}return G}function Jn(F){for(var G={type:F.nodeName,material:F.getAttribute("material"),count:parseInt(F.getAttribute("count")),inputs:{},stride:0},Y=0,Z=F.childNodes.length;Y<Z;Y++){var K=F.childNodes[Y];if(K.nodeType===1)switch(K.nodeName){case"input":var be=u(K.getAttribute("source")),Ee=K.getAttribute("semantic"),Le=parseInt(K.getAttribute("offset"));G.inputs[Ee]={id:be,offset:Le},G.stride=Math.max(G.stride,Le+1);break;case"vcount":G.vcount=o(K.textContent);break;case"p":G.p=o(K.textContent);break}}return G}function Yi(F){for(var G={},Y=0;Y<F.length;Y++){var Z=F[Y];G[Z.type]===void 0&&(G[Z.type]=[]),G[Z.type].push(Z)}return G}function Sr(F){var G={},Y=F.sources,Z=F.vertices,K=F.primitives;if(K.length===0)return{};var be=Yi(K);for(var Ee in be)G[Ee]=vi(be[Ee],Y,Z);return G}function vi(F,G,Y){for(var Z={},K={array:[],stride:0},be={array:[],stride:0},Ee={array:[],stride:0},Le={array:[],stride:0},Je={array:[],stride:4},ft={array:[],stride:4},ze=new U.BufferGeometry,at=[],Tt=0,ct=0,Ft=0;Ft<F.length;Ft++){var st=F[Ft],Ct=st.inputs,en=1;st.vcount&&st.vcount[0]===4&&(en=2),st.type==="lines"||st.type==="linestrips"?ct=st.count*2:ct=st.count*3*en,ze.addGroup(Tt,ct,Ft),Tt+=ct,st.material&&at.push(st.material);for(var un in Ct){var Ut=Ct[un];switch(un){case"VERTEX":for(var jt in Y){var tn=Y[jt];switch(jt){case"POSITION":yn(st,G[tn],Ut.offset,K.array),K.stride=G[tn].stride,G.skinWeights&&G.skinIndices&&(yn(st,G.skinIndices,Ut.offset,Je.array),yn(st,G.skinWeights,Ut.offset,ft.array));break;case"NORMAL":yn(st,G[tn],Ut.offset,be.array),be.stride=G[tn].stride;break;case"COLOR":yn(st,G[tn],Ut.offset,Le.array),Le.stride=G[tn].stride;break;case"TEXCOORD":yn(st,G[tn],Ut.offset,Ee.array),Ee.stride=G[tn].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',jt)}}break;case"NORMAL":yn(st,G[Ut.id],Ut.offset,be.array),be.stride=G[Ut.id].stride;break;case"COLOR":yn(st,G[Ut.id],Ut.offset,Le.array),Le.stride=G[Ut.id].stride;break;case"TEXCOORD":yn(st,G[Ut.id],Ut.offset,Ee.array),Ee.stride=G[Ut.id].stride;break}}}return K.array.length>0&&ze.addAttribute("position",new U.Float32BufferAttribute(K.array,K.stride)),be.array.length>0&&ze.addAttribute("normal",new U.Float32BufferAttribute(be.array,be.stride)),Le.array.length>0&&ze.addAttribute("color",new U.Float32BufferAttribute(Le.array,Le.stride)),Ee.array.length>0&&ze.addAttribute("uv",new U.Float32BufferAttribute(Ee.array,Ee.stride)),Je.array.length>0&&ze.addAttribute("skinIndex",new U.Float32BufferAttribute(Je.array,Je.stride)),ft.array.length>0&&ze.addAttribute("skinWeight",new U.Float32BufferAttribute(ft.array,ft.stride)),Z.data=ze,Z.type=F[0].type,Z.materialKeys=at,Z}function yn(F,G,Y,Z){var K=F.p,be=F.stride,Ee=F.vcount;function Le(Ut){for(var jt=K[Ut+Y]*ze,tn=jt+ze;jt<tn;jt++)Z.push(ft[jt])}var Je=0,ft=G.array,ze=G.stride;if(F.vcount!==void 0){for(var at=0,Tt=0,ct=Ee.length;Tt<ct;Tt++){var Ft=Ee[Tt];if(Ft===4){var st=at+be*0,Ct=at+be*1,en=at+be*2,un=at+be*3;Le(st),Le(Ct),Le(un),Le(Ct),Le(en),Le(un)}else if(Ft===3){var st=at+be*0,Ct=at+be*1,en=at+be*2;Le(st),Le(Ct),Le(en)}else Je=Math.max(Je,Ft);at+=be*Ft}Je>0&&console.log("THREE.ColladaLoader: Geometry has faces with more than 4 vertices.")}else for(var Tt=0,ct=K.length;Tt<ct;Tt+=be)Le(Tt)}function $n(F){return _(tt.geometries[F],Sr)}function Ar(F){for(var G={name:F.getAttribute("name")||"",joints:{},links:[]},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"technique_common":Oa(Z,G);break}}tt.kinematicsModels[F.getAttribute("id")]=G}function La(F){return F.build!==void 0?F.build:F}function Rr(F){return _(tt.kinematicsModels[F],La)}function Oa(F,G){for(var Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"joint":G.joints[Z.getAttribute("sid")]=Na(Z);break;case"link":G.links.push(Ps(Z));break}}}function Na(F){for(var G,Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"prismatic":case"revolute":G=Bs(Z);break}}return G}function Bs(F,Y){for(var Y={sid:F.getAttribute("sid"),name:F.getAttribute("name")||"",axis:new U.Vector3,limits:{min:0,max:0},type:F.nodeName,static:!1,zeroPosition:0,middlePosition:0},Z=0;Z<F.childNodes.length;Z++){var K=F.childNodes[Z];if(K.nodeType===1)switch(K.nodeName){case"axis":var be=a(K.textContent);Y.axis.fromArray(be);break;case"limits":var Ee=K.getElementsByTagName("max")[0],Le=K.getElementsByTagName("min")[0];Y.limits.max=parseFloat(Ee.textContent),Y.limits.min=parseFloat(Le.textContent);break}}return Y.limits.min>=Y.limits.max&&(Y.static=!0),Y.middlePosition=(Y.limits.min+Y.limits.max)/2,Y}function Ps(F){for(var G={sid:F.getAttribute("sid"),name:F.getAttribute("name")||"",attachments:[],transforms:[]},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"attachment_full":G.attachments.push(Cr(Z));break;case"matrix":case"translate":case"rotate":G.transforms.push(dn(Z));break}}return G}function Cr(F){for(var G={joint:F.getAttribute("joint").split("/").pop(),transforms:[],links:[]},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"link":G.links.push(Ps(Z));break;case"matrix":case"translate":case"rotate":G.transforms.push(dn(Z));break}}return G}function dn(F){var G={type:F.nodeName},Y=a(F.textContent);switch(G.type){case"matrix":G.obj=new U.Matrix4,G.obj.fromArray(Y).transpose();break;case"translate":G.obj=new U.Vector3,G.obj.fromArray(Y);break;case"rotate":G.obj=new U.Vector3,G.obj.fromArray(Y),G.angle=U.Math.degToRad(Y[3]);break}return G}function Un(F){for(var G={bindJointAxis:[]},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"bind_joint_axis":G.bindJointAxis.push(Gr(Z));break}}tt.kinematicsScenes[u(F.getAttribute("url"))]=G}function Gr(F){for(var G={target:F.getAttribute("target").split("/").pop()},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"axis":var K=Z.getElementsByTagName("param")[0];G.axis=K.textContent;var be=G.axis.split("inst_").pop().split("axis")[0];G.jointIndex=be.substr(0,be.length-1);break}}return G}function Da(F){return F.build!==void 0?F.build:F}function pl(F){return _(tt.kinematicsScenes[F],Da)}function vl(){var F=Object.keys(tt.kinematicsModels)[0],G=Object.keys(tt.kinematicsScenes)[0],Y=Object.keys(tt.visualScenes)[0];if(F===void 0||G===void 0)return;for(var Z=Rr(F),K=pl(G),be=je(Y),Ee=K.bindJointAxis,Le={},Je=0,ft=Ee.length;Je<ft;Je++){var ze=Ee[Je],at=et.querySelector('[sid="'+ze.target+'"]');if(at){var Tt=at.parentElement;ct(ze.jointIndex,Tt)}}function ct(st,Ct){var en=Ct.getAttribute("name"),un=Z.joints[st];be.traverse(function(Ut){Ut.name===en&&(Le[st]={object:Ut,transforms:zs(Ct),joint:un,position:un.zeroPosition})})}var Ft=new U.Matrix4;ri={joints:Z&&Z.joints,getJointValue:function(st){var Ct=Le[st];if(Ct)return Ct.position;console.warn("THREE.ColladaLoader: Joint "+st+" doesn't exist.")},setJointValue:function(st,Ct){var en=Le[st];if(en){var un=en.joint;if(Ct>un.limits.max||Ct<un.limits.min)console.warn("THREE.ColladaLoader: Joint "+st+" value "+Ct+" outside of limits (min: "+un.limits.min+", max: "+un.limits.max+").");else if(un.static)console.warn("THREE.ColladaLoader: Joint "+st+" is static.");else{var Ut=en.object,jt=un.axis,tn=en.transforms;Sn.identity();for(var nn=0;nn<tn.length;nn++){var Rn=tn[nn];if(Rn.sid&&Rn.sid.indexOf(st)!==-1)switch(un.type){case"revolute":Sn.multiply(Ft.makeRotationAxis(jt,U.Math.degToRad(Ct)));break;case"prismatic":Sn.multiply(Ft.makeTranslation(jt.x*Ct,jt.y*Ct,jt.z*Ct));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+un.type);break}else switch(Rn.type){case"matrix":Sn.multiply(Rn.obj);break;case"translate":Sn.multiply(Ft.makeTranslation(Rn.obj.x,Rn.obj.y,Rn.obj.z));break;case"scale":Sn.scale(Rn.obj);break;case"rotate":Sn.multiply(Ft.makeRotationAxis(Rn.obj,Rn.angle));break}}Ut.matrix.copy(Sn),Ut.matrix.decompose(Ut.position,Ut.quaternion,Ut.scale),Le[st].position=Ct}}else console.log("THREE.ColladaLoader: "+st+" does not exist.")}}}function zs(F){for(var G=[],Y=et.querySelector('[id="'+F.id+'"]'),Z=0;Z<Y.childNodes.length;Z++){var K=Y.childNodes[Z];if(K.nodeType===1)switch(K.nodeName){case"matrix":var Ee=a(K.textContent),be=new U.Matrix4().fromArray(Ee).transpose();G.push({sid:K.getAttribute("sid"),type:K.nodeName,obj:be});break;case"translate":case"scale":var Ee=a(K.textContent),Le=new U.Vector3().fromArray(Ee);G.push({sid:K.getAttribute("sid"),type:K.nodeName,obj:Le});break;case"rotate":var Ee=a(K.textContent),Le=new U.Vector3().fromArray(Ee),Je=U.Math.degToRad(Ee[3]);G.push({sid:K.getAttribute("sid"),type:K.nodeName,obj:Le,angle:Je});break}}return G}function mi(F){for(var G=F.getElementsByTagName("node"),Y=0;Y<G.length;Y++){var Z=G[Y];Z.hasAttribute("id")===!1&&Z.setAttribute("id",c())}}var Sn=new U.Matrix4,V=new U.Vector3;function re(F){for(var G={name:F.getAttribute("name")||"",type:F.getAttribute("type"),id:F.getAttribute("id"),sid:F.getAttribute("sid"),matrix:new U.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];if(Z.nodeType===1)switch(Z.nodeName){case"node":G.nodes.push(Z.getAttribute("id")),re(Z);break;case"instance_camera":G.instanceCameras.push(u(Z.getAttribute("url")));break;case"instance_controller":G.instanceControllers.push(ue(Z));break;case"instance_light":G.instanceLights.push(u(Z.getAttribute("url")));break;case"instance_geometry":G.instanceGeometries.push(ue(Z));break;case"instance_node":G.instanceNodes.push(u(Z.getAttribute("url")));break;case"matrix":var be=a(Z.textContent);G.matrix.multiply(Sn.fromArray(be).transpose()),G.transforms[Z.getAttribute("sid")]=Z.nodeName;break;case"translate":var be=a(Z.textContent);V.fromArray(be),G.matrix.multiply(Sn.makeTranslation(V.x,V.y,V.z)),G.transforms[Z.getAttribute("sid")]=Z.nodeName;break;case"rotate":var be=a(Z.textContent),K=U.Math.degToRad(be[3]);G.matrix.multiply(Sn.makeRotationAxis(V.fromArray(be),K)),G.transforms[Z.getAttribute("sid")]=Z.nodeName;break;case"scale":var be=a(Z.textContent);G.matrix.scale(V.fromArray(be)),G.transforms[Z.getAttribute("sid")]=Z.nodeName;break;case"extra":break;default:console.log(Z)}}return tt.nodes[G.id]=G,G}function ue(F){for(var G={id:u(F.getAttribute("url")),materials:{},skeletons:[]},Y=0;Y<F.childNodes.length;Y++){var Z=F.childNodes[Y];switch(Z.nodeName){case"bind_material":for(var K=Z.getElementsByTagName("instance_material"),be=0;be<K.length;be++){var Ee=K[be],Le=Ee.getAttribute("symbol"),Je=Ee.getAttribute("target");G.materials[Le]=u(Je)}break;case"skeleton":G.skeletons.push(u(Z.textContent));break}}return G}function Se(F,G){var Y=[],Z=[],K,be,Ee;for(K=0;K<F.length;K++){var Le=F[K],Je=it(Le);Re(Je,G,Y)}for(K=0;K<G.length;K++)for(be=0;be<Y.length;be++)if(Ee=Y[be],Ee.bone.name===G[K].name){Z[K]=Ee,Ee.processed=!0;break}for(K=0;K<Y.length;K++)Ee=Y[K],Ee.processed===!1&&(Z.push(Ee),Ee.processed=!0);var ft=[],ze=[];for(K=0;K<Z.length;K++)Ee=Z[K],ft.push(Ee.bone),ze.push(Ee.boneInverse);return new U.Skeleton(ft,ze)}function Re(F,G,Y){F.traverse(function(Z){if(Z.isBone===!0){for(var K,be=0;be<G.length;be++){var Ee=G[be];if(Ee.name===Z.name){K=Ee.boneInverse;break}}K===void 0&&(K=new U.Matrix4),Y.push({bone:Z,boneInverse:K,processed:!1})}})}function He(F){for(var G=[],Y=F.matrix,Z=F.nodes,K=F.type,be=F.instanceCameras,Ee=F.instanceControllers,Le=F.instanceLights,Je=F.instanceGeometries,ft=F.instanceNodes,ze=0,at=Z.length;ze<at;ze++)G.push(it(Z[ze]));for(var ze=0,at=be.length;ze<at;ze++){var Tt=$e(be[ze]);Tt!==null&&G.push(Tt.clone())}for(var ze=0,at=Ee.length;ze<at;ze++)for(var ct=Ee[ze],Ft=H(ct.id),st=$n(Ft.id),Ct=Ve(st,ct.materials),en=ct.skeletons,un=Ft.skin.joints,Ut=Se(en,un),jt=0,tn=Ct.length;jt<tn;jt++){var nn=Ct[jt];nn.isSkinnedMesh&&(nn.bind(Ut,Ft.skin.bindMatrix),nn.normalizeSkinWeights()),G.push(nn)}for(var ze=0,at=Le.length;ze<at;ze++){var Tt=$e(be[ze]);Tt!==null&&G.push(Tt.clone())}for(var ze=0,at=Je.length;ze<at;ze++)for(var ct=Je[ze],st=$n(ct.id),Ct=Ve(st,ct.materials),jt=0,tn=Ct.length;jt<tn;jt++)G.push(Ct[jt]);for(var ze=0,at=ft.length;ze<at;ze++)G.push(it(ft[ze]).clone());var nn;if(Z.length===0&&G.length===1)nn=G[0];else{nn=K==="JOINT"?new U.Bone:new U.Object3D;for(var ze=0;ze<G.length;ze++)nn.add(G[ze])}return nn.name=K==="JOINT"?F.sid:F.name,nn.matrix.copy(Y),nn.matrix.decompose(nn.position,nn.quaternion,nn.scale),nn}function yt(F,G){for(var Y=[],Z=0,K=F.length;Z<K;Z++){var be=G[F[Z]];Y.push(vt(be))}return Y}function Ve(F,G){var Y=[];for(var Z in F){var K=F[Z],be=yt(K.materialKeys,G);be.length===0&&(Z==="lines"||Z==="linestrips"?be.push(new U.LineBasicMaterial):be.push(new U.MeshPhongMaterial));var Ee=K.data.attributes.skinIndex!==void 0;if(Ee)for(var Le=0,Je=be.length;Le<Je;Le++)be[Le].skinning=!0;var ft=be.length===1?be[0]:be,ze;switch(Z){case"lines":ze=new U.LineSegments(K.data,ft);break;case"linestrips":ze=new U.Line(K.data,ft);break;case"triangles":case"polylist":Ee?ze=new U.SkinnedMesh(K.data,ft):ze=new U.Mesh(K.data,ft);break}Y.push(ze)}return Y}function it(F){return _(tt.nodes[F],He)}function wt(F){var G={name:F.getAttribute("name"),children:[]};mi(F);for(var Y=n(F,"node"),Z=0;Z<Y.length;Z++)G.children.push(re(Y[Z]));tt.visualScenes[F.getAttribute("id")]=G}function Xe(F){var G=new U.Object3D;G.name=F.name;for(var Y=F.children,Z=0;Z<Y.length;Z++){var K=Y[Z];K.id===null?G.add(He(K)):G.add(it(K.id))}return G}function je(F){return _(tt.visualScenes[F],Xe)}function ln(F){var G=n(F,"instance_visual_scene")[0];return je(u(G.getAttribute("url")))}function Ht(){var F=tt.clips;if(f(F)===!0){if(f(tt.animations)===!1){var G=[];for(var Y in tt.animations)for(var Z=C(Y),K=0,be=Z.length;K<be;K++)G.push(Z[K]);Bn.push(new U.AnimationClip("default",-1,G))}}else for(var Y in F)Bn.push($(Y))}if(console.time("THREE.ColladaLoader"),e.length===0)return{scene:new U.Scene};console.time("THREE.ColladaLoader: DOMParser");var Vt=new DOMParser().parseFromString(e,"application/xml");console.timeEnd("THREE.ColladaLoader: DOMParser");var et=n(Vt,"COLLADA")[0],bn=et.getAttribute("version");console.log("THREE.ColladaLoader: File version",bn);var fr=d(n(et,"asset")[0]),Hn=new U.TextureLoader(this.manager);Hn.setPath(t).setCrossOrigin(this.crossOrigin);var Bn=[],ri={},ml=0,tt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},kinematicsScenes:{}};console.time("THREE.ColladaLoader: Parse"),m(et,"library_animations","animation",M),m(et,"library_animation_clips","animation_clip",z),m(et,"library_controllers","controller",x),m(et,"library_images","image",Q),m(et,"library_effects","effect",le),m(et,"library_materials","material",on),m(et,"library_cameras","camera",pe),m(et,"library_lights","light",Dt),m(et,"library_geometries","geometry",wn),m(et,"library_nodes","node",re),m(et,"library_visual_scenes","visual_scene",wt),m(et,"library_kinematics_models","kinematics_model",Ar),m(et,"scene","instance_kinematics_scene",Un),console.timeEnd("THREE.ColladaLoader: Parse"),console.time("THREE.ColladaLoader: Build"),y(tt.animations,A),y(tt.clips,N),y(tt.controllers,D),y(tt.images,P),y(tt.effects,Ke),y(tt.materials,hn),y(tt.cameras,Be),y(tt.lights,Rt),y(tt.geometries,Sr),y(tt.visualScenes,Xe),console.timeEnd("THREE.ColladaLoader: Build"),Ht(),vl();var An=ln(n(et,"scene")[0]);return An.scale.multiplyScalar(fr.unit),console.timeEnd("THREE.ColladaLoader"),{animations:Bn,kinematics:ri,library:tt,scene:An}}};var Ka={onError:function(e){console.error(e)},loaders:{dae:function(e,t,n){var r=n.material,a=new U.ColladaLoader(n.loader);return a.log=function(o){e.warnings&&console.warn(o)},a.load(t,function(u){r!==null&&u.scene.traverse(function(c){c instanceof U.Mesh&&c.material===void 0&&(c.material=r)}),e.add(u.scene)},null,Ka.onError),a},obj:function(e,t,n){n.material;var r=new U.OBJLoader(n.loader);r.log=function(o){e.warnings&&console.warn(o)};function a(o,u){o.setMaterials(u).load(t,function(f){e.add(f)},null,Ka.onError)}return r.load(t,function(u){var c=U.LoaderUtils.extractUrlBase(t);if(u.materialLibraries.length){var f=u.materialLibraries[0];new U.MTLLoader(n.loader).setPath(c).load(f,function(d){d.preload(),a(r,d)},null,Ka.onError)}else e.add(u)},null,Ka.onError),r},stl:function(e,t,n){var r=n.material,a=new U.STLLoader(n.loader);return a.load(t,function(o){o.computeFaceNormals();var u;r!==null?u=new U.Mesh(o,r):u=new U.Mesh(o,new U.MeshBasicMaterial({color:10066329})),e.add(u)},null,Ka.onError),a}}},$m=function(e){function t(n){e.call(this),n=n||{};var r=n.path||"/",a=n.resource;n.material,this.warnings=n.warnings,r.substr(r.length-1)!=="/"&&(r+="/");var o=r+a,u=o.substr(-3).toLowerCase(),c=Ka.loaders[u];c?c(this,o,n):console.warn("Unsupported loader for file type: '"+u+"'")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(U.Object3D),kN=function(e){function t(n){n=n||{};var r=n.material||new U.MeshBasicMaterial,a=n.vertices,o=n.colors;e.call(this),r.side=U.DoubleSide;var u=new U.Geometry;for(c=0;c<a.length;c++)u.vertices.push(new U.Vector3(a[c].x,a[c].y,a[c].z));var c,f;if(o.length===a.length){for(c=0;c<a.length;c+=3){var d=new U.Face3(c,c+1,c+2);for(f=c*3;f<c*3+3;c++){var p=new U.Color;p.setRGB(o[c].r,o[c].g,o[c].b),d.vertexColors.push(p)}u.faces.push(d)}r.vertexColors=U.VertexColors}else if(o.length===a.length/3){for(c=0;c<a.length;c+=3){var v=new U.Face3(c,c+1,c+2);v.color.setRGB(o[c/3].r,o[c/3].g,o[c/3].b),u.faces.push(v)}r.vertexColors=U.FaceColors}else for(c=0;c<a.length;c+=3){var m=new U.Face3(c,c+1,c+2);u.faces.push(m)}u.computeBoundingBox(),u.computeBoundingSphere(),u.computeFaceNormals(),this.add(new U.Mesh(u,r))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setColor=function(r){this.mesh.material.color.setHex(r)},t}(U.Object3D),pw=function(e){function t(n){e.call(this),n=n||{};var r=n.path||"/",a=n.message;r.substr(r.length-1)!=="/"&&(r+="/"),a.scale?this.msgScale=[a.scale.x,a.scale.y,a.scale.z]:this.msgScale=[1,1,1],this.msgColor=a.color,this.msgMesh=void 0,this.setPose(a.pose);var o=yo(this.msgColor.r,this.msgColor.g,this.msgColor.b,this.msgColor.a);switch(a.type){case lm:var u=a.scale.x,c=u*.23,f=a.scale.y,d=f*.5,p,v=null;if(a.points.length===2){v=new U.Vector3(a.points[0].x,a.points[0].y,a.points[0].z);var m=new U.Vector3(a.points[1].x,a.points[1].y,a.points[1].z);p=v.clone().negate().add(m),u=p.length(),f=a.scale.y,d=a.scale.x,a.scale.z!==0&&(c=a.scale.z)}this.add(new Qh({direction:p,origin:v,length:u,headLength:c,shaftDiameter:d,headDiameter:f,material:o}));break;case um:var y=new U.BoxGeometry(a.scale.x,a.scale.y,a.scale.z);this.add(new U.Mesh(y,o));break;case cm:var _=new U.SphereGeometry(.5),M=new U.Mesh(_,o);M.scale.x=a.scale.x,M.scale.y=a.scale.y,M.scale.z=a.scale.z,this.add(M);break;case fm:var T=new U.CylinderGeometry(.5,.5,1,16,1,!1),E=new U.Mesh(T,o);E.quaternion.setFromAxisAngle(new U.Vector3(1,0,0),Math.PI*.5),E.scale.set(a.scale.x,a.scale.z,a.scale.y),this.add(E);break;case hm:var A=new U.Geometry,C=new U.LineBasicMaterial({size:a.scale.x}),L;for(L=0;L<a.points.length;L++){var I=new U.Vector3;I.x=a.points[L].x,I.y=a.points[L].y,I.z=a.points[L].z,A.vertices.push(I)}if(a.colors.length===a.points.length)for(C.vertexColors=!0,L=0;L<a.points.length;L++){var j=new U.Color;j.setRGB(a.colors[L].r,a.colors[L].g,a.colors[L].b),A.colors.push(j)}else C.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new U.Line(A,C));break;case dm:var q=new U.Geometry,ne=new U.LineBasicMaterial({size:a.scale.x}),W;for(W=0;W<a.points.length;W++){var oe=new U.Vector3;oe.x=a.points[W].x,oe.y=a.points[W].y,oe.z=a.points[W].z,q.vertices.push(oe)}if(a.colors.length===a.points.length)for(ne.vertexColors=!0,W=0;W<a.points.length;W++){var ae=new U.Color;ae.setRGB(a.colors[W].r,a.colors[W].g,a.colors[W].b),q.colors.push(ae)}else ne.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new U.Line(q,ne,U.LinePieces));break;case pm:var he=new U.Object3D,fe=a.points.length,se=fe===a.colors.length,z=Math.ceil(fe/1250),N,$,x,S;for(N=0;N<fe;N+=z)$=new U.BoxGeometry(a.scale.x,a.scale.y,a.scale.z),se?x=yo(a.colors[N].r,a.colors[N].g,a.colors[N].b,a.colors[N].a):x=o,S=new U.Mesh($,x),S.position.x=a.points[N].x,S.position.y=a.points[N].y,S.position.z=a.points[N].z,he.add(S);this.add(he);break;case vm:var w=new U.Object3D,R=a.points.length,D=R===a.colors.length,B=Math.ceil(R/1250),H,Q,P,X;for(H=0;H<R;H+=B)Q=new U.SphereGeometry(.5,8,8),D?P=yo(a.colors[H].r,a.colors[H].g,a.colors[H].b,a.colors[H].a):P=o,X=new U.Mesh(Q,P),X.scale.x=a.scale.x,X.scale.y=a.scale.y,X.scale.z=a.scale.z,X.position.x=a.points[H].x,X.position.y=a.points[H].y,X.position.z=a.points[H].z,w.add(X);this.add(w);break;case mm:var le=new U.Geometry,Te=new U.ParticleBasicMaterial({size:a.scale.x}),xe;for(xe=0;xe<a.points.length;xe++){var Ae=new U.Vector3;Ae.x=a.points[xe].x,Ae.y=a.points[xe].y,Ae.z=a.points[xe].z,le.vertices.push(Ae)}if(a.colors.length===a.points.length)for(Te.vertexColors=!0,xe=0;xe<a.points.length;xe++){var Oe=new U.Color;Oe.setRGB(a.colors[xe].r,a.colors[xe].g,a.colors[xe].b),le.colors.push(Oe)}else Te.color.setRGB(a.color.r,a.color.g,a.color.b);this.add(new U.ParticleSystem(le,Te));break;case gm:if(a.text.length>0){var Ie=this.msgColor,ht=document.createElement("canvas"),Qe=ht.getContext("2d"),dt=100,_t="normal "+dt+"px sans-serif";Qe.font=_t;var mt=Qe.measureText(a.text),Ke=mt.width;ht.width=Ke,ht.height=1.5*dt,Qe.font=_t,Qe.fillStyle="rgba("+Math.round(255*Ie.r)+", "+Math.round(255*Ie.g)+", "+Math.round(255*Ie.b)+", "+Ie.a+")",Qe.textAlign="left",Qe.textBaseline="middle",Qe.fillText(a.text,0,ht.height/2);var Kn=new U.Texture(ht);Kn.needsUpdate=!0;var on=new U.SpriteMaterial({map:Kn,useScreenCoordinates:!1}),hn=new U.Sprite(on),vt=a.scale.x;hn.scale.set(Ke/ht.height*vt,vt,1),this.add(hn)}break;case ym:var pe=null;(a.color.r!==0||a.color.g!==0||a.color.b!==0||a.color.a!==0)&&(pe=o),this.msgMesh=a.mesh_resource.substr(10);var Ne=new $m({path:r,resource:this.msgMesh,material:pe});this.add(Ne);break;case bm:var Pe=new kN({material:o,vertices:a.points,colors:a.colors});Pe.scale.set(a.scale.x,a.scale.y,a.scale.z),this.add(Pe);break;default:console.error("Currently unsupported marker type: "+a.type);break}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setPose=function(r){this.position.x=r.position.x,this.position.y=r.position.y,this.position.z=r.position.z,this.quaternion.set(r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w),this.quaternion.normalize(),this.updateMatrixWorld()},t.prototype.update=function(r){if(this.setPose(r.pose),r.color.r!==this.msgColor.r||r.color.g!==this.msgColor.g||r.color.b!==this.msgColor.b||r.color.a!==this.msgColor.a){var a=yo(r.color.r,r.color.g,r.color.b,r.color.a);switch(r.type){case hm:case dm:case mm:break;case lm:case um:case cm:case fm:case bm:case gm:this.traverse(function(f){f instanceof U.Mesh&&(f.material=a)});break;case ym:var o=null;(r.color.r!==0||r.color.g!==0||r.color.b!==0||r.color.a!==0)&&(o=this.colorMaterial),this.traverse(function(f){f instanceof U.Mesh&&(f.material=o)});break;case pm:case vm:return!1;default:return!1}this.msgColor=r.color}var u=Math.abs(this.msgScale[0]-r.scale.x)>1e-6||Math.abs(this.msgScale[1]-r.scale.y)>1e-6||Math.abs(this.msgScale[2]-r.scale.z)>1e-6;switch(this.msgScale=[r.scale.x,r.scale.y,r.scale.z],r.type){case um:case cm:case fm:if(u)return!1;break;case gm:if(u||this.text!==r.text)return!1;break;case ym:var c=r.mesh_resource.substr(10);if(c!==this.msgMesh||u)return!1;break;case lm:case hm:case dm:case pm:case vm:case mm:case bm:return!1}return!0},t.prototype.dispose=function(){this.children.forEach(function(r){r instanceof $m?r.children.forEach(function(a){a.material!==void 0&&a.material.dispose(),a.children.forEach(function(o){o.geometry!==void 0&&o.geometry.dispose(),o.material!==void 0&&o.material.dispose(),a.remove(o)}),r.remove(a)}):(r.geometry!==void 0&&r.geometry.dispose(),r.material!==void 0&&r.material.dispose()),r.parent.remove(r)})},t}(U.Object3D),HN=function(e){function t(n){e.call(this);var r=this;n=n||{},this.parent=n.parent;var a=n.handle,o=n.message;this.message=o,this.name=o.name,this.camera=n.camera,this.path=n.path||"/",this.loader=n.loader,this.dragging=!1,this.startMousePos=new U.Vector2,this.isShift=!1;var u=new U.Quaternion(o.orientation.x,o.orientation.y,o.orientation.z,o.orientation.w);u.normalize();var c=new U.Vector3(1,0,0);switch(c.applyQuaternion(u),this.currentControlOri=new U.Quaternion,o.interaction_mode){case UN:case DN:this.addEventListener("mousemove",this.parent.move3d.bind(this.parent,this,c));break;case LN:this.addEventListener("mousemove",this.parent.moveAxis.bind(this.parent,this,c)),this.addEventListener("touchmove",this.parent.moveAxis.bind(this.parent,this,c));break;case NN:this.addEventListener("mousemove",this.parent.rotateAxis.bind(this.parent,this,u));break;case ON:this.addEventListener("mousemove",this.parent.movePlane.bind(this.parent,this,c));break;case CN:this.addEventListener("click",this.parent.buttonClick.bind(this.parent,this));break}function f(m){m.stopPropagation()}o.interaction_mode!==RN&&(this.addEventListener("mousedown",this.parent.startDrag.bind(this.parent,this)),this.addEventListener("mouseup",this.parent.stopDrag.bind(this.parent,this)),this.addEventListener("contextmenu",this.parent.showMenu.bind(this.parent,this)),this.addEventListener("mouseup",function(m){r.startMousePos.distanceToSquared(m.mousePos)===0&&(m.type="contextmenu",r.dispatchEvent(m))}),this.addEventListener("mouseover",f),this.addEventListener("mouseout",f),this.addEventListener("click",f),this.addEventListener("mousedown",function(m){r.startMousePos=m.mousePos}),this.addEventListener("touchstart",function(m){m.domEvent.touches.length===1&&(m.type="mousedown",m.domEvent.button=0,r.dispatchEvent(m))}),this.addEventListener("touchmove",function(m){m.domEvent.touches.length===1&&(m.type="mousemove",m.domEvent.button=0,r.dispatchEvent(m))}),this.addEventListener("touchend",function(m){m.domEvent.touches.length===0&&(m.domEvent.button=0,m.type="mouseup",r.dispatchEvent(m),m.type="click",r.dispatchEvent(m))}),window.addEventListener("keydown",function(m){m.keyCode===16&&(r.isShift=!0)}),window.addEventListener("keyup",function(m){m.keyCode===16&&(r.isShift=!1)}));var d=new U.Quaternion,p=this.parent.position.clone().multiplyScalar(-1);switch(o.orientation_mode){case fw:d=this.parent.quaternion.clone().inverse();break;case hw:break;case dw:break;default:console.error("Unkown orientation mode: "+o.orientation_mode);break}var v=new Nt.TFClient({ros:a.tfClient.ros,fixedFrame:a.message.header.frame_id,serverName:a.tfClient.serverName});o.markers.forEach(function(m){var y=function(_){var M=new pw({message:m,path:r.path,loader:r.loader});if(_!==null){var T=new Nt.Pose({position:M.position,orientation:M.quaternion});T.applyTransform(new Nt.Transform(_));var E=new pw({message:m,path:r.path,loader:r.loader});E.position.add(p),E.position.applyQuaternion(d),E.quaternion.multiplyQuaternions(d,E.quaternion);var A=new U.Vector3(E.position.x,E.position.y,E.position.z),C=new Nt.Transform({translation:A,orientation:E.quaternion});T.applyTransform(C),M.setPose(T),M.updateMatrixWorld(),v.unsubscribe(m.header.frame_id)}r.add(M)};m.header.frame_id!==""?v.subscribe(m.header.frame_id,y):y(null)})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updateMatrixWorld=function(r){var a=this,o=this.message;switch(o.orientation_mode){case fw:e.prototype.updateMatrixWorld.call(this,r),a.currentControlOri.copy(a.quaternion),a.currentControlOri.normalize();break;case hw:a.quaternion.copy(a.parent.quaternion.clone().inverse()),a.updateMatrix(),a.matrixWorldNeedsUpdate=!0,e.prototype.updateMatrixWorld.call(this,r),a.currentControlOri.copy(a.quaternion);break;case dw:a.camera.updateMatrixWorld();var u=new U.Matrix4().extractRotation(a.camera.matrixWorld),c=new U.Matrix4,f=Math.PI*.5,d=new U.Euler(-f,0,f);c.makeRotationFromEuler(d);var p=new U.Matrix4;p.getInverse(a.parent.matrixWorld),u.multiplyMatrices(u,c),u.multiplyMatrices(p,u),a.currentControlOri.setFromRotationMatrix(u),o.independent_marker_orientation||(a.quaternion.copy(a.currentControlOri),a.updateMatrix(),a.matrixWorldNeedsUpdate=!0),e.prototype.updateMatrixWorld.call(this,r);break;default:console.error("Unkown orientation mode: "+o.orientation_mode);break}},t}(U.Object3D),VN=function(e){function t(n){e.call(this);var r=this;n=n||{};var a=n.menuEntries,o=n.className||"default-interactive-marker-menu";n.entryClassName;var u=n.overlayClassName||"default-interactive-marker-overlay",c=n.menuFontSize||"0.8em",f=[];if(f[0]={children:[]},document.getElementById("default-interactive-marker-menu-css")===null){var d=document.createElement("style");d.id="default-interactive-marker-menu-css",d.type="text/css",d.innerHTML=".default-interactive-marker-menu {background-color: #444444;border: 1px solid #888888;border: 1px solid #888888;padding: 0px 0px 0px 0px;color: #FFFFFF;font-family: sans-serif;font-size: "+c+";z-index: 1002;}.default-interactive-marker-menu ul {padding: 0px 0px 5px 0px;margin: 0px;list-style-type: none;}.default-interactive-marker-menu ul li div {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;cursor: default;padding: 3px 10px 3px 10px;}.default-interactive-marker-menu-entry:hover {  background-color: #666666;  cursor: pointer;}.default-interactive-marker-menu ul ul {  font-style: italic;  padding-left: 10px;}.default-interactive-marker-overlay {  position: absolute;  top: 0%;  left: 0%;  width: 100%;  height: 100%;  background-color: black;  z-index: 1001;  -moz-opacity: 0.0;  opacity: .0;  filter: alpha(opacity = 0);}",document.getElementsByTagName("head")[0].appendChild(d)}this.menuDomElem=document.createElement("div"),this.menuDomElem.style.position="absolute",this.menuDomElem.className=o,this.menuDomElem.addEventListener("contextmenu",function(E){E.preventDefault()}),this.overlayDomElem=document.createElement("div"),this.overlayDomElem.className=u,this.hideListener=this.hide.bind(this),this.overlayDomElem.addEventListener("contextmenu",this.hideListener),this.overlayDomElem.addEventListener("click",this.hideListener),this.overlayDomElem.addEventListener("touchstart",this.hideListener);var p,v,m;for(p=0;p<a.length;p++)v=a[p],m=v.id,f[m]={title:v.title,id:m,children:[]};for(p=0;p<a.length;p++){v=a[p],m=v.id;var y=f[m],_=f[v.parent_id];_.children.push(y)}function M(E,A){this.dispatchEvent({type:"menu-select",domEvent:A,id:E.id,controlName:this.controlName}),this.hide(A)}function T(E,A){var C=document.createElement("ul");E.appendChild(C);for(var L=A.children,I=0;I<L.length;I++){var j=document.createElement("li"),q=document.createElement("div");q.appendChild(document.createTextNode(L[I].title)),C.appendChild(j),j.appendChild(q),L[I].children.length>0?(T(j,L[I]),q.addEventListener("click",r.hide.bind(r)),q.addEventListener("touchstart",r.hide.bind(r))):(q.addEventListener("click",M.bind(r,L[I])),q.addEventListener("touchstart",M.bind(r,L[I])),q.className="default-interactive-marker-menu-entry")}}T(this.menuDomElem,f[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.show=function(r,a){a&&a.preventDefault&&a.preventDefault(),this.controlName=r.name,a.domEvent.changedTouches!==void 0?(this.menuDomElem.style.left=a.domEvent.changedTouches[0].pageX+"px",this.menuDomElem.style.top=a.domEvent.changedTouches[0].pageY+"px"):(this.menuDomElem.style.left=a.domEvent.clientX+"px",this.menuDomElem.style.top=a.domEvent.clientY+"px"),document.body.appendChild(this.overlayDomElem),document.body.appendChild(this.menuDomElem)},t.prototype.hide=function(r){r&&r.preventDefault&&r.preventDefault(),document.body.removeChild(this.overlayDomElem),document.body.removeChild(this.menuDomElem)},t}(U.EventDispatcher),jN=function(e){function t(n){e.call(this);var r=this;n=n||{};var a=n.handle;this.name=a.name;var o=n.camera,u=n.path||"/",c=n.loader;this.dragging=!1,this.onServerSetPose({pose:a.pose}),this.dragStart={position:new U.Vector3,orientation:new U.Quaternion,positionWorld:new U.Vector3,orientationWorld:new U.Quaternion,event3d:{}},a.controls.forEach(function(f){r.add(new HN({parent:r,handle:a,message:f,camera:o,path:u,loader:c}))}),a.menuEntries.length>0&&(this.menu=new VN({menuEntries:a.menuEntries,menuFontSize:a.menuFontSize}),this.menu.addEventListener("menu-select",function(f){r.dispatchEvent(f)}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.showMenu=function(r,a){this.menu&&this.menu.show(r,a)},t.prototype.moveAxis=function(r,a,o){if(this.dragging){var u=r.currentControlOri,c=a.clone().applyQuaternion(u),f=this.dragStart.event3d.intersection.point,d=c.clone().applyQuaternion(this.dragStart.orientationWorld.clone()),p=new U.Ray(f,d),v=PN(p,o.camera,o.mousePos),m=new U.Vector3;m.addVectors(this.dragStart.position,c.clone().applyQuaternion(this.dragStart.orientation).multiplyScalar(v)),this.setPosition(r,m),o.stopPropagation()}},t.prototype.move3d=function(r,a,o){if(this.dragging&&!r.isShift){var u=r.camera.getWorldDirection(),c=Math.abs(u.x),f=Math.abs(u.y),d=Math.abs(u.z),p=new U.Quaternion(1,0,0,1);f>c&&f>d?p=new U.Quaternion(0,0,1,1):d>c&&d>f&&(p=new U.Quaternion(0,1,0,1)),p.normalize(),a=new U.Vector3(1,0,0),a.applyQuaternion(p),this.movePlane(r,a,o)}},t.prototype.movePlane=function(r,a,o){if(this.dragging){var u=r.currentControlOri,c=a.clone().applyQuaternion(u),f=this.dragStart.event3d.intersection.point,d=c.clone().applyQuaternion(this.dragStart.orientationWorld),p=xm(o.mouseRay,f,d),v=new U.Vector3;v.subVectors(p,f),v.add(this.dragStart.positionWorld),this.setPosition(r,v),o.stopPropagation()}},t.prototype.rotateAxis=function(r,a,o){if(this.dragging){r.updateMatrixWorld();var u=r.currentControlOri,c=u.clone().multiply(a.clone()),f=new U.Vector3(1,0,0).applyQuaternion(c),d=this.dragStart.event3d.intersection.point,p=f.applyQuaternion(this.dragStart.orientationWorld),v=xm(o.mouseRay,d,p),m=new U.Ray(this.dragStart.positionWorld,p),y=xm(m,d,p),_=this.dragStart.orientationWorld.clone().multiply(c),M=_.clone().inverse();v.sub(y),v.applyQuaternion(M);var T=this.dragStart.event3d.intersection.point.clone();T.sub(y),T.applyQuaternion(M);var E=Math.atan2(v.y,v.z),A=Math.atan2(T.y,T.z),C=A-E,L=new U.Quaternion;L.setFromAxisAngle(f,C),this.setOrientation(r,L.multiply(this.dragStart.orientationWorld)),o.stopPropagation()}},t.prototype.feedbackEvent=function(r,a){this.dispatchEvent({type:r,position:this.position.clone(),orientation:this.quaternion.clone(),controlName:a.name})},t.prototype.startDrag=function(r,a){if(a.domEvent.button===0){a.stopPropagation(),this.dragging=!0,this.updateMatrixWorld(!0);var o=new U.Vector3;this.matrixWorld.decompose(this.dragStart.positionWorld,this.dragStart.orientationWorld,o),this.dragStart.position=this.position.clone(),this.dragStart.orientation=this.quaternion.clone(),this.dragStart.event3d=a,this.feedbackEvent("user-mousedown",r)}},t.prototype.stopDrag=function(r,a){a.domEvent.button===0&&(a.stopPropagation(),this.dragging=!1,this.dragStart.event3d={},this.onServerSetPose(this.bufferedPoseEvent),this.bufferedPoseEvent=void 0,this.feedbackEvent("user-mouseup",r))},t.prototype.buttonClick=function(r,a){a.stopPropagation(),this.feedbackEvent("user-button-click",r)},t.prototype.setPosition=function(r,a){this.position.copy(a),this.feedbackEvent("user-pose-change",r)},t.prototype.setOrientation=function(r,a){a.normalize(),this.quaternion.copy(a),this.feedbackEvent("user-pose-change",r)},t.prototype.onServerSetPose=function(r){if(r!==void 0)if(this.dragging)this.bufferedPoseEvent=r;else{var a=r.pose;this.position.copy(a.position),this.quaternion.copy(a.orientation),this.updateMatrixWorld(!0)}},t.prototype.dispose=function(){var r=this;this.children.forEach(function(a){a.children.forEach(function(o){o.dispose(),a.remove(o)}),r.remove(a)})},t}(U.Object3D),rM={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(e,t){(function(n){var r=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(S){return Object.prototype.toString.call(S)==="[object Array]"},o=10,u=typeof process=="object"&&typeof process.nextTick=="function",c=typeof Symbol=="function",f=typeof Reflect=="object",d=typeof setImmediate=="function",p=d?setImmediate:setTimeout,v=c?f&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(x){var S=Object.getOwnPropertyNames(x);return S.push.apply(S,Object.getOwnPropertySymbols(x)),S}:Object.keys;function m(){this._events={},this._conf&&y.call(this,this._conf)}function y(x){x&&(this._conf=x,x.delimiter&&(this.delimiter=x.delimiter),x.maxListeners!==n&&(this._maxListeners=x.maxListeners),x.wildcard&&(this.wildcard=x.wildcard),x.newListener&&(this._newListener=x.newListener),x.removeListener&&(this._removeListener=x.removeListener),x.verboseMemoryLeak&&(this.verboseMemoryLeak=x.verboseMemoryLeak),x.ignoreErrors&&(this.ignoreErrors=x.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function _(x,S){var w="(node) warning: possible EventEmitter memory leak detected. "+x+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(w+=" Event name: "+S+"."),typeof process<"u"&&process.emitWarning){var R=new Error(w);R.name="MaxListenersExceededWarning",R.emitter=this,R.count=x,process.emitWarning(R)}else console.error(w),console.trace&&console.trace()}var M=function(x,S,w){var R=arguments,D=arguments.length;switch(D){case 0:return[];case 1:return[x];case 2:return[x,S];case 3:return[x,S,w];default:for(var B=new Array(D);D--;)B[D]=R[D];return B}};function T(x,S){for(var w={},R,D=x.length,B=0,H=0;H<D;H++)R=x[H],w[R]=H<B?S[H]:n;return w}function E(x,S,w){this._emitter=x,this._target=S,this._listeners={},this._listenersCount=0;var R,D;if((w.on||w.off)&&(R=w.on,D=w.off),S.addEventListener?(R=S.addEventListener,D=S.removeEventListener):S.addListener?(R=S.addListener,D=S.removeListener):S.on&&(R=S.on,D=S.off),!R&&!D)throw Error("target does not implement any known event API");if(typeof R!="function")throw TypeError("on method must be a function");if(typeof D!="function")throw TypeError("off method must be a function");this._on=R,this._off=D;var B=x._observers;B?B.push(this):x._observers=[this]}Object.assign(E.prototype,{subscribe:function(x,S,w){var R=this,D=this._target,B=this._emitter,H=this._listeners,Q=function(){var P=M.apply(null,arguments),X={data:P,name:S,original:x};if(w){var le=w.call(D,X);le!==!1&&B.emit.apply(B,[X.name].concat(P));return}B.emit.apply(B,[S].concat(P))};if(H[x])throw Error("Event '"+x+"' is already listening");this._listenersCount++,B._newListener&&B._removeListener&&!R._onNewListener?(this._onNewListener=function(P){P===S&&H[x]===null&&(H[x]=Q,R._on.call(D,x,Q))},B.on("newListener",this._onNewListener),this._onRemoveListener=function(P){P===S&&!B.hasListeners(P)&&H[x]&&(H[x]=null,R._off.call(D,x,Q))},H[x]=null,B.on("removeListener",this._onRemoveListener)):(H[x]=Q,R._on.call(D,x,Q))},unsubscribe:function(x){var S=this,w=this._listeners,R=this._emitter,D,B,H=this._off,Q=this._target,P;if(x&&typeof x!="string")throw TypeError("event must be a string");function X(){S._onNewListener&&(R.off("newListener",S._onNewListener),R.off("removeListener",S._onRemoveListener),S._onNewListener=null,S._onRemoveListener=null);var le=ne.call(R,S);R._observers.splice(le,1)}if(x){if(D=w[x],!D)return;H.call(Q,x,D),delete w[x],--this._listenersCount||X()}else{for(B=v(w),P=B.length;P-- >0;)x=B[P],H.call(Q,x,w[x]);this._listeners={},this._listenersCount=0,X()}}});function A(x,S,w,R){var D=Object.assign({},S);if(!x)return D;if(typeof x!="object")throw TypeError("options must be an object");var B=Object.keys(x),H=B.length,Q,P,X;function le(xe){throw Error('Invalid "'+Q+'" option value'+(xe?". Reason: "+xe:""))}for(var Te=0;Te<H;Te++){if(Q=B[Te],!r.call(S,Q))throw Error('Unknown "'+Q+'" option');P=x[Q],P!==n&&(X=w[Q],D[Q]=X?X(P,le):P)}return D}function C(x,S){return(typeof x!="function"||!x.hasOwnProperty("prototype"))&&S("value must be a constructor"),x}function L(x){var S="value must be type of "+x.join("|"),w=x.length,R=x[0],D=x[1];return w===1?function(B,H){if(typeof B===R)return B;H(S)}:w===2?function(B,H){var Q=typeof B;if(Q===R||Q===D)return B;H(S)}:function(B,H){for(var Q=typeof B,P=w;P-- >0;)if(Q===x[P])return B;H(S)}}var I=L(["function"]),j=L(["object","function"]);function q(x,S,w){var R,D,B=0,H,Q=new x(function(P,X,le){w=A(w,{timeout:0,overload:!1},{timeout:function(Oe,Ie){return Oe*=1,(typeof Oe!="number"||Oe<0||!Number.isFinite(Oe))&&Ie("timeout must be a positive number"),Oe}}),R=!w.overload&&typeof x.prototype.cancel=="function"&&typeof le=="function";function Te(){D&&(D=null),B&&(clearTimeout(B),B=0)}var xe=function(Oe){Te(),P(Oe)},Ae=function(Oe){Te(),X(Oe)};R?S(xe,Ae,le):(D=[function(Oe){Ae(Oe||Error("canceled"))}],S(xe,Ae,function(Oe){if(H)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Oe!="function")throw TypeError("onCancel callback must be a function");D.push(Oe)}),H=!0),w.timeout>0&&(B=setTimeout(function(){var Oe=Error("timeout");Oe.code="ETIMEDOUT",B=0,Q.cancel(Oe),X(Oe)},w.timeout))});return R||(Q.cancel=function(P){if(D){for(var X=D.length,le=1;le<X;le++)D[le](P);D[0](P),D=null}}),Q}function ne(x){var S=this._observers;if(!S)return-1;for(var w=S.length,R=0;R<w;R++)if(S[R]._target===x)return R;return-1}function W(x,S,w,R,D){if(!w)return null;if(R===0){var B=typeof S;if(B==="string"){var H,Q,P=0,X=0,le=this.delimiter,Te=le.length;if((Q=S.indexOf(le))!==-1){H=new Array(5);do H[P++]=S.slice(X,Q),X=Q+Te;while((Q=S.indexOf(le,X))!==-1);H[P++]=S.slice(X),S=H,D=P}else S=[S],D=1}else B==="object"?D=S.length:(S=[S],D=1)}var xe=null,Ae,Oe,Ie,ht,Qe,dt=S[R],_t=S[R+1],mt,Ke;if(R===D)w._listeners&&(typeof w._listeners=="function"?(x&&x.push(w._listeners),xe=[w]):(x&&x.push.apply(x,w._listeners),xe=[w]));else if(dt==="*"){for(mt=v(w),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ke=W(x,S,w[Ae],R+1,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke));return xe}else if(dt==="**"){for(Qe=R+1===D||R+2===D&&_t==="*",Qe&&w._listeners&&(xe=W(x,S,w,D,D)),mt=v(w),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ae==="*"||Ae==="**"?(w[Ae]._listeners&&!Qe&&(Ke=W(x,S,w[Ae],D,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke)),Ke=W(x,S,w[Ae],R,D)):Ae===_t?Ke=W(x,S,w[Ae],R+2,D):Ke=W(x,S,w[Ae],R,D),Ke&&(xe?xe.push.apply(xe,Ke):xe=Ke));return xe}else w[dt]&&(xe=W(x,S,w[dt],R+1,D));if(Oe=w["*"],Oe&&W(x,S,Oe,R+1,D),Ie=w["**"],Ie)if(R<D)for(Ie._listeners&&W(x,S,Ie,D,D),mt=v(Ie),Q=mt.length;Q-- >0;)Ae=mt[Q],Ae!=="_listeners"&&(Ae===_t?W(x,S,Ie[Ae],R+2,D):Ae===dt?W(x,S,Ie[Ae],R+1,D):(ht={},ht[Ae]=Ie[Ae],W(x,S,{"**":ht},R+1,D)));else Ie._listeners?W(x,S,Ie,D,D):Ie["*"]&&Ie["*"]._listeners&&W(x,S,Ie["*"],D,D);return xe}function oe(x,S,w){var R=0,D=0,B,H=this.delimiter,Q=H.length,P;if(typeof x=="string")if((B=x.indexOf(H))!==-1){P=new Array(5);do P[R++]=x.slice(D,B),D=B+Q;while((B=x.indexOf(H,D))!==-1);P[R++]=x.slice(D)}else P=[x],R=1;else P=x,R=x.length;if(R>1){for(B=0;B+1<R;B++)if(P[B]==="**"&&P[B+1]==="**")return}var X=this.listenerTree,le;for(B=0;B<R;B++)if(le=P[B],X=X[le]||(X[le]={}),B===R-1)return X._listeners?(typeof X._listeners=="function"&&(X._listeners=[X._listeners]),w?X._listeners.unshift(S):X._listeners.push(S),!X._listeners.warned&&this._maxListeners>0&&X._listeners.length>this._maxListeners&&(X._listeners.warned=!0,_.call(this,X._listeners.length,le))):X._listeners=S,!0;return!0}function ae(x,S,w,R){for(var D=v(x),B=D.length,H,Q,P,X=x._listeners,le;B-- >0;)Q=D[B],H=x[Q],Q==="_listeners"?P=w:P=w?w.concat(Q):[Q],le=R||typeof Q=="symbol",X&&S.push(le?P:P.join(this.delimiter)),typeof H=="object"&&ae.call(this,H,S,P,le);return S}function he(x){for(var S=v(x),w=S.length,R,D,B;w-- >0;)D=S[w],R=x[D],R&&(B=!0,D!=="_listeners"&&!he(R)&&delete x[D]);return B}function fe(x,S,w){this.emitter=x,this.event=S,this.listener=w}fe.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function se(x,S,w){if(w===!0)D=!0;else if(w===!1)R=!0;else{if(!w||typeof w!="object")throw TypeError("options should be an object or true");var R=w.async,D=w.promisify,B=w.nextTick,H=w.objectify}if(R||B||D){var Q=S,P=S._origin||S;if(B&&!u)throw Error("process.nextTick is not supported");D===n&&(D=S.constructor.name==="AsyncFunction"),S=function(){var X=arguments,le=this,Te=this.event;return D?B?Promise.resolve():new Promise(function(xe){p(xe)}).then(function(){return le.event=Te,Q.apply(le,X)}):(B?process.nextTick:p)(function(){le.event=Te,Q.apply(le,X)})},S._async=!0,S._origin=P}return[S,H?new fe(this,x,S):this]}function z(x){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,y.call(this,x)}z.EventEmitter2=z,z.prototype.listenTo=function(x,S,w){if(typeof x!="object")throw TypeError("target musts be an object");var R=this;w=A(w,{on:n,off:n,reducers:n},{on:I,off:I,reducers:j});function D(B){if(typeof B!="object")throw TypeError("events must be an object");var H=w.reducers,Q=ne.call(R,x),P;Q===-1?P=new E(R,x,w):P=R._observers[Q];for(var X=v(B),le=X.length,Te,xe=typeof H=="function",Ae=0;Ae<le;Ae++)Te=X[Ae],P.subscribe(Te,B[Te]||Te,xe?H:H&&H[Te])}return a(S)?D(T(S)):D(typeof S=="string"?T(S.split(/\s+/)):S),this},z.prototype.stopListeningTo=function(x,S){var w=this._observers;if(!w)return!1;var R=w.length,D,B=!1;if(x&&typeof x!="object")throw TypeError("target should be an object");for(;R-- >0;)D=w[R],(!x||D._target===x)&&(D.unsubscribe(S),B=!0);return B},z.prototype.delimiter=".",z.prototype.setMaxListeners=function(x){x!==n&&(this._maxListeners=x,this._conf||(this._conf={}),this._conf.maxListeners=x)},z.prototype.getMaxListeners=function(){return this._maxListeners},z.prototype.event="",z.prototype.once=function(x,S,w){return this._once(x,S,!1,w)},z.prototype.prependOnceListener=function(x,S,w){return this._once(x,S,!0,w)},z.prototype._once=function(x,S,w,R){return this._many(x,1,S,w,R)},z.prototype.many=function(x,S,w,R){return this._many(x,S,w,!1,R)},z.prototype.prependMany=function(x,S,w,R){return this._many(x,S,w,!0,R)},z.prototype._many=function(x,S,w,R,D){var B=this;if(typeof w!="function")throw new Error("many only accepts instances of Function");function H(){return--S===0&&B.off(x,H),w.apply(this,arguments)}return H._origin=w,this._on(x,H,R,D)},z.prototype.emit=function(){var x=arguments;if(!this._events&&!this._all)return!1;this._events||m.call(this);var S=arguments[0],w,R=this.wildcard,D,B,H,Q,P;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(R&&(w=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(B=S.length,c){for(H=0;H<B;H++)if(typeof S[H]=="symbol"){P=!0;break}}P||(S=S.join(this.delimiter))}var X=arguments.length,le;if(this._all&&this._all.length)for(le=this._all.slice(),H=0,B=le.length;H<B;H++)switch(this.event=S,X){case 1:le[H].call(this,S);break;case 2:le[H].call(this,S,x[1]);break;case 3:le[H].call(this,S,x[1],x[2]);break;default:le[H].apply(this,x)}if(R)le=[],W.call(this,le,w,this.listenerTree,0,B);else if(le=this._events[S],typeof le=="function"){switch(this.event=S,X){case 1:le.call(this);break;case 2:le.call(this,arguments[1]);break;case 3:le.call(this,arguments[1],arguments[2]);break;default:for(D=new Array(X-1),Q=1;Q<X;Q++)D[Q-1]=x[Q];le.apply(this,D)}return!0}else le&&(le=le.slice());if(le&&le.length){if(X>3)for(D=new Array(X-1),Q=1;Q<X;Q++)D[Q-1]=x[Q];for(H=0,B=le.length;H<B;H++)switch(this.event=S,X){case 1:le[H].call(this);break;case 2:le[H].call(this,x[1]);break;case 3:le[H].call(this,x[1],x[2]);break;default:le[H].apply(this,D)}return!0}else if(!this.ignoreErrors&&!this._all&&S==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},z.prototype.emitAsync=function(){var x=arguments;if(!this._events&&!this._all)return!1;this._events||m.call(this);var S=arguments[0],w=this.wildcard,R,D,B,H,Q,P;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(w&&(R=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(H=S.length,c){for(Q=0;Q<H;Q++)if(typeof S[Q]=="symbol"){D=!0;break}}D||(S=S.join(this.delimiter))}var X=[],le=arguments.length,Te;if(this._all)for(Q=0,H=this._all.length;Q<H;Q++)switch(this.event=S,le){case 1:X.push(this._all[Q].call(this,S));break;case 2:X.push(this._all[Q].call(this,S,x[1]));break;case 3:X.push(this._all[Q].call(this,S,x[1],x[2]));break;default:X.push(this._all[Q].apply(this,x))}if(w?(Te=[],W.call(this,Te,R,this.listenerTree,0)):Te=this._events[S],typeof Te=="function")switch(this.event=S,le){case 1:X.push(Te.call(this));break;case 2:X.push(Te.call(this,arguments[1]));break;case 3:X.push(Te.call(this,arguments[1],arguments[2]));break;default:for(B=new Array(le-1),P=1;P<le;P++)B[P-1]=x[P];X.push(Te.apply(this,B))}else if(Te&&Te.length){if(Te=Te.slice(),le>3)for(B=new Array(le-1),P=1;P<le;P++)B[P-1]=x[P];for(Q=0,H=Te.length;Q<H;Q++)switch(this.event=S,le){case 1:X.push(Te[Q].call(this));break;case 2:X.push(Te[Q].call(this,x[1]));break;case 3:X.push(Te[Q].call(this,x[1],x[2]));break;default:X.push(Te[Q].apply(this,B))}}else if(!this.ignoreErrors&&!this._all&&S==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(X)},z.prototype.on=function(x,S,w){return this._on(x,S,!1,w)},z.prototype.prependListener=function(x,S,w){return this._on(x,S,!0,w)},z.prototype.onAny=function(x){return this._onAny(x,!1)},z.prototype.prependAny=function(x){return this._onAny(x,!0)},z.prototype.addListener=z.prototype.on,z.prototype._onAny=function(x,S){if(typeof x!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),S?this._all.unshift(x):this._all.push(x),this},z.prototype._on=function(x,S,w,R){if(typeof x=="function")return this._onAny(x,S),this;if(typeof S!="function")throw new Error("on only accepts instances of Function");this._events||m.call(this);var D=this,B;return R!==n&&(B=se.call(this,x,S,R),S=B[0],D=B[1]),this._newListener&&this.emit("newListener",x,S),this.wildcard?(oe.call(this,x,S,w),D):(this._events[x]?(typeof this._events[x]=="function"&&(this._events[x]=[this._events[x]]),w?this._events[x].unshift(S):this._events[x].push(S),!this._events[x].warned&&this._maxListeners>0&&this._events[x].length>this._maxListeners&&(this._events[x].warned=!0,_.call(this,this._events[x].length,x))):this._events[x]=S,D)},z.prototype.off=function(x,S){if(typeof S!="function")throw new Error("removeListener only takes instances of Function");var w,R=[];if(this.wildcard){var D=typeof x=="string"?x.split(this.delimiter):x.slice();if(R=W.call(this,null,D,this.listenerTree,0),!R)return this}else{if(!this._events[x])return this;w=this._events[x],R.push({_listeners:w})}for(var B=0;B<R.length;B++){var H=R[B];if(w=H._listeners,a(w)){for(var Q=-1,P=0,X=w.length;P<X;P++)if(w[P]===S||w[P].listener&&w[P].listener===S||w[P]._origin&&w[P]._origin===S){Q=P;break}if(Q<0)continue;return this.wildcard?H._listeners.splice(Q,1):this._events[x].splice(Q,1),w.length===0&&(this.wildcard?delete H._listeners:delete this._events[x]),this._removeListener&&this.emit("removeListener",x,S),this}else(w===S||w.listener&&w.listener===S||w._origin&&w._origin===S)&&(this.wildcard?delete H._listeners:delete this._events[x],this._removeListener&&this.emit("removeListener",x,S))}return this.listenerTree&&he(this.listenerTree),this},z.prototype.offAny=function(x){var S=0,w=0,R;if(x&&this._all&&this._all.length>0){for(R=this._all,S=0,w=R.length;S<w;S++)if(x===R[S])return R.splice(S,1),this._removeListener&&this.emit("removeListenerAny",x),this}else{if(R=this._all,this._removeListener)for(S=0,w=R.length;S<w;S++)this.emit("removeListenerAny",R[S]);this._all=[]}return this},z.prototype.removeListener=z.prototype.off,z.prototype.removeAllListeners=function(x){if(x===n)return!this._events||m.call(this),this;if(this.wildcard){var S=W.call(this,null,x,this.listenerTree,0),w,R;if(!S)return this;for(R=0;R<S.length;R++)w=S[R],w._listeners=null;this.listenerTree&&he(this.listenerTree)}else this._events&&(this._events[x]=null);return this},z.prototype.listeners=function(x){var S=this._events,w,R,D,B,H;if(x===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!S)return[];for(w=v(S),B=w.length,D=[];B-- >0;)R=S[w[B]],typeof R=="function"?D.push(R):D.push.apply(D,R);return D}else{if(this.wildcard){if(H=this.listenerTree,!H)return[];var Q=[],P=typeof x=="string"?x.split(this.delimiter):x.slice();return W.call(this,Q,P,H,0),Q}return S?(R=S[x],R?typeof R=="function"?[R]:R:[]):[]}},z.prototype.eventNames=function(x){var S=this._events;return this.wildcard?ae.call(this,this.listenerTree,[],null,x):S?v(S):[]},z.prototype.listenerCount=function(x){return this.listeners(x).length},z.prototype.hasListeners=function(x){if(this.wildcard){var S=[],w=typeof x=="string"?x.split(this.delimiter):x.slice();return W.call(this,S,w,this.listenerTree,0),S.length>0}var R=this._events,D=this._all;return!!(D&&D.length||R&&(x===n?v(R).length:R[x]))},z.prototype.listenersAny=function(){return this._all?this._all:[]},z.prototype.waitFor=function(x,S){var w=this,R=typeof S;return R==="number"?S={timeout:S}:R==="function"&&(S={filter:S}),S=A(S,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:I,Promise:C}),q(S.Promise,function(D,B,H){function Q(){var P=S.filter;if(!(P&&!P.apply(w,arguments)))if(w.off(x,Q),S.handleError){var X=arguments[0];X?B(X):D(M.apply(null,arguments).slice(1))}else D(M.apply(null,arguments))}H(function(){w.off(x,Q)}),w._on(x,Q,!1)},{timeout:S.timeout,overload:S.overload})};function N(x,S,w){w=A(w,{Promise,timeout:0,overload:!1},{Promise:C});var R=w.Promise;return q(R,function(D,B,H){var Q;if(typeof x.addEventListener=="function"){Q=function(){D(M.apply(null,arguments))},H(function(){x.removeEventListener(S,Q)}),x.addEventListener(S,Q,{once:!0});return}var P=function(){X&&x.removeListener("error",X),D(M.apply(null,arguments))},X;S!=="error"&&(X=function(le){x.removeListener(S,P),B(le)},x.once("error",X)),H(function(){X&&x.removeListener("error",X),x.removeListener(S,P)}),x.once(S,P)},{timeout:w.timeout,overload:w.overload})}var $=z.prototype;Object.defineProperties(z,{defaultMaxListeners:{get:function(){return $._maxListeners},set:function(x){if(typeof x!="number"||x<0||Number.isNaN(x))throw TypeError("n must be a non-negative number");$._maxListeners=x},enumerable:!0},once:{value:N,writable:!0,configurable:!0}}),Object.defineProperties($,{_maxListeners:{value:o,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),e.exports=z})()})(rM);var WN=rM.exports,qN=function(e){function t(n){e.call(this),n=n||{},this.message=n.message,this.feedbackTopic=n.feedbackTopic,this.tfClient=n.tfClient,this.menuFontSize=n.menuFontSize||"0.8em",this.name=this.message.name,this.header=this.message.header,this.controls=this.message.controls,this.menuEntries=this.message.menu_entries,this.dragging=!1,this.timeoutHandle=null,this.tfTransform=new Nt.Transform,this.pose=new Nt.Pose,this.setPoseFromClientBound=this.setPoseFromClient.bind(this),this.onMouseDownBound=this.onMouseDown.bind(this),this.onMouseUpBound=this.onMouseUp.bind(this),this.onButtonClickBound=this.onButtonClick.bind(this),this.onMenuSelectBound=this.onMenuSelect.bind(this),this.setPoseFromServer(this.message.pose),this.tfUpdateBound=this.tfUpdate.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.subscribeTf=function(){this.message.header.stamp.secs===0&&this.message.header.stamp.nsecs===0&&this.tfClient.subscribe(this.message.header.frame_id,this.tfUpdateBound)},t.prototype.unsubscribeTf=function(){this.tfClient.unsubscribe(this.message.header.frame_id,this.tfUpdateBound)},t.prototype.emitServerPoseUpdate=function(){var r=new Nt.Pose(this.pose);r.applyTransform(this.tfTransform),this.emit("pose",r)},t.prototype.setPoseFromServer=function(r){this.pose=new Nt.Pose(r),this.emitServerPoseUpdate()},t.prototype.tfUpdate=function(r){this.tfTransform=new Nt.Transform(r),this.emitServerPoseUpdate()},t.prototype.setPoseFromClient=function(r){this.pose=new Nt.Pose(r);var a=this.tfTransform.clone();a.rotation.invert(),a.translation.multiplyQuaternion(a.rotation),a.translation.x*=-1,a.translation.y*=-1,a.translation.z*=-1,this.pose.applyTransform(a),this.sendFeedback(EN,void 0,0,r.controlName),this.dragging&&(this.timeoutHandle&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(this.setPoseFromClient.bind(this,r),250))},t.prototype.onButtonClick=function(r){this.sendFeedback(TN,r.clickPosition,0,r.controlName)},t.prototype.onMouseDown=function(r){this.sendFeedback(SN,r.clickPosition,0,r.controlName),this.dragging=!0},t.prototype.onMouseUp=function(r){this.sendFeedback(AN,r.clickPosition,0,r.controlName),this.dragging=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)},t.prototype.onMenuSelect=function(r){this.sendFeedback(MN,void 0,r.id,r.controlName)},t.prototype.sendFeedback=function(r,a,o,u){var c=a!==void 0;a=a||{x:0,y:0,z:0};var f={header:this.header,client_id:this.clientID,marker_name:this.name,control_name:u,event_type:r,pose:this.pose,mouse_point:a,mouse_point_valid:c,menu_entry_id:o};this.feedbackTopic.publish(f)},t}(WN),hl=function(t){t=t||{},this.ros=t.ros,this.tfClient=t.tfClient,this.topicName=t.topic,this.path=t.path||"/",this.camera=t.camera,this.rootObject=t.rootObject||new U.Object3D,this.loader=t.loader,this.menuFontSize=t.menuFontSize||"0.8em",this.interactiveMarkers={},this.updateTopic=null,this.feedbackTopic=null,this.topicName&&this.subscribe(this.topicName)};hl.prototype.subscribe=function(t){this.unsubscribe(),this.updateTopic=new Nt.Topic({ros:this.ros,name:t+"/tunneled/update",messageType:"visualization_msgs/InteractiveMarkerUpdate",compression:"png"}),this.updateTopic.subscribe(this.processUpdate.bind(this)),this.feedbackTopic=new Nt.Topic({ros:this.ros,name:t+"/feedback",messageType:"visualization_msgs/InteractiveMarkerFeedback",compression:"png"}),this.feedbackTopic.advertise(),this.initService=new Nt.Service({ros:this.ros,name:t+"/tunneled/get_init",serviceType:"demo_interactive_markers/GetInit"});var n=new Nt.ServiceRequest({});this.initService.callService(n,this.processInit.bind(this))};hl.prototype.unsubscribe=function(){this.updateTopic&&this.updateTopic.unsubscribe(this.processUpdate),this.feedbackTopic&&this.feedbackTopic.unadvertise();for(var t in this.interactiveMarkers)this.eraseIntMarker(t);this.interactiveMarkers={}};hl.prototype.processInit=function(t){var n=t.msg;n.erases=[];for(var r in this.interactiveMarkers)n.erases.push(r);n.poses=[],this.processUpdate(n)};hl.prototype.processUpdate=function(t){var n=this;t.erases.forEach(function(r){n.eraseIntMarker(r)}),t.poses.forEach(function(r){var a=n.interactiveMarkers[r.name];a&&a.setPoseFromServer(r.pose)}),t.markers.forEach(function(r){var a=n.interactiveMarkers[r.name];a&&n.eraseIntMarker(a.name);var o=new qN({message:r,feedbackTopic:n.feedbackTopic,tfClient:n.tfClient,menuFontSize:n.menuFontSize});n.interactiveMarkers[r.name]=o;var u=new jN({handle:o,camera:n.camera,path:n.path,loader:n.loader});u.name=r.name,n.rootObject.add(u),o.on("pose",function(c){u.onServerSetPose({pose:c})}),u.addEventListener("user-pose-change",o.setPoseFromClientBound),u.addEventListener("user-mousedown",o.onMouseDownBound),u.addEventListener("user-mouseup",o.onMouseUpBound),u.addEventListener("user-button-click",o.onButtonClickBound),u.addEventListener("menu-select",o.onMenuSelectBound),o.subscribeTf()})};hl.prototype.eraseIntMarker=function(t){if(this.interactiveMarkers[t]){var n=this.rootObject.getObjectByName(t);this.rootObject.remove(n);var r=this.interactiveMarkers[t];r.unsubscribeTf(),n.removeEventListener("user-pose-change",r.setPoseFromClientBound),n.removeEventListener("user-mousedown",r.onMouseDownBound),n.removeEventListener("user-mouseup",r.onMouseUpBound),n.removeEventListener("user-button-click",r.onButtonClickBound),n.removeEventListener("menu-select",r.onMenuSelectBound),delete this.interactiveMarkers[t],n.dispose()}};var ti=function(e){function t(n){e.call(this),n=n||{};var r=this;this.tfClient=n.tfClient,this.frameID=n.frameID;var a=n.object;this.pose=n.pose||new Nt.Pose,this.visible=!1,this.add(a),this.updatePose(this.pose),this.tfUpdate=function(o){var u=new Nt.Transform(o),c=new Nt.Pose(r.pose);c.applyTransform(u),r.updatePose(c),r.visible=!0},this.tfClient.subscribe(this.frameID,this.tfUpdate)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updatePose=function(r){this.position.set(r.position.x,r.position.y,r.position.z),this.quaternion.set(r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w),this.updateMatrixWorld(!0)},t.prototype.unsubscribeTf=function(){this.tfClient.unsubscribe(this.frameID,this.tfUpdate)},t}(U.Object3D);U.ArrowHelper;var iM=function(e){function t(n){e.call(this);var r=this;n=n||{};var a=n.shaftRadius||.008,o=n.headRadius||.023,u=n.headLength||.1,c=n.scale||1,f=n.lineType||"full",d=n.lineDashLength||.1;this.scale.set(c,c,c),this.lineGeom=new U.CylinderGeometry(a,a,1-u),this.headGeom=new U.CylinderGeometry(0,o,u);function p(v){var m=new U.Color;m.setRGB(v.x,v.y,v.z);var y=new U.MeshBasicMaterial({color:m.getHex()}),_=new U.Vector3;_.crossVectors(v,new U.Vector3(0,-1,0));var M=new U.Quaternion;M.setFromAxisAngle(_,.5*Math.PI);var T=new U.Mesh(r.headGeom,y);T.position.copy(v),T.position.multiplyScalar(.95),T.quaternion.copy(M),T.updateMatrix(),r.add(T);var E;if(f==="dashed")for(var A=d,C=0;A/2+3*A*C+A/2<=1;++C){var L=new U.CylinderGeometry(a,a,A);E=new U.Mesh(L,y),E.position.copy(v),E.position.multiplyScalar(A/2+3*A*C),E.quaternion.copy(M),E.updateMatrix(),r.add(E)}else f==="full"?(E=new U.Mesh(r.lineGeom,y),E.position.copy(v),E.position.multiplyScalar(.45),E.quaternion.copy(M),E.updateMatrix(),r.add(E)):console.warn("[Axes]: Unsupported line type. Not drawing any axes.")}p(new U.Vector3(1,0,0)),p(new U.Vector3(0,1,0)),p(new U.Vector3(0,0,1))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(U.Object3D),XN=function(e){function t(n){n=n||{};var r=n.num_cells||10,a=n.color||"#cccccc",o=n.lineWidth||1,u=n.cellSize||1;e.call(this);for(var c=new U.LineBasicMaterial({color:a,linewidth:o}),f=0;f<=r;++f){var d=u*r/2,p=d-f*u,v=new U.Geometry;v.vertices.push(new U.Vector3(-d,p,0),new U.Vector3(d,p,0));var m=new U.Geometry;m.vertices.push(new U.Vector3(p,-d,0),new U.Vector3(p,d,0)),this.add(new U.Line(v,c)),this.add(new U.Line(m,c))}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(U.Object3D);U.Mesh;U.Object3D;U.Object3D;U.Object3D;U.Object3D;U.Object3D;U.Object3D;U.Object3D;var aM=function(e){function t(n){e.call(this),n=n||{},this.tfClient=n.tfClient,this.rootObject=n.rootObject||new U.Object3D,this.max_pts=n.max_pts||1e4,this.pointRatio=n.pointRatio||1,this.messageRatio=n.messageRatio||1,this.messageCount=0,this.material=n.material||{},this.colorsrc=n.colorsrc,this.colormap=n.colormap,("color"in n||"size"in n||"texture"in n)&&console.warn('toplevel "color", "size" and "texture" options are deprecated.They should beprovided within a "material" option, e.g. :  { tfClient, material : { color: mycolor, size: mysize, map: mytexture }, ... }'),this.sn=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setup=function(r,a,o){if(this.sn===null){o=o||[],this.fields={};for(var u=0;u<o.length;u++)this.fields[o[u].name]=o[u];if(this.geom=new U.BufferGeometry,this.positions=new U.BufferAttribute(new Float32Array(this.max_pts*3),3,!1),this.geom.addAttribute("position",this.positions.setDynamic(!0)),!this.colorsrc&&this.fields.rgb&&(this.colorsrc="rgb"),this.colorsrc){var c=this.fields[this.colorsrc];if(c){this.colors=new U.BufferAttribute(new Float32Array(this.max_pts*3),3,!1),this.geom.addAttribute("color",this.colors.setDynamic(!0));var f=c.offset;this.getColor=[function(d,p,v){return d.getInt8(p+f,v)},function(d,p,v){return d.getUint8(p+f,v)},function(d,p,v){return d.getInt16(p+f,v)},function(d,p,v){return d.getUint16(p+f,v)},function(d,p,v){return d.getInt32(p+f,v)},function(d,p,v){return d.getUint32(p+f,v)},function(d,p,v){return d.getFloat32(p+f,v)},function(d,p,v){return d.getFloat64(p+f,v)}][c.datatype-1],this.colormap=this.colormap||function(d){return new U.Color(d)}}else console.warn('unavailable field "'+this.colorsrc+'" for coloring.')}this.material.isMaterial||(this.colors&&this.material.vertexColors===void 0&&(this.material.vertexColors=U.VertexColors),this.material=new U.PointsMaterial(this.material)),this.object=new U.Points(this.geom,this.material),this.sn=new ti({frameID:r,tfClient:this.tfClient,object:this.object}),this.rootObject.add(this.sn)}return this.messageCount++%this.messageRatio===0},t.prototype.update=function(r){this.geom.setDrawRange(0,r),this.positions.needsUpdate=!0,this.positions.updateRange.count=r*this.positions.itemSize,this.colors&&(this.colors.needsUpdate=!0,this.colors.updateRange.count=r*this.colors.itemSize)},t}(U.Object3D);U.Object3D;U.Object3D;function Ts(e,t,n,r){var a,o=0,u=0,c=0,f=e.length,d=t.length;n=n||d,r=r||1;var p=(r-1)*n*8;for(a=0;a<f&&c<d;a++)o=(o<<6)+Ts.e[e.charAt(a)],u+=6,u>=8&&(u-=8,t[c++]=o>>>u&255,c%n===0&&(a+=Math.ceil((p-u)/6),u=u%8,u>0&&(o=Ts.e[e.charAt(a)])));return Math.floor(c/n)}Ts.S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";Ts.e={};for(var Wf=0;Wf<64;Wf++)Ts.e[Ts.S.charAt(Wf)]=Wf;U.Object3D;U.Object3D;var YN=function(e){function t(n){n=n||{};var r=n.urdfModel,a=n.path||"/",o=n.tfClient,u=n.tfPrefix||"",c=n.loader;e.call(this);var f=r.links;for(var d in f)for(var p=f[d],v=0;v<p.visuals.length;v++){var m=p.visuals[v];if(m&&m.geometry){var y=u+"/"+p.name,_=null;if(m.material&&m.material.color){var M=m.material&&m.material.color;_=yo(M.r,M.g,M.b,M.a)}if(m.geometry.type===Nt.URDF_MESH){var T=m.geometry.filename,E=T.indexOf("package://");E!==-1&&(T=T.substr(E+10));var A=T.substr(-3).toLowerCase();if(Ka.loaders[A]){var C=new $m({path:a,resource:T,loader:c,material:_});p.visuals[v].geometry.scale&&C.scale.copy(m.geometry.scale);var L=new ti({frameID:y,pose:m.origin,tfClient:o,object:C});L.name=m.name,this.add(L)}else console.warn("Could not load geometry mesh: "+T)}else{var I=this.createShapeMesh(m,n),j=new ti({frameID:y,pose:m.origin,tfClient:o,object:I});j.name=m.name,this.add(j)}}}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createShapeMesh=function(r,a){var o=null;o||(o=yo(0,0,0,1));var u;switch(r.geometry.type){case Nt.URDF_BOX:var c=r.geometry.dimension,f=new U.BoxGeometry(c.x,c.y,c.z);u=new U.Mesh(f,o);break;case Nt.URDF_CYLINDER:var d=r.geometry.radius,p=r.geometry.length,v=new U.CylinderGeometry(d,d,p,16,1,!1);u=new U.Mesh(v,o),u.quaternion.setFromAxisAngle(new U.Vector3(1,0,0),Math.PI*.5);break;case Nt.URDF_SPHERE:var m=new U.SphereGeometry(r.geometry.radius,16);u=new U.Mesh(m,o);break}return u},t.prototype.unsubscribeTf=function(){this.children.forEach(function(r){typeof r.unsubscribeTf=="function"&&r.unsubscribeTf()})},t}(U.Object3D),ZN=function(t){var n=this;t=t||{};var r=t.ros;this.param=t.param||"robot_description",this.path=t.path||"/",this.tfClient=t.tfClient,this.rootObject=t.rootObject||new U.Object3D,this.tfPrefix=t.tfPrefix||"",this.loader=t.loader;var a=new Nt.Param({ros:r,name:this.param});a.get(function(o){var u=new Nt.UrdfModel({string:o});n.urdf=new YN({urdfModel:u,path:n.path,tfClient:n.tfClient,tfPrefix:n.tfPrefix,loader:n.loader}),n.rootObject.add(n.urdf)})},Us=function(t){t=t||{},this.mouseHandler=t.mouseHandler,this.hoverObjs={},this.mouseHandler.addEventListener("mouseover",this.onMouseOver.bind(this)),this.mouseHandler.addEventListener("mouseout",this.onMouseOut.bind(this))};Us.prototype.onMouseOver=function(t){this.hoverObjs[t.currentTarget.uuid]=t.currentTarget};Us.prototype.onMouseOut=function(t){var n=t.currentTarget.uuid;n in this.hoverObjs&&delete this.hoverObjs[n]};Us.prototype.renderHighlights=function(t,n,r){this.makeEverythingInvisible(t),this.makeHighlightedVisible(t);var a=t.overrideMaterial;t.overrideMaterial=new U.MeshBasicMaterial({fog:!1,opacity:.5,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetUnits:-1,side:U.DoubleSide}),n.render(t,r),t.overrideMaterial=a,this.restoreVisibility(t)};Us.prototype.makeEverythingInvisible=function(t){t.traverse(function(n){(n instanceof U.Mesh||n instanceof U.Line||n instanceof U.Sprite)&&(n.previousVisibility=n.visible,n.visible=!1)})};Us.prototype.makeHighlightedVisible=function(t){var n=function(o){(o instanceof U.Mesh||o instanceof U.Line||o instanceof U.Sprite)&&(o.visible=!0)};for(var r in this.hoverObjs){var a=this.hoverObjs[r];a.visible=!0,a.traverse(n)}};Us.prototype.restoreVisibility=function(t){t.traverse((function(n){n.hasOwnProperty("previousVisibility")&&(n.visible=n.previousVisibility)}).bind(this))};var QN=function(e){function t(n){e.call(this),this.renderer=n.renderer,this.camera=n.camera,this.rootObject=n.rootObject,this.fallbackTarget=n.fallbackTarget,this.lastTarget=this.fallbackTarget,this.dragging=!1;var r=["contextmenu","click","dblclick","mouseout","mousedown","mouseup","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchcancel","touchleave","touchmove"];this.listeners={},r.forEach(function(a){this.listeners[a]=this.processDomEvent.bind(this),this.renderer.domElement.addEventListener(a,this.listeners[a],!1)},this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.processDomEvent=function(r){r.preventDefault();var a=r.target,o=a.getBoundingClientRect(),u,c;if(r.type.indexOf("touch")!==-1){u=0,c=0;for(var f=0;f<r.touches.length;++f)u+=r.touches[f].clientX,c+=r.touches[f].clientY;u/=r.touches.length,c/=r.touches.length}else u=r.clientX,c=r.clientY;var d=u-o.left-a.clientLeft+a.scrollLeft,p=c-o.top-a.clientTop+a.scrollTop,v=d/a.clientWidth*2-1,m=-p/a.clientHeight*2+1,y=new U.Vector2(v,m),_=new U.Raycaster;_.linePrecision=.001,_.setFromCamera(y,this.camera);var M=_.ray,T={mousePos:y,mouseRay:M,domEvent:r,camera:this.camera,intersection:this.lastIntersection};if(r.type==="mouseout"){this.dragging&&(this.notify(this.lastTarget,"mouseup",T),this.dragging=!1),this.notify(this.lastTarget,"mouseout",T),this.lastTarget=null;return}if(r.type==="touchleave"||r.type==="touchend"){this.dragging&&(this.notify(this.lastTarget,"mouseup",T),this.dragging=!1),this.notify(this.lastTarget,"touchend",T),this.lastTarget=null;return}if(this.dragging){this.notify(this.lastTarget,r.type,T),(r.type==="mouseup"&&r.button===2||r.type==="click"||r.type==="touchend")&&(this.dragging=!1);return}a=this.lastTarget;var E=[];if(E=_.intersectObject(this.rootObject,!0),E.length>0?(a=E[0].object,T.intersection=this.lastIntersection=E[0]):a=this.fallbackTarget,a!==this.lastTarget&&r.type.match(/mouse/)){var A=this.notify(a,"mouseover",T);A===0?this.notify(this.lastTarget,"mouseout",T):A===1&&(a=this.fallbackTarget,a!==this.lastTarget&&(this.notify(a,"mouseover",T),this.notify(this.lastTarget,"mouseout",T)))}if(a!==this.lastTarget&&r.type.match(/touch/)){var C=this.notify(a,r.type,T);C?(this.notify(this.lastTarget,"touchleave",T),this.notify(this.lastTarget,"touchend",T)):(a=this.fallbackTarget,a!==this.lastTarget&&(this.notify(this.lastTarget,"touchmove",T),this.notify(this.lastTarget,"touchend",T)))}this.notify(a,r.type,T),(r.type==="mousedown"||r.type==="touchstart"||r.type==="touchmove")&&(this.dragging=!0),this.lastTarget=a},t.prototype.notify=function(r,a,o){for(o.type=a,o.cancelBubble=!1,o.continueBubble=!1,o.stopPropagation=function(){o.cancelBubble=!0},o.continuePropagation=function(){o.continueBubble=!0},o.currentTarget=r;o.currentTarget;){if(o.currentTarget.dispatchEvent&&o.currentTarget.dispatchEvent instanceof Function){if(o.currentTarget.dispatchEvent(o),o.cancelBubble)return this.dispatchEvent(o),0;if(o.continueBubble)return 2}o.currentTarget=o.currentTarget.parent}return 1},t}(U.EventDispatcher),KN=function(e){function t(n){e.call(this);var r=this;n=n||{};var a=n.scene;this.camera=n.camera,this.center=new U.Vector3,this.userZoom=!0,this.userZoomSpeed=n.userZoomSpeed||1,this.userRotate=!0,this.userRotateSpeed=n.userRotateSpeed||1,this.autoRotate=n.autoRotate,this.autoRotateSpeed=n.autoRotateSpeed||2,this.displayPanAndZoomFrame=n.displayPanAndZoomFrame===void 0?!0:!!n.displayPanAndZoomFrame,this.lineTypePanAndZoomFrame=n.dashedPanAndZoomFrame||"full",this.camera.up=new U.Vector3(0,0,1);var o=1800,u=10,c=new U.Vector2,f=new U.Vector2,d=new U.Vector2,p=new U.Vector2,v=new U.Vector2,m=new U.Vector2,y=new U.Vector3,_=new U.Vector3,M=new U.Vector3,T=new U.Vector3,E=new Array(2),A=new Array(2);this.phiDelta=0,this.thetaDelta=0,this.scale=1,this.lastPosition=new U.Vector3;var C={NONE:-1,ROTATE:0,ZOOM:1,MOVE:2},L=C.NONE;this.axes=new iM({shaftRadius:.025,headRadius:.07,headLength:.2,lineType:this.lineTypePanAndZoomFrame}),this.displayPanAndZoomFrame&&(a.add(this.axes),this.axes.traverse(function(fe){fe.visible=!1}));function I(fe){var se=fe.domEvent;switch(se.preventDefault(),se.button){case 0:L=C.ROTATE,c.set(se.clientX,se.clientY);break;case 1:L=C.MOVE,_=new U.Vector3(0,0,1);var z=new U.Matrix4().extractRotation(this.camera.matrix);_.applyMatrix4(z),y=r.center.clone(),M=r.camera.position.clone(),T=q(fe.mouseRay,y,_);break;case 2:L=C.ZOOM,p.set(se.clientX,se.clientY);break}this.showAxes()}function j(fe){var se=fe.domEvent;if(L===C.ROTATE)f.set(se.clientX,se.clientY),d.subVectors(f,c),r.rotateLeft(2*Math.PI*d.x/o*r.userRotateSpeed),r.rotateUp(2*Math.PI*d.y/o*r.userRotateSpeed),c.copy(f),this.showAxes();else if(L===C.ZOOM)v.set(se.clientX,se.clientY),m.subVectors(v,p),m.y>0?r.zoomIn():r.zoomOut(),p.copy(v),this.showAxes();else if(L===C.MOVE){var z=q(fe.mouseRay,r.center,_);if(!z)return;var N=new U.Vector3().subVectors(T.clone(),z.clone());r.center.addVectors(y.clone(),N.clone()),r.camera.position.addVectors(M.clone(),N.clone()),r.update(),r.camera.updateMatrixWorld(),this.showAxes()}}function q(fe,se,z){var N=new U.Vector3,$=new U.Vector3;N.subVectors(se,fe.origin);var x=fe.direction.dot(z);if(Math.abs(x)<fe.precision)return null;var S=z.dot(N)/x;return $=fe.direction.clone().multiplyScalar(S),$}function ne(fe){r.userRotate&&(L=C.NONE)}function W(fe){if(r.userZoom){var se=fe.domEvent,z;typeof se.wheelDelta<"u"?z=se.wheelDelta:z=-se.detail,z>0?r.zoomIn():r.zoomOut(),this.showAxes()}}function oe(fe){var se=fe.domEvent;switch(se.touches.length){case 1:L=C.ROTATE,c.set(se.touches[0].pageX-window.scrollX,se.touches[0].pageY-window.scrollY);break;case 2:L=C.NONE,_=new U.Vector3(0,0,1);var z=new U.Matrix4().extractRotation(this.camera.matrix);_.applyMatrix4(z),y=r.center.clone(),M=r.camera.position.clone(),T=q(fe.mouseRay,y,_),E[0]=new U.Vector2(se.touches[0].pageX,se.touches[0].pageY),E[1]=new U.Vector2(se.touches[1].pageX,se.touches[1].pageY),A[0]=new U.Vector2(0,0),A[1]=new U.Vector2(0,0);break}this.showAxes(),se.preventDefault()}function ae(fe){var se=fe.domEvent;if(L===C.ROTATE)f.set(se.touches[0].pageX-window.scrollX,se.touches[0].pageY-window.scrollY),d.subVectors(f,c),r.rotateLeft(2*Math.PI*d.x/o*r.userRotateSpeed),r.rotateUp(2*Math.PI*d.y/o*r.userRotateSpeed),c.copy(f),this.showAxes();else{if(A[0].set(E[0].x-se.touches[0].pageX,E[0].y-se.touches[0].pageY),A[1].set(E[1].x-se.touches[1].pageX,E[1].y-se.touches[1].pageY),A[0].lengthSq()>u&&A[1].lengthSq()>u&&(E[0].set(se.touches[0].pageX,se.touches[0].pageY),E[1].set(se.touches[1].pageX,se.touches[1].pageY),A[0].dot(A[1])>0&&L!==C.ZOOM?L=C.MOVE:A[0].dot(A[1])<0&&L!==C.MOVE&&(L=C.ZOOM),L===C.ZOOM)){var z=new U.Vector2;z.subVectors(E[0],E[1]),A[0].dot(z)<0&&A[1].dot(z)>0?r.zoomOut():A[0].dot(z)>0&&A[1].dot(z)<0&&r.zoomIn()}if(L===C.MOVE){var N=q(fe.mouseRay,r.center,_);if(!N)return;var $=new U.Vector3().subVectors(T.clone(),N.clone());r.center.addVectors(y.clone(),$.clone()),r.camera.position.addVectors(M.clone(),$.clone()),r.update(),r.camera.updateMatrixWorld()}this.showAxes(),se.preventDefault()}}function he(fe){var se=fe.domEvent;se.touches.length===1&&L!==C.ROTATE?(L=C.ROTATE,c.set(se.touches[0].pageX-window.scrollX,se.touches[0].pageY-window.scrollY)):L=C.NONE}this.addEventListener("mousedown",I),this.addEventListener("mouseup",ne),this.addEventListener("mousemove",j),this.addEventListener("touchstart",oe),this.addEventListener("touchmove",ae),this.addEventListener("touchend",he),this.addEventListener("mousewheel",W),this.addEventListener("DOMMouseScroll",W)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.showAxes=function(){var r=this;this.axes.traverse(function(a){a.visible=!0}),this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){r.axes.traverse(function(a){a.visible=!1}),r.hideTimeout=!1},1e3)},t.prototype.rotateLeft=function(r){r===void 0&&(r=2*Math.PI/60/60*this.autoRotateSpeed),this.thetaDelta-=r},t.prototype.rotateRight=function(r){r===void 0&&(r=2*Math.PI/60/60*this.autoRotateSpeed),this.thetaDelta+=r},t.prototype.rotateUp=function(r){r===void 0&&(r=2*Math.PI/60/60*this.autoRotateSpeed),this.phiDelta-=r},t.prototype.rotateDown=function(r){r===void 0&&(r=2*Math.PI/60/60*this.autoRotateSpeed),this.phiDelta+=r},t.prototype.zoomIn=function(r){r===void 0&&(r=Math.pow(.95,this.userZoomSpeed)),this.scale/=r},t.prototype.zoomOut=function(r){r===void 0&&(r=Math.pow(.95,this.userZoomSpeed)),this.scale*=r},t.prototype.update=function(){var r=this.camera.position,a=r.clone().sub(this.center),o=Math.atan2(a.y,a.x),u=Math.atan2(Math.sqrt(a.y*a.y+a.x*a.x),a.z);this.autoRotate&&this.rotateLeft(2*Math.PI/60/60*this.autoRotateSpeed),o+=this.thetaDelta,u+=this.phiDelta;var c=1e-6;u=Math.max(c,Math.min(Math.PI-c,u));var f=a.length();a.set(f*Math.sin(u)*Math.cos(o),f*Math.sin(u)*Math.sin(o),f*Math.cos(u)),a.multiplyScalar(this.scale),r.copy(this.center).add(a),this.camera.lookAt(this.center),f=a.length(),this.axes.position.copy(this.center),this.axes.scale.set(f*.05,f*.05,f*.05),this.axes.updateMatrixWorld(!0),this.thetaDelta=0,this.phiDelta=0,this.scale=1,this.lastPosition.distanceTo(this.camera.position)>0&&(this.dispatchEvent({type:"change"}),this.lastPosition.copy(this.camera.position))},t}(U.EventDispatcher),dl=function(t){t=t||{};var n=t.divID,r=t.elem,a=t.width,o=t.height,u=t.background||"#111111",c=t.antialias,f=t.intensity||.66,d=t.near||.01,p=t.far||1e3,v=t.alpha||1,m=t.cameraPose||{x:3,y:3,z:3},y=t.cameraZoomSpeed||.5,_=t.displayPanAndZoomFrame===void 0?!0:!!t.displayPanAndZoomFrame,M=t.lineTypePanAndZoomFrame||"full";this.renderer=new U.WebGLRenderer({antialias:c,alpha:!0}),this.renderer.setClearColor(parseInt(u.replace("#","0x"),16),v),this.renderer.sortObjects=!1,this.renderer.setSize(a,o),this.renderer.shadowMap.enabled=!1,this.renderer.autoClear=!1,this.scene=new U.Scene,this.camera=new U.PerspectiveCamera(40,a/o,d,p),this.camera.position.x=m.x,this.camera.position.y=m.y,this.camera.position.z=m.z,this.cameraControls=new KN({scene:this.scene,camera:this.camera,displayPanAndZoomFrame:_,lineTypePanAndZoomFrame:M}),this.cameraControls.userZoomSpeed=y,this.scene.add(new U.AmbientLight(5592405)),this.directionalLight=new U.DirectionalLight(16777215,f),this.scene.add(this.directionalLight),this.selectableObjects=new U.Group,this.scene.add(this.selectableObjects);var T=new QN({renderer:this.renderer,camera:this.camera,rootObject:this.selectableObjects,fallbackTarget:this.cameraControls});this.highlighter=new Us({mouseHandler:T}),this.stopped=!0,this.animationRequestId=void 0;var E=r||document.getElementById(n);E.appendChild(this.renderer.domElement),this.start()};dl.prototype.start=function(){this.stopped=!1,this.draw()};dl.prototype.draw=function(){this.stopped||(this.cameraControls.update(),this.directionalLight.position.normalize(),this.renderer.clear(!0,!0,!0),this.renderer.render(this.scene,this.camera),this.highlighter.renderHighlights(this.scene,this.renderer,this.camera),this.animationRequestId=requestAnimationFrame(this.draw.bind(this)))};dl.prototype.stop=function(){this.stopped||cancelAnimationFrame(this.animationRequestId),this.stopped=!0};dl.prototype.addObject=function(t,n){n?this.selectableObjects.add(t):this.scene.add(t)};dl.prototype.resize=function(t,n){this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n)};const _o=({title:e="Component",children:t})=>{const n=`toggle-${e}`,[r,a]=J.useState(!0);J.useEffect(()=>{const u=sessionStorage.getItem(n);u!==null&&a(u==="true")},[n]);const o=()=>{const u=!r;a(u),sessionStorage.setItem(n,u.toString())};return te.jsxs("div",{children:[te.jsxs(wa,{variant:"dark",size:"md",style:{zIndex:10,borderColor:"gray"},onClick:o,children:[r?"Hide":"Show"," ",e]}),r&&t&&te.jsx("div",{className:"mt-2",children:t})]})},JN=()=>te.jsxs("div",{style:{position:"relative",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"0.5rem",fontSize:"0.875rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",zIndex:1,pointerEvents:"none"},children:[te.jsx("div",{children:"Click + drag to rotate"}),te.jsx("div",{children:"Scroll to zoom"})]}),$N=()=>{const e=J.useRef(null),t=J.useRef(null),[n,r]=J.useState({width:500,height:500});return J.useEffect(()=>{if(!t.current)return;const a=new ResizeObserver(([o])=>{const{width:u,height:c}=o.contentRect;r({width:u,height:c})});return a.observe(t.current),()=>a.disconnect()},[]),J.useEffect(()=>{const a=new xa.Ros({url:"ws://localhost:9090"});if(a.on("connection",()=>{console.log("Connected to ROS")}),a.on("error",f=>{console.error("ROS error:",f)}),a.on("close",()=>{console.log("Connection to ROS closed")}),!e.current)return;const o=new dl({divID:e.current.id,width:n.width,height:n.height,antialias:!0,fixedFrame:"scene"});o.addObject(new XN),o.camera.position.set(2,2,2);const u=new xa.TFClient({ros:a,fixedFrame:"panda_link0",angularThres:.01,transThres:.01,rate:10});new ZN({ros:a,tfClient:u,path:"https://raw.githubusercontent.com/Wisc-HCI/panda-primitives/master/",rootObject:o.selectableObjects,loader:void 0});const c=new xa.TFClient({ros:a,fixedFrame:"/scene",angularThres:.01,transThres:.01,rate:10});return new hl({ros:a,tfClient:c,topic:"/scene/object_controls",camera:o.camera,rootObject:o.selectableObjects}),()=>{u.dispose(),c.dispose(),e.current&&(e.current.innerHTML="")}},[]),te.jsxs("div",{ref:t,style:{width:"100%",height:"100%",position:"relative"},children:[te.jsx(_o,{title:"Tips",children:te.jsx(JN,{})}),te.jsx("div",{id:"ros3d-viewer",ref:e,style:{height:"100%",width:"100%",backgroundColor:"black"}})]})},eD=({messages:e,historyRef:t})=>te.jsxs("div",{ref:t,style:{height:"400px",width:"500px",overflowY:"scroll",backgroundColor:"#222222",color:"white",padding:"1rem",borderRadius:"0.5rem"},children:[te.jsx("h2",{className:"text-sm mb-2",children:"Chat History"}),e.length===0?te.jsx("p",{className:"text-gray-400",children:"No messages yet..."}):e.map((n,r)=>te.jsxs("div",{className:`p-2 rounded mb-2 ${n.role==="user"?"bg-blue-600":"bg-gray-700"}`,children:[te.jsxs("strong",{children:[n.role.toUpperCase(),":"]})," ",n.text]},r))]}),tD=({messages:e,historyRef:t})=>te.jsx("div",{children:te.jsx(eD,{messages:e,historyRef:t})}),sM=({size:e=43.5})=>te.jsxs("div",{style:{width:`${e}px`,height:`${e}px`,display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1.4s infinite"},children:[te.jsx("img",{src:"/p13/mic.png",alt:"Mic",style:{width:"100%",height:"100%",objectFit:"contain"}}),te.jsx("style",{children:`
          @keyframes pulse {
            0% {
              transform: scale(1);
              opacity: 1;
            }
            50% {
              transform: scale(1.1);
              opacity: 0.8;
            }
            100% {
              transform: scale(1);
              opacity: 1;
            }
          }
        `})]}),_m=43.5,oM=({inputRef:e,onSubmit:t,toggleInputMode:n,mode:r="type"})=>{const a=r==="speech",o=a?'Say something...followed by "Enter"':"Type your message...",u=a?te.jsx("div",{children:te.jsx(wa,{variant:"dark",disabled:!0,style:{width:`${_m*1.5}px`,height:`${_m*1.5}px`,padding:0,borderRadius:"0.375rem",border:"none",cursor:"default",display:"flex",alignItems:"center",justifyContent:"center"},children:te.jsx(sM,{size:_m})})}):te.jsx(wa,{variant:"primary",onClick:t,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",borderRadius:"0.375rem",color:"white",height:"40px",border:"none",cursor:"pointer"},children:"Enter"}),c=a?'Say "Stop Speech"':"Use Speech",f=a?"#991b1b":"#065f46";return te.jsx("div",{style:{width:"500px",display:"flex",justifyContent:"center",marginTop:"1rem"},children:te.jsxs("div",{style:{width:"500px",display:"flex",flexDirection:"column",gap:"1rem"},children:[te.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[te.jsx("textarea",{ref:e,placeholder:o,"aria-label":"Type your message",onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),t())},style:{flexGrow:1,padding:"0.5rem",fontSize:"0.875rem",borderRadius:"0.375rem",resize:"none",backgroundColor:"#3f3f3f",color:"white",height:"85px",border:"none"}}),u]}),te.jsx("button",{onClick:n,style:{alignSelf:"flex-start",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"600",borderRadius:"0.375rem",backgroundColor:f,color:"white",border:"none",cursor:"pointer"},children:c})]})})},nD=({onUserSubmit:e,toggleInputMode:t})=>{const n=J.useRef(null),r=()=>{const a=n.current?.value?.trim();a&&(e(a),n.current.value="")};return te.jsx(oM,{inputRef:n,onSubmit:r,toggleInputMode:t,mode:"type"})},rD=({onUserSubmit:e,toggleInputMode:t})=>{const n=J.useRef(null),r=J.useRef(null),a=J.useRef(!0),o=()=>{const u=n.current?.value?.trim();u&&(e(u),n.current.value="")};return J.useEffect(()=>{if(!("webkitSpeechRecognition"in window))return;const u=window.SpeechRecognition||window.webkitSpeechRecognition,c=new u;return c.continuous=!0,c.interimResults=!1,c.lang="en-US",c.onresult=f=>{const d=f.results[f.results.length-1][0].transcript.trim().toLowerCase();if(d.includes("stop speech")){a.current=!1,t(),c.stop();return}if(d.includes("enter")){o();return}const p=n.current.value;n.current.value=p?`${p} ${d}`:d},c.onerror=f=>console.error("Speech error:",f),c.onend=()=>{a.current&&c.start()},r.current=c,c.start(),()=>{a.current=!1,c.stop()}},[]),te.jsx(oM,{inputRef:n,onSubmit:o,toggleInputMode:t,mode:"speech"})},iD=({onUserSubmit:e})=>{const[t,n]=J.useState(!1),r=()=>n(a=>!a);return t?te.jsx(rD,{onUserSubmit:e,toggleInputMode:r}):te.jsx(nD,{onUserSubmit:e,toggleInputMode:r})},aD=()=>{const e=Rh();return te.jsxs(ns,{fluid:!0,className:"bg-black text-white min-vh-100 py-4",children:[te.jsx("h1",{children:"Robot Interface"}),te.jsxs(eh,{className:"align-items-start gx-0",children:[te.jsxs(ba,{xs:12,lg:6,className:"mb-4",children:[te.jsx("h2",{children:"Visualizer"}),te.jsx(_o,{title:"Visualizer",children:te.jsx($N,{})})]}),te.jsxs(ba,{xs:12,lg:6,className:"d-flex flex-column align-items-center justify-content-start mb-5",children:[te.jsx("h2",{children:"Chat"}),te.jsx(e2,{children:({messages:t,handleUserMessage:n})=>te.jsxs(te.Fragment,{children:[te.jsx(_o,{title:"Chat History",children:te.jsx(tD,{messages:t})}),te.jsx(iD,{onUserSubmit:n})]})})]})]}),te.jsx("h3",{children:"Need help?"}),te.jsx(wa,{variant:"outline-secondary",onClick:()=>e("/user-guide"),children:"User Guide"})]})};function sD(){return te.jsx(ns,{fluid:!0,className:"bg-black text-white min-vh-100 pt-4 px-3",children:te.jsxs("div",{style:{maxWidth:"700px",margin:"0 auto",padding:"2rem 1rem",textAlign:"left"},children:[te.jsx("h1",{className:"mb-4",children:"User Guide"}),te.jsxs("section",{className:"mb-5",children:[te.jsx("h2",{children:"1. Visualizer"}),te.jsx("p",{children:"The Visualizer shows the robot and the detected objects in a simulated 3D environment."}),te.jsxs("ul",{children:[te.jsx("li",{children:'Click "Hide Tips" to hide the camera control tips.'}),te.jsx("li",{children:'Click "Hide Visualizer" to collaspe the entire Visualizer.'}),te.jsxs("li",{children:["Use your mouse or trackpad to:",te.jsxs("ul",{children:[te.jsx("li",{children:"Click + drag to rotate"}),te.jsx("li",{children:"Scroll to zoom"})]})]})]}),te.jsxs("div",{className:"mt-3",children:[te.jsx("img",{src:"/p13/visualization.jpg",alt:"Visualizer placeholder",style:{width:"100%",maxWidth:"500px",height:"auto",display:"block",borderRadius:"10px",border:"1px solid white"}}),te.jsx("p",{className:"mt-2 fst-italic",children:"3D visualizer showing the robot and object grid."})]})]}),te.jsxs("section",{className:"mb-5",children:[te.jsx("h2",{children:"2. Chat Interface"}),te.jsx("p",{children:"The chat interface allows you to control the robot using typed or spoken commands."}),te.jsx("h3",{className:"mt-4",children:"Chat History"}),te.jsxs("ul",{children:[te.jsx("li",{children:'Click "Hide Chat History" to collapse the history panel.'}),te.jsx("li",{children:"Messages are saved for the current session, even if you navigate away or refresh."})]}),te.jsx("h3",{className:"mt-4",children:"Typing Commands"}),te.jsxs("ul",{children:[te.jsx("li",{children:"Click inside the input box and type your command."}),te.jsxs("li",{children:["Press the ",te.jsx("b",{children:"Enter"})," key or click the ",te.jsx("span",{style:{color:"#60a5fa"},children:'"Enter"'})," button to submit."]}),te.jsxs("li",{children:["Use ",te.jsx("b",{children:"Shift + Enter"})," to insert a new line."]})]}),te.jsx("div",{className:"d-flex flex-wrap gap-4 mt-4",children:te.jsxs("div",{style:{flex:"1",minWidth:"250px"},children:[te.jsx("img",{src:"/p13/text-input.png",alt:"Typing mode example",style:{width:"100%",maxWidth:"500px",height:"auto",display:"block",borderRadius:"10px",border:"1px solid white"}}),te.jsx("p",{className:"mt-2 fst-italic",children:"Chat interface in typing mode."})]})}),te.jsx("h3",{className:"mt-4",children:"Speech Commands"}),te.jsxs("ul",{children:[te.jsxs("li",{children:["Click the ",te.jsx("span",{style:{color:"#34d399"},children:'"Use Speech"'})," button."]}),te.jsx("li",{children:"Allow microphone access when prompted."}),te.jsx("li",{children:"Speak your command clearly."}),te.jsx("li",{children:'Say "Enter" to submit your command.'}),te.jsxs("li",{children:['Say "Stop Speech" to exit speech mode or click on the ',te.jsx("span",{style:{color:"#f87171"},children:`"Say 'Stop Speech'"`})," button."]})]}),te.jsx("div",{className:"d-flex flex-wrap gap-4 mt-4",children:te.jsxs("div",{style:{flex:"1",minWidth:"250px"},children:[te.jsx("img",{src:"/p13/speech-input.png",alt:"Speech mode example",style:{width:"100%",maxWidth:"500px",height:"auto",display:"block",borderRadius:"10px",border:"1px solid white"}}),te.jsx("p",{className:"mt-2 fst-italic",children:"Speech mode with mic input active."})]})})]}),te.jsxs("section",{className:"mb-5",children:[te.jsx("h2",{children:"3. Executing a Task"}),te.jsxs("ol",{children:[te.jsx("li",{children:'Decide what task you want the robot to perform (e.g., "Pick up the cup").'}),te.jsx("li",{children:"Type or speak your command using the chat interface."}),te.jsx("li",{children:"Submit the command."}),te.jsx("li",{children:"Watch the robot simulate the task in the 3D visualizer."})]}),te.jsx("img",{src:"/p13/task-planning-user-cropped.jpg",alt:"Task execution simulation",style:{width:"100%",maxWidth:"300px",height:"auto",display:"block",borderRadius:"10px",border:"1px solid white"}}),te.jsx("div",{className:"d-flex flex-wrap gap-3 mt-3",style:{justifyContent:"center"},children:["step-1.png","step-2.png","step-3.png","step-4.png","step-5.png"].map((e,t)=>te.jsx("img",{src:`/p13/${e}`,alt:`Step ${t+1} of task simulation`,style:{width:"100%",maxWidth:"120px",height:"auto",borderRadius:"10px",border:"1px solid white"}},t))}),te.jsx("p",{className:"mt-2 fst-italic",children:"Example of a robot task being visualized step by step."})]})]})})}const oD=40,lD=()=>{const[e,t]=J.useState(!1),[n,r]=J.useState(!1),[a,o]=J.useState(""),u=J.useRef(null),c=()=>{o(""),r(!0);const d=window.SpeechRecognition||window.webkitSpeechRecognition;if(!d){alert("Speech recognition is not supported in this browser.");return}const p=new d;p.continuous=!0,p.interimResults=!0,p.lang="en-US",p.onresult=v=>{let m="";for(let y=v.resultIndex;y<v.results.length;y++)m+=v.results[y][0].transcript;o(m)},p.onerror=v=>console.error("Speech recognition error:",v),p.onend=()=>{n&&p.start()},p.start(),u.current=p},f=()=>{r(!1),u.current?.stop(),o("")};return J.useEffect(()=>()=>{u.current?.stop()},[]),te.jsxs("div",{children:[te.jsx("div",{className:"mb-2",children:n?te.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[te.jsx("button",{onClick:f,style:{padding:"0.5rem 1rem",backgroundColor:"#991b1b",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Stop Test"}),te.jsx(sM,{size:oD})]}):te.jsx("button",{onClick:c,style:{padding:"0.5rem 1rem",backgroundColor:"#065f46",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Start Test"})}),te.jsx("textarea",{value:a,placeholder:"Speak into your mic...","aria-label":"Speak into your mic",readOnly:!0,style:{width:"100%",height:"80px",padding:"0.5rem",backgroundColor:"#3f3f3f",color:"white",border:"none",borderRadius:"0.375rem",cursor:"default",pointerEvents:"none"}})]})};function uD(){const e=Rh();return te.jsx(ns,{fluid:!0,className:"bg-black text-white min-vh-100 pt-4 px-3",children:te.jsxs("div",{style:{maxWidth:"700px",margin:"0 auto",padding:"2rem 1rem",textAlign:"left"},children:[te.jsx("h1",{children:"Settings"}),te.jsx("p",{children:"Customize your preferences and test your hardware."}),te.jsxs("div",{className:"mt-4",children:[te.jsx("h2",{children:"Visibility Toggles"}),te.jsxs("div",{className:"d-flex flex-column gap-2",children:[te.jsx(_o,{title:"Visualizer"}),te.jsx(_o,{title:"Tips"}),te.jsx(_o,{title:"Chat History"})]})]}),te.jsxs("div",{className:"mt-4",children:[te.jsx("h2",{children:"Audio Testing"}),te.jsx(lD,{})]}),te.jsxs("div",{className:"mt-4",children:[te.jsx("h2",{children:"Need help?"}),te.jsx(wa,{variant:"outline-secondary",onClick:()=>e("/user-guide"),children:"User Guide"})]})]})})}function cD(){return te.jsxs(CA,{children:[te.jsx(RC,{}),te.jsxs(sA,{children:[te.jsx(vu,{path:"/",element:te.jsx(CC,{})}),te.jsx(vu,{path:"/robot",element:te.jsx(aD,{})}),te.jsx(vu,{path:"/user-guide",element:te.jsx(sD,{})}),te.jsx(vu,{path:"/settings",element:te.jsx(uD,{})})]})]})}mS.createRoot(document.getElementById("root")).render(te.jsx(cD,{}));
